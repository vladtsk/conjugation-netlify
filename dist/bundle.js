/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e.d({},{x:()=>Mf});const t=function(e,t){if(!e)throw n(t)},n=function(e){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+e)},r=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){const i=e[t],o=t+1<e.length,a=o?e[t+1]:0,s=t+2<e.length,c=s?e[t+2]:0,l=i>>2,u=(3&i)<<4|a>>4;let d=(15&a)<<2|c>>6,h=63&c;s||(h=64,o||(d=64)),r.push(n[l],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){const i=n[e.charAt(t++)],a=t<e.length?n[e.charAt(t)]:0;++t;const s=t<e.length?n[e.charAt(t)]:64;++t;const c=t<e.length?n[e.charAt(t)]:64;if(++t,null==i||null==a||null==s||null==c)throw new o;const l=i<<2|a>>4;if(r.push(l),64!==s){const e=a<<4&240|s>>2;if(r.push(e),64!==c){const e=s<<6&192|c;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class o extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const a=function(e){const t=r(e);return i.encodeByteArray(t,!0)},s=function(e){return a(e).replace(/\./g,"")},c=function(e){try{return i.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(e){return u(void 0,e)}function u(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=u(e[n],t[n]));return e}const d=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e.g)return e.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&c(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},h=e=>{var t,n;return null===(n=null===(t=d())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},p=e=>{const t=h(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},f=()=>{var e;return null===(e=d())||void 0===e?void 0:e.config},m=e=>{var t;return null===(t=d())||void 0===t?void 0:t[`_${e}`]};class v{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function g(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function y(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())}function b(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function _(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function w(){try{return"object"==typeof indexedDB}catch(e){return!1}}function E(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}class C extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,C.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,T.prototype.create)}}class T{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?function(e,t){return e.replace(L,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new C(r,a,n)}}const L=/\{\$([^}]+)}/g;function I(e){return JSON.parse(e)}function k(e){return JSON.stringify(e)}const S=function(e){let t={},n={},r={},i="";try{const o=e.split(".");t=I(c(o[0])||""),n=I(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:r,signature:i}};function x(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function P(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function N(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function O(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function M(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(j(n)&&j(o)){if(!M(n,o))return!1}else if(n!==o)return!1}for(const e of r)if(!n.includes(e))return!1;return!0}function j(e){return null!==e&&"object"==typeof e}function A(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function R(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function q(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class D{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"==typeof e)for(let r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let e=16;e<80;e++){const t=n[e-3]^n[e-8]^n[e-14]^n[e-16];n[e]=4294967295&(t<<1|t>>>31)}let r,i,o=this.chain_[0],a=this.chain_[1],s=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(let e=0;e<80;e++){e<40?e<20?(r=c^a&(s^c),i=1518500249):(r=a^s^c,i=1859775393):e<60?(r=a&s|c&(a|s),i=2400959708):(r=a^s^c,i=3395469782);const t=(o<<5|o>>>27)+r+l+i+n[e]&4294967295;l=c,c=s,s=4294967295&(a<<30|a>>>2),a=o,o=t}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let o=this.inbuf_;for(;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let e=this.blockSize-1;e>=56;e--)this.buf_[e]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let t=0;t<5;t++)for(let r=24;r>=0;r-=8)e[n]=this.chain_[t]>>r&255,++n;return e}}class H{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const t of["next","error","complete"])if(t in e&&"function"==typeof e[t])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=F),void 0===r.error&&(r.error=F),void 0===r.complete&&(r.complete=F);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function F(){}function U(e,t){return`${e} failed: ${t} argument `}const z=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},V=1e3,W=2,B=144e5,G=.5;function Y(e,t=V,n=W){const r=t*Math.pow(n,e),i=Math.round(G*r*(Math.random()-.5)*2);return Math.min(B,r+i)}function $(e){return e&&e._delegate?e._delegate:e}class J{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const K="[DEFAULT]";class Q{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new v;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:K})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=K){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=K){return this.instances.has(e)}getOptions(e=K){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===K?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var r;return n||null}normalizeInstanceIdentifier(e=K){return this.component?this.component.multipleInstances?e:K:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class X{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Q(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Z=[];var ee;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ee||(ee={}));const te={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},ne=ee.INFO,re={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},ie=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=re[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class oe{constructor(e){this.name=e,this._logLevel=ne,this._logHandler=ie,this._userLogHandler=null,Z.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?te[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...e),this._logHandler(this,ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...e),this._logHandler(this,ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...e),this._logHandler(this,ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...e),this._logHandler(this,ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...e),this._logHandler(this,ee.ERROR,...e)}}const ae=(e,t)=>t.some((t=>e instanceof t));let se,ce;const le=new WeakMap,ue=new WeakMap,de=new WeakMap,he=new WeakMap,pe=new WeakMap;let fe={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ue.get(e);if("objectStoreNames"===t)return e.objectStoreNames||de.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ve(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function me(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ce||(ce=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(ge(this),e),ve(le.get(this))}:function(...e){return ve(t.apply(ge(this),e))}:function(e,...n){const r=t.call(ge(this),e,...n);return de.set(r,e.sort?e.sort():[e]),ve(r)}:(e instanceof IDBTransaction&&function(e){if(ue.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));ue.set(e,t)}(e),ae(e,se||(se=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,fe):e);var t}function ve(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(ve(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&le.set(t,e)})).catch((()=>{})),pe.set(t,e),t}(e);if(he.has(e))return he.get(e);const t=me(e);return t!==e&&(he.set(e,t),pe.set(t,e)),t}const ge=e=>pe.get(e);function ye(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const a=indexedDB.open(e,t),s=ve(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(ve(a.result),e.oldVersion,e.newVersion,ve(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),s.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),s}const be=["get","getKey","getAll","getAllKeys","count"],_e=["put","add","delete","clear"],we=new Map;function Ee(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(we.get(t))return we.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=_e.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!be.includes(n))return;const o=async function(e,...t){const o=this.transaction(e,i?"readwrite":"readonly");let a=o.store;return r&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),i&&o.done]))[0]};return we.set(t,o),o}var Ce;Ce=fe,fe={...Ce,get:(e,t,n)=>Ee(e,t)||Ce.get(e,t,n),has:(e,t)=>!!Ee(e,t)||Ce.has(e,t)};class Te{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const Le="@firebase/app",Ie="0.10.5",ke=new oe("@firebase/app"),Se="@firebase/app-compat",xe="@firebase/analytics-compat",Pe="@firebase/analytics",Ne="@firebase/app-check-compat",Oe="@firebase/app-check",Me="@firebase/auth",je="@firebase/auth-compat",Ae="@firebase/database",Re="@firebase/database-compat",qe="@firebase/functions",De="@firebase/functions-compat",He="@firebase/installations",Fe="@firebase/installations-compat",Ue="@firebase/messaging",ze="@firebase/messaging-compat",Ve="@firebase/performance",We="@firebase/performance-compat",Be="@firebase/remote-config",Ge="@firebase/remote-config-compat",Ye="@firebase/storage",$e="@firebase/storage-compat",Je="@firebase/firestore",Ke="@firebase/vertexai-preview",Qe="@firebase/firestore-compat",Xe="firebase",Ze="[DEFAULT]",et={[Le]:"fire-core",[Se]:"fire-core-compat",[Pe]:"fire-analytics",[xe]:"fire-analytics-compat",[Oe]:"fire-app-check",[Ne]:"fire-app-check-compat",[Me]:"fire-auth",[je]:"fire-auth-compat",[Ae]:"fire-rtdb",[Re]:"fire-rtdb-compat",[qe]:"fire-fn",[De]:"fire-fn-compat",[He]:"fire-iid",[Fe]:"fire-iid-compat",[Ue]:"fire-fcm",[ze]:"fire-fcm-compat",[Ve]:"fire-perf",[We]:"fire-perf-compat",[Be]:"fire-rc",[Ge]:"fire-rc-compat",[Ye]:"fire-gcs",[$e]:"fire-gcs-compat",[Je]:"fire-fst",[Qe]:"fire-fst-compat",[Ke]:"fire-vertex","fire-js":"fire-js",[Xe]:"fire-js-all"},tt=new Map,nt=new Map,rt=new Map;function it(e,t){try{e.container.addComponent(t)}catch(n){ke.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ot(e){const t=e.name;if(rt.has(t))return ke.debug(`There were multiple attempts to register component ${t}.`),!1;rt.set(t,e);for(const t of tt.values())it(t,e);for(const t of nt.values())it(t,e);return!0}function at(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function st(e){return void 0!==e.settings}const ct=new T("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class lt{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new J("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ct.create("app-deleted",{appName:this._name})}}const ut="10.12.2";function dt(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});const r=Object.assign({name:Ze,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!=typeof i||!i)throw ct.create("bad-app-name",{appName:String(i)});if(n||(n=f()),!n)throw ct.create("no-options");const o=tt.get(i);if(o){if(M(n,o.options)&&M(r,o.config))return o;throw ct.create("duplicate-app",{appName:i})}const a=new X(i);for(const e of rt.values())a.addComponent(e);const s=new lt(n,r,a);return tt.set(i,s),s}function ht(e=Ze){const t=tt.get(e);if(!t&&e===Ze&&f())return dt();if(!t)throw ct.create("no-app",{appName:e});return t}function pt(e,t,n){var r;let i=null!==(r=et[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${i}" with version "${t}":`];return o&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void ke.warn(e.join(" "))}ot(new J(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}const ft="firebase-heartbeat-database",mt=1,vt="firebase-heartbeat-store";let gt=null;function yt(){return gt||(gt=ye(ft,mt,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(vt)}catch(e){console.warn(e)}}}).catch((e=>{throw ct.create("idb-open",{originalErrorMessage:e.message})}))),gt}async function bt(e,t){try{const n=(await yt()).transaction(vt,"readwrite"),r=n.objectStore(vt);await r.put(t,_t(e)),await n.done}catch(e){if(e instanceof C)ke.warn(e.message);else{const t=ct.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});ke.warn(t.message)}}}function _t(e){return`${e.name}!${e.options.appId}`}class wt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ct(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Et();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Et(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Tt(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Tt(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=s(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Et(){return(new Date).toISOString().substring(0,10)}class Ct{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!w()&&E().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await yt()).transaction(vt),n=await t.objectStore(vt).get(_t(e));return await t.done,n}catch(e){if(e instanceof C)ke.warn(e.message);else{const t=ct.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});ke.warn(t.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return bt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return bt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Tt(e){return s(JSON.stringify({version:2,heartbeats:e})).length}function Lt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}ot(new J("platform-logger",(e=>new Te(e)),"PRIVATE")),ot(new J("heartbeat",(e=>new wt(e)),"PRIVATE")),pt(Le,Ie,""),pt(Le,Ie,"esm2017"),pt("fire-js",""),pt("firebase","10.12.2","app"),Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;const It=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},kt=new T("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),St=new oe("@firebase/auth");function xt(e,...t){St.logLevel<=ee.ERROR&&St.error(`Auth (${ut}): ${e}`,...t)}function Pt(e,...t){throw jt(e,...t)}function Nt(e,...t){return jt(e,...t)}function Ot(e,t,n){const r=Object.assign(Object.assign({},It()),{[t]:n});return new T("auth","Firebase",r).create(t,{appName:e.name})}function Mt(e){return Ot(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jt(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return kt.create(e,...t)}function At(e,t,...n){if(!e)throw jt(t,...n)}function Rt(e){const t="INTERNAL ASSERTION FAILED: "+e;throw xt(t),new Error(t)}function qt(e,t){e||Rt(t)}function Dt(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Ht(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Ft{constructor(e,t){this.shortDelay=e,this.longDelay=t,qt(t>e,"Short delay should be less than long delay!"),this.isMobile=y()||_()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===Ht()||"https:"===Ht()||b()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Ut(e,t){qt(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class zt{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void Rt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void Rt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void Rt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Vt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Wt=new Ft(3e4,6e4);function Bt(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Gt(e,t,n,r,i={}){return Yt(e,i,(async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const a=A(Object.assign({key:e.config.apiKey},o)).slice(1),s=await e._getAdditionalHeaders();return s["Content-Type"]="application/json",e.languageCode&&(s["X-Firebase-Locale"]=e.languageCode),zt.fetch()(Jt(e,e.config.apiHost,n,a),Object.assign({method:t,headers:s,referrerPolicy:"no-referrer"},i))}))}async function Yt(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Vt),t);try{const t=new Qt(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Xt(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Xt(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw Xt(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw Xt(e,"user-disabled",o);const s=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Ot(e,s,a);Pt(e,s)}}catch(t){if(t instanceof C)throw t;Pt(e,"network-request-failed",{message:String(t)})}}async function $t(e,t,n,r,i={}){const o=await Gt(e,t,n,r,i);return"mfaPendingCredential"in o&&Pt(e,"multi-factor-auth-required",{_serverResponse:o}),o}function Jt(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?Ut(e.config,i):`${e.config.apiScheme}://${i}`}function Kt(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Qt{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Nt(this.auth,"network-request-failed"))),Wt.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Xt(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Nt(e,t,r);return i.customData._tokenResponse=n,i}function Zt(e){return void 0!==e&&void 0!==e.enterprise}class en{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Kt(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function tn(e,t){return Gt(e,"POST","/v1/accounts:lookup",t)}function nn(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function rn(e){return 1e3*Number(e)}function on(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return xt("JWT malformed, contained fewer than 3 sections"),null;try{const e=c(n);return e?JSON.parse(e):(xt("Failed to decode base64 JWT payload"),null)}catch(e){return xt("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}function an(e){const t=on(e);return At(t,"internal-error"),At(void 0!==t.exp,"internal-error"),At(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function sn(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof C&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class cn{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class ln{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=nn(this.lastLoginAt),this.creationTime=nn(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function un(e){var t;const n=e.auth,r=await e.getIdToken(),i=await sn(e,tn(n,{idToken:r}));At(null==i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const a=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?dn(o.providerUserInfo):[],s=(c=e.providerData,l=a,[...c.filter((e=>!l.some((t=>t.providerId===e.providerId)))),...l]);var c,l;const u=e.isAnonymous,d=!(e.email&&o.passwordHash||(null==s?void 0:s.length)),h=!!u&&d,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new ln(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(e,p)}function dn(e){return e.map((e=>{var{providerId:t}=e,n=Lt(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class hn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){At(e.idToken,"internal-error"),At(void 0!==e.idToken,"internal-error"),At(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):an(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){At(0!==e.length,"internal-error");const t=an(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(At(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Yt(e,{},(async()=>{const n=A({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=Jt(e,r,"/v1/token",`key=${i}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",zt.fetch()(o,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new hn;return n&&(At("string"==typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(At("string"==typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(At("number"==typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new hn,this.toJSON())}_performRefresh(){return Rt("not implemented")}}function pn(e,t){At("string"==typeof e||void 0===e,"internal-error",{appName:t})}class fn{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Lt(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ln(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await sn(this,this.stsTokenManager.getToken(this.auth,e));return At(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=$(e),r=await n.getIdToken(t),i=on(r);At(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"==typeof i.firebase?i.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:nn(rn(i.auth_time)),issuedAtTime:nn(rn(i.iat)),expirationTime:nn(rn(i.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=$(e);await un(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(At(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new fn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){At(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await un(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(st(this.auth.app))return Promise.reject(Mt(this.auth));const e=await this.getIdToken();return await sn(this,async function(e,t){return Gt(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,a,s,c,l;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(o=t.photoURL)&&void 0!==o?o:void 0,f=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(s=t._redirectEventId)&&void 0!==s?s:void 0,v=null!==(c=t.createdAt)&&void 0!==c?c:void 0,g=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:y,emailVerified:b,isAnonymous:_,providerData:w,stsTokenManager:E}=t;At(y&&E,e,"internal-error");const C=hn.fromJSON(this.name,E);At("string"==typeof y,e,"internal-error"),pn(u,e.name),pn(d,e.name),At("boolean"==typeof b,e,"internal-error"),At("boolean"==typeof _,e,"internal-error"),pn(h,e.name),pn(p,e.name),pn(f,e.name),pn(m,e.name),pn(v,e.name),pn(g,e.name);const T=new fn({uid:y,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:_,photoURL:p,phoneNumber:h,tenantId:f,stsTokenManager:C,createdAt:v,lastLoginAt:g});return w&&Array.isArray(w)&&(T.providerData=w.map((e=>Object.assign({},e)))),m&&(T._redirectEventId=m),T}static async _fromIdTokenResponse(e,t,n=!1){const r=new hn;r.updateFromServerResponse(t);const i=new fn({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await un(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];At(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?dn(r.providerUserInfo):[],o=!(r.email&&r.passwordHash||(null==i?void 0:i.length)),a=new hn;a.updateFromIdToken(n);const s=new fn({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new ln(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash||(null==i?void 0:i.length))};return Object.assign(s,c),s}}const mn=new Map;function vn(e){qt(e instanceof Function,"Expected a class definition");let t=mn.get(e);return t?(qt(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,mn.set(e,t),t)}class gn{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}gn.type="NONE";const yn=gn;function bn(e,t,n){return`firebase:${e}:${t}:${n}`}class _n{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=bn(this.userKey,r.apiKey,i),this.fullPersistenceKey=bn("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?fn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new _n(vn(yn),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||vn(yn);const o=bn(n,e.config.apiKey,e.name);let a=null;for(const n of t)try{const t=await n._get(o);if(t){const r=fn._fromJSON(e,t);n!==i&&(a=r),i=n;break}}catch(e){}const s=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&s.length?(i=s[0],a&&await i._set(o,a.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(o)}catch(e){}}))),new _n(i,e,n)):new _n(i,e,n)}}function wn(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ln(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(En(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(kn(t))return"Blackberry";if(Sn(t))return"Webos";if(Cn(t))return"Safari";if((t.includes("chrome/")||Tn(t))&&!t.includes("edge/"))return"Chrome";if(In(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function En(e=g()){return/firefox\//i.test(e)}function Cn(e=g()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Tn(e=g()){return/crios\//i.test(e)}function Ln(e=g()){return/iemobile/i.test(e)}function In(e=g()){return/android/i.test(e)}function kn(e=g()){return/blackberry/i.test(e)}function Sn(e=g()){return/webos/i.test(e)}function xn(e=g()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Pn(e=g()){return xn(e)||In(e)||Sn(e)||kn(e)||/windows phone/i.test(e)||Ln(e)}function Nn(e,t=[]){let n;switch(e){case"Browser":n=wn(g());break;case"Worker":n=`${wn(g())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${ut}/${r}`}class On{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(e){r(e)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(const e of t)try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==e?void 0:e.message})}}}class Mn{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,a;const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=null===(t=s.meetsMinPasswordLength)||void 0===t||t),s.isValid&&(s.isValid=null===(n=s.meetsMaxPasswordLength)||void 0===n||n),s.isValid&&(s.isValid=null===(r=s.containsLowercaseLetter)||void 0===r||r),s.isValid&&(s.isValid=null===(i=s.containsUppercaseLetter)||void 0===i||i),s.isValid&&(s.isValid=null===(o=s.containsNumericCharacter)||void 0===o||o),s.isValid&&(s.isValid=null===(a=s.containsNonAlphanumericCharacter)||void 0===a||a),s}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class jn{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Rn(this),this.idTokenSubscription=new Rn(this),this.beforeStateQueue=new On(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=vn(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await _n.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await tn(this,{idToken:e}),n=await fn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(st(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null==r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==o||!(null==a?void 0:a.user)||(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(e){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(e)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return At(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await un(e)}catch(e){if("auth/network-request-failed"!==(null==e?void 0:e.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(st(this.app))return Promise.reject(Mt(this));const t=e?$(e):null;return t&&At(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&At(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return st(this.app)?Promise.reject(Mt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return st(this.app)?Promise.reject(Mt(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(vn(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e,t={}){return Gt(e,"GET","/v2/passwordPolicy",Bt(e,t))}(this),t=new Mn(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new T("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Gt(e,"POST","/v2/accounts:revokeToken",Bt(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&vn(e)||this._popupRedirectResolver;At(t,this,"argument-error"),this.redirectPersistenceManager=await _n.create(this,[vn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(At(a,this,"internal-error"),a.then((()=>{o||i(this.currentUser)})),"function"==typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return At(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Nn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){St.logLevel<=ee.WARN&&St.warn(`Auth (${ut}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function An(e){return $(e)}class Rn{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new H(e,void 0);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return At(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let qn={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Dn(e){return qn.loadJS(e)}function Hn(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Fn{constructor(e){this.type="recaptcha-enterprise",this.auth=An(e)}async verify(e="verify",t=!1){function n(t,n,r){const i=window.grecaptcha;Zt(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{(async function(e,t){return Gt(e,"GET","/v2/recaptchaConfig",Bt(e,t))})(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new en(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&Zt(window.grecaptcha))n(i,e,r);else{if("undefined"==typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=qn.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Dn(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Un(e,t,n,r=!1){const i=new Fn(e);let o;try{o=await i.verify(n)}catch(e){o=await i.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function zn(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Un(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await Un(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function Vn(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Wn(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Bn{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Rt("not implemented")}_getIdTokenResponse(e){return Rt("not implemented")}_linkToIdToken(e,t){return Rt("not implemented")}_getReauthenticationResolver(e){return Rt("not implemented")}}async function Gn(e,t){return Gt(e,"POST","/v1/accounts:signUp",t)}async function Yn(e,t){return $t(e,"POST","/v1/accounts:signInWithPassword",Bt(e,t))}async function $n(e,t){return async function(e,t){return Gt(e,"POST","/v1/accounts:sendOobCode",Bt(e,t))}(e,t)}class Jn extends Bn{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Jn(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Jn(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return zn(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Yn);case"emailLink":return async function(e,t){return $t(e,"POST","/v1/accounts:signInWithEmailLink",Bt(e,t))}(e,{email:this._email,oobCode:this._password});default:Pt(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return zn(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Gn);case"emailLink":return async function(e,t){return $t(e,"POST","/v1/accounts:signInWithEmailLink",Bt(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Pt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Kn(e,t){return $t(e,"POST","/v1/accounts:signInWithIdp",Bt(e,t))}class Qn extends Bn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Qn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Pt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Lt(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new Qn(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return Kn(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Kn(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Kn(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=A(t)}return e}}const Xn={USER_NOT_FOUND:"user-not-found"};class Zn extends Bn{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Zn({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Zn({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return $t(e,"POST","/v1/accounts:signInWithPhoneNumber",Bt(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await $t(e,"POST","/v1/accounts:signInWithPhoneNumber",Bt(e,t));if(n.temporaryProof)throw Xt(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return $t(e,"POST","/v1/accounts:signInWithPhoneNumber",Bt(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Xn)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Zn({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class er{constructor(e){var t,n,r,i,o,a;const s=R(q(e)),c=null!==(t=s.apiKey)&&void 0!==t?t:null,l=null!==(n=s.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=s.mode)&&void 0!==r?r:null);At(c&&l&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=l,this.continueUrl=null!==(i=s.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=s.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=R(q(e)).link,n=t?R(q(t)).deep_link_id:null,r=R(q(e)).deep_link_id;return(r?R(q(r)).link:null)||r||n||t||e}(e);try{return new er(t)}catch(e){return null}}}class tr{constructor(){this.providerId=tr.PROVIDER_ID}static credential(e,t){return Jn._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=er.parseLink(t);return At(n,"argument-error"),Jn._fromEmailAndCode(e,n.code,n.tenantId)}}tr.PROVIDER_ID="password",tr.EMAIL_PASSWORD_SIGN_IN_METHOD="password",tr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class nr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class rr extends nr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ir extends rr{constructor(){super("facebook.com")}static credential(e){return Qn._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return ir.credential(e.oauthAccessToken)}catch(e){return null}}}ir.FACEBOOK_SIGN_IN_METHOD="facebook.com",ir.PROVIDER_ID="facebook.com";class or extends rr{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Qn._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return or.credential(t,n)}catch(e){return null}}}or.GOOGLE_SIGN_IN_METHOD="google.com",or.PROVIDER_ID="google.com";class ar extends rr{constructor(){super("github.com")}static credential(e){return Qn._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return ar.credential(e.oauthAccessToken)}catch(e){return null}}}ar.GITHUB_SIGN_IN_METHOD="github.com",ar.PROVIDER_ID="github.com";class sr extends rr{constructor(){super("twitter.com")}static credential(e,t){return Qn._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return sr.credential(t,n)}catch(e){return null}}}async function cr(e,t){return $t(e,"POST","/v1/accounts:signUp",Bt(e,t))}sr.TWITTER_SIGN_IN_METHOD="twitter.com",sr.PROVIDER_ID="twitter.com";class lr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await fn._fromIdTokenResponse(e,n,r),o=ur(n);return new lr({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=ur(n);return new lr({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function ur(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class dr extends C{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,dr.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new dr(e,t,n,r)}}function hr(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw dr._fromErrorAndOperation(e,n,t,r);throw n}))}async function pr(e,t,n=!1){if(st(e.app))return Promise.reject(Mt(e));const r="signIn",i=await hr(e,r,t),o=await lr._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function fr(e){const t=An(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function mr(e,t,n){const r=An(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&function(e,t,n){var r;At((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),At(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(At(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(At(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}(r,i,n),await zn(r,i,"getOobCode",$n)}async function vr(e,t,n){if(st(e.app))return Promise.reject(Mt(e));const r=An(e),i=zn(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",cr),o=await i.catch((t=>{throw"auth/password-does-not-meet-requirements"===t.code&&fr(e),t})),a=await lr._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function gr(e,t,n){return st(e.app)?Promise.reject(Mt(e)):async function(e,t){return pr(An(e),t)}($(e),tr.credential(t,n)).catch((async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&fr(e),t}))}function yr(e,t,n,r){return $(e).onAuthStateChanged(t,n,r)}function br(e){return $(e).signOut()}new WeakMap;const _r="__sak";class wr{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(_r,"1"),this.storage.removeItem(_r),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Er extends wr{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=g();return Cn(e)||xn(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Pn(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);!function(){const e=g();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()||10!==document.documentMode||i===e.newValue||e.newValue===e.oldValue?r():setTimeout(r,10)}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Er.type="LOCAL";const Cr=Er;class Tr extends wr{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Tr.type="SESSION";const Lr=Tr;class Ir{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Ir(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(null==o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(o).map((async e=>e(t.origin,i))),s=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}})))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:s})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function kr(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}Ir.receivers=[];class Sr{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise(((a,s)=>{const c=kr("",20);r.port1.start();const l=setTimeout((()=>{s(new Error("unsupported_event"))}),n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),i=setTimeout((()=>{s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(l),clearTimeout(i),s(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])})).finally((()=>{o&&this.removeMessageHandler(o)}))}}function xr(){return window}function Pr(){return void 0!==xr().WorkerGlobalScope&&"function"==typeof xr().importScripts}const Nr="firebaseLocalStorageDb",Or="firebaseLocalStorage",Mr="fbase_key";class jr{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Ar(e,t){return e.transaction([Or],t?"readwrite":"readonly").objectStore(Or)}function Rr(){const e=indexedDB.open(Nr,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Or,{keyPath:Mr})}catch(e){n(e)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Or)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Nr);return new jr(e).toPromise()}(),t(await Rr()))}))}))}async function qr(e,t,n){const r=Ar(e,!0).put({[Mr]:t,value:n});return new jr(r).toPromise()}function Dr(e,t){const n=Ar(e,!0).delete(t);return new jr(n).toPromise()}class Hr{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Rr()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Pr()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ir._getInstance(Pr()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Sr(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Rr();return await qr(e,_r,"1"),await Dr(e,_r),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>qr(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Ar(e,!1).get(t),r=await new jr(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Dr(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Ar(e,!1).getAll();return new jr(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Hr.type="LOCAL";const Fr=Hr;Hn("rcb"),new Ft(3e4,6e4);class Ur{constructor(e){this.providerId=Ur.PROVIDER_ID,this.auth=An(e)}verifyPhoneNumber(e,t){return async function(e,t,n){var r;const i=await n.verify();try{let o;if(At("string"==typeof i,e,"argument-error"),At("recaptcha"===n.type,e,"argument-error"),o="string"==typeof t?{phoneNumber:t}:t,"session"in o){const t=o.session;if("phoneNumber"in o){At("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Gt(e,"POST","/v2/accounts/mfaEnrollment:start",Bt(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{At("signin"===t.type,e,"internal-error");const n=(null===(r=o.multiFactorHint)||void 0===r?void 0:r.uid)||o.multiFactorUid;At(n,e,"missing-multi-factor-info");const a=await function(e,t){return Gt(e,"POST","/v2/accounts/mfaSignIn:start",Bt(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Gt(e,"POST","/v1/accounts:sendVerificationCode",Bt(e,t))}(e,{phoneNumber:o.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}(this.auth,e,$(t))}static credential(e,t){return Zn._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Ur.credentialFromTaggedObject(t)}static credentialFromError(e){return Ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?Zn._fromTokenResponse(t,n):null}}Ur.PROVIDER_ID="phone",Ur.PHONE_SIGN_IN_METHOD="phone";class zr extends Bn{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Kn(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Kn(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Kn(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Vr(e){return pr(e.auth,new zr(e),e.bypassAuthState)}function Wr(e){const{auth:t,user:n}=e;return At(n,t,"internal-error"),async function(e,t,n=!1){const{auth:r}=e;if(st(r.app))return Promise.reject(Mt(r));const i="reauthenticate";try{const o=await sn(e,hr(r,i,t,e),n);At(o.idToken,r,"internal-error");const a=on(o.idToken);At(a,r,"internal-error");const{sub:s}=a;return At(e.uid===s,r,"user-mismatch"),lr._forOperation(e,i,o)}catch(e){throw"auth/user-not-found"===(null==e?void 0:e.code)&&Pt(r,"user-mismatch"),e}}(n,new zr(e),e.bypassAuthState)}async function Br(e){const{auth:t,user:n}=e;return At(n,t,"internal-error"),async function(e,t,n=!1){const r=await sn(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return lr._forOperation(e,"link",r)}(n,new zr(e),e.bypassAuthState)}class Gr{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:a}=e;if(o)return void this.reject(o);const s={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(s))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Vr;case"linkViaPopup":case"linkViaRedirect":return Br;case"reauthViaPopup":case"reauthViaRedirect":return Wr;default:Pt(this.auth,"internal-error")}}resolve(e){qt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Yr=new Ft(2e3,1e4);class $r extends Gr{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,$r.currentPopupAction&&$r.currentPopupAction.cancel(),$r.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return At(e,this.auth,"internal-error"),e}async onExecution(){qt(1===this.filter.length,"Popup operations only handle one event");const e=kr();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Nt(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Nt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$r.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Nt(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Yr.get())};e()}}$r.currentPopupAction=null;const Jr="pendingRedirect",Kr=new Map;class Qr extends Gr{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Kr.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return bn(Jr,e.config.apiKey,e.name)}(t),r=function(e){return vn(e._redirectPersistence)}(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}Kr.set(this.auth._key(),e)}return this.bypassAuthState||Kr.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Xr(e,t){Kr.set(e._key(),t)}async function Zr(e,t,n=!1){if(st(e.app))return Promise.reject(Mt(e));const r=An(e),i=function(e,t){return t?vn(t):(At(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}(r,t),o=new Qr(r,i,n),a=await o.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class ei{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ni(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!ni(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Nt(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ti(e))}saveEventToCache(e){this.cachedEventUids.add(ti(e)),this.lastProcessedEventTime=Date.now()}}function ti(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function ni({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}const ri=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ii=/^https?/;function oi(e){const t=Dt(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!ii.test(n))return!1;if(ri.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const ai=new Ft(3e4,6e4);function si(){const e=xr().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}function ci(e){return new Promise(((t,n)=>{var r,i,o;function a(){si(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{si(),n(Nt(e,"network-request-failed"))},timeout:ai.get()})}if(null===(i=null===(r=xr().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=xr().gapi)||void 0===o?void 0:o.load)){const t=Hn("iframefcb");return xr()[t]=()=>{gapi.load?a():n(Nt(e,"network-request-failed"))},Dn(`${qn.gapiScript}?onload=${t}`).catch((e=>n(e)))}a()}})).catch((e=>{throw li=null,e}))}let li=null;const ui=new Ft(5e3,15e3),di="__/auth/iframe",hi="emulator/auth/iframe",pi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mi(e){const t=e.config;At(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Ut(t,hi):`https://${e.config.authDomain}/${di}`,r={apiKey:t.apiKey,appName:e.name,v:ut},i=fi.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${A(r).slice(1)}`}const vi={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class gi{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}const yi=encodeURIComponent("fac");async function bi(e,t,n,r,i,o){At(e.config.authDomain,e,"auth-domain-config-required"),At(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:ut,eventId:i};if(t instanceof nr){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",N(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))a[e]=t}if(t instanceof rr){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const s=a;for(const e of Object.keys(s))void 0===s[e]&&delete s[e];const c=await e._getAppCheckToken(),l=c?`#${yi}=${encodeURIComponent(c)}`:"";return`${function({config:e}){return e.emulator?Ut(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${A(s).slice(1)}${l}`}const _i="webStorageSupport",wi=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Lr,this._completeRedirectFn=Zr,this._overrideRedirectResult=Xr}async _openPopup(e,t,n,r){var i;return qt(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()"),function(e,t,n,r=500,i=600){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let s="";const c=Object.assign(Object.assign({},vi),{width:r.toString(),height:i.toString(),top:o,left:a}),l=g().toLowerCase();n&&(s=Tn(l)?"_blank":n),En(l)&&(t=t||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=g()){var t;return xn(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(l)&&"_self"!==s)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new gi(null);const d=window.open(t||"",s,u);At(d,e,"popup-blocked");try{d.focus()}catch(e){}return new gi(d)}(e,await bi(e,t,n,Dt(),r),kr())}async _openRedirect(e,t,n,r){return await this._originValidation(e),i=await bi(e,t,n,Dt(),r),xr().location.href=i,new Promise((()=>{}));var i}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(qt(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await function(e){return li=li||ci(e),li}(e),n=xr().gapi;return At(n,e,"internal-error"),t.open({where:document.body,url:mi(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pi,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Nt(e,"network-request-failed"),o=xr().setTimeout((()=>{r(i)}),ui.get());function a(){xr().clearTimeout(o),n(t)}t.ping(a).then(a,(()=>{r(i)}))}))))}(e),n=new ei(e);return t.register("authEvent",(t=>(At(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:n.onEvent(t.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(_i,{type:_i},(n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r[_i];void 0!==i&&t(!!i),Pt(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return Gt(e,"GET","/v1/projects",t)}(e);for(const e of t)try{if(oi(e))return}catch(e){}Pt(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Pn()||Cn()||xn()}};var Ei="@firebase/auth",Ci="1.7.4";class Ti{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){At(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Li=m("authIdTokenMaxAge")||300;let Ii=null;const ki=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Li)return;const i=null==n?void 0:n.token;Ii!==i&&(Ii=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Si(e=ht()){const t=at(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=at(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(M(n.getOptions(),null!=t?t:{}))return e;Pt(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:wi,persistence:[Fr,Cr,Lr]}),r=m("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=ki(e.toString());!function(e,t,n){$(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,n,r,i){$(e).onIdTokenChanged((e=>t(e)),void 0,void 0)}(n)}}const i=h("auth");return i&&function(e,t,n){const r=An(e);At(r._canInitEmulator,r,"emulator-config-failed"),At(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),o=Vn(t),{host:a,port:s}=function(e){const t=Vn(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Wn(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Wn(t)}}}(t),c=null===s?"":`:${s}`;r.config.emulator={url:`${o}//${a}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:s,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(n,`http://${i}`),n}var xi,Pi;xi={loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");var i,o;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Nt("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(o=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==o?o:document).appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},qn=xi,Pi="Browser",ot(new J("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=n.options;At(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const s={apiKey:o,authDomain:a,clientPlatform:Pi,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Nn(Pi)},c=new jn(n,r,i,s);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(vn);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(c,t),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),ot(new J("auth-internal",(e=>{return t=An(e.getProvider("auth").getImmediate()),new Ti(t);var t}),"PRIVATE").setInstantiationMode("EXPLICIT")),pt(Ei,Ci,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Pi)),pt(Ei,Ci,"esm2017");const Ni="@firebase/database",Oi="1.0.5";let Mi="";class ji{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),k(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:I(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Ai{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return x(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Ri=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new ji(t)}}catch(e){}return new Ai},qi=Ri("localStorage"),Di=Ri("sessionStorage"),Hi=new oe("@firebase/database"),Fi=function(){let e=1;return function(){return e++}}(),Ui=function(e){const n=function(e){const n=[];let r=0;for(let i=0;i<e.length;i++){let o=e.charCodeAt(i);if(o>=55296&&o<=56319){const n=o-55296;i++,t(i<e.length,"Surrogate pair missing trail surrogate."),o=65536+(n<<10)+(e.charCodeAt(i)-56320)}o<128?n[r++]=o:o<2048?(n[r++]=o>>6|192,n[r++]=63&o|128):o<65536?(n[r++]=o>>12|224,n[r++]=o>>6&63|128,n[r++]=63&o|128):(n[r++]=o>>18|240,n[r++]=o>>12&63|128,n[r++]=o>>6&63|128,n[r++]=63&o|128)}return n}(e),r=new D;r.update(n);const o=r.digest();return i.encodeByteArray(o)},zi=function(...e){let t="";for(let n=0;n<e.length;n++){const r=e[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?t+=zi.apply(null,r):t+="object"==typeof r?k(r):r,t+=" "}return t};let Vi=null,Wi=!0;const Bi=function(...e){if(!0===Wi&&(Wi=!1,null===Vi&&!0===Di.get("logging_enabled")&&(n=!0,t(!r||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Hi.logLevel=ee.VERBOSE,Vi=Hi.log.bind(Hi),r&&Di.set("logging_enabled",!0)):"function"==typeof n?Vi=n:(Vi=null,Di.remove("logging_enabled")))),Vi){const t=zi.apply(null,e);Vi(t)}var n,r},Gi=function(e){return function(...t){Bi(e,...t)}},Yi=function(...e){const t="FIREBASE INTERNAL ERROR: "+zi(...e);Hi.error(t)},$i=function(...e){const t=`FIREBASE FATAL ERROR: ${zi(...e)}`;throw Hi.error(t),new Error(t)},Ji=function(...e){const t="FIREBASE WARNING: "+zi(...e);Hi.warn(t)},Ki=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Qi="[MIN_NAME]",Xi="[MAX_NAME]",Zi=function(e,t){if(e===t)return 0;if(e===Qi||t===Xi)return-1;if(t===Qi||e===Xi)return 1;{const n=so(e),r=so(t);return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},eo=function(e,t){return e===t?0:e<t?-1:1},to=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+k(t))},no=function(e){if("object"!=typeof e||null===e)return k(e);const t=[];for(const n in e)t.push(n);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=k(t[r]),n+=":",n+=no(e[t[r]]);return n+="}",n},ro=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function io(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const oo=function(e){t(!Ki(e),"Invalid JSON number");let n,r,i,o,a;0===e?(r=0,i=0,n=1/e==-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(o=Math.min(Math.floor(Math.log(e)/Math.LN2),1023),r=o+1023,i=Math.round(e*Math.pow(2,52-o)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const s=[];for(a=52;a;a-=1)s.push(i%2?1:0),i=Math.floor(i/2);for(a=11;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);s.push(n?1:0),s.reverse();const c=s.join("");let l="";for(a=0;a<64;a+=8){let e=parseInt(c.substr(a,8),2).toString(16);1===e.length&&(e="0"+e),l+=e}return l.toLowerCase()},ao=new RegExp("^-?(0*)\\d{1,10}$"),so=function(e){if(ao.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},co=function(e){try{e()}catch(e){setTimeout((()=>{const t=e.stack||"";throw Ji("Exception was thrown by user callback.",t),e}),Math.floor(0))}},lo=function(e,t){const n=setTimeout(e,t);return"number"==typeof n&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"==typeof n&&n.unref&&n.unref(),n};class uo{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){Ji(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class ho{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(Bi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ji(e)}}class po{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}po.OWNER="owner";const fo="5",mo=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,vo="ac",go="websocket",yo="long_polling";class bo{constructor(e,t,n,r,i=!1,o="",a=!1,s=!1){this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=s,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=qi.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&qi.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function _o(e,n,r){let i;if(t("string"==typeof n,"typeof type must == string"),t("object"==typeof r,"typeof params must == object"),n===go)i=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(n!==yo)throw new Error("Unknown connection type: "+n);i=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(r.ns=e.namespace);const o=[];return io(r,((e,t)=>{o.push(e+"="+t)})),i+o.join("&")}class wo{constructor(){this.counters_={}}incrementCounter(e,t=1){x(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return l(this.counters_)}}const Eo={},Co={};function To(e){const t=e.toString();return Eo[t]||(Eo[t]=new wo),Eo[t]}class Lo{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&co((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const Io="start";class ko{constructor(e,t,n,r,i,o,a){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Gi(e),this.stats_=To(t),this.urlFn=e=>(this.appCheckToken&&(e[vo]=this.appCheckToken),_o(t,yo,e))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Lo(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if("complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new So(((...e)=>{const[t,n,r,i,o]=e;if(this.incrementIncomingBytes_(e),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,t===Io)this.id=n,this.password=r;else{if("close"!==t)throw new Error("Unrecognized command received: "+t);n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,(()=>{this.onClosed_()}))):this.onClosed_()}}),((...e)=>{const[t,n]=e;this.incrementIncomingBytes_(e),this.myPacketOrderer.handleResponse(t,n)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[Io]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=fo,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[vo]=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&mo.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ko.forceAllow_=!0}static forceDisallow(){ko.forceDisallow_=!0}static isAvailable(){return!(!ko.forceAllow_&&(ko.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=k(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=a(t),r=ro(n,1840);for(let e=0;e<r.length;e++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[e]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=k(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class So{constructor(e,t,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Fi(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=So.createIFrame_();let n="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(n='<script>document.domain="'+document.domain+'";<\/script>');const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(e){Bi("frame writing exception"),e.stack&&Bi(e.stack),Bi(e)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Bi("No IE domain setting required")}catch(t){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{Bi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(e){}}),Math.floor(1))}}let xo=null;"undefined"!=typeof MozWebSocket?xo=MozWebSocket:"undefined"!=typeof WebSocket&&(xo=WebSocket);class Po{constructor(e,t,n,r,i,o,a){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Gi(this.connId),this.stats_=To(t),this.connURL=Po.connectionURL_(t,o,a,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const o={};return o.v=fo,"undefined"!=typeof location&&location.hostname&&mo.test(location.hostname)&&(o.r="f"),t&&(o.s=t),n&&(o.ls=n),r&&(o[vo]=r),i&&(o.p=i),_o(e,go,o)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,qi.set("previous_websocket_failure",!0);try{let e;0,this.mySock=new xo(this.connURL,[],e)}catch(e){this.log_("Error instantiating WebSocket.");const t=e.message||e.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){Po.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==xo&&!Po.forceDisallow_}static previouslyFailed(){return qi.isInMemoryStorage||!0===qi.get("previous_websocket_failure")}markConnectionHealthy(){qi.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=I(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(t(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=k(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=ro(t,16384);n.length>1&&this.sendString_(String(n.length));for(let e=0;e<n.length;e++)this.sendString_(n[e])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Po.responsesRequiredToBeHealthy=2,Po.healthyTimeout=3e4;class No{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[ko,Po]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=Po&&Po.isAvailable();let n=t&&!Po.previouslyFailed();if(e.webSocketOnly&&(t||Ji("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Po];else{const e=this.transports_=[];for(const t of No.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);No.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}No.globalTransportInitialized_=!1;class Oo{constructor(e,t,n,r,i,o,a,s,c,l){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=s,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Gi("c:"+this.id+":"),this.transportManager_=new No(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=lo((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=to("t",e),n=to("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=to("t",e),n=to("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=to("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Yi("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Yi("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),fo!==n&&Ji("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),lo((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):lo((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(qi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Mo{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class jo{constructor(e){this.allowedEvents_=e,this.listeners_={},t(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let e=0;e<n.length;e++)n[e].callback.apply(n[e].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let e=0;e<r.length;e++)if(r[e].callback===t&&(!n||n===r[e].context))return void r.splice(e,1)}validateEventType_(e){t(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class Ao extends jo{constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||y()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new Ao}getInitialEvent(e){return t("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Ro{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function qo(){return new Ro("")}function Do(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Ho(e){return e.pieces_.length-e.pieceNum_}function Fo(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new Ro(e.pieces_,t)}function Uo(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function zo(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function Vo(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Ro(t,0)}function Wo(e,t){const n=[];for(let t=e.pieceNum_;t<e.pieces_.length;t++)n.push(e.pieces_[t]);if(t instanceof Ro)for(let e=t.pieceNum_;e<t.pieces_.length;e++)n.push(t.pieces_[e]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new Ro(n,0)}function Bo(e){return e.pieceNum_>=e.pieces_.length}function Go(e,t){const n=Do(e),r=Do(t);if(null===n)return t;if(n===r)return Go(Fo(e),Fo(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Yo(e,t){const n=zo(e,0),r=zo(t,0);for(let e=0;e<n.length&&e<r.length;e++){const t=Zi(n[e],r[e]);if(0!==t)return t}return n.length===r.length?0:n.length<r.length?-1:1}function $o(e,t){if(Ho(e)!==Ho(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Jo(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(Ho(e)>Ho(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class Ko{constructor(e,t){this.errorPrefix_=t,this.parts_=zo(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let e=0;e<this.parts_.length;e++)this.byteLength_+=z(this.parts_[e]);Qo(this)}}function Qo(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Xo(e))}function Xo(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class Zo extends jo{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new Zo}getInitialEvent(e){return t("visible"===e,"Unknown event type: "+e),[this.visible_]}}const ea=1e3;class ta extends Mo{constructor(e,t,n,r,i,o,a,s){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=s,this.id=ta.nextPersistentConnectionId_++,this.log_=Gi("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ea,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,s)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Zo.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&Ao.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,o={r:i,a:e,b:n};this.log_(k(o)),t(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const t=new v,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,n,r,i){this.initConnection_();const o=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),t(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),t(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const s={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(a).set(o,s),this.connected_&&this.sendListen_(s)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const o=i.d,a=i.s;ta.warnOnListenWarnings_(o,t),(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==a&&this.removeListen_(n,r),e.onComplete&&e.onComplete(a,o))}))}static warnOnListenWarnings_(e,t){if(e&&"object"==typeof e&&x(e,"w")){const n=P(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();Ji(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=S(e).claims;return"object"==typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=S(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),t(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+k(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Yi("Unrecognized action received from server: "+k(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){t(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ea,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ea,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=ea),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+ta.nextConnectionId_++,o=this.lastSessionId;let a=!1,s=null;const c=function(){s?s.close():(a=!0,r())},l=function(e){t(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)};this.realtime_={close:c,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[t,c]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);a?Bi("getToken() completed but was canceled"):(Bi("getToken() completed. Creating connection."),this.authToken_=t&&t.accessToken,this.appCheckToken_=c&&c.token,s=new Oo(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,(e=>{Ji(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),o))}catch(e){this.log_("Failed to get token: "+e),a||(this.repoInfo_.nodeAdmin&&Ji(e),c())}}}interrupt(e){Bi("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Bi("Resuming connection for reason: "+e),delete this.interruptReasons_[e],N(this.interruptReasons_)&&(this.reconnectDelay_=ea,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>no(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new Ro(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){Bi("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Bi("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+Mi.replace(/\./g,"-")]=1,y()?e["framework.cordova"]=1:_()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Ao.getInstance().currentlyOnline();return N(this.interruptReasons_)&&e}}ta.nextPersistentConnectionId_=0,ta.nextConnectionId_=0;class na{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new na(e,t)}}class ra{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new na(Qi,e),r=new na(Qi,t);return 0!==this.compare(n,r)}minPost(){return na.MIN}}let ia;class oa extends ra{static get __EMPTY_NODE(){return ia}static set __EMPTY_NODE(e){ia=e}compare(e,t){return Zi(e.name,t.name)}isDefinedOn(e){throw n("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return na.MIN}maxPost(){return new na(Xi,ia)}makePost(e,n){return t("string"==typeof e,"KeyIndex indexValue must always be a string."),new na(e,ia)}toString(){return".key"}}const aa=new oa;class sa{constructor(e,t,n,r,i=null){this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ca{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:ca.RED,this.left=null!=r?r:la.EMPTY_NODE,this.right=null!=i?i:la.EMPTY_NODE}copy(e,t,n,r,i){return new ca(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return la.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return la.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ca.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ca.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ca.RED=!0,ca.BLACK=!1;class la{constructor(e,t=la.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new la(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ca.BLACK,null,null))}remove(e){return new la(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ca.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new sa(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new sa(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new sa(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new sa(this.root_,null,this.comparator_,!0,e)}}function ua(e,t){return Zi(e.name,t.name)}function da(e,t){return Zi(e,t)}let ha;la.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new ca(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const pa=function(e){return"number"==typeof e?"number:"+oo(e):"string:"+e},fa=function(e){if(e.isLeafNode()){const n=e.val();t("string"==typeof n||"number"==typeof n||"object"==typeof n&&x(n,".sv"),"Priority must be a string or number.")}else t(e===ha||e.isEmpty(),"priority of unexpected type.");t(e===ha||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let ma,va,ga;class ya{constructor(e,n=ya.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,t(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),fa(this.priorityNode_)}static set __childrenNodeConstructor(e){ma=e}static get __childrenNodeConstructor(){return ma}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ya(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:ya.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Bo(e)?this:".priority"===Do(e)?this.priorityNode_:ya.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:ya.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Do(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(t(".priority"!==r||1===Ho(e),".priority must be the last token in a path"),this.updateImmediateChild(r,ya.__childrenNodeConstructor.EMPTY_NODE.updateChild(Fo(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+pa(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?oo(this.value_):this.value_,this.lazyHash_=Ui(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ya.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ya.__childrenNodeConstructor?-1:(t(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=ya.VALUE_TYPE_ORDER.indexOf(n),o=ya.VALUE_TYPE_ORDER.indexOf(r);return t(i>=0,"Unknown leaf type: "+n),t(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}ya.VALUE_TYPE_ORDER=["object","boolean","number","string"];const ba=new class extends ra{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Zi(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return na.MIN}maxPost(){return new na(Xi,new ya("[PRIORITY-POST]",ga))}makePost(e,t){const n=va(e);return new na(t,new ya("[PRIORITY-POST]",n))}toString(){return".priority"}},_a=Math.log(2);class wa{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/_a,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Ea=function(e,t,n,r){e.sort(t);const i=function(t,r){const o=r-t;let a,s;if(0===o)return null;if(1===o)return a=e[t],s=n?n(a):a,new ca(s,a.node,ca.BLACK,null,null);{const c=parseInt(o/2,10)+t,l=i(t,c),u=i(c+1,r);return a=e[c],s=n?n(a):a,new ca(s,a.node,ca.BLACK,l,u)}},o=function(t){let r=null,o=null,a=e.length;const s=function(t,r){const o=a-t,s=a;a-=t;const l=i(o+1,s),u=e[o],d=n?n(u):u;c(new ca(d,u.node,r,null,l))},c=function(e){r?(r.left=e,r=e):(o=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?s(r,ca.BLACK):(s(r,ca.BLACK),s(r,ca.RED))}return o}(new wa(e.length));return new la(r||t,o)};let Ca;const Ta={};class La{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return t(Ta&&ba,"ChildrenNode.ts has not been loaded"),Ca=Ca||new La({".priority":Ta},{".priority":ba}),Ca}get(e){const t=P(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof la?t:null}hasIndex(e){return x(this.indexSet_,e.toString())}addIndex(e,n){t(e!==aa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=n.getIterator(na.Wrap);let a,s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();a=i?Ea(r,e.getCompare()):Ta;const c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;const u=Object.assign({},this.indexes_);return u[c]=a,new La(u,l)}addToIndexes(e,n){const r=O(this.indexes_,((r,i)=>{const o=P(this.indexSet_,i);if(t(o,"Missing index implementation for "+i),r===Ta){if(o.isDefinedOn(e.node)){const t=[],r=n.getIterator(na.Wrap);let i=r.getNext();for(;i;)i.name!==e.name&&t.push(i),i=r.getNext();return t.push(e),Ea(t,o.getCompare())}return Ta}{const t=n.get(e.name);let i=r;return t&&(i=i.remove(new na(e.name,t))),i.insert(e,e.node)}}));return new La(r,this.indexSet_)}removeFromIndexes(e,t){const n=O(this.indexes_,(n=>{if(n===Ta)return n;{const r=t.get(e.name);return r?n.remove(new na(e.name,r)):n}}));return new La(n,this.indexSet_)}}let Ia;class ka{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&fa(this.priorityNode_),this.children_.isEmpty()&&t(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ia||(Ia=new ka(new la(da),null,La.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ia}updatePriority(e){return this.children_.isEmpty()?this:new ka(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?Ia:t}}getChild(e){const t=Do(e);return null===t?this:this.getImmediateChild(t).getChild(Fo(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,n){if(t(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);{const t=new na(e,n);let r,i;n.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(t,this.children_)):(r=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(t,this.children_));const o=r.isEmpty()?Ia:this.priorityNode_;return new ka(r,o,i)}}updateChild(e,n){const r=Do(e);if(null===r)return n;{t(".priority"!==Do(e)||1===Ho(e),".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(Fo(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(ba,((o,a)=>{t[o]=a.val(e),n++,i&&ka.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+pa(this.getPriority().val())+":"),this.forEachChild(ba,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":Ui(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new na(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new na(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new na(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,na.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,na.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Sa?-1:0}withIndex(e){if(e===aa||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new ka(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===aa||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(ba),n=t.getIterator(ba);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===aa?null:this.indexMap_.get(e.toString())}}ka.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const Sa=new class extends ka{constructor(){super(new la(da),ka.EMPTY_NODE,La.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ka.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(na,{MIN:{value:new na(Qi,ka.EMPTY_NODE)},MAX:{value:new na(Xi,Sa)}}),oa.__EMPTY_NODE=ka.EMPTY_NODE,ya.__childrenNodeConstructor=ka,ha=Sa,ga=Sa;const xa=!0;function Pa(e,n=null){if(null===e)return ka.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(n=e[".priority"]),t(null===n||"string"==typeof n||"number"==typeof n||"object"==typeof n&&".sv"in n,"Invalid priority type found: "+typeof n),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new ya(e,Pa(n));if(e instanceof Array||!xa){let t=ka.EMPTY_NODE;return io(e,((n,r)=>{if(x(e,n)&&"."!==n.substring(0,1)){const e=Pa(r);!e.isLeafNode()&&e.isEmpty()||(t=t.updateImmediateChild(n,e))}})),t.updatePriority(Pa(n))}{const t=[];let r=!1;if(io(e,((e,n)=>{if("."!==e.substring(0,1)){const i=Pa(n);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),t.push(new na(e,i)))}})),0===t.length)return ka.EMPTY_NODE;const i=Ea(t,ua,(e=>e.name),da);if(r){const e=Ea(t,ba.getCompare());return new ka(i,Pa(n),new La({".priority":e},{".priority":ba}))}return new ka(i,Pa(n),La.Default)}}!function(e){va=e}(Pa);class Na extends ra{constructor(e){super(),this.indexPath_=e,t(!Bo(e)&&".priority"!==Do(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Zi(e.name,t.name):i}makePost(e,t){const n=Pa(e),r=ka.EMPTY_NODE.updateChild(this.indexPath_,n);return new na(t,r)}maxPost(){const e=ka.EMPTY_NODE.updateChild(this.indexPath_,Sa);return new na(Xi,e)}toString(){return zo(this.indexPath_,0).join("/")}}const Oa=new class extends ra{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?Zi(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return na.MIN}maxPost(){return na.MAX}makePost(e,t){const n=Pa(e);return new na(t,n)}toString(){return".value"}};function Ma(e){return{type:"value",snapshotNode:e}}function ja(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Aa(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Ra(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class qa{constructor(e){this.index_=e}updateChild(e,n,r,i,o,a){t(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const s=e.getImmediateChild(n);return s.getChild(i).equals(r.getChild(i))&&s.isEmpty()===r.isEmpty()?e:(null!=a&&(r.isEmpty()?e.hasChild(n)?a.trackChildChange(Aa(n,s)):t(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?a.trackChildChange(ja(n,r)):a.trackChildChange(Ra(n,r,s))),e.isLeafNode()&&r.isEmpty()?e:e.updateImmediateChild(n,r).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(ba,((e,r)=>{t.hasChild(e)||n.trackChildChange(Aa(e,r))})),t.isLeafNode()||t.forEachChild(ba,((t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Ra(t,r,i))}else n.trackChildChange(ja(t,r))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?ka.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Da{constructor(e){this.indexedFilter_=new qa(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Da.getStartPost_(e),this.endPost_=Da.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,o){return this.matches(new na(t,n))||(n=ka.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)}updateFullNode(e,t,n){t.isLeafNode()&&(t=ka.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(ka.EMPTY_NODE);const i=this;return t.forEachChild(ba,((e,t)=>{i.matches(new na(e,t))||(r=r.updateImmediateChild(e,ka.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Ha{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new Da(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,o){return this.rangedFilter_.matches(new na(t,n))||(n=ka.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=ka.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=ka.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority(ka.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,ka.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,o){let a;if(this.reverse_){const e=this.index_.getCompare();a=(t,n)=>e(n,t)}else a=this.index_.getCompare();const s=e;t(s.numChildren()===this.limit_,"");const c=new na(n,r),l=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(s.hasChild(n)){const e=s.getImmediateChild(n);let t=i.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=t&&(t.name===n||s.hasChild(t.name));)t=i.getChildAfterChild(this.index_,t,this.reverse_);const d=null==t?1:a(t,c);if(u&&!r.isEmpty()&&d>=0)return null!=o&&o.trackChildChange(Ra(n,r,e)),s.updateImmediateChild(n,r);{null!=o&&o.trackChildChange(Aa(n,e));const r=s.updateImmediateChild(n,ka.EMPTY_NODE);return null!=t&&this.rangedFilter_.matches(t)?(null!=o&&o.trackChildChange(ja(t.name,t.node)),r.updateImmediateChild(t.name,t.node)):r}}return r.isEmpty()?e:u&&a(l,c)>=0?(null!=o&&(o.trackChildChange(Aa(l.name,l.node)),o.trackChildChange(ja(n,r))),s.updateImmediateChild(n,r).updateImmediateChild(l.name,ka.EMPTY_NODE)):e}}class Fa{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ba}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return t(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return t(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Qi}hasEnd(){return this.endSet_}getIndexEndValue(){return t(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return t(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Xi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return t(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ba}copy(){const e=new Fa;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Ua(e){const n={};if(e.isDefault())return n;let r;if(e.index_===ba?r="$priority":e.index_===Oa?r="$value":e.index_===aa?r="$key":(t(e.index_ instanceof Na,"Unrecognized index type!"),r=e.index_.toString()),n.orderBy=k(r),e.startSet_){const t=e.startAfterSet_?"startAfter":"startAt";n[t]=k(e.indexStartValue_),e.startNameSet_&&(n[t]+=","+k(e.indexStartName_))}if(e.endSet_){const t=e.endBeforeSet_?"endBefore":"endAt";n[t]=k(e.indexEndValue_),e.endNameSet_&&(n[t]+=","+k(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function za(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==ba&&(t.i=e.index_.toString()),t}class Va extends Mo{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=Gi("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return void 0!==n?"tag$"+n:(t(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=Va.getListenId_(e,n),a={};this.listens_[o]=a;const s=Ua(e._queryParams);this.restRequest_(i+".json",s,((e,t)=>{let s=t;if(404===e&&(s=null,e=null),null===e&&this.onDataUpdate_(i,s,!1,n),P(this.listens_,o)===a){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=Va.getListenId_(e,t);delete this.listens_[n]}get(e){const t=Ua(e._queryParams),n=e._path.toString(),r=new v;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((([r,i])=>{r&&r.accessToken&&(t.auth=r.accessToken),i&&i.token&&(t.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+A(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let e=null;if(a.status>=200&&a.status<300){try{e=I(a.responseText)}catch(e){Ji("Failed to parse JSON response for "+o+": "+a.responseText)}n(null,e)}else 401!==a.status&&404!==a.status&&Ji("Got unsuccessful REST response for "+o+" Status: "+a.status),n(a.status);n=null}},a.open("GET",o,!0),a.send()}))}}class Wa{constructor(){this.rootNode_=ka.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Ba(){return{value:null,children:new Map}}function Ga(e,t,n){if(Bo(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=Do(t);e.children.has(r)||e.children.set(r,Ba()),Ga(e.children.get(r),t=Fo(t),n)}}function Ya(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{Ya(r,new Ro(t.toString()+"/"+e),n)}))}class $a{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&io(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class Ja{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new $a(e);const n=1e4+2e4*Math.random();lo(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;io(e,((e,r)=>{r>0&&x(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),lo(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ka,Qa;function Xa(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}(Qa=Ka||(Ka={}))[Qa.OVERWRITE=0]="OVERWRITE",Qa[Qa.MERGE=1]="MERGE",Qa[Qa.ACK_USER_WRITE=2]="ACK_USER_WRITE",Qa[Qa.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";class Za{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Ka.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Bo(this.path)){if(null!=this.affectedTree.value)return t(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Ro(e));return new Za(qo(),t,this.revert)}}return t(Do(this.path)===e,"operationForChild called for unrelated child."),new Za(Fo(this.path),this.affectedTree,this.revert)}}class es{constructor(e,t){this.source=e,this.path=t,this.type=Ka.LISTEN_COMPLETE}operationForChild(e){return Bo(this.path)?new es(this.source,qo()):new es(this.source,Fo(this.path))}}class ts{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Ka.OVERWRITE}operationForChild(e){return Bo(this.path)?new ts(this.source,qo(),this.snap.getImmediateChild(e)):new ts(this.source,Fo(this.path),this.snap)}}class ns{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Ka.MERGE}operationForChild(e){if(Bo(this.path)){const t=this.children.subtree(new Ro(e));return t.isEmpty()?null:t.value?new ts(this.source,qo(),t.value):new ns(this.source,qo(),t)}return t(Do(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ns(this.source,Fo(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class rs{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Bo(e))return this.isFullyInitialized()&&!this.filtered_;const t=Do(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class is{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function os(e,t,r,i,o,a){const s=i.filter((e=>e.type===r));s.sort(((t,r)=>function(e,t,r){if(null==t.childName||null==r.childName)throw n("Should only compare child_ events.");const i=new na(t.childName,t.snapshotNode),o=new na(r.childName,r.snapshotNode);return e.index_.compare(i,o)}(e,t,r))),s.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);o.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function as(e,t){return{eventCache:e,serverCache:t}}function ss(e,t,n,r){return as(new rs(t,n,r),e.serverCache)}function cs(e,t,n,r){return as(e.eventCache,new rs(t,n,r))}function ls(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function us(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let ds;class hs{constructor(e,t=(()=>(ds||(ds=new la(eo)),ds))()){this.value=e,this.children=t}static fromObject(e){let t=new hs(null);return io(e,((e,n)=>{t=t.set(new Ro(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:qo(),value:this.value};if(Bo(e))return null;{const n=Do(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(Fo(e),t);return null!=i?{path:Wo(new Ro(n),i.path),value:i.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(Bo(e))return this;{const t=Do(e),n=this.children.get(t);return null!==n?n.subtree(Fo(e)):new hs(null)}}set(e,t){if(Bo(e))return new hs(t,this.children);{const n=Do(e),r=(this.children.get(n)||new hs(null)).set(Fo(e),t),i=this.children.insert(n,r);return new hs(this.value,i)}}remove(e){if(Bo(e))return this.children.isEmpty()?new hs(null):new hs(null,this.children);{const t=Do(e),n=this.children.get(t);if(n){const r=n.remove(Fo(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new hs(null):new hs(this.value,i)}return this}}get(e){if(Bo(e))return this.value;{const t=Do(e),n=this.children.get(t);return n?n.get(Fo(e)):null}}setTree(e,t){if(Bo(e))return t;{const n=Do(e),r=(this.children.get(n)||new hs(null)).setTree(Fo(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new hs(this.value,i)}}fold(e){return this.fold_(qo(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(Wo(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,qo(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(Bo(e))return null;{const r=Do(e),i=this.children.get(r);return i?i.findOnPath_(Fo(e),Wo(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,qo(),t)}foreachOnPath_(e,t,n){if(Bo(e))return this;{this.value&&n(t,this.value);const r=Do(e),i=this.children.get(r);return i?i.foreachOnPath_(Fo(e),Wo(t,r),n):new hs(null)}}foreach(e){this.foreach_(qo(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(Wo(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class ps{constructor(e){this.writeTree_=e}static empty(){return new ps(new hs(null))}}function fs(e,t,n){if(Bo(t))return new ps(new hs(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let o=r.value;const a=Go(i,t);return o=o.updateChild(a,n),new ps(e.writeTree_.set(i,o))}{const r=new hs(n),i=e.writeTree_.setTree(t,r);return new ps(i)}}}function ms(e,t,n){let r=e;return io(n,((e,n)=>{r=fs(r,Wo(t,e),n)})),r}function vs(e,t){if(Bo(t))return ps.empty();{const n=e.writeTree_.setTree(t,new hs(null));return new ps(n)}}function gs(e,t){return null!=ys(e,t)}function ys(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Go(n.path,t)):null}function bs(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(ba,((e,n)=>{t.push(new na(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new na(e,n.value))})),t}function _s(e,t){if(Bo(t))return e;{const n=ys(e,t);return new ps(null!=n?new hs(n):e.writeTree_.subtree(t))}}function ws(e){return e.writeTree_.isEmpty()}function Es(e,t){return Cs(qo(),e.writeTree_,t)}function Cs(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);{let i=null;return n.children.inorderTraversal(((n,o)=>{".priority"===n?(t(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=Cs(Wo(e,n),o,r)})),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(Wo(e,".priority"),i)),r}}function Ts(e,t){return As(t,e)}function Ls(e,t){if(e.snap)return Jo(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Jo(Wo(e.path,n),t))return!0;return!1}function Is(e){return e.visible}function ks(e,t,r){let i=ps.empty();for(let o=0;o<e.length;++o){const a=e[o];if(t(a)){const e=a.path;let t;if(a.snap)Jo(r,e)?(t=Go(r,e),i=fs(i,t,a.snap)):Jo(e,r)&&(t=Go(e,r),i=fs(i,qo(),a.snap.getChild(t)));else{if(!a.children)throw n("WriteRecord should have .snap or .children");if(Jo(r,e))t=Go(r,e),i=ms(i,t,a.children);else if(Jo(e,r))if(t=Go(e,r),Bo(t))i=ms(i,qo(),a.children);else{const e=P(a.children,Do(t));if(e){const n=e.getChild(Fo(t));i=fs(i,qo(),n)}}}}}return i}function Ss(e,t,n,r,i){if(r||i){const o=_s(e.visibleWrites,t);if(!i&&ws(o))return n;if(i||null!=n||gs(o,qo())){const o=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Jo(e.path,t)||Jo(t,e.path))};return Es(ks(e.allWrites,o,t),n||ka.EMPTY_NODE)}return null}{const r=ys(e.visibleWrites,t);if(null!=r)return r;{const r=_s(e.visibleWrites,t);return ws(r)?n:null!=n||gs(r,qo())?Es(r,n||ka.EMPTY_NODE):null}}}function xs(e,t,n,r){return Ss(e.writeTree,e.treePath,t,n,r)}function Ps(e,t){return function(e,t,n){let r=ka.EMPTY_NODE;const i=ys(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(ba,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=_s(e.visibleWrites,t);return n.forEachChild(ba,((e,t)=>{const n=Es(_s(i,new Ro(e)),t);r=r.updateImmediateChild(e,n)})),bs(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return bs(_s(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function Ns(e,n,r,i){return function(e,n,r,i,o){t(i||o,"Either existingEventSnap or existingServerSnap must exist");const a=Wo(n,r);if(gs(e.visibleWrites,a))return null;{const t=_s(e.visibleWrites,a);return ws(t)?o.getChild(r):Es(t,o.getChild(r))}}(e.writeTree,e.treePath,n,r,i)}function Os(e,t){return function(e,t){return ys(e.visibleWrites,t)}(e.writeTree,Wo(e.treePath,t))}function Ms(e,t,n){return function(e,t,n,r){const i=Wo(t,n),o=ys(e.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?Es(_s(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function js(e,t){return As(Wo(e.treePath,t),e.writeTree)}function As(e,t){return{treePath:e,writeTree:t}}class Rs{constructor(){this.changeMap=new Map}trackChildChange(e){const r=e.type,i=e.childName;t("child_added"===r||"child_changed"===r||"child_removed"===r,"Only child changes supported for tracking"),t(".priority"!==i,"Only non-priority child changes can be tracked.");const o=this.changeMap.get(i);if(o){const t=o.type;if("child_added"===r&&"child_removed"===t)this.changeMap.set(i,Ra(i,e.snapshotNode,o.snapshotNode));else if("child_removed"===r&&"child_added"===t)this.changeMap.delete(i);else if("child_removed"===r&&"child_changed"===t)this.changeMap.set(i,Aa(i,o.oldSnap));else if("child_changed"===r&&"child_added"===t)this.changeMap.set(i,ja(i,e.snapshotNode));else{if("child_changed"!==r||"child_changed"!==t)throw n("Illegal combination of changes: "+e+" occurred after "+o);this.changeMap.set(i,Ra(i,e.snapshotNode,o.oldSnap))}}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}const qs=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class Ds{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new rs(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ms(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:us(this.viewCache_),i=function(e,t,n,r,i,o){return function(e,t,n,r,i,o,a){let s;const c=_s(e.visibleWrites,t),l=ys(c,qo());if(null!=l)s=l;else{if(null==n)return[];s=Es(c,n)}if(s=s.withIndex(a),s.isEmpty()||s.isLeafNode())return[];{const e=[],t=a.getCompare(),n=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a);let c=n.getNext();for(;c&&e.length<i;)0!==t(c,r)&&e.push(c),c=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,o)}(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function Hs(e,n,r,i,o,a){const s=n.eventCache;if(null!=Os(i,r))return n;{let c,l;if(Bo(r))if(t(n.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),n.serverCache.isFiltered()){const t=us(n),r=Ps(i,t instanceof ka?t:ka.EMPTY_NODE);c=e.filter.updateFullNode(n.eventCache.getNode(),r,a)}else{const t=xs(i,us(n));c=e.filter.updateFullNode(n.eventCache.getNode(),t,a)}else{const u=Do(r);if(".priority"===u){t(1===Ho(r),"Can't have a priority with additional path components");const o=s.getNode();l=n.serverCache.getNode();const a=Ns(i,r,o,l);c=null!=a?e.filter.updatePriority(o,a):s.getNode()}else{const t=Fo(r);let d;if(s.isCompleteForChild(u)){l=n.serverCache.getNode();const e=Ns(i,r,s.getNode(),l);d=null!=e?s.getNode().getImmediateChild(u).updateChild(t,e):s.getNode().getImmediateChild(u)}else d=Ms(i,u,n.serverCache);c=null!=d?e.filter.updateChild(s.getNode(),u,d,t,o,a):s.getNode()}}return ss(n,c,s.isFullyInitialized()||Bo(r),e.filter.filtersNodes())}}function Fs(e,t,n,r,i,o,a,s){const c=t.serverCache;let l;const u=a?e.filter:e.filter.getIndexedFilter();if(Bo(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){const e=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),e,null)}else{const e=Do(n);if(!c.isCompleteForPath(n)&&Ho(n)>1)return t;const i=Fo(n),o=c.getNode().getImmediateChild(e).updateChild(i,r);l=".priority"===e?u.updatePriority(c.getNode(),o):u.updateChild(c.getNode(),e,o,i,qs,null)}const d=cs(t,l,c.isFullyInitialized()||Bo(n),u.filtersNodes());return Hs(e,d,n,i,new Ds(i,d,o),s)}function Us(e,t,n,r,i,o,a){const s=t.eventCache;let c,l;const u=new Ds(i,t,o);if(Bo(n))l=e.filter.updateFullNode(t.eventCache.getNode(),r,a),c=ss(t,l,!0,e.filter.filtersNodes());else{const i=Do(n);if(".priority"===i)l=e.filter.updatePriority(t.eventCache.getNode(),r),c=ss(t,l,s.isFullyInitialized(),s.isFiltered());else{const o=Fo(n),l=s.getNode().getImmediateChild(i);let d;if(Bo(o))d=r;else{const e=u.getCompleteChild(i);d=null!=e?".priority"===Uo(o)&&e.getChild(Vo(o)).isEmpty()?e:e.updateChild(o,r):ka.EMPTY_NODE}c=l.equals(d)?t:ss(t,e.filter.updateChild(s.getNode(),i,d,o,u,a),s.isFullyInitialized(),e.filter.filtersNodes())}}return c}function zs(e,t){return e.eventCache.isCompleteForChild(t)}function Vs(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function Ws(e,t,n,r,i,o,a,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c,l=t;c=Bo(n)?r:new hs(null).setTree(n,r);const u=t.serverCache.getNode();return c.children.inorderTraversal(((n,r)=>{if(u.hasChild(n)){const c=Vs(0,t.serverCache.getNode().getImmediateChild(n),r);l=Fs(e,l,new Ro(n),c,i,o,a,s)}})),c.children.inorderTraversal(((n,r)=>{const c=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!c){const c=Vs(0,t.serverCache.getNode().getImmediateChild(n),r);l=Fs(e,l,new Ro(n),c,i,o,a,s)}})),l}class Bs{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new qa(n.getIndex()),i=(o=n).loadsAllData()?new qa(o.getIndex()):o.hasLimit()?new Ha(o):new Da(o);var o;this.processor_=function(e){return{filter:e}}(i);const a=t.serverCache,s=t.eventCache,c=r.updateFullNode(ka.EMPTY_NODE,a.getNode(),null),l=i.updateFullNode(ka.EMPTY_NODE,s.getNode(),null),u=new rs(c,a.isFullyInitialized(),r.filtersNodes()),d=new rs(l,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=as(d,u),this.eventGenerator_=new is(this.query_)}get query(){return this.query_}}function Gs(e,t){const n=us(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Bo(t)&&!n.getImmediateChild(Do(t)).isEmpty())?n.getChild(t):null}function Ys(e){return 0===e.eventRegistrations_.length}function $s(e,n,r){const i=[];if(r){t(null==n,"A cancel should cancel all event registrations.");const o=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(r,o);t&&i.push(t)}))}if(n){let t=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(n)){if(n.hasAnyCallback()){t=t.concat(e.eventRegistrations_.slice(r+1));break}}else t.push(i)}e.eventRegistrations_=t}else e.eventRegistrations_=[];return i}function Js(e,r,i,o){r.type===Ka.MERGE&&null!==r.source.queryId&&(t(us(e.viewCache_),"We should always have a full cache before handling merges"),t(ls(e.viewCache_),"Missing event cache, even though we have a server cache"));const a=e.viewCache_,s=function(e,r,i,o,a){const s=new Rs;let c,l;if(i.type===Ka.OVERWRITE){const n=i;n.source.fromUser?c=Us(e,r,n.path,n.snap,o,a,s):(t(n.source.fromServer,"Unknown source."),l=n.source.tagged||r.serverCache.isFiltered()&&!Bo(n.path),c=Fs(e,r,n.path,n.snap,o,a,l,s))}else if(i.type===Ka.MERGE){const n=i;n.source.fromUser?c=function(e,t,n,r,i,o,a){let s=t;return r.foreach(((r,c)=>{const l=Wo(n,r);zs(t,Do(l))&&(s=Us(e,s,l,c,i,o,a))})),r.foreach(((r,c)=>{const l=Wo(n,r);zs(t,Do(l))||(s=Us(e,s,l,c,i,o,a))})),s}(e,r,n.path,n.children,o,a,s):(t(n.source.fromServer,"Unknown source."),l=n.source.tagged||r.serverCache.isFiltered(),c=Ws(e,r,n.path,n.children,o,a,l,s))}else if(i.type===Ka.ACK_USER_WRITE){const n=i;c=n.revert?function(e,n,r,i,o,a){let s;if(null!=Os(i,r))return n;{const c=new Ds(i,n,o),l=n.eventCache.getNode();let u;if(Bo(r)||".priority"===Do(r)){let r;if(n.serverCache.isFullyInitialized())r=xs(i,us(n));else{const e=n.serverCache.getNode();t(e instanceof ka,"serverChildren would be complete if leaf node"),r=Ps(i,e)}u=e.filter.updateFullNode(l,r,a)}else{const t=Do(r);let o=Ms(i,t,n.serverCache);null==o&&n.serverCache.isCompleteForChild(t)&&(o=l.getImmediateChild(t)),u=null!=o?e.filter.updateChild(l,t,o,Fo(r),c,a):n.eventCache.getNode().hasChild(t)?e.filter.updateChild(l,t,ka.EMPTY_NODE,Fo(r),c,a):l,u.isEmpty()&&n.serverCache.isFullyInitialized()&&(s=xs(i,us(n)),s.isLeafNode()&&(u=e.filter.updateFullNode(u,s,a)))}return s=n.serverCache.isFullyInitialized()||null!=Os(i,qo()),ss(n,u,s,e.filter.filtersNodes())}}(e,r,n.path,o,a,s):function(e,t,n,r,i,o,a){if(null!=Os(i,n))return t;const s=t.serverCache.isFiltered(),c=t.serverCache;if(null!=r.value){if(Bo(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Fs(e,t,n,c.getNode().getChild(n),i,o,s,a);if(Bo(n)){let r=new hs(null);return c.getNode().forEachChild(aa,((e,t)=>{r=r.set(new Ro(e),t)})),Ws(e,t,n,r,i,o,s,a)}return t}{let l=new hs(null);return r.foreach(((e,t)=>{const r=Wo(n,e);c.isCompleteForPath(r)&&(l=l.set(e,c.getNode().getChild(r)))})),Ws(e,t,n,l,i,o,s,a)}}(e,r,n.path,n.affectedTree,o,a,s)}else{if(i.type!==Ka.LISTEN_COMPLETE)throw n("Unknown operation type: "+i.type);c=function(e,t,n,r,i){const o=t.serverCache;return Hs(e,cs(t,o.getNode(),o.isFullyInitialized()||Bo(n),o.isFiltered()),n,r,qs,i)}(e,r,i.path,o,s)}const u=s.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=ls(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(Ma(ls(t)))}}(r,c,u),{viewCache:c,changes:u}}(e.processor_,a,r,i,o);var c,l;return c=e.processor_,l=s.viewCache,t(l.eventCache.getNode().isIndexed(c.filter.getIndex()),"Event snap not indexed"),t(l.serverCache.getNode().isIndexed(c.filter.getIndex()),"Server snap not indexed"),t(s.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,Ks(e,s.changes,s.viewCache.eventCache.getNode(),null)}function Ks(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],o=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),os(e,i,"child_removed",t,r,n),os(e,i,"child_added",t,r,n),os(e,i,"child_moved",o,r,n),os(e,i,"child_changed",t,r,n),os(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let Qs,Xs;class Zs{constructor(){this.views=new Map}}function ec(e,n,r,i){const o=n.source.queryId;if(null!==o){const a=e.views.get(o);return t(null!=a,"SyncTree gave us an op for an invalid query."),Js(a,n,r,i)}{let t=[];for(const o of e.views.values())t=t.concat(Js(o,n,r,i));return t}}function tc(e,t,n,r,i,o){const a=function(e,t,n,r,i){const o=t._queryIdentifier,a=e.views.get(o);if(!a){let e=xs(n,i?r:null),o=!1;e?o=!0:r instanceof ka?(e=Ps(n,r),o=!1):(e=ka.EMPTY_NODE,o=!1);const a=as(new rs(e,o,!1),new rs(r,i,!1));return new Bs(t,a)}return a}(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,a),function(e,t){e.eventRegistrations_.push(t)}(a,n),function(e,t){const n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ba,((e,t)=>{r.push(ja(e,t))})),n.isFullyInitialized()&&r.push(Ma(n.getNode())),Ks(e,r,n.getNode(),t)}(a,n)}function nc(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function rc(e,t){let n=null;for(const r of e.views.values())n=n||Gs(r,t);return n}function ic(e,t){if(t._queryParams.loadsAllData())return sc(e);{const n=t._queryIdentifier;return e.views.get(n)}}function oc(e,t){return null!=ic(e,t)}function ac(e){return null!=sc(e)}function sc(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let cc=1;class lc{constructor(e){this.listenProvider_=e,this.syncPointTree_=new hs(null),this.pendingWriteTree_={visibleWrites:ps.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function uc(e,n,r,i,o){return function(e,n,r,i,o){t(i>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),e.allWrites.push({path:n,snap:r,writeId:i,visible:o}),o&&(e.visibleWrites=fs(e.visibleWrites,n,r)),e.lastWriteId=i}(e.pendingWriteTree_,n,r,i,o),o?vc(e,new ts({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},n,r)):[]}function dc(e,n,r=!1){const i=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,n);if(function(e,n){const r=e.allWrites.findIndex((e=>e.writeId===n));t(r>=0,"removeWrite called with nonexistent writeId.");const i=e.allWrites[r];e.allWrites.splice(r,1);let o=i.visible,a=!1,s=e.allWrites.length-1;for(;o&&s>=0;){const t=e.allWrites[s];t.visible&&(s>=r&&Ls(t,i.path)?o=!1:Jo(i.path,t.path)&&(a=!0)),s--}return!!o&&(a?(function(e){e.visibleWrites=ks(e.allWrites,Is,qo()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0):(i.snap?e.visibleWrites=vs(e.visibleWrites,i.path):io(i.children,(t=>{e.visibleWrites=vs(e.visibleWrites,Wo(i.path,t))})),!0))}(e.pendingWriteTree_,n)){let t=new hs(null);return null!=i.snap?t=t.set(qo(),!0):io(i.children,(e=>{t=t.set(new Ro(e),!0)})),vc(e,new Za(i.path,t,r))}return[]}function hc(e,t,n){return vc(e,new ts({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function pc(e,n,r,i,o=!1){const a=n._path,s=e.syncPointTree_.get(a);let c=[];if(s&&("default"===n._queryIdentifier||oc(s,n))){const l=function(e,n,r,i){const o=n._queryIdentifier,a=[];let s=[];const c=ac(e);if("default"===o)for(const[t,n]of e.views.entries())s=s.concat($s(n,r,i)),Ys(n)&&(e.views.delete(t),n.query._queryParams.loadsAllData()||a.push(n.query));else{const t=e.views.get(o);t&&(s=s.concat($s(t,r,i)),Ys(t)&&(e.views.delete(o),t.query._queryParams.loadsAllData()||a.push(t.query)))}return c&&!ac(e)&&a.push(new(t(Qs,"Reference.ts has not been loaded"),Qs)(n._repo,n._path)),{removed:a,events:s}}(s,n,r,i);0===s.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(a));const u=l.removed;if(c=l.events,!o){const t=-1!==u.findIndex((e=>e._queryParams.loadsAllData())),r=e.syncPointTree_.findOnPath(a,((e,t)=>ac(t)));if(t&&!r){const t=e.syncPointTree_.subtree(a);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&ac(t))return[sc(t)];{let e=[];return t&&(e=nc(t)),io(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,o=bc(e,r);e.listenProvider_.startListening(Lc(i),_c(e,i),o.hashFn,o.onComplete)}}}if(!r&&u.length>0&&!i)if(t){const t=null;e.listenProvider_.stopListening(Lc(n),t)}else u.forEach((t=>{const n=e.queryToTagMap.get(wc(t));e.listenProvider_.stopListening(Lc(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=wc(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,u)}return c}function fc(e,n,r,i=!1){const o=n._path;let a=null,s=!1;e.syncPointTree_.foreachOnPath(o,((e,t)=>{const n=Go(e,o);a=a||rc(t,n),s=s||ac(t)}));let c,l=e.syncPointTree_.get(o);l?(s=s||ac(l),a=a||rc(l,qo())):(l=new Zs,e.syncPointTree_=e.syncPointTree_.set(o,l)),null!=a?c=!0:(c=!1,a=ka.EMPTY_NODE,e.syncPointTree_.subtree(o).foreachChild(((e,t)=>{const n=rc(t,qo());n&&(a=a.updateImmediateChild(e,n))})));const u=oc(l,n);if(!u&&!n._queryParams.loadsAllData()){const r=wc(n);t(!e.queryToTagMap.has(r),"View does not exist, but we have a tag");const i=cc++;e.queryToTagMap.set(r,i),e.tagToQueryMap.set(i,r)}let d=tc(l,n,r,Ts(e.pendingWriteTree_,o),a,c);if(!u&&!s&&!i){const r=ic(l,n);d=d.concat(function(e,n,r){const i=n._path,o=_c(e,n),a=bc(e,r),s=e.listenProvider_.startListening(Lc(n),o,a.hashFn,a.onComplete),c=e.syncPointTree_.subtree(i);if(o)t(!ac(c.value),"If we're adding a query, it shouldn't be shadowed");else{const t=c.fold(((e,t,n)=>{if(!Bo(e)&&t&&ac(t))return[sc(t).query];{let e=[];return t&&(e=e.concat(nc(t).map((e=>e.query)))),io(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(Lc(r),_c(e,r))}}return s}(e,n,r))}return d}function mc(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=rc(n,Go(e,t));if(r)return r}));return Ss(r,t,i,n,!0)}function vc(e,t){return gc(t,e.syncPointTree_,null,Ts(e.pendingWriteTree_,qo()))}function gc(e,t,n,r){if(Bo(e.path))return yc(e,t,n,r);{const i=t.get(qo());null==n&&null!=i&&(n=rc(i,qo()));let o=[];const a=Do(e.path),s=e.operationForChild(a),c=t.children.get(a);if(c&&s){const e=n?n.getImmediateChild(a):null,t=js(r,a);o=o.concat(gc(s,c,e,t))}return i&&(o=o.concat(ec(i,e,r,n))),o}}function yc(e,t,n,r){const i=t.get(qo());null==n&&null!=i&&(n=rc(i,qo()));let o=[];return t.children.inorderTraversal(((t,i)=>{const a=n?n.getImmediateChild(t):null,s=js(r,t),c=e.operationForChild(t);c&&(o=o.concat(yc(c,i,a,s)))})),i&&(o=o.concat(ec(i,e,r,n))),o}function bc(e,t){const n=t.query,r=_c(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||ka.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=Ec(e,n);if(r){const n=Cc(r),i=n.path,o=n.queryId,a=Go(i,t);return Tc(e,i,new es(Xa(o),a))}return[]}(e,n._path,r):function(e,t){return vc(e,new es({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return pc(e,n,null,r)}}}}function _c(e,t){const n=wc(t);return e.queryToTagMap.get(n)}function wc(e){return e._path.toString()+"$"+e._queryIdentifier}function Ec(e,t){return e.tagToQueryMap.get(t)}function Cc(e){const n=e.indexOf("$");return t(-1!==n&&n<e.length-1,"Bad queryKey."),{queryId:e.substr(n+1),path:new Ro(e.substr(0,n))}}function Tc(e,n,r){const i=e.syncPointTree_.get(n);return t(i,"Missing sync point for query tag that we're tracking"),ec(i,r,Ts(e.pendingWriteTree_,n),null)}function Lc(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(t(Xs,"Reference.ts has not been loaded"),Xs)(e._repo,e._path):e}class Ic{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Ic(t)}node(){return this.node_}}class kc{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Wo(this.path_,e);return new kc(this.syncTree_,t)}node(){return mc(this.syncTree_,this.path_)}}const Sc=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},xc=function(e,n,r){return e&&"object"==typeof e?(t(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?Pc(e[".sv"],n,r):"object"==typeof e[".sv"]?Nc(e[".sv"],n):void t(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Pc=function(e,n,r){if("timestamp"===e)return r.timestamp;t(!1,"Unexpected server value: "+e)},Nc=function(e,n,r){e.hasOwnProperty("increment")||t(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const i=e.increment;"number"!=typeof i&&t(!1,"Unexpected increment value: "+i);const o=n.node();if(t(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return i;const a=o.getValue();return"number"!=typeof a?i:a+i},Oc=function(e,t,n,r){return jc(t,new kc(n,e),r)},Mc=function(e,t,n){return jc(e,new Ic(t),n)};function jc(e,t,n){const r=e.getPriority().val(),i=xc(r,t.getImmediateChild(".priority"),n);let o;if(e.isLeafNode()){const r=e,o=xc(r.getValue(),t,n);return o!==r.getValue()||i!==r.getPriority().val()?new ya(o,Pa(i)):e}{const r=e;return o=r,i!==r.getPriority().val()&&(o=o.updatePriority(new ya(i))),r.forEachChild(ba,((e,r)=>{const i=jc(r,t.getImmediateChild(e),n);i!==r&&(o=o.updateImmediateChild(e,i))})),o}}class Ac{constructor(e="",t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}}function Rc(e,t){let n=t instanceof Ro?t:new Ro(t),r=e,i=Do(n);for(;null!==i;){const e=P(r.node.children,i)||{children:{},childCount:0};r=new Ac(i,r,e),n=Fo(n),i=Do(n)}return r}function qc(e){return e.node.value}function Dc(e,t){e.node.value=t,Vc(e)}function Hc(e){return e.node.childCount>0}function Fc(e,t){io(e.node.children,((n,r)=>{t(new Ac(n,e,r))}))}function Uc(e,t,n,r){n&&!r&&t(e),Fc(e,(e=>{Uc(e,t,!0,r)})),n&&r&&t(e)}function zc(e){return new Ro(null===e.parent?e.name:zc(e.parent)+"/"+e.name)}function Vc(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===qc(e)&&!Hc(e)}(n),i=x(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Vc(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Vc(e))}(e.parent,e.name,e)}const Wc=/[\[\].#$\/\u0000-\u001F\u007F]/,Bc=/[\[\].#$\u0000-\u001F\u007F]/,Gc=10485760,Yc=function(e){return"string"==typeof e&&0!==e.length&&!Wc.test(e)},$c=function(e){return"string"==typeof e&&0!==e.length&&!Bc.test(e)},Jc=function(e,t,n,r){r&&void 0===t||Kc(U(e,"value"),t,n)},Kc=function(e,t,n){const r=n instanceof Ro?new Ko(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+Xo(r));if("function"==typeof t)throw new Error(e+"contains a function "+Xo(r)+" with contents = "+t.toString());if(Ki(t))throw new Error(e+"contains "+t.toString()+" "+Xo(r));if("string"==typeof t&&t.length>Gc/3&&z(t)>Gc)throw new Error(e+"contains a string greater than "+Gc+" utf8 bytes "+Xo(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let n=!1,i=!1;if(io(t,((t,o)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!Yc(t)))throw new Error(e+" contains an invalid key ("+t+") "+Xo(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=z(t),Qo(e)}(r,t),Kc(e,o,r),function(e){const t=e.parts_.pop();e.byteLength_-=z(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+Xo(r)+" in addition to actual children.")}},Qc=function(e,t,n,r){if(r&&void 0===t)return;const i=U(e,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const o=[];io(t,((e,t)=>{const r=new Ro(e);if(Kc(i,t,Wo(n,r)),".priority"===Uo(r)&&!(null===(a=t)||"string"==typeof a||"number"==typeof a&&!Ki(a)||a&&"object"==typeof a&&x(a,".sv")))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");var a;o.push(r)})),function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];const i=zo(r);for(let t=0;t<i.length;t++)if(".priority"===i[t]&&t===i.length-1);else if(!Yc(i[t]))throw new Error(e+"contains an invalid key ("+i[t]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(Yo);let i=null;for(n=0;n<t.length;n++){if(r=t[n],null!==i&&Jo(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,o)},Xc=function(e,t,n,r){if(!(r&&void 0===n||$c(n)))throw new Error(U(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Zc=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Xc(e,t,n,r)},el=function(e,t){if(".info"===Do(t))throw new Error(e+" failed = Can't modify data under /.info/")};class tl{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function nl(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],o=i.getPath();null===n||$o(o,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function rl(e,t,n){nl(e,n),ol(e,(e=>$o(e,t)))}function il(e,t,n){nl(e,n),ol(e,(e=>Jo(e,t)||Jo(t,e)))}function ol(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];i&&(t(i.path)?(al(e.eventLists_[r]),e.eventLists_[r]=null):n=!1)}n&&(e.eventLists_=[]),e.recursionDepth_--}function al(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();Vi&&Bi("event: "+n.toString()),co(r)}}}const sl=25;class cl{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new tl,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ba(),this.transactionQueueTree_=new Ac,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function ll(e,t,n){if(e.stats_=To(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Va(e.repoInfo_,((t,n,r,i)=>{hl(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>pl(e,!0)),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{k(n)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}e.persistentConnection_=new ta(e.repoInfo_,t,((t,n,r,i)=>{hl(e,t,n,r,i)}),(t=>{pl(e,t)}),(t=>{!function(e,t){io(t,((t,n)=>{fl(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(t,n){const r=t.toString();return Co[r]||(Co[r]=new Ja(e.stats_,e.server_)),Co[r]}(e.repoInfo_),e.infoData_=new Wa,e.infoSyncTree_=new lc({startListening:(t,n,r,i)=>{let o=[];const a=e.infoData_.getNode(t._path);return a.isEmpty()||(o=hc(e.infoSyncTree_,t._path,a),setTimeout((()=>{i("ok")}),0)),o},stopListening:()=>{}}),fl(e,"connected",!1),e.serverSyncTree_=new lc({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const o=i(n,r);il(e.eventQueue_,t._path,o)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function ul(e){const t=e.infoData_.getNode(new Ro(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function dl(e){return Sc({timestamp:ul(e)})}function hl(e,t,n,r,i){e.dataUpdateCount++;const o=new Ro(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let a=[];if(i)if(r){const t=O(n,(e=>Pa(e)));a=function(e,t,n,r){const i=Ec(e,r);if(i){const r=Cc(i),o=r.path,a=r.queryId,s=Go(o,t),c=hs.fromObject(n);return Tc(e,o,new ns(Xa(a),s,c))}return[]}(e.serverSyncTree_,o,t,i)}else{const t=Pa(n);a=function(e,t,n,r){const i=Ec(e,r);if(null!=i){const r=Cc(i),o=r.path,a=r.queryId,s=Go(o,t);return Tc(e,o,new ts(Xa(a),s,n))}return[]}(e.serverSyncTree_,o,t,i)}else if(r){const t=O(n,(e=>Pa(e)));a=function(e,t,n){const r=hs.fromObject(n);return vc(e,new ns({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,o,t)}else{const t=Pa(n);a=hc(e.serverSyncTree_,o,t)}let s=o;a.length>0&&(s=wl(e,o)),il(e.eventQueue_,s,a)}function pl(e,t){fl(e,"connected",t),!1===t&&function(e){gl(e,"onDisconnectEvents");const t=dl(e),n=Ba();Ya(e.onDisconnect_,qo(),((r,i)=>{const o=Oc(r,i,e.serverSyncTree_,t);Ga(n,r,o)}));let r=[];Ya(n,qo(),((t,n)=>{r=r.concat(hc(e.serverSyncTree_,t,n));const i=Il(e,t);wl(e,i)})),e.onDisconnect_=Ba(),il(e.eventQueue_,qo(),r)}(e)}function fl(e,t,n){const r=new Ro("/.info/"+t),i=Pa(n);e.infoData_.updateSnapshot(r,i);const o=hc(e.infoSyncTree_,r,i);il(e.eventQueue_,r,o)}function ml(e){return e.nextWriteId_++}function vl(e,t,n){let r;r=".info"===Do(t._path)?pc(e.infoSyncTree_,t,n):pc(e.serverSyncTree_,t,n),rl(e.eventQueue_,t._path,r)}function gl(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),Bi(n,...t)}function yl(e,t,n,r){t&&co((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const o=new Error(i);o.code=e,t(o)}}))}function bl(e,t,n){return mc(e.serverSyncTree_,t,n)||ka.EMPTY_NODE}function _l(e,n=e.transactionQueueTree_){if(n||Ll(e,n),qc(n)){const r=Cl(e,n);t(r.length>0,"Sending zero length transaction queue"),r.every((e=>0===e.status))&&function(e,n,r){const i=r.map((e=>e.currentWriteId)),o=bl(e,n,i);let a=o;const s=o.hash();for(let e=0;e<r.length;e++){const i=r[e];t(0===i.status,"tryToSendTransactionQueue_: items in queue should all be run."),i.status=1,i.retryCount++;const o=Go(n,i.path);a=a.updateChild(o,i.currentOutputSnapshotRaw)}const c=a.val(!0),l=n;e.server_.put(l.toString(),c,(t=>{gl(e,"transaction put response",{path:l.toString(),status:t});let i=[];if("ok"===t){const t=[];for(let n=0;n<r.length;n++)r[n].status=2,i=i.concat(dc(e.serverSyncTree_,r[n].currentWriteId)),r[n].onComplete&&t.push((()=>r[n].onComplete(null,!0,r[n].currentOutputSnapshotResolved))),r[n].unwatcher();Ll(e,Rc(e.transactionQueueTree_,n)),_l(e,e.transactionQueueTree_),il(e.eventQueue_,n,i);for(let e=0;e<t.length;e++)co(t[e])}else{if("datastale"===t)for(let e=0;e<r.length;e++)3===r[e].status?r[e].status=4:r[e].status=0;else{Ji("transaction at "+l.toString()+" failed: "+t);for(let e=0;e<r.length;e++)r[e].status=4,r[e].abortReason=t}wl(e,n)}}),s)}(e,zc(n),r)}else Hc(n)&&Fc(n,(t=>{_l(e,t)}))}function wl(e,n){const r=El(e,n),i=zc(r);return function(e,n,r){if(0===n.length)return;const i=[];let o=[];const a=n.filter((e=>0===e.status)).map((e=>e.currentWriteId));for(let c=0;c<n.length;c++){const l=n[c],u=Go(r,l.path);let d,h=!1;if(t(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)h=!0,d=l.abortReason,o=o.concat(dc(e.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=sl)h=!0,d="maxretry",o=o.concat(dc(e.serverSyncTree_,l.currentWriteId,!0));else{const t=bl(e,l.path,a);l.currentInputSnapshot=t;const r=n[c].update(t.val());if(void 0!==r){Kc("transaction failed: Data returned ",r,l.path);let n=Pa(r);"object"==typeof r&&null!=r&&x(r,".priority")||(n=n.updatePriority(t.getPriority()));const i=l.currentWriteId,s=dl(e),c=Mc(n,t,s);l.currentOutputSnapshotRaw=n,l.currentOutputSnapshotResolved=c,l.currentWriteId=ml(e),a.splice(a.indexOf(i),1),o=o.concat(uc(e.serverSyncTree_,l.path,c,l.currentWriteId,l.applyLocally)),o=o.concat(dc(e.serverSyncTree_,i,!0))}else h=!0,d="nodata",o=o.concat(dc(e.serverSyncTree_,l.currentWriteId,!0))}il(e.eventQueue_,r,o),o=[],h&&(n[c].status=2,s=n[c].unwatcher,setTimeout(s,Math.floor(0)),n[c].onComplete&&("nodata"===d?i.push((()=>n[c].onComplete(null,!1,n[c].currentInputSnapshot))):i.push((()=>n[c].onComplete(new Error(d),!1,null)))))}var s;Ll(e,e.transactionQueueTree_);for(let e=0;e<i.length;e++)co(i[e]);_l(e,e.transactionQueueTree_)}(e,Cl(e,r),i),i}function El(e,t){let n,r=e.transactionQueueTree_;for(n=Do(t);null!==n&&void 0===qc(r);)r=Rc(r,n),n=Do(t=Fo(t));return r}function Cl(e,t){const n=[];return Tl(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function Tl(e,t,n){const r=qc(t);if(r)for(let e=0;e<r.length;e++)n.push(r[e]);Fc(t,(t=>{Tl(e,t,n)}))}function Ll(e,t){const n=qc(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,Dc(t,n.length>0?n:void 0)}Fc(t,(t=>{Ll(e,t)}))}function Il(e,t){const n=zc(El(e,t)),r=Rc(e.transactionQueueTree_,t);return function(e,t,n){let r=e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{kl(e,t)})),kl(e,r),Uc(r,(t=>{kl(e,t)})),n}function kl(e,n){const r=qc(n);if(r){const i=[];let o=[],a=-1;for(let n=0;n<r.length;n++)3===r[n].status||(1===r[n].status?(t(a===n-1,"All SENT items should be at beginning of queue."),a=n,r[n].status=3,r[n].abortReason="set"):(t(0===r[n].status,"Unexpected transaction status in abort"),r[n].unwatcher(),o=o.concat(dc(e.serverSyncTree_,r[n].currentWriteId,!0)),r[n].onComplete&&i.push(r[n].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Dc(n,void 0):r.length=a+1,il(e.eventQueue_,zc(n),o);for(let e=0;e<i.length;e++)co(i[e])}}const Sl=function(e,t){const n=xl(e),r=n.namespace;"firebase.com"===n.domain&&$i(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||$i("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ji("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new bo(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Ro(n.pathString)}},xl=function(e){let t="",n="",r="",i="",o="",a=!0,s="https",c=443;if("string"==typeof e){let l=e.indexOf("//");l>=0&&(s=e.substring(0,l-1),e=e.substring(l+2));let u=e.indexOf("/");-1===u&&(u=e.length);let d=e.indexOf("?");-1===d&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(i=function(e){let t="";const n=e.split("/");for(let e=0;e<n.length;e++)if(n[e].length>0){let r=n[e];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(e){}t+="/"+r}return t}(e.substring(u,d)));const h=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ji(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,d)));l=t.indexOf(":"),l>=0?(a="https"===s||"wss"===s,c=parseInt(t.substring(l+1),10)):l=t.length;const p=t.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),o=r}"ns"in h&&(o=h.ns)}return{host:t,port:c,domain:n,subdomain:r,secure:a,scheme:s,pathString:i,namespace:o}};class Pl{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+k(this.snapshot.exportVal())}}class Nl{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Ol{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return t(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Ml{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return Bo(this._path)?null:Uo(this._path)}get ref(){return new jl(this._repo,this._path)}get _queryIdentifier(){const e=za(this._queryParams),t=no(e);return"{}"===t?"default":t}get _queryObject(){return za(this._queryParams)}isEqual(e){if(!((e=$(e))instanceof Ml))return!1;const t=this._repo===e._repo,n=$o(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class jl extends Ml{constructor(e,t){super(e,t,new Fa,!1)}get parent(){const e=Vo(this._path);return null===e?null:new jl(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Al{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Ro(e),n=ql(this.ref,e);return new Al(this._node.getChild(t),n,ba)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,((t,n)=>e(new Al(n,ql(this.ref,t),ba))))}hasChild(e){const t=new Ro(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Rl(e,t){return(e=$(e))._checkNotDeleted("ref"),void 0!==t?ql(e._root,t):e._root}function ql(e,t){return null===Do((e=$(e))._path)?Zc("child","path",t,!1):Xc("child","path",t,!1),new jl(e._repo,Wo(e._path,t))}function Dl(e,t){e=$(e),el("set",e._path),Jc("set",t,e._path,!1);const n=new v;return function(e,t,n,r,i){gl(e,"set",{path:t.toString(),value:n,priority:r});const o=dl(e),a=Pa(n,r),s=mc(e.serverSyncTree_,t),c=Mc(a,s,o),l=ml(e),u=uc(e.serverSyncTree_,t,c,l,!0);nl(e.eventQueue_,u),e.server_.put(t.toString(),a.val(!0),((n,r)=>{const o="ok"===n;o||Ji("set at "+t+" failed: "+n);const a=dc(e.serverSyncTree_,l,!o);il(e.eventQueue_,t,a),yl(0,i,n,r)}));const d=Il(e,t);wl(e,d),il(e.eventQueue_,d,[])}(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}function Hl(e,n){Qc("update",n,e._path,!1);const r=new v;return function(e,n,r,i){gl(e,"update",{path:n.toString(),value:r});let o=!0;const a=dl(e),s={};if(io(r,((t,r)=>{o=!1,s[t]=Oc(Wo(n,t),Pa(r),e.serverSyncTree_,a)})),o)Bi("update() called with empty data.  Don't do anything."),yl(0,i,"ok",void 0);else{const o=ml(e),a=function(e,n,r,i){!function(e,n,r,i){t(i>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:n,children:r,writeId:i,visible:!0}),e.visibleWrites=ms(e.visibleWrites,n,r),e.lastWriteId=i}(e.pendingWriteTree_,n,r,i);const o=hs.fromObject(r);return vc(e,new ns({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},n,o))}(e.serverSyncTree_,n,s,o);nl(e.eventQueue_,a),e.server_.merge(n.toString(),r,((t,r)=>{const a="ok"===t;a||Ji("update at "+n+" failed: "+t);const s=dc(e.serverSyncTree_,o,!a),c=s.length>0?wl(e,n):n;il(e.eventQueue_,c,s),yl(0,i,t,r)})),io(r,(t=>{const r=Il(e,Wo(n,t));wl(e,r)})),il(e.eventQueue_,n,[])}}(e._repo,e._path,n,r.wrapCallback((()=>{}))),r.promise}class Fl{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new Pl("value",this,new Al(e.snapshotNode,new jl(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Nl(this,e,t):null}matches(e){return e instanceof Fl&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Ul{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Nl(this,e,t):null}createEvent(e,n){t(null!=e.childName,"Child events should have a childName.");const r=ql(new jl(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new Pl(e.type,this,new Al(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Ul&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function zl(e,t,n,r){return function(e,t,n,r,i){let o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{vl(e._repo,e,s),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const a=new Ol(n,o||void 0),s="value"===t?new Fl(a):new Ul(t,a);return function(e,t,n){let r;r=".info"===Do(t._path)?fc(e.infoSyncTree_,t,n):fc(e.serverSyncTree_,t,n),rl(e.eventQueue_,t._path,r)}(e._repo,e,s),()=>vl(e._repo,e,s)}(e,"value",t,n,r)}!function(e){t(!Qs,"__referenceConstructor has already been defined"),Qs=e}(jl),function(e){t(!Xs,"__referenceConstructor has already been defined"),Xs=e}(jl);const Vl={};function Wl(e,t,n,r,i){let o=r||e.options.databaseURL;void 0===o&&(e.options.projectId||$i("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Bi("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let a,s,c=Sl(o,i),l=c.repoInfo;"undefined"!=typeof process&&process.env&&(s=process.env.FIREBASE_DATABASE_EMULATOR_HOST),s?(a=!0,o=`http://${s}?ns=${l.namespace}`,c=Sl(o,i),l=c.repoInfo):a=!c.repoInfo.secure;const u=i&&a?new po(po.OWNER):new ho(e.name,e.options,t);(function(e,t){const n=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!Yc(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),$c(e)}(n))throw new Error(U(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",c),Bo(c.path)||$i("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function(e,t,n,r){let i=Vl[t.name];i||(i={},Vl[t.name]=i);let o=i[e.toURLString()];return o&&$i("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new cl(e,false,n,r),i[e.toURLString()]=o,o}(l,e,u,new uo(e.name,n));return new Bl(d,e)}class Bl{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(ll(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new jl(this._repo,qo())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(e,t){const n=Vl[t];n&&n[e.key]===e||$i(`Database ${t}(${e.repoInfo_}) has already been deleted.`),function(e){e.persistentConnection_&&e.persistentConnection_.interrupt("repo_interrupt")}(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&$i("Cannot call "+e+" on a deleted database.")}}function Gl(e=ht(),t){const n=at(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=p("database");e&&function(e,t,n,r={}){(e=$(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&$i("Cannot call useEmulator() after instance has already been initialized.");const i=e._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&$i('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new po(po.OWNER);else if(r.mockUserToken){const t="string"==typeof r.mockUserToken?r.mockUserToken:function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[s(JSON.stringify({alg:"none",type:"JWT"})),s(JSON.stringify(o)),""].join(".")}(r.mockUserToken,e.app.options.projectId);o=new po(t)}!function(e,t,n,r){e.repoInfo_=new bo(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,o)}(n,...e)}return n}function Yl(e){return Yl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yl(e)}function $l(){$l=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:I(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",v={};function g(){}function y(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(N([])));E&&E!==n&&r.call(E,a)&&(_=E);var C=b.prototype=g.prototype=Object.create(_);function T(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(i,o,a,s){var c=d(e[i],e,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==Yl(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function I(t,n,r){var i=h;return function(o,a){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var c=k(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var l=d(t,n,r);if("normal"===l.type){if(i=r.done?m:p,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=m,r.method="throw",r.arg=l.arg)}}}function k(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Yl(t)+" is not iterable")}return y.prototype=b,i(C,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,c,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},T(L.prototype),l(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new L(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(C),l(C,c,"Generator"),l(C,a,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Jl(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}var Kl,Ql,Xl,Zl;function eu(){return tu.apply(this,arguments)}function tu(){var e;return e=$l().mark((function e(){var t,n,r;return $l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/.netlify/functions/config");case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("Network response was not ok");case 6:return e.next=8,t.json();case 8:n=e.sent,r={apiKey:n.apiKey,authDomain:n.authDomain,databaseURL:n.databaseURL,projectId:n.projectId,storageBucket:n.storageBucket,messagingSenderId:n.messagingSenderId,appId:n.appId,measurementId:n.measurementId},Si(Kl=dt(r)),Gl(Kl),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.error("Failed to fetch Firebase configuration:",e.t0);case 18:return e.abrupt("return",{app:Kl});case 19:case"end":return e.stop()}}),e,null,[[0,15]])})),tu=function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Jl(o,r,i,a,s,"next",e)}function s(e){Jl(o,r,i,a,s,"throw",e)}a(void 0)}))},tu.apply(this,arguments)}function nu(){var e=document.getElementById("noSubsubscribeBtn");e&&e.addEventListener("click",(function(){window.location="../checkout.html"}))}function ru(){var e=document.querySelector(".content-area"),t=document.createElement("div");t.classList.add("noSubDiv"),e.appendChild(t);var n=document.createElement("h1");n.innerText="You currently have no active subscription",t.appendChild(n);var r=document.createElement("p");r.classList.add("noSubExpl1"),r.innerText="Click the 'subscribe' button below to select a subscription or log out to use the free version.",t.appendChild(r);var i=document.createElement("div");i.classList.add("subscribeSection"),t.appendChild(i);var o=document.createElement("button");o.id="noSubsubscribeBtn",o.setAttribute("type","submit"),o.innerText="Subscribe",i.appendChild(o),nu()}function iu(){var e,t=localStorage.getItem("appLastUseTime");if(t){var n=parseInt(t);e=Math.floor((Date.now()-n)/1e3/60),console.log(e)}else e=-1;return e}function ou(){var e=document.querySelector(".content-area"),t=document.querySelector(".mainSection");t&&e.removeChild(t);var n=document.createElement("div");n.classList.add("noSubDiv"),e.appendChild(n);var r=document.createElement("h1");r.innerHTML="<i class='fa-solid fa-heart-crack'></i> Out of hearts!",n.appendChild(r);var i=document.createElement("p");i.classList.add("noSubExpl1"),i.innerText="You have no more hearts left! Come back in an hour to continue, or get a premium subscription to use the app with no limits.",n.appendChild(i);var o=document.createElement("div");o.classList.add("subscribeSection"),n.appendChild(o);var a=document.createElement("button");a.id="noSubsubscribeBtn",a.setAttribute("type","submit"),a.innerText="Subscribe",o.appendChild(a),nu()}function au(){var e=document.querySelector(".loader");e&&e.classList.add("loader-hidden")}function su(e){return su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},su(e)}function cu(){cu=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:I(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",v={};function g(){}function y(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(N([])));E&&E!==n&&r.call(E,a)&&(_=E);var C=b.prototype=g.prototype=Object.create(_);function T(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(i,o,a,s){var c=d(e[i],e,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==su(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function I(t,n,r){var i=h;return function(o,a){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var c=k(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var l=d(t,n,r);if("normal"===l.type){if(i=r.done?m:p,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=m,r.method="throw",r.arg=l.arg)}}}function k(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(su(t)+" is not iterable")}return y.prototype=b,i(C,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,c,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},T(L.prototype),l(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new L(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(C),l(C,c,"Generator"),l(C,a,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function lu(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function uu(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){lu(o,r,i,a,s,"next",e)}function s(e){lu(o,r,i,a,s,"throw",e)}a(void 0)}))}}function du(){return hu.apply(this,arguments)}function hu(){return hu=uu(cu().mark((function e(){var t,n;return cu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eu();case 2:t=e.sent,n=t.app,Ql=Si(n),Xl=Gl(n);case 6:case"end":return e.stop()}}),e)}))),hu.apply(this,arguments)}function pu(e){return fu.apply(this,arguments)}function fu(){return(fu=uu(cu().mark((function e(t){var n,r;return cu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("../src/".concat(t,".json"));case 3:return r=e.sent,e.next=6,r.json();case 6:n=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Couldn't fetch tense data ",e.t0);case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function mu(e,t){return new Promise((function(n){zl(e,(function(e){var r=e.val();r?(r.box1&&(t[0]=r.box1),r.box2&&(t[1]=r.box2),r.box3&&(t[2]=r.box3),r.box4&&(t[3]=r.box4),r.box5&&(t[4]=r.box5),r.box6&&(t[5]=r.box6),n(t)):n([])}),{onlyOnce:!0})}))}function vu(e){return new Promise((function(t){zl(e,(function(e){var n=e.val();t(n||[])}),{onlyOnce:!0})}))}function gu(e){return new Promise((function(t){zl(e,(function(e){var n=e.val();t(n||[])}),{onlyOnce:!0})}))}function yu(){return new Promise((function(e){yr(Ql,(function(t){e(t?Ql.currentUser.uid:null)}))}))}function bu(e){var t=Rl(Xl,"users/"+e+"/info/email");return new Promise((function(e){zl(t,(function(t){var n=t.val();n&&e(n)}),{onlyOnce:!0})}))}function _u(){return wu.apply(this,arguments)}function wu(){return(wu=uu(cu().mark((function e(){var t,n,r,i,o;return cu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",e.next=3,du();case 3:return e.prev=3,e.next=6,yu();case 6:if(!(n=e.sent)){e.next=19;break}return e.next=10,bu(n);case 10:if(r=e.sent,i=r.replace(/\./g,","),!(o=Rl(Xl,"subscription/"+i+"/status"))){e.next=17;break}return e.next=16,gu(o);case 16:t=e.sent;case 17:e.next=20;break;case 19:console.log("User is signed out");case 20:return e.abrupt("return",{subStatus:t,userId:n});case 23:e.prev=23,e.t0=e.catch(3),console.error("error line 215",e.t0.message);case 26:case"end":return e.stop()}}),e,null,[[3,23]])})))).apply(this,arguments)}function Eu(){return Cu.apply(this,arguments)}function Cu(){return(Cu=uu(cu().mark((function e(){var t,n,r,i,o;return cu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,du();case 2:return e.prev=2,e.next=5,yu();case 5:if(!(n=e.sent)){e.next=18;break}return e.next=9,bu(n);case 9:if(r=e.sent,i=r.replace(/\./g,","),!(o=Rl(Xl,"subscription/"+i+"/customerId"))){e.next=16;break}return e.next=15,gu(o);case 15:t=e.sent;case 16:e.next=19;break;case 18:console.log("User is signed out");case 19:return e.abrupt("return",t);case 22:e.prev=22,e.t0=e.catch(2),console.error("error line 370",e.t0.message);case 25:case"end":return e.stop()}}),e,null,[[2,22]])})))).apply(this,arguments)}function Tu(e,t,n,r,i){return Lu.apply(this,arguments)}function Lu(){return(Lu=uu(cu().mark((function e(t,n,r,i,o){var a,s,c,l,u,d,h;return cu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,yu();case 3:if(!(o=e.sent)){e.next=41;break}return a=Rl(Xl,"users/"+o+"/data//present"),s=Rl(Xl,"users/"+o+"/data//pastcomp"),c=Rl(Xl,"users/"+o+"/data//pastimp"),l=Rl(Xl,"users/"+o+"/data//future"),u=Rl(Xl,"users/"+o+"/data//subjunctive"),d=Rl(Xl,"users/"+o+"/data//stats"),e.next=13,vu(d);case 13:r=e.sent,e.t0=t.data[0].tense,e.next="present (le présent de l'indicatif)"===e.t0?17:"past (le passé composé)"===e.t0?21:"imperfect past (l'imparfait)"===e.t0?25:"future (le futur simple)"===e.t0?29:"present subjunctive (le subjonctif présent)"===e.t0?33:37;break;case 17:return e.next=19,mu(a,n);case 19:return n=e.sent,e.abrupt("break",38);case 21:return e.next=23,mu(s,n);case 23:return n=e.sent,e.abrupt("break",38);case 25:return e.next=27,mu(c,n);case 27:return n=e.sent,e.abrupt("break",38);case 29:return e.next=31,mu(l,n);case 31:return n=e.sent,e.abrupt("break",38);case 33:return e.next=35,mu(u,n);case 35:return n=e.sent,e.abrupt("break",38);case 37:console.log("unkown tense");case 38:if(n.length>0){for(h=0;h<n.length-1;h++)Iu(n[h],i);ku(n,i)}e.next=42;break;case 41:console.log("User is signed out");case 42:return e.abrupt("return",{userId:o,stats:r});case 45:e.prev=45,e.t1=e.catch(0),console.error(e.t1.message);case 48:case"end":return e.stop()}}),e,null,[[0,45]])})))).apply(this,arguments)}function Iu(e,t){for(var n=new Date,r=0;r<e.length;r++)e[r].repetDate>n.getTime()&&t.push(e[r].id-1)}function ku(e,t){for(var n=0;n<e[5].length;n++)0!==e[5][n].repetDate&&t.push(e[5][n].id-1)}function Su(e){var t=document.querySelector(".mainSection"),n=document.createElement("div");t.appendChild(n),n.classList.add("tenseSelectPopupContainer"),n.style.display="none";var r,i=document.querySelector(".currentTense").textContent;e||(r=localStorage.getItem("streak"),console.log("streak: ",r)),xu("present","present (le présent de l'indicatif)","present (le présent de l'indicatif)"===i?"fa-solid":"fa-regular","fa-circle","radio-present"),xu("pastImp","imperfect past (l'imparfait)","imperfect past (l'imparfait)"===i?"fa-solid":"fa-regular","fa-circle","radio-pastimp"),e?(xu("pastComp","past (le passé composé)","past (le passé composé)"===i?"fa-solid":"fa-regular","fa-circle","radio-pastcomp"),xu("future","future (le futur simple)","future (le futur simple)"===i?"fa-solid":"fa-regular","fa-circle","radio-future"),xu("subjunctive","present subjunctive (le subjonctif présent)","present subjunctive (le subjonctif présent)"===i?"fa-solid":"fa-regular","fa-circle","radio-pastcomp")):(r>=5?xu("pastComp","past (le passé composé)","past (le passé composé)"===i?"fa-solid":"fa-regular","fa-circle","radio-pastcomp"):xu("pastComp","past (le passé composé)","fa-solid","fa-lock","lock-pastcomp"),xu("future","future (le futur simple)","fa-solid","fa-lock","lock-future"),xu("subjunctive","present subjunctive (le subjonctif présent)","fa-solid","fa-lock","lock-subjunctive"))}function xu(e,t,n,r,i){var o=document.querySelector(".tenseSelectPopupContainer"),a=document.createElement("div");a.classList.add(e);var s=document.createElement("p");s.textContent=t;var c=document.createElement("i");c.classList.add(n,r,i),a.appendChild(s),a.appendChild(c),o.appendChild(a)}function Pu(){var e=document.querySelector(".selectPhrTypeDiv"),t=document.createElement("div");e.appendChild(t),t.classList.add("selectPhrTypeContainer"),t.style.display="none",Nu("easy","easy","fa-chess-pawn"),Nu("medium","medium","fa-chess-knight"),Nu("hard","hard","fa-chess-queen")}function Nu(e,t,n){var r=document.querySelector(".selectPhrTypeContainer"),i=document.createElement("div");i.classList.add(e);var o=document.createElement("i");o.classList.add("fa-solid",n),i.appendChild(o);var a=document.createElement("p");a.textContent=t,i.appendChild(a),r.appendChild(i)}function Ou(e){return Ou="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ou(e)}function Mu(){Mu=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:I(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",v={};function g(){}function y(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(N([])));E&&E!==n&&r.call(E,a)&&(_=E);var C=b.prototype=g.prototype=Object.create(_);function T(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(i,o,a,s){var c=d(e[i],e,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==Ou(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function I(t,n,r){var i=h;return function(o,a){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var c=k(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var l=d(t,n,r);if("normal"===l.type){if(i=r.done?m:p,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=m,r.method="throw",r.arg=l.arg)}}}function k(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Ou(t)+" is not iterable")}return y.prototype=b,i(C,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,c,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},T(L.prototype),l(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new L(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(C),l(C,c,"Generator"),l(C,a,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function ju(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Au(e){return Ru.apply(this,arguments)}function Ru(){var e;return e=Mu().mark((function e(t){var n,r,i,o,a,s,c,l,u,d,h,p,f,m,v,g,y,b,_,w,E,C,T,L,I,k,S,x;return Mu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=document.querySelector(".content-area")).innerHTML="",(r=document.querySelector(".mainSection"))||((r=document.createElement("div")).classList.add("mainSection"),n.appendChild(r)),(i=document.createElement("div")).classList.add("welcome"),r.appendChild(i),(o=document.createElement("p")).innerText="Welcome to Conjugation Master!",i.appendChild(o),(a=document.createElement("div")).classList.add("tense-section"),r.appendChild(a),(s=document.createElement("label")).htmlFor="tense",s.innerText="Choose a tense you'd like to practise:",a.appendChild(s),(c=document.createElement("div")).classList.add("selectDiv"),a.appendChild(c),(l=document.createElement("p")).classList.add("currentTense"),c.appendChild(l),u=document.createElement("i"),d=localStorage.getItem("selectedTense"),u.classList.add("fa-solid","fa-caret-down"),c.appendChild(u),l.textContent=t&&d?d:"present (le présent de l'indicatif)",(h=document.createElement("div")).classList.add("phrase-type"),r.appendChild(h),(p=document.createElement("div")).innerText="Choose a level of difficulty:",h.appendChild(p),(f=document.createElement("div")).classList.add("selectPhrTypeDiv"),h.appendChild(f),(m=document.createElement("p")).id="phraseType",f.appendChild(m),m.textContent=localStorage.getItem("phraseType")||"medium",(v=document.createElement("i")).classList.add("fa-solid","fa-caret-down"),f.appendChild(v),Pu(),g=document.querySelector(".selectPhrTypeContainer"),f.addEventListener("click",(function(e){g&&(g.style.display="block");var t=document.querySelector(".blurContainer");t&&(t.style.display="block"),e.stopPropagation()})),document.querySelectorAll(".selectPhrTypeContainer div").forEach((function(e){e.addEventListener("click",(function(t){t.stopPropagation(),m.textContent=e.textContent,g.style.display="none",E&&(E.style.display="none")}))})),(y=document.createElement("div")).classList.add("first-next-section"),r.appendChild(y),(b=document.createElement("button")).id="first-next-btn",b.innerText="Next",y.appendChild(b),(_=document.createElement("div")).classList.add("firstTimeDiv"),_.innerHTML="First time here? <p><span class='firstTimeBtn'>Click here</span> to learn how to use the app!</p>",r.appendChild(_),w=document.querySelector(".rulesSection"),E=document.querySelector(".blurContainer"),(C=document.querySelector(".firstTimeBtn"))&&C.addEventListener("click",(function(e){w.style.display="block",E.style.display="block",e.stopPropagation()})),Su(t),c.addEventListener("click",(function(e){var t=document.querySelector(".tenseSelectPopupContainer");t&&(t.style.display="block");var n=document.querySelector(".blurContainer");n&&(n.style.display="block"),e.stopPropagation()})),k=document.querySelector(".tenseSelectPopupContainer"),S=document.querySelectorAll(".fa-circle"),x=[],S.forEach((function(e){var t=e.parentNode;x.push(t)})),x.forEach((function(e){var t=document.querySelector(".blurContainer");e.addEventListener("click",(function(){S.forEach((function(e){e.classList.remove("fa-solid"),e.classList.add("fa-regular")})),L=e.querySelector("p"),(I=e.querySelector("i")).classList.remove("fa-regular"),I.classList.add("fa-solid"),T=L.textContent,l.textContent=T,t.style.display="none",k.style.display="none"}))}));case 71:case"end":return e.stop()}}),e)})),Ru=function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){ju(o,r,i,a,s,"next",e)}function s(e){ju(o,r,i,a,s,"throw",e)}a(void 0)}))},Ru.apply(this,arguments)}function qu(e){return qu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qu(e)}function Du(){Du=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:I(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",v={};function g(){}function y(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(N([])));E&&E!==n&&r.call(E,a)&&(_=E);var C=b.prototype=g.prototype=Object.create(_);function T(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(i,o,a,s){var c=d(e[i],e,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==qu(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function I(t,n,r){var i=h;return function(o,a){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var c=k(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var l=d(t,n,r);if("normal"===l.type){if(i=r.done?m:p,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=m,r.method="throw",r.arg=l.arg)}}}function k(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(qu(t)+" is not iterable")}return y.prototype=b,i(C,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,c,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},T(L.prototype),l(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new L(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(C),l(C,c,"Generator"),l(C,a,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Hu(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Fu(e,t,n){return Uu.apply(this,arguments)}function Uu(){var e;return e=Du().mark((function e(t,n,r){var i,o,a,s,c,l,u,d,h,p,f,m,v,g,y,b,_,w,E,C,T;return Du().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=new Image).src="../public/typing.png",(o=new Image).src="../public/quiz.png",a=document.querySelector(".lives"),s=document.querySelector(".stats-container"),e.next=8,pu(t);case 8:c=e.sent,(l=document.querySelector(".content-area")).innerHTML="",(u=document.querySelector(".mainSection"))||((u=document.createElement("div")).classList.add("mainSection"),l.appendChild(u)),(d=document.createElement("div")).classList.add("modeSection"),(h=document.createElement("h1")).innerText="Select an exercise type",d.appendChild(h),(p=document.createElement("div")).classList.add("mode-div"),d.appendChild(p),(f=document.createElement("div")).classList.add("type-mode"),p.appendChild(f),(m=document.createElement("img")).src=i.src,m.setAttribute("alt","Type mode image"),m.setAttribute("width","100px"),m.classList.add("typeModeImage"),m.setAttribute("loading","lazy"),f.appendChild(m),(v=document.createElement("div")).classList.add("typeModeBox"),f.appendChild(v),(g=document.createElement("h2")).textContent="Typing mode",v.appendChild(g),(y=document.createElement("p")).textContent="Improve your verb conjugation skills by typing the correct forms of given verbs.",v.appendChild(y),(b=document.createElement("div")).classList.add("quiz-mode"),p.appendChild(b),(_=document.createElement("img")).src=o.src,_.setAttribute("alt","Type mode image"),_.setAttribute("width","100px"),_.classList.add("quizModeImage"),m.setAttribute("loading","lazy"),b.appendChild(_),(w=document.createElement("div")).classList.add("quizModeBox"),b.appendChild(w),(E=document.createElement("h2")).textContent="Quiz mode",w.appendChild(E),(C=document.createElement("p")).textContent="Practise verb conjugation by selecting the correct verb form from multiple-choice options.",w.appendChild(C),u.appendChild(d),f.addEventListener("click",(function(){T="typeMode",r?a.style.display="none":(a.style.display="flex",a.style.color="#2b2d42"),s.style.display="flex",Mf(c,n,T)})),b.addEventListener("click",(function(){T="quizMode",r?a.style.display="none":(a.style.display="flex",a.style.color="#2b2d42"),s.style.display="flex",Mf(c,n,T)}));case 62:case"end":return e.stop()}}),e)})),Uu=function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Hu(o,r,i,a,s,"next",e)}function s(e){Hu(o,r,i,a,s,"throw",e)}a(void 0)}))},Uu.apply(this,arguments)}function zu(e){return zu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zu(e)}function Vu(){Vu=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:I(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",v={};function g(){}function y(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(N([])));E&&E!==n&&r.call(E,a)&&(_=E);var C=b.prototype=g.prototype=Object.create(_);function T(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(i,o,a,s){var c=d(e[i],e,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==zu(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function I(t,n,r){var i=h;return function(o,a){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var c=k(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var l=d(t,n,r);if("normal"===l.type){if(i=r.done?m:p,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=m,r.method="throw",r.arg=l.arg)}}}function k(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(zu(t)+" is not iterable")}return y.prototype=b,i(C,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,c,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},T(L.prototype),l(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new L(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(C),l(C,c,"Generator"),l(C,a,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Wu(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Bu(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Wu(o,r,i,a,s,"next",e)}function s(e){Wu(o,r,i,a,s,"throw",e)}a(void 0)}))}}function Gu(){return Yu.apply(this,arguments)}function Yu(){return(Yu=Bu(Vu().mark((function e(){var t,n,r,i,o,a,s,c,l,u,d;return Vu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.querySelector(".content-area").innerHTML="",h=void 0,p=void 0,h=document.querySelector("main"),(p=document.querySelector(".loader"))?p.classList.remove("loader-hidden"):((p=document.createElement("div")).classList.add("loader"),h.appendChild(p)),e.next=5,du();case 5:return e.next=7,_u();case 7:if(t=e.sent,n=t.subStatus,r=t.userId,(i=localStorage.getItem("lives"))&&"undefined"!==i?o=parseInt(i):(o=7,localStorage.setItem("lives",7)),a=iu(),!r){e.next=22;break}if("active"!==n){e.next=19;break}return e.next=17,Au(r);case 17:e.next=20;break;case 19:ru();case 20:e.next=35;break;case 22:if(!(o>0)){e.next=27;break}return e.next=25,Au(r);case 25:e.next=35;break;case 27:if(!(0===o&&a>=60)){e.next=34;break}return o=7,localStorage.setItem("lives",7),e.next=32,Au(r);case 32:e.next=35;break;case 34:ou();case 35:au(),s=document.getElementById("first-next-btn"),c=document.querySelector(".sidebarContainer"),l=document.querySelector(".sidebarTabletContainer"),u=document.querySelector("footer"),d=document.querySelector("nav"),s&&s.addEventListener("click",Bu(Vu().mark((function e(){var t,n,i,o,a;return Vu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=document.getElementById("phraseType"),n=t.innerText,i=$u(),o=i.selectedTense,a=i.tenseValue,localStorage.setItem("phraseType",n),localStorage.setItem("selectedTense",o),Fu(a,n,r),d.style.display="none",c.style.display="none",l.style.display="none",u.style.display="none";case 10:case"end":return e.stop()}}),e)}))));case 42:case"end":return e.stop()}var h,p}),e)})))).apply(this,arguments)}function $u(){var e,t=document.querySelector(".currentTense").textContent;switch(t){case"present (le présent de l'indicatif)":e="present";break;case"past (le passé composé)":e="pastComp";break;case"imperfect past (l'imparfait)":e="pastImp";break;case"future (le futur simple)":e="future";break;case"present subjunctive (le subjonctif présent)":e="subjunctive";break;default:console.log("unkown tense")}return{selectedTense:t,tenseValue:e}}function Ju(){var e=document.querySelectorAll(".learn"),t=document.querySelectorAll(".practice"),n=document.querySelectorAll(".stats"),r=document.querySelectorAll(".bonus");n.forEach((function(e){e.classList.remove("select")})),r.forEach((function(e){e.classList.remove("select")})),e.forEach((function(e){e.classList.remove("select")})),t.forEach((function(e){e.classList.add("select")}))}function Ku(){var e=document.querySelector(".content-area"),t=document.querySelector(".mainSection");t.innerHTML="";var n=document.createElement("div");n.classList.add("tense-display-section"),t.appendChild(n);var r=document.createElement("h1");r.classList.add("modeH1"),r.innerHTML="<i class='fa-solid fa-bolt'></i> Typing mode",t.appendChild(r);var i=document.createElement("div");i.classList.add("questionSection");var o=document.createElement("p");o.classList.add("questionNumber"),i.appendChild(o),t.appendChild(i);var a=document.createElement("div");a.classList.add("phrase-section"),t.appendChild(a);var s=document.createElement("div");s.classList.add("letters-section"),t.appendChild(s);var c=document.createElement("p"),l=document.createElement("button");l.innerText="é",c.appendChild(l),s.appendChild(c);var u=document.createElement("p"),d=document.createElement("button");d.innerText="è",u.appendChild(d),s.appendChild(u);var h=document.createElement("p"),p=document.createElement("button");p.innerText="ê",h.appendChild(p),s.appendChild(h);var f=document.createElement("p"),m=document.createElement("button");m.innerText="î",f.appendChild(m),s.appendChild(f);var v=document.createElement("p"),g=document.createElement("button");g.innerText="ô",v.appendChild(g),s.appendChild(v);var y=document.createElement("p"),b=document.createElement("button");b.innerText="û",y.appendChild(b),s.appendChild(y);var _=document.createElement("p"),w=document.createElement("button");w.innerText="ç",_.appendChild(w),s.appendChild(_);var E=document.createElement("div");E.classList.add("type-section"),t.appendChild(E);var C=document.createElement("input");C.setAttribute("type","text"),C.setAttribute("placeholder","type the verb form"),E.appendChild(C);var T=document.createElement("div");T.classList.add("msg-section"),t.appendChild(T);var L=document.createElement("div");L.classList.add("learnMore"),t.appendChild(L),L.innerHTML='<i class="fa-solid fa-circle-info"></i> Learn more',L.style.display="none";var I=document.querySelector("main"),k=document.createElement("div");k.classList.add("infoPopupSection"),I.appendChild(k),k.style.display="none";var S=document.createElement("div");S.classList.add("conjugSection"),e.appendChild(S),S.style.display="none";var x=document.createElement("div");x.classList.add("submit-section"),t.appendChild(x);var P=document.createElement("button");P.id="submit-btn",P.innerText="submit",x.appendChild(P);var N=document.createElement("div");N.classList.add("next-section"),t.appendChild(N);var O=document.createElement("button");O.id="next-btn",O.innerText="next",N.appendChild(O);var M=document.createElement("div");M.classList.add("finish-section"),t.appendChild(M),M.style.display="none";var j=document.createElement("button");j.id="finish-btn",j.innerText="finish",M.appendChild(j)}function Qu(){var e=document.querySelector(".content-area"),t=document.querySelector(".mainSection");t.innerHTML="";var n=document.createElement("div");n.classList.add("tense-display-section"),t.appendChild(n);var r=document.createElement("h1");r.classList.add("modeH1"),r.innerHTML="<i class='fa-solid fa-bolt'></i> Quiz",t.appendChild(r);var i=document.createElement("div");i.classList.add("questionSection");var o=document.createElement("p");o.classList.add("questionNumber"),i.appendChild(o),t.appendChild(i);var a=document.createElement("div");a.classList.add("phrase-section"),t.appendChild(a);var s=document.createElement("div");s.classList.add("options-section"),t.appendChild(s);var c=document.createElement("div");c.classList.add("option1"),s.appendChild(c);var l=document.createElement("div");l.classList.add("option2"),s.appendChild(l);var u=document.createElement("div");u.classList.add("option3"),s.appendChild(u);var d=document.createElement("div");d.classList.add("option4"),s.appendChild(d);var h=document.createElement("div");h.classList.add("msg-section"),t.appendChild(h);var p=document.createElement("div");p.classList.add("learnMore"),t.appendChild(p),p.innerHTML='<i class="fa-solid fa-circle-info"></i> Learn more',p.style.display="none";var f=document.querySelector("main"),m=document.createElement("div");m.classList.add("infoPopupSection"),f.appendChild(m),m.style.display="none";var v=document.createElement("div");v.classList.add("conjugSection"),e.appendChild(v),v.style.display="none";var g=document.createElement("div");g.classList.add("next-section"),t.appendChild(g);var y=document.createElement("button");y.id="next-btn",y.innerText="next",g.appendChild(y);var b=document.createElement("div");b.classList.add("finish-section"),t.appendChild(b),b.style.display="none";var _=document.createElement("button");_.id="finish-btn",_.innerText="finish",b.appendChild(_)}function Xu(){var e=document.querySelector(".type-section input");document.querySelectorAll(".letters-section button").forEach((function(t){t.addEventListener("click",(function(){e.value+=t.innerText}))}))}function Zu(e){var t=e.score,n=e.phraseStats,r=(e.stats,e.userId,e.streak),i=new Image;i.src="../public/trophy.png";var o=document.querySelector("main"),a=document.querySelector(".mainSection"),s=document.querySelector(".content-area"),c=document.querySelector(".infoPopupSection");c&&o.removeChild(c);var l=document.querySelector(".conjugSection");l&&s.removeChild(l);var u=document.querySelector(".sidebarContainer"),d=document.querySelector(".sidebarTabletContainer"),h=document.querySelector("footer"),p=document.querySelector("nav"),f=document.createElement("div");f.classList.add("resultSection");var m=document.createElement("div");m.classList.add("result");var v=document.createElement("p");v.innerText="You have finished the exercise!",m.appendChild(v),f.appendChild(m);var g=document.createElement("img");g.src=i.src,g.setAttribute("alt","Trophy"),g.classList.add("trophyImage"),g.setAttribute("width","180px"),g.setAttribute("loading","lazy"),f.appendChild(g);var y=document.createElement("div");y.classList.add("score-section"),f.appendChild(y);var b=document.createElement("p");b.innerHTML="Your score: ".concat(t,"/").concat(n.length),y.appendChild(b);var _=document.createElement("div");_.classList.add("streak-section"),f.appendChild(_),_.innerHTML='Your streak: <i class="fa-solid fa-fire"></i> '.concat(r);var w=document.createElement("div");w.classList.add("restart"),f.appendChild(w);var E=document.createElement("button");E.id="restart-btn",E.innerText="restart",w.appendChild(E);var C,T=document.createElement("button");T.id="showSummary-btn",T.innerText="show summary",w.appendChild(T),i.onload=function(){a.innerHTML="",a.appendChild(f)},p.style.display="flex";var L=document.querySelector(".chart");T.addEventListener("click",(function(){var e=document.querySelector(".blurContainer");0!=n.length&&(td(n),e&&(e.style.display="block"),T=document.getElementById("showSummary-btn"),w.removeChild(T));var t=document.querySelector(".summaryCloseBtn");t&&t.addEventListener("click",(function(){(C=document.querySelector(".summary"))&&(o.removeChild(C),C=null),e&&(e.style.display="none")})),L&&(s.removeChild(L),L=null)})),E.addEventListener("click",(function(){a.innerHTML="";var e=document.querySelector(".stats-container"),t=document.querySelector(".menu-element.account");t&&(t.style.display="flex"),C&&(o.removeChild(C),C=null),L&&(s.removeChild(L),L=null),u.style.display="flex",d.style.display="flex",h.style.display="block",e.style.display="none",Gu(),Ju()}))}function ed(e,t){var n=document.querySelector("main"),r=document.querySelector(".mainSection");r.innerHTML="";var i=document.querySelector(".content-area"),o=document.createElement("div");o.classList.add("noMorePhrDiv"),r.appendChild(o);var a=document.createElement("p");a.innerText="You have no more phrases to practise!",o.appendChild(a);var s=document.createElement("p");s.classList.add("noMorePhrExpl"),s.innerText="Please try another tense, change the level, or come back later. Our smart repetition system shows you phrases at specific intervals, enhancing your ability to memorize them efficiently.",o.appendChild(s);var c=document.createElement("div");c.classList.add("score-section"),r.appendChild(c);var l=document.createElement("i");l.classList.add("fa-solid"),l.classList.add("fa-trophy"),c.appendChild(l);var u=document.createElement("p");0!=t.length&&(u.innerText="Your score is: ".concat(e,"/").concat(t.length),c.appendChild(u));var d=document.querySelector(".sidebarContainer"),h=document.querySelector(".sidebarTabletContainer"),p=document.querySelector("footer"),f=document.querySelector("nav"),m=document.querySelector(".lives"),v=document.querySelector(".stats-container"),g=document.createElement("div");g.classList.add("restart"),r.appendChild(g);var y=document.createElement("button");y.id="restart-btn",y.innerText="restart",g.appendChild(y);var b,_=document.createElement("button");_.id="showSummary-btn",_.innerText="show summary",g.appendChild(_);var w=document.querySelector(".chart");_.addEventListener("click",(function(){var e=document.querySelector(".blurContainer");0!=t.length&&(td(t),e&&(e.style.display="block"),b=document.querySelector(".summary"),_=document.getElementById("showSummary-btn"),g.removeChild(_)),f.style.display="flex",m.style.display="none";var r=document.querySelector(".summaryCloseBtn");r&&r.addEventListener("click",(function(){(b=document.querySelector(".summary"))&&(n.removeChild(b),b=null),e&&(e.style.display="none")})),w&&(i.removeChild(w),w=null)})),y.addEventListener("click",(function(){r.innerHTML="",b&&(n.removeChild(b),b=null),w&&(i.removeChild(w),w=null),d.style.display="flex",h.style.display="flex",p.style.display="block",v&&(v.style.display="none"),f&&(console.log("nav"),f.style.display="flex"),Gu()}))}function td(e){var t=document.querySelector("main"),n=document.querySelector(".summary");n||((n=document.createElement("div")).classList.add("summary"),t.appendChild(n));var r=document.createElement("i");r.classList.add("fa-solid","fa-xmark","summaryCloseBtn"),n.appendChild(r);var i=document.createElement("h1");n.appendChild(i),i.innerText="Summary";var o=document.createElement("ul");n.appendChild(o);for(var a=0;a<e.length;a++){var s=document.createElement("li");o.appendChild(s),s.innerHTML="Question ".concat(a+1,': <span style="font-weight: bold;">').concat(e[a].phrase,'</span>\n    <p>Your answer: <span style="font-weight: bold;">').concat(e[a].input,'</span> <i class="fa-solid fa-square-check correctCheck"></i></p>\n    <p class="correctAnswer">The correct answer: <span style="font-weight: bold;">').concat(e[a].correctAnswer,"</span></p>");var c=s.querySelector(".correctCheck"),l=s.querySelector(".correctAnswer");e[a].isCorrect?(c.style.display="inline",l.style.display="none"):(l.style.display="inline",c.style.display="none"),e[a].almostCorrectCorrect&&(c.style.display="inline")}}function nd(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");t.classList.add("successDiv"),e.appendChild(t);var n=document.createElement("h1");n.innerText="An error has occurred",t.appendChild(n);var r=document.createElement("p");r.classList.add("successMsgExpl"),r.innerText="An error has occurred. Please send an email to vladimir@lingway.net.",t.appendChild(r)}function rd(e){var t=e.data,n=e.indexArray,r=e.k,i=e.score,o=e.phraseStats,a=e.phraseType,s=e.mode,c=[];if(function(e,t,n){var r,i=e.data[0].tenseShort;"easy"===t?"present"===i?(r=e.data.filter((function(e){return 1===e.group&&!e.irregular})),n.length=0,r.forEach((function(e){return n.push(e.id-1)}))):"pastcomp"===i?(r=e.data.filter((function(e){return"regular"===e.participle&&!e.aux})),n.length=0,r.forEach((function(e){return n.push(e.id-1)}))):"pastimp"===i?(r=e.data.filter((function(e){return("je"===e.pattern||"tu"===e.pattern||"il"===e.pattern)&&!e.exception})),n.length=0,r.forEach((function(e){return n.push(e.id-1)}))):"future"===i?(r=e.data.filter((function(e){return!e.spelling&&!e.irregular})),n.length=0,r.forEach((function(e){return n.push(e.id-1)}))):"subjunctive"===i&&(r=e.data.filter((function(e){return!e.irregular})),n.length=0,r.forEach((function(e){return n.push(e.id-1)}))):"medium"===t?n.length=0:"hard"===t&&("present"===i?(r=e.data.filter((function(e){return 2===e.group||3===e.group||"irregular"===e.group})),n.length=0,r.forEach((function(e){return n.push(e.id-1)}))):"pastcomp"===i?(r=e.data.filter((function(e){return e.aux||"regular"!==e.participle})),n.length=0,r.forEach((function(e){return n.push(e.id-1)}))):"pastimp"===i?(r=e.data.filter((function(e){return"ils"===e.pattern&&e.exception})),n.length=0,r.forEach((function(e){return n.push(e.id-1)}))):("future"===i||"subjunctive"===i)&&(r=e.data.filter((function(e){return e.irregular})),n.length=0,r.forEach((function(e){return n.push(e.id-1)}))))}(t,a,c),n.length!==t.data.length){var l=0;if(0!==c.length){do{if(r=Math.floor(Math.random()*t.data.length),++l>t.data.length)throw new Error("Exceeded maximum attempts to find a valid index.")}while(n.includes(r)||!c.includes(r))}else do{r=Math.floor(Math.random()*t.data.length)}while(n.includes(r));n.push(r),function(e,t,n,r){document.querySelector(".verb-display p");var i=document.querySelector(".questionSection");if(e&&e.data.length>0&&i){i.innerHTML="";var o=document.createElement("p");o.innerHTML="Question ".concat(n," / 5"),i.appendChild(o);var a=document.createElement("div");"quizMode"===r?(a.innerHTML='<p>Select the correct conjugation of&nbsp;the&nbsp;verb</p> <p class="verbP">'.concat(e.data[t].verb,"</p>"),i.appendChild(a)):(a.innerHTML='<p>Type the correct conjugation of the verb <span class="verbP">'.concat(e.data[t].verb,"</span> in the selected tense</p>"),i.appendChild(a))}}(t,r,o.length+1,s),function(e,t){var n=document.querySelector(".phrase-section");e&&e.data.length>0&&n&&(n.textContent=e.data[t].phrase)}(t,r),"quizMode"===s&&function(e,t){var n,r=document.querySelector(".option1"),i=document.querySelector(".option2"),o=document.querySelector(".option3"),a=document.querySelector(".option4"),s=document.querySelector(".options-section"),c=[r,i,o,a],l=[];if(e&&e.data.length>0&&s)for(var u=[e.data[t].answer,e.data[t].incorrect1,e.data[t].incorrect2,e.data[t].incorrect3],d=0;d<c.length;d++){do{n=Math.floor(Math.random()*c.length)}while(l.includes(n));l.push(n),c[n].textContent=u[d],0===d&&c[n].classList.add("correct-option")}}(t,r)}else console.log("No more phrases to practise!"),ed(i,o);return r}function id(e){var t=document.querySelector(".tense-display-section");e&&e.data.length>0&&t&&(t.innerHTML='<i class="fa-regular fa-calendar"></i> '.concat(e.data[0].tense))}function od(e){var t=e.data,n=e.indexArray,r=e.k,i=e.score,o=e.phraseStats,a=e.phraseType,s=e.mode,c=document.querySelector(".next-section"),l=document.querySelector(".submit-section"),u=document.querySelector(".msg-section"),d=document.querySelector(".type-section input");n&&d&&(d.removeAttribute("disabled"),d.classList.remove("bold"));var h=document.querySelector(".letters-section");h&&(h.style.display="flex"),u.innerHTML="",d&&(d.value="");try{r=rd({data:t,indexArray:n,k:r,score:i,phraseStats:o,phraseType:a,mode:s})}catch(e){console.error(e.message),ed(i,o)}return c&&(c.style.display="none"),l&&(l.style.display="flex"),r}function ad(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");t.classList.add("contentNav"),e.appendChild(t);var n=document.createElement("a");n.textContent="Verb conjugation",n.classList.add("verbConjugationLink");var r=document.createElement("span");r.classList.add("icon");var i=document.createElement("i");i.classList.add("fas","fa-chevron-right"),r.appendChild(i);var o=document.createElement("a");o.textContent="The present tense",o.classList.add("presentTenseLink"),t.appendChild(n),t.appendChild(r),t.appendChild(o);var a=document.createElement("div");a.classList.add("page-content");var s=document.createElement("h1");s.textContent="The present tense (le présent de l'indicatif)";var c=document.createElement("h2");c.textContent="When Do You Use the Present Tense in French?";var l=document.createElement("div");l.classList.add("definition");var u=document.createElement("p");u.innerHTML='<i class="fa-solid fa-lightbulb"></i> In French, <span class="tense-name">the simple present tense</span> (le présent de \n      l\'indicatif) is often used to describe an action that is happening now, a habit, a general fact/truth or a future plan.',l.appendChild(u);var d=document.createElement("div");d.classList.add("examples");var h=document.createElement("p");h.textContent="Here are a few examples:";var p=document.createElement("p");p.innerHTML="<i>Je <b>regarde</b> un film.</i> (I'm <b>watching</b> a film.)";var f=document.createElement("p");f.innerHTML="<i>Il <b>travaille</b> tous les jours.</i> (He <b>works</b> every day.)";var m=document.createElement("p");m.innerHTML="<i>Elle <b>parle</b> trois langues.</i> (She <b>speaks</b> three languages.)";var v=document.createElement("p");v.innerHTML="<i>Vous <b>arrivez</b> à 16h.</i> (You <b>arrive</b> at 4pm.)",d.appendChild(h),d.appendChild(p),d.appendChild(f),d.appendChild(m),d.appendChild(v),a.appendChild(s),a.appendChild(c),a.appendChild(l),a.appendChild(d),e.appendChild(a),fd()}function sd(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");t.classList.add("contentNav"),e.appendChild(t);var n=document.createElement("a");n.textContent="Verb conjugation",n.classList.add("verbConjugationLink");var r=document.createElement("span");r.classList.add("icon");var i=document.createElement("i");i.classList.add("fas","fa-chevron-right"),r.appendChild(i);var o=document.createElement("a");o.textContent="Passé Composé",t.appendChild(n),t.appendChild(r),t.appendChild(o);var a=document.createElement("div");a.classList.add("page-content");var s=document.createElement("h1");s.innerHTML="The past tense <span class='tense-name'>Passé Composé</span>";var c=document.createElement("h2");c.innerHTML="When Do You Use <i>Passé Composé</i> in French?";var l=document.createElement("div");l.classList.add("definition");var u=document.createElement("p");u.innerHTML='In French, <span class="tense-name">Passé composé</span> is used to talk about the past,\n      especially to describe actions that took place and were completed in the past.',l.appendChild(u);var d=document.createElement("p");d.innerHTML="It often corresponds to two different tenses in English: the past simple\n    (<i>I worked</i>, <i>you met</i>, <i>he saw</i>) and the present perfect (<i> have worked</i>,\n    <i>you've met</i>, <i>he has seen</i>).",a.appendChild(s),a.appendChild(c),a.appendChild(l),a.appendChild(d);var h=document.createElement("div");h.classList.add("examples");var p=document.createElement("p");p.textContent="Take a look at these examples:",a.appendChild(h);var f=document.createElement("p");f.innerHTML="<i>Il <b>a acheté</b> une maison.</i> (<i>He bought</i> a house. / <i>He has bought</i> a house.)";var m=document.createElement("p");m.innerHTML="<i>Je <b>suis allé</b> au cinéma.</i> (<i>I went</i> to the cinema.)";var v=document.createElement("p");v.innerHTML="<i>Elle <b>a perdu</b> ses clés.</i> (<i>She lost</i> her keys. / <i>She has lost</i> her keys.)",h.appendChild(p),h.appendChild(f),h.appendChild(m),h.appendChild(v);var g=document.createElement("h3");g.innerHTML="<i class='fa-solid fa-bolt'></i> To form <span class='tense-name'>Passé Composé</span> you'll need 2 parts:";var y=document.createElement("ul");y.classList.add("list-no-bullet"),y.innerHTML='<li><i class="fa-solid fa-arrow-right"></i> the <b>present tense</b>\n  of the verb <b>avoir</b> (meaning to have) or <b>être</b> (meaning to be),</li>\n<li><i class="fa-solid fa-arrow-right"></i> a part of the main verb\n  called the <b>past participle</b> (<i>acheté</i>, <i>allé</i>, <i>vu</i>, etc.).',a.appendChild(g),a.appendChild(y),e.appendChild(a),fd()}function cd(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");t.classList.add("contentNav"),e.appendChild(t);var n=document.createElement("a");n.textContent="Verb conjugation",n.classList.add("verbConjugationLink");var r=document.createElement("span");r.classList.add("icon");var i=document.createElement("i");i.classList.add("fas","fa-chevron-right"),r.appendChild(i);var o=document.createElement("a");o.textContent="The simple future tense",t.appendChild(n),t.appendChild(r),t.appendChild(o);var a=document.createElement("div");a.classList.add("page-content");var s=document.createElement("h1");s.textContent="The simple future tense (le futur simple)";var c=document.createElement("h2");c.textContent="When Do You Use the Present Tense in French?";var l=document.createElement("div");l.classList.add("definition");var u=document.createElement("p");u.innerHTML="<i class=\"fa-solid fa-lightbulb\"></i> In French, <span class=\"tense-name\">the simple future tense</span> (le futur simple) is used to describe future actions. \n      It is often translated into English using 'will' (or its contracted form <i>'ll</i>) and sometimes other structures used to talk about \n      the future, like 'to be going to' or the present tense.",l.appendChild(u);var d=document.createElement("div");d.classList.add("examples");var h=document.createElement("p");h.textContent="Here are a few examples:";var p=document.createElement("p");p.innerHTML="<i>Il <b>fera</b> chaud demain.</i> (The weather <b>will be</b> warm tomorrow.)";var f=document.createElement("p");f.innerHTML="<i>Je te <b>rappellerai</b> plus tard.</i> (I'<b>ll call</b> you <b>back</b> later.)";var m=document.createElement("p");m.innerHTML="<i>Il <b>sera</b> bientôt là.</i> (He<b>'ll be</b> here soon.)";var v=document.createElement("p");v.innerHTML="<i>Vous <b>arrivez</b> à 16h.</i> (You <b>arrive</b> at 4pm.)",d.appendChild(h),d.appendChild(p),d.appendChild(f),d.appendChild(m),d.appendChild(v),a.appendChild(s),a.appendChild(c),a.appendChild(l),a.appendChild(d);var g=document.createElement("div");g.innerHTML='<p class="tip"><i class="fa-solid fa-bolt"></i> To form the simple future tense in French, you generally use \n    the infinitive form of the verb and add specific endings. For <b>-re</b> verbs, you drop the final <b>-e</b> before adding the endings.</p>',a.appendChild(g);var y=document.createElement("p");y.innerHTML="You'll find the endings and examples in the table below.",a.appendChild(y);var b=document.createElement("table"),_=document.createElement("thead"),w=document.createElement("tr");["SUBJECT","ENDING","EXAMPLES"].forEach((function(e){var t=document.createElement("th");t.textContent=e,w.appendChild(t)})),_.appendChild(w);var E=document.createElement("tbody");[["Je (j')","-ai","je donnerai, je finirai, j'attendrai"],["Tu","-as","tu donneras, tu finiras, tu attendras"],["Il/elle/on","-a","il/elle/on donnera, il/elle/on finira, il/elle/on attendra"],["Nous","-ons","nous donnerons, nous finirons, nous attendrons"],["Vous","-ez","vous donnerez, vous finirez, vous attendrez"],["Ils/elles","-ont","ils/elles donneront, ils/elles finiront, ils/elles attendront"]].forEach((function(e){var t=document.createElement("tr");e.forEach((function(e){var n=document.createElement("td");n.textContent=e,t.appendChild(n)})),E.appendChild(t)})),b.appendChild(_),b.appendChild(E),a.appendChild(b);var C=document.createElement("div");C.classList.add("examples");var T=document.createElement("p");T.textContent="Here are some more examples:";var L=document.createElement("p");L.innerHTML="<i>S'il ne pleut pas, nous <b>irons</b> dehors.</i> (If it doesn't rain, we'<b>ll go</b> outside.)";var I=document.createElement("p");I.innerHTML="<i>Le cours <b>finira</b> à onze heures.</i> (The lesson <b>will finish</b> at eleven o'clock.)",a.appendChild(C),C.appendChild(T),C.appendChild(L),C.appendChild(I),e.appendChild(a),fd()}function ld(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");t.classList.add("contentNav"),e.appendChild(t);var n=document.createElement("a");n.textContent="Verb conjugation",n.classList.add("verbConjugationLink");var r=document.createElement("span");r.classList.add("icon");var i=document.createElement("i");i.classList.add("fas","fa-chevron-right"),r.appendChild(i);var o=document.createElement("a");o.textContent="The French subjunctive",o.classList.add("subjunctiveLink"),t.appendChild(n),t.appendChild(r),t.appendChild(o);var a=document.createElement("div");a.classList.add("page-content");var s=document.createElement("h1");s.textContent="The French subjunctive (Le subjonctif)",a.appendChild(s);var c=document.createElement("div");c.classList.add("definition");var l=document.createElement("p");l.innerHTML='<i class="fa-solid fa-book-open"></i> <b>The French subjunctive (le subjonctif)</b> \n    is a grammatical mood (a verb form or a category such as "imperative" or "conditional") \n    used after certain verbs and phrases expressing emotions, desires, doubts, necessity, etc.',c.appendChild(l),a.appendChild(c);var u=document.createElement("div");u.classList.add("explanation"),a.appendChild(u);var d=document.createElement("p");d.innerHTML="It may seem complicated, but it comes down to knowing whether a verb or expression \n      takes the subjunctive mood (or, in contrast, the indicative mood). Look at this example:";var h=document.createElement("p");h.innerHTML='<i><b>Il faut que tu sois là à 18h.</b> ("You need to be here at 6pm." / \n      "You must be here at 6pm." or more literally "It is necessary that you be here…")</i>';var p=document.createElement("p");p.innerHTML="In this case, it's not correct to say \"<i>Il faut que tu <span class=\"wrong\">es</span> là</i>\", \n      because \"<b>il faut que</b>\" (it's necessary that) is always used with a subjunctive, \n      and the present subjunctive form of 'être' for 'tu' is '<b>tu sois</b>'.";var f=document.createElement("p");f.innerHTML='In contrast, "<i>espérer que</i>" does not use the subjunctive, so you should say \n      "<i>J\'espère que tu <b>pourras</b> m\'aider.</i>" and not "<i>J\'espère que tu \n      <span class="wrong">puisses</span> m\'aider.</i>"',u.append(d,h,p,f);var m=document.createElement("h3");m.textContent="Here are some common verbs and expressions after which the subjunctive is used:",a.appendChild(m);var v=document.createElement("ul");v.classList.add("list-no-bullet");var g=document.createElement("li");g.classList.add("list-paragraph"),g.innerHTML="<i class=\"fa-solid fa-arrow-right\"></i> <b>Vouloir, souhaiter, aimer, demander</b> (que)</b><ul>\n    <li>- <i><u>Je souhaite que</u> tu <b>viennes</b> me voir.</i> (I'd like you to come and see me.)</li>\n    <li>- <i><u>Il voudrait que</u> vous <b>finissiez</b> le rapport avant samedi.</i> (He'd like you to finish the report by Saturday.)</li>\n  </ul>";var y=document.createElement("li");y.classList.add("list-paragraph"),y.innerHTML="<i class=\"fa-solid fa-arrow-right\"></i> Je suis, tu es... + <b>content, ravi, furieux, déçu, triste, désolé</b> ... (que)<ul>\n    <li>- <i><u>Ils sont contents que</u> nous <b>partions</b> avec eux.</i> (They're happy we're going with them.)</li>\n    <li>- <i><u>Je suis désolé que</u> vous ne <b>puissiez</b> pas venir.</i> (I'm sorry you can't come.)</li>\n  </ul>";var b=document.createElement("li");b.classList.add("list-paragraph"),b.innerHTML="<i class=\"fa-solid fa-arrow-right\"></i> C'est/Il est + <b>bien, important, intéressant, bizarre, étonnant</b>... (que)<ul>\n    <li>- <i><u>C'est bien que</u> les habitants <b>prennent</b> soin de leur ville.</i> (It's good that residents are taking care of their town.)</li>\n    <li>- <i><u>Il est important que</u> tu <b>sois</b> là.</i> (It's important that you're here.)</li>\n  </ul>";var _=document.createElement("li");_.classList.add("list-paragraph"),_.innerHTML="<i class=\"fa-solid fa-arrow-right\"></i> <b>Je ne pense pas</b> (que), <b>je ne crois pas</b> (que), <b>je ne suis pas sûr</b> (que), <b>je doute</b> (que)*… (phrases expressing doubt or uncertainty)<ul>\n    <li>- <i><u>Je ne suis pas sûr qu</u>'il <b>fasse</b> beau demain.</i> (I'm not sure if the weather will be good tomorrow.)</li>\n    <li>- <i>Il <u>doute que</u> Jade <b>vienne</b> voir le match.</i> (He doubts that Jade will come to watch the match.)</li>\n  </ul>";var w=document.createElement("li");w.classList.add("list-paragraph"),w.innerHTML='<i class="fa-solid fa-arrow-right"></i> <b>Il faut</b> (que), <b>il est nécessaire</b> (que)…<ul>\n    <li>- <i><u>Il faut que</u> j\'<b>aille</b> à la poste.</i> (I need to go to the post office.)</li>\n  </ul>';var E=document.createElement("li");E.classList.add("list-paragraph"),E.innerHTML='<i class="fa-solid fa-arrow-right"></i> Various connectors like "<b>pour que</b>" (so that), \n"<b>avant que</b>" (before), "<b>bien que</b>" (although), "<b>en attendant que</b>" (until), etc.<ul>\n    <li>- <i>Je vais regarder ma série <u>en attendant que</u> tu <b>finisses</b> ton travail.</i> (I\'m going to watch my series until you finish your work.)</li>\n  </ul>',v.append(g,y,b,_,w,E),a.appendChild(v);var C=document.createElement("div");C.classList.add("explanation");var T=document.createElement("p");C.appendChild(T),T.innerHTML='* In affirmative sentences such as <i>"Je suis sûr que"</i>, <i>"je pense que…"</i>, we <u>do not</u> use the subjunctive: \n<i>"Je suis sûr qu\'il <u>fera</u> beau demain"</i> (I\'m sure the weather will be good tomorrow).',a.appendChild(C);var L=document.createElement("div");L.classList.add("explanation");var I=document.createElement("p");I.innerHTML='<i class="fa-regular fa-lightbulb"></i> As you can see, the subjunctive always follows "<b>que</b>" (or sometimes "<b>qui</b>"), \n      but the presence of "<b>que</b>" or "<b>qui</b>" does not mean that you should use the subjunctive. \n      We recommend that you learn the expressions that require the subjunctive and you can do this by \n      practising the sentences using this app in the "practice mode" (just click the "practice" button and select the subjunctive).',L.appendChild(I);var k=document.createElement("div");k.classList.add("explanation");var S=document.createElement("p");S.innerHTML='<i class="fa-solid fa-triangle-exclamation"></i> Note that the subjunctive is usually used when there are <u>2 different subjects</u> in the sentence. \n      In other words, you can\'t have the same subject twice when using the subjunctive. \n      To avoid repeating the subject, we use the infinitive:';var x=document.createElement("p");x.innerHTML='We don\'t say "<u>Je</u> veux que <u>je</u> <span class="wrong">vienne</span>.", we say "Je veux <b>venir</b>."',k.appendChild(S),k.appendChild(x),a.appendChild(L),a.appendChild(k),e.appendChild(a),fd()}function ud(e){return ud="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ud(e)}function dd(){dd=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:I(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",v={};function g(){}function y(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(N([])));E&&E!==n&&r.call(E,a)&&(_=E);var C=b.prototype=g.prototype=Object.create(_);function T(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(i,o,a,s){var c=d(e[i],e,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==ud(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function I(t,n,r){var i=h;return function(o,a){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var c=k(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var l=d(t,n,r);if("normal"===l.type){if(i=r.done?m:p,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=m,r.method="throw",r.arg=l.arg)}}}function k(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(ud(t)+" is not iterable")}return y.prototype=b,i(C,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,c,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},T(L.prototype),l(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new L(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(C),l(C,c,"Generator"),l(C,a,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function hd(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function pd(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){hd(o,r,i,a,s,"next",e)}function s(e){hd(o,r,i,a,s,"throw",e)}a(void 0)}))}}function fd(){var e=document.querySelector(".verbConjugationLink"),t=document.querySelector(".presentTenseLink"),n=document.querySelector(".pastTenseLink"),r=document.querySelector(".futureTenseLink"),i=document.querySelector(".subjunctiveLink");e&&e.addEventListener("click",pd(dd().mark((function e(){var t,n;return dd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_u();case 2:t=e.sent,n=t.subStatus,kd(t.userId,n);case 6:case"end":return e.stop()}}),e)})))),t&&t.addEventListener("click",ad),n&&n.addEventListener("click",sd),r&&r.addEventListener("click",cd),i&&i.addEventListener("click",ld)}function md(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");t.classList.add("contentNav"),e.appendChild(t);var n=document.createElement("a");n.textContent="Verb conjugation",n.classList.add("verbConjugationLink");var r=document.createElement("span");r.classList.add("icon");var i=document.createElement("i");i.classList.add("fas","fa-chevron-right"),r.appendChild(i);var o=document.createElement("a");o.textContent="Intro",o.classList.add("introLink"),t.appendChild(n),t.appendChild(r),t.appendChild(o);var a=document.createElement("div");a.classList.add("page-content");var s=document.createElement("h1");s.textContent="Introduction to French conjugation and tenses";var c=document.createElement("h2");c.textContent="What is verb conjugation?";var l=document.createElement("div");l.classList.add("definition");var u=document.createElement("p");u.innerHTML='<i class="fa-solid fa-book-open"></i> <b>Verb conjugation</b> refers to changing a\n      verb to express different aspects, such as when the action happens, who is\n      performing the action, whether the action is completed or ongoing.',l.appendChild(u),a.appendChild(s),a.appendChild(c),a.appendChild(l),document.createElement("p").innerHTML='For example, if you want to express <i>"I work"</i> or <i>"I\'m working"</i>, you\'ll use: <b>je\n    travaille</b>.\nFor <i>"you work"</i> / <i>"you\'re working"</i> (singular, informal), you\'d use: <b>tu\n    travailles</b>.\nAnd for <i>"he works"</i> / <i>"he\'s working"</i>, the correct phrase is: <b>il travaille.</b></p>\n<p>So you can\'t just say "je travaill<span class="red">er</span>", "tu travaill<span\n    class="red">er</span>", etc. You have to\nconjugate the verb,\nso in this case you have to change the ending according to the subject (the person).';var d=document.createElement("h2");d.textContent="What is an infinitive?",a.appendChild(d);var h=document.createElement("p");h.innerHTML='Each verb has an <b>infinitive</b> form, which typically have one of these endings:\n<i>"-er"</i>,\n<i>"-ir"</i>, or\n<i>"-re"</i>.\nIt\'s the form of a verb that has not been conjugated and that you can find in a dictionary.';var p=document.createElement("p");p.innerHTML="For example, <b>parler</b> (to speak), <b>finir</b> (to finish), <b>attendre</b> (to wait).",a.appendChild(h),a.appendChild(p),e.appendChild(a),fd()}function vd(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");t.classList.add("contentNav"),e.appendChild(t);var n=document.createElement("a");n.textContent="Verb conjugation",n.classList.add("verbConjugationLink");var r=document.createElement("span");r.classList.add("icon");var i=document.createElement("i");i.classList.add("fas","fa-chevron-right"),r.appendChild(i);var o=document.createElement("a");o.textContent="The present tense",o.classList.add("presentTenseLink"),t.appendChild(n),t.appendChild(r),t.appendChild(o);var a=document.createElement("span");r.classList.add("icon");var s=document.createElement("i");s.classList.add("fas","fa-chevron-right"),a.appendChild(s);var c=document.createElement("a");c.textContent="Group 1",t.appendChild(a),t.appendChild(c);var l=document.createElement("div");l.classList.add("page-content");var u=document.createElement("h1");u.textContent="Examples of Verbs Conjugated in the Present Tense (group 1)";var d=document.createElement("p");d.innerHTML='<i class="fa-solid fa-bolt"></i> Let\'s look at a few examples of verbs conjugated in the present\n    tense in French:';var h=document.createElement("div");h.classList.add("examples-list"),l.appendChild(u),l.appendChild(d),l.appendChild(h);for(var p=[["<i>J'<b>aime</b> la musique.</i> (I like music.)","<i>Je <b>cherche</b> du travail.</i> (I'm looking for a job.)","<i>Je <b>parle</b> anglais.</i> (I speak English.)"],["<i>Tu <b>aimes</b> la musique.</i> (You like music.)","<i>Tu <b>cherches</b> du travail.</i> (You're looking for a job.)","<i>Tu <b>parles</b> anglais.</i> (You speak English.)"],["<i>Il / elle / on <b>aime</b> la musique.</i> (He / she / one likes music.)","<i>Il / elle / on <b>cherche</b> du travail.</i> (He / she / one is looking for a job.)","<i>Il / elle / on <b>parle</b> anglais.</i> (He / she / one speaks English.)"],["<i>Nous <b>aimons</b> la musique.</i> (We like music.)","<i>Nous <b>cherchons</b> du travail.</i> (We're looking for a job.)","<i>Nous <b>parlons</b> anglais.</i> (We speak English.)"],["<i>Vous <b>aimez</b> la musique.</i> (You like music.)","<i>Vous <b>cherchez</b> du travail.</i> (You're looking for a job.)","<i>Vous <b>parlez</b> anglais.</i> (You speak English.)"],["<i>Ils/elles <b>aiment</b> la musique.</i> (They like music.)","<i>Ils/elles <b>cherchent</b> du travail.</i> (They're looking for a job.)","<i>Ils/elles <b>parlent</b> anglais.</i> (They speak English.)"]],f=0;f<p.length;f++){for(var m=document.createElement("ul"),v=0;v<p[f].length;v++){var g=document.createElement("li");g.innerHTML=p[f][v],m.appendChild(g)}h.appendChild(m)}var y=document.createElement("p");y.innerHTML='<i class="fa-solid fa-bolt"></i> More verbs that follow the same pattern:';var b=document.createElement("p");b.innerHTML="<i><b>chanter</b></i> (to sing), <i><b>marcher</b></i> (to walk), <i><b>regarder</b></i> (to\n        watch), <i><b>demander</b></i> (to ask),\n        <i><b>commencer</b></i> (to start), <i><b>manger</b></i> (to eat),\n        <i><b>travailler</b></i> (to work), <i><b>habiter</b></i> (to live), <i><b>écouter</b></i> (to\n        listen).";var _=document.createElement("p");_.innerHTML="Most verbs with an infinitive ending in '-er' are commonly known as first-group verbs.";var w=document.createElement("h2");w.innerHTML="To conjugate a first-group verb in the present tense, follow these steps:";var E=document.createElement("p");E.innerHTML='Remove the infinitive ending (-er) to get the stem.\n    Example: "parler" becomes "parl-". Add the appropriate ending to the stem. You\'ll find the\n    endings in the table below.',l.appendChild(y),l.appendChild(b),l.appendChild(_),l.appendChild(w),l.appendChild(E);var C=document.createElement("table"),T=document.createElement("thead"),L=document.createElement("tr");["SUBJECT","ENDING","EXAMPLE"].forEach((function(e){var t=document.createElement("th");t.textContent=e,L.appendChild(t)})),T.appendChild(L);var I=document.createElement("tbody");[["je","-e","parle"],["tu","-es","parles"],["il/elle/on","-e","parle"],["nous","-ons","parlons"],["vous","-ez","parlez"],["ils/elles","-ent","parlent"]].forEach((function(e){var t=document.createElement("tr");e.forEach((function(e){var n=document.createElement("td");n.textContent=e,t.appendChild(n)})),I.appendChild(t)})),C.appendChild(T),C.appendChild(I),l.appendChild(C);var k=document.createElement("div");k.classList.add("definition"),l.appendChild(k);var S=document.createElement("p");S.innerHTML='<i class="fa-solid fa-comment"></i> <b>Pronunciation tip</b>';var x=document.createElement("p");x.classList.add("tip"),x.innerHTML="For verbs that follow the pattern above, the present tense endings <i>'-e'</i>, <i>'-es'</i> and <i>'-ent'</i> are not pronounced,\n    so 'parle', 'parles', and 'parlent' have the same pronunciation.",k.appendChild(S),k.appendChild(x);var P=document.createElement("p");P.innerHTML='Note that when a verb starts with a vowel and is conjugated with "je" in the present tense, the "e" from "je" is removed:',l.appendChild(P);var N=document.createElement("ul");N.classList.add("list-no-bullet"),l.appendChild(N),N.innerHTML='<li>- instead of "je aime", you say "j\'aime",</li>\n    <li>- instead of "je écoute", you say "j\'écoute".</li>';var O=document.createElement("h2");O.textContent="Verbs with Spelling Changes";var M=document.createElement("p");M.innerText="Let's look at some '-er' verbs that follow a similar pattern as the verbs above, but undergo some spelling changes often related to pronunciation and spelling rules.";var j=document.createElement("h3");j.textContent="Common patterns and examples of verbs that follow these patterns";var A=document.createElement("h4");A.textContent="Pattern 1: acheter, (se) lever, amener, emmener...",l.appendChild(O),l.appendChild(M),l.appendChild(j),l.appendChild(A);var R=document.createElement("div");R.classList.add("examples-list"),l.appendChild(R);for(var q=[["<i>J'<b>ach<u>è</u>te</b> des vêtements.</i> (I buy clothes.)","<i>Je <b>me l<u>è</u>ve</b> à 8 heures.</i> (I wake up at 8 o'clock.)"],["<i>Tu <b>ach<u>è</u>tes</b> des vêtements.</i> (You buy clothes.)","<i>Tu <b>te l<u>è</u>ves</b> à 8 heures.</i> (You wake up at 8 o'clock.)"],["<i>Il / elle / on <b>ach<u>è</u>te</b> des vêtements.</i> (He / she / one buys clothes.)","<i>Il / elle / on <b>se l<u>è</u>ve</b> à 8 heures.</i> (He / she / one wakes up at 8 o'clock.)"],["<i>Nous <b>achetons</b> des vêtements.</i> (We buy clothes.)","<i><i>Nous <b>nous levons</b> à 8 heures.</i> (We wake up at 8 o'clock.)"],["<i>Vous <b>achetez</b> des vêtements.</i> (You buy clothes.)","<i>Vous <b>vous levez</b> à 8 heures.</i> (You wake up at 8 o'clock.)"],["<i>Ils/elles <b>ach<u>è</u>tent</b> des vêtements.</i> (They buy clothes.)","<i>Ils/elles <b>se l<u>è</u>vent</b> à 8 heures.</i> (They wake up at 8 o'clock.)"]],D=0;D<q.length;D++){for(var H=document.createElement("ul"),F=0;F<q[D].length;F++){var U=document.createElement("li");U.innerHTML=q[D][F],H.appendChild(U)}R.appendChild(H)}var z=document.createElement("h4");z.textContent="Pattern 2: espérer, répéter, accéder, compléter...",l.appendChild(z);var V=document.createElement("div");V.classList.add("examples-list"),l.appendChild(V);for(var W=[["<i>J'<b>esp<u>è</u>re</b> arriver à l'heure.</i> (I hope to arrive on time.)","<i>Je <b>préf<u>è</u>re</b> la pizza.</i> (I prefer pizza.)"],["<i>Tu <b>esp<u>è</u>res</b> arriver à l'heure.</i> (You hope to arrive on time.)","<i>Tu <b>préf<u>è</u>res</b> la pizza.</i> (You prefer pizza.)"],["<i>Il / elle / on <b>esp<u>è</u>re</b> arriver à l'heure.</i> (He / She / One hopes to arrive on time.)","<i>Il / elle / on <b>préf<u>è</u>re</b> la pizza.</i> (He / She / One prefers pizza.)"],["<i>Nous <b>espérons</b> arriver à l'heure.</i> (We hope to arrive on time.)","<i>Nous <b>préférons</b> la pizza.</i> (We prefer pizza.)</li>"],["<i>Vous <b>espérez</b> arriver à l'heure.</i> (You hope to arrive on time.)","<i><i>Vous <b>préférez</b> la pizza.</i> (You prefer pizza.)"],["<i>Ils/elles <b>esp<u>è</u>rent</b> arriver à l'heure.</i> (They hope to arrive on time.)","<i>Ils/elles <b>préf<u>è</u>rent</b> la pizza.</i> (They prefer pizza.)"]],B=0;B<W.length;B++){for(var G=document.createElement("ul"),Y=0;Y<W[B].length;Y++){var $=document.createElement("li");$.innerHTML=W[B][Y],G.appendChild($)}V.appendChild(G)}var J=document.createElement("h4");J.textContent="Pattern 3: appeler, s'appeler, jeter...",l.appendChild(J);var K=document.createElement("div");K.classList.add("list-no-bullet"),l.appendChild(K);for(var Q=["<i>J'<b>appe<u>ll</u>e</b> son frère.</i> (I call his brother.)","<i>Tu <b>appe<u>ll</u>es</b> son frère.</i> (You call his brother.)","<i>Il/ elle/ on <b>appe<u>ll</u>e</b> son frère.</i> (He / She / One calls his brother.)","<i>Nous <b>appelons</b> son frère.</i> (We call his brother.)","<i>Vous <b>appelez</b> son frère.</i> (You call his brother.)","<i>Ils/elles <b>appe<u>ll</u>ent</b> son frère.</i> (They call his brother.)"],X=document.createElement("ul"),Z=0;Z<Q.length;Z++){var ee=document.createElement("li");ee.innerHTML=Q[Z],X.appendChild(ee)}K.appendChild(X),e.appendChild(l),fd()}function gd(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");t.classList.add("contentNav"),e.appendChild(t);var n=document.createElement("a");n.textContent="Verb conjugation",n.classList.add("verbConjugationLink");var r=document.createElement("span");r.classList.add("icon");var i=document.createElement("i");i.classList.add("fas","fa-chevron-right"),r.appendChild(i);var o=document.createElement("a");o.textContent="The present tense",o.classList.add("presentTenseLink"),t.appendChild(n),t.appendChild(r),t.appendChild(o);var a=document.createElement("span");r.classList.add("icon");var s=document.createElement("i");s.classList.add("fas","fa-chevron-right"),a.appendChild(s);var c=document.createElement("a");c.textContent="Group 2",t.appendChild(a),t.appendChild(c);var l=document.createElement("div");l.classList.add("page-content");var u=document.createElement("h1");u.textContent="Examples of Verbs Conjugated in the Present Tense (group 2)";var d=document.createElement("p");d.innerHTML='<i class="fa-solid fa-bolt"></i> Let\'s look at another pattern commonly referred to as 2nd group verbs.';var h=document.createElement("div");h.classList.add("examples-list"),l.appendChild(u),l.appendChild(d),l.appendChild(h);for(var p=[["<i>Je <b>chois<span class='red'>is</span></b> un film.</i> (I choose a movie.)","<i>Je <b>fin<span class='red'>is</span></b> mes études.</i> (I finish my studies.)"],["<i>Tu <b>chois<span class='red'>is</span></b> un film.</i> (You choose a movie.)","<i>Tu <b>fin<span class='red'>is</span></b> tes études.</i> (You finish your studies.)"],["<i>Il / elle <b>chois<span class='red'>it</span></b> un film.</i> (He / She chooses a\n            movie.)","<i>Il / elle <b>fin<span class='red'>it</span></b> ses études.</i> (He / She finishes his /\n            her studies.)"],["<i>Nous <b>chois<span class='red'>issons</span></b> un film.</i> (We choose a movie.)","<i>Nous <b>fin<span class='red'>issons</span></b> nos études.</i> (We finish our studies.)"],["<i>Vous <b>chois<span class='red'>issez</span></b> un film.</i> (You choose a movie.)","<i>Vous <b>fin<span class='red'>issez</span></b> vos études.</i> (You finish your studies.)"],["<i>Ils/elles <b>chois<span class='red'>issent</span></b> un film.</i> (They choose a movie.)","<i>Ils/elles <b>fin<span class='red'>issent</span></b> leurs études.</i> (They finish their studies.)"]],f=0;f<p.length;f++){for(var m=document.createElement("ul"),v=0;v<p[f].length;v++){var g=document.createElement("li");g.innerHTML=p[f][v],m.appendChild(g)}h.appendChild(m)}var y=document.createElement("p");y.innerHTML='<i class="fa-solid fa-bolt"></i> Some common verbs that follow this pattern:';var b=document.createElement("p");b.innerHTML="<i><b>finir</b></i> (to\n        finish), <i><b>choisir</b></i>\n        (to choose),\n        <i><b>réfléchir</b></i> (to think), <i><b>grandir</b></i> (to grow),\n        <i><b>réussir</b></i> (to succeed), <i><b>grossir</b></i> (to gain weight), <i><b>investir</b></i>\n        (to invest),\n        <i><b>remplir</b></i> (to fill (in)), <i><b>atterrir</b></i> (to land).";var _=document.createElement("h2");_.innerHTML="More examples";var w=document.createElement("div");w.classList.add("list-no-bullet"),l.appendChild(y),l.appendChild(b),l.appendChild(_),l.appendChild(w),document.createElement("li");var E=document.createElement("li");E.innerHTML="<i>Tu finis à quelle heure ?</i> (What time do you finish?)";var C=document.createElement("li");C.innerHTML="<i>Je finis tard.</i> (I finish late. / I'm finishing late.)";var T=document.createElement("li");T.innerHTML="<i>Il réussit toujours.</i> (He always succeeds.)",w.appendChild(E),w.appendChild(C),w.appendChild(T);var L=document.createElement("h3");L.innerHTML="Here is a table explaining how to conjugate a 2nd group verb",l.appendChild(L);var I=document.createElement("table"),k=document.createElement("thead"),S=document.createElement("tr");["SUBJECT","ENDING","EXAMPLE"].forEach((function(e){var t=document.createElement("th");t.textContent=e,S.appendChild(t)})),k.appendChild(S);var x=document.createElement("tbody");[["je","-is","choisis"],["tu","-is","choisis"],["il/elle/on","-it","choisit"],["nous","-issons","choisissons"],["vous","-issez","choisissez"],["ils/elles","-issent","choisissent"]].forEach((function(e){var t=document.createElement("tr");e.forEach((function(e){var n=document.createElement("td");n.textContent=e,t.appendChild(n)})),x.appendChild(t)})),I.appendChild(k),I.appendChild(x),l.appendChild(I);var P=document.createElement("p");P.innerHTML='<i class="fa-solid fa-exclamation-triangle"></i> Note that not all verbs that end in "-ir" are\n    conjugated like this. You\'ll see examples in the next chapter.',l.appendChild(P),e.appendChild(l),fd()}function yd(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");t.classList.add("contentNav"),e.appendChild(t);var n=document.createElement("a");n.textContent="Verb conjugation",n.classList.add("verbConjugationLink");var r=document.createElement("span");r.classList.add("icon");var i=document.createElement("i");i.classList.add("fas","fa-chevron-right"),r.appendChild(i);var o=document.createElement("a");o.textContent="The present tense",o.classList.add("presentTenseLink"),t.appendChild(n),t.appendChild(r),t.appendChild(o);var a=document.createElement("span");r.classList.add("icon");var s=document.createElement("i");s.classList.add("fas","fa-chevron-right"),a.appendChild(s);var c=document.createElement("a");c.textContent="Group 3",t.appendChild(a),t.appendChild(c);var l=document.createElement("div");l.classList.add("page-content");var u=document.createElement("h1");u.textContent="3rd Group Verbs in the Present Tense";var d=document.createElement("p");d.innerHTML='<i class="fa-solid fa-lightbulb red"></i> The 3rd group is the most irregular in French. It includes verbs with endings like -ir, -ire, -tre,\n    -dre, -oir, -ondre, -endre.';var h=document.createElement("h2");h.textContent="Common patterns and examples of verbs that follow these patterns";var p=document.createElement("h3");p.classList.add("color3"),p.innerHTML='<i class="fa-solid fa-bolt"></i> Verbs ending in -IR';var f=document.createElement("h4");f.textContent="Pattern 1: partir, sortir, servir, (se) sentir, dormir, mentir...",l.appendChild(u),l.appendChild(d),l.appendChild(h),l.appendChild(p),l.appendChild(f);var m=document.createElement("div");m.classList.add("examples-list"),l.appendChild(m);for(var v=[["<i>Je <b>pars</b> demain.</i> (I'm leaving tomorrow.)","<i>Je <b>sors</b> ce soir.</i> (I'm going out tonight.)"],["<i>Tu <b>pars</b> demain.</i> (You're leaving tomorrow.)","<i>Tu <b>sors</b> ce soir.</i> (You're going out tonight.)"],["<i>Il / elle / on <b>part</b> demain.</i> (He / She / One is leaving tomorrow.)","<i>Il / elle / on <b>sort</b> ce soir.</i> (He / She / One is going out tonight.)"],["<i>Nous <b>partons</b> demain.</i> (We're leaving tomorrow.)","<i>Nous <b>sortons</b> ce soir.</i> (We're going out tonight.)"],["<i>Vous <b>partez</b> demain.</i> (You're leaving tomorrow.)","<i>Vous <b>sortez</b> ce soir.</i> (You're going out tonight.)"],["<i>Ils/elles <b>partent</b> demain.</i> (They're leaving tomorrow.)","<i>Ils/elles <b>sortent</b> ce soir.</i> (They're going out tonight.)"]],g=0;g<v.length;g++){for(var y=document.createElement("ul"),b=0;b<v[g].length;b++){var _=document.createElement("li");_.innerHTML=v[g][b],y.appendChild(_)}m.appendChild(y)}var w=document.createElement("h5");w.innerHTML='<i class="fa-solid fa-bolt"></i> More examples:';var E=document.createElement("div");E.classList.add("list-no-bullet");var C=document.createElement("ul");C.innerHTML="<li><i>Je me sens bien. </i> (I feel good.)</li>\n    <li><i>Les enfants ne dor<b>ment</b> pas très bien.</i> (The children don't sleep very well.)\n    </li>",E.appendChild(C),l.appendChild(w),l.appendChild(E);var T=document.createElement("h4");T.textContent="Pattern 2: offrir, ouvrir, souffrir, couvrir, découvrir...",l.appendChild(T);var L=document.createElement("div");L.classList.add("examples-list"),l.appendChild(L);for(var I=[["<i>J'<b>offre</b> un cadeau.</i> (I offer a gift.)","<i>J'<b>ouvre</b> la porte.</i> (I open the door.)"],["<i>Tu <b>offres</b> un cadeau.</i> (You offer a gift.)","<i>Tu <b>ouvres</b> la porte.</i> (You open the door.)"],["<i>Il / elle / on <b>offre</b> un cadeau.</i> (He / She / One offers a gift.)","<i>Il / elle / on <b>ouvre</b> la porte.</i> (He / She / One opens the door.)"],["<i>Nous <b>offrons</b> un cadeau.</i> (We offer a gift.)","<i>Nous <b>ouvrons</b> la porte.</i> (We open the door.)"],["<i>Vous <b>offrez</b> un cadeau.</i> (You offer a gift.)","<i>Vous <b>ouvrez</b> la porte.</i> (You open the door.)"],["<i>Ils/elles <b>offrent</b> un cadeau.</i> (They offer a gift.)","<i>Ils/elles <b>ouvrent</b> la porte.</i> (They open the door.)"]],k=0;k<I.length;k++){for(var S=document.createElement("ul"),x=0;x<I[k].length;x++){var P=document.createElement("li");P.innerHTML=I[k][x],S.appendChild(P)}L.appendChild(S)}var N=document.createElement("h4");N.textContent="Pattern 3: venir, revenir, devenir, tenir, maintenir...",l.appendChild(N);var O=document.createElement("div");O.classList.add("examples-list"),l.appendChild(O);for(var M=[["<i>Je <b>viens</b> d'Italie.</i> (I come from Italy.)","<i>Je le <b>soutiens</b>.</i> (I support him.)"],["<i>Tu <b>viens</b> d'Italie.</i> (You come from Italy.)","<i>Tu le <b>soutiens</b>.</i> (You support him.)"],["<i>Il / elle / on <b>vient</b> d'Italie.</i> (He / She / One comes from Italy.)","<i>Il / elle / on le <b>soutient</b>.</i> (He / She / One supports him.)"],["<i>Nous <b>venons</b> d'Italie.</i> (We come from Italy.)","<i>Nous le <b>soutenons</b>.</i> (We support him.)"],["<i>Vous <b>venez</b> d'Italie.</i> (You come from Italy.)","<i>Vous le <b>soutenez</b>.</i> (You support him.)"],["<i>Ils/elles <b>viennent</b> d'Italie.</i> (They come from Italy.)","<i>Ils/elles le <b>soutiennent</b>.</i> (They support him.)"]],j=0;j<M.length;j++){for(var A=document.createElement("ul"),R=0;R<M[j].length;R++){var q=document.createElement("li");q.innerHTML=M[j][R],A.appendChild(q)}O.appendChild(A)}var D=document.createElement("h4");D.textContent="Pattern 4: courir, secourir, parcourir...",l.appendChild(D);var H=document.createElement("div");H.classList.add("list-no-bullet"),l.appendChild(H);for(var F=["<i>Je <b>cours</b> vite.</i> (I run fast.)","<i>Tu <b>cours</b> vite.</i> (You run fast.)","<i>Il / elle / on <b>court</b> vite.</i> (He / She / One runs fast.)","<i>Nous <b>courons</b> vite.</i> (We run fast.)","<i>Vous <b>courez</b> vite.</i> (You run fast.)","<i>Ils/elles <b>courent</b> vite.</i> (They run fast.)"],U=document.createElement("ul"),z=0;z<F.length;z++){var V=document.createElement("li");V.innerHTML=F[z],U.appendChild(V)}H.appendChild(U);var W=document.createElement("h3");W.classList.add("color3"),W.innerHTML='<i class="fa-solid fa-bolt"></i> Verbs ending in -IRE';var B=document.createElement("h4");B.textContent="Pattern 1: lire, dire, traduire, conduire...",l.appendChild(W),l.appendChild(B);var G=document.createElement("div");G.classList.add("examples-list"),l.appendChild(G);for(var Y=[["<i>Je <b>lis</b> un livre.</i> (I'm reading a book.)","<i>Je <b>conduis</b> une voiture.</i> (I drive a car.)","<i>Je <b>dis</b> la vérité.</i> (I'm telling the truth.)"],["<i>Tu <b>lis</b> un livre.</i> (You're reading a book.)","<i>Tu <b>conduis</b> une voiture.</i> (You drive a car.)","<i>Tu <b>dis</b> la vérité.</i> (You're telling the truth.)"],["<i>Il / elle / on <b>lit</b> un livre.</i> (He / She / One is reading a book.)","<i>Il / elle / on <b>conduit</b> une voiture.</i> (He / She / One drives a car.)","<i>Il / elle / on <b>dit</b> la vérité.</i> (He / She / One is telling the truth.)"],["<i>Nous <b>lisons</b> un livre.</i> (We're reading a book.)","<i>Nous <b>conduisons</b> une voiture.</i> (We drive a car.)","<i>Nous <b>disons</b> la vérité.</i> (We're telling the truth.)"],["<i>Vous <b>lisez</b> un livre.</i> (You're reading a book.)","<i>Vous <b>conduisez</b> une voiture.</i> (You drive a car.)",'<i>Vous <b>di<span class="red">tes</span></b> la vérité.</i> (You\'re telling the truth.)'],["<i>Ils/elles <b>lisent</b> un livre.</i> (They're reading a book.)","<i>Ils/elles <b>conduisent</b> une voiture.</i> (They drive a car.)","<i>Ils/elles <b>disent</b> la vérité.</i> (They're telling the truth.)"]],$=0;$<Y.length;$++){for(var J=document.createElement("ul"),K=0;K<Y[$].length;K++){var Q=document.createElement("li");Q.innerHTML=Y[$][K],J.appendChild(Q)}G.appendChild(J)}var X=document.createElement("h4");X.textContent="Pattern 2: écrire, décrire, (s')inscrire... ",l.appendChild(X);var Z=document.createElement("div");Z.classList.add("examples-list"),l.appendChild(Z);for(var ee=[["<i>J'<b>écris</b> une lettre.</i> (I'm writing a letter.)","<i>Je <b>m'inscris</b> à un cours de français.</i> (I'm signing up for a French course.)"],["<i>Tu <b>écris</b> une lettre.</i> (You're writing a letter.)","<i>Tu <b>t'inscris</b> à un cours de français.</i> (You're signing up for a French course.)"],["<i>Il/elle/on <b>écrit</b> une lettre.</i> (He's writing a letter.)","<i>Il/elle/on <b>s'inscrit</b> à un cours de français.</i> (He/she/one is signing up for a\n                French course.)"],["<i>Nous <b>écrivons</b> une lettre.</i> (We're writing a letter.)","<i>Nous nous <b>inscrivons</b> à un cours de français.</i> (We're signing up for a French\n                course.)"],["<i>Vous <b>écrivez</b> une lettre.</i> (You're writing a letter.)","<i>Vous vous <b>inscrivez</b> à un cours de français.</i> (You're signing up for a French\n                course.)"],["<i>Ils/elles <b>écrivent</b> une lettre.</i> (They're writing a letter.)","<i>Ils/elles <b>s'inscrivent</b> à un cours de français.</i> (They're signing up for a\n                French course.)"]],te=0;te<ee.length;te++){for(var ne=document.createElement("ul"),re=0;re<ee[te].length;re++){var ie=document.createElement("li");ie.innerHTML=ee[te][re],ne.appendChild(ie)}Z.appendChild(ne)}var oe=document.createElement("h3");oe.classList.add("color3"),oe.innerHTML='<i class="fa-solid fa-bolt"></i> Verbs ending in -TRE';var ae=document.createElement("h4");ae.textContent="Pattern 1: mettre, promettre, remettre, (se) battre...",l.appendChild(oe),l.appendChild(ae);var se=document.createElement("div");se.classList.add("list-no-bullet"),l.appendChild(se);for(var ce=["<i>Je <b>mets</b> une veste.</i> (I'm putting on a jacket.)","<i>Tu <b>mets</b> une veste.</i> (You're putting on a jacket.)","<i>Il/elle/on <b>met</b> une veste.</i> (He/she/one is putting on a jacket.)","<i>Nous <b>mettons</b> une veste.</i> (We're putting on a jacket.)","<i>Vous <b>mettez</b> une veste.</i> (You're putting on a jacket.)","<i>Ils/elles <b>mettent</b> une veste.</i> (They're putting on a jacket.)"],le=document.createElement("ul"),ue=0;ue<ce.length;ue++){var de=document.createElement("li");de.innerHTML=ce[ue],le.appendChild(de)}se.appendChild(le);var he=document.createElement("h4");he.textContent="Pattern 2: connaître, reconnaître, naître... ",l.appendChild(he);var pe=document.createElement("div");pe.classList.add("list-no-bullet"),l.appendChild(pe);for(var fe=["<i>Je <b>connais</b> cette ville.</i> (I know this city.)","<i>Tu <b>connais</b> cette ville.</i> (You know this city.)","<i>Il/elle/on <b>connaît</b> cette ville.</i> (He/she/one knows this city.)","<i>Nous <b>connaissons</b> cette ville.</i> (We know this city.)","<i>Vous <b>connaissez</b> cette ville.</i> (You know this city.)","<i>Ils/elles <b>connaissent</b> cette ville.</i> (They know this city.)"],me=document.createElement("ul"),ve=0;ve<fe.length;ve++){var ge=document.createElement("li");ge.innerHTML=fe[ve],me.appendChild(ge)}pe.appendChild(me);var ye=document.createElement("h3");ye.classList.add("color3"),ye.innerHTML='<i class="fa-solid fa-bolt"></i> Verbs ending in -DRE';var be=document.createElement("h4");be.textContent="Pattern 1: prendre, apprendre, comprendre...",l.appendChild(ye),l.appendChild(be);var _e=document.createElement("div");_e.classList.add("examples-list"),l.appendChild(_e);for(var we=[["<i>J'<b>apprends</b> le français.</i> (I'm learning French.)","<i>Je <b>prends</b> une photo.</i> (I'm taking a photo.)"],["<i>Tu <b>apprends</b> le français.</i> (You're learning French.)","<i>Tu <b>prends</b> une photo.</i> (You're taking a photo.)"],["<i>Il/elle/on <b>apprend</b> le français.</i> (He/she/one is learning French.)","<i>Il/elle/on <b>prend</b> une photo.</i> (He/she/one is taking a photo.)"],["<i>Nous <b>apprenons</b> le français.</i> (We're learning French.)","<i>Nous <b>prenons</b> une photo.</i> (We're taking a photo.)"],["<i>Vous <b>apprenez</b> le français.</i> (You're learning French.)","<i>Vous <b>prenez</b> une photo.</i> (You're taking a photo.)"],["<i>Ils/elles <b>apprennent</b> le français.</i> (They're learning French.)","<i>Ils/elles <b>prennent</b> une photo.</i> (They're taking a photo.)"]],Ee=0;Ee<we.length;Ee++){for(var Ce=document.createElement("ul"),Te=0;Te<we[Ee].length;Te++){var Le=document.createElement("li");Le.innerHTML=we[Ee][Te],Ce.appendChild(Le)}_e.appendChild(Ce)}var Ie=document.createElement("h4");Ie.textContent="Pattern 2: attendre, entendre, répondre, perdre, vendre…",l.appendChild(Ie);var ke=document.createElement("div");ke.classList.add("list-no-bullet"),l.appendChild(ke);for(var Se=["<i>J'<b>attends</b> le bus.</i> (I'm waiting for the bus.)","<i>Tu <b>attends</b> le bus.</i> (You're waiting for the bus.)","<i>Il/elle/on <b>attend</b> le bus.</i> (He/she/one is waiting for the bus.)","<i>Nous <b>attendons</b> le bus.</i> (We're waiting for the bus.)","<i>Vous <b>attendez</b> le bus.</i> (You're waiting for the bus.)","<i>Ils/elles <b>attendent</b> le bus.</i> (They're waiting for the bus.)"],xe=document.createElement("ul"),Pe=0;Pe<Se.length;Pe++){var Ne=document.createElement("li");Ne.innerHTML=Se[Pe],xe.appendChild(Ne)}ke.appendChild(xe);var Oe=document.createElement("h4");Oe.textContent="Pattern 3: éteindre, peindre, joindre, rejoindre, se plaindre...",l.appendChild(Oe);var Me=document.createElement("div");Me.classList.add("examples-list"),l.appendChild(Me);for(var je=[["<i>J'<b>éteins</b> la lumière.</i> (I turn off the light.)","<i>Je la <b>rejoins</b> plus tard.</i> (I'll join her later.)"],["<i>Tu <b>éteins</b> la lumière.</i> (You turn off the light.)","<i>Tu la <b>rejoins</b> plus tard.</i> (You'll join her later.)"],["<i>Il/elle/on <b>éteint</b> la lumière.</i> (He/she/one turns off the light.)","<i>Il/elle/on la <b>rejoint</b> plus tard.</i> (He/she/one will join her later.)"],["<i>Nous <b>éteignons</b> la lumière.</i> (We turn off the light.)","<i>Nous la <b>rejoignons</b> plus tard.</i> (We'll join her later.)"],["<i>Vous <b>éteignez</b> la lumière.</i> (You turn off the light.)","<i>Vous la <b>rejoignez</b> plus tard.</i> (You'll join her later.)"],["<i>Ils/elles <b>éteignent</b> la lumière.</i> (They turn off the light.)","<i>Ils/elles la <b>rejoignent</b> plus tard.</i> (They'll join her later.)"]],Ae=0;Ae<je.length;Ae++){for(var Re=document.createElement("ul"),qe=0;qe<je[Ae].length;qe++){var De=document.createElement("li");De.innerHTML=je[Ae][qe],Re.appendChild(De)}Me.appendChild(Re)}var He=document.createElement("h3");He.classList.add("color3"),He.innerHTML='<i class="fa-solid fa-bolt"></i>Verbs ending in -OIR';var Fe=document.createElement("h4");Fe.textContent="Pattern 1: devoir, recevoir...",l.appendChild(He),l.appendChild(Fe);var Ue=document.createElement("div");Ue.classList.add("examples-list"),l.appendChild(Ue);for(var ze=[["<i>Je <b>dois</b> partir.</i> (I have to go.)","<i>Je <b>re<span class='red'>ç</span>ois</b> des messages.</i> (I get messages.)"],["<i>Tu <b>dois</b> partir.</i> (You have to go.)","<i>Tu <b>re<span class='red'>ç</span>ois</b> des messages.</i> (You get messages.)"],["<i>Il/elle/on <b>doit</b> partir.</i> (He/she/one has to go.)","<i>Il/elle/on <b>re<span class='red'>ç</span>oit</b> des messages.</i> (He/she/one gets messages.)"],["<i>Nous <b>devons</b> partir.</i> (We have to go.)","<i>Nous <b>recevons</b> des messages.</i> (We get messages.)"],["<i>Vous <b>devez</b> partir.</i> (You have to go.)","<i>Vous <b>recevez</b> des messages.</i> (You get messages.)"],["<i>Ils/elles <b>doivent</b> partir.</i> (They have to go.)","<i>Ils/elles <b>re<span class='red'>ç</span>oivent</b> des messages.</i> (They get messages.)"]],Ve=0;Ve<ze.length;Ve++){for(var We=document.createElement("ul"),Be=0;Be<ze[Ve].length;Be++){var Ge=document.createElement("li");Ge.innerHTML=ze[Ve][Be],We.appendChild(Ge)}Ue.appendChild(We)}var Ye=document.createElement("h4");Ye.textContent="Pattern 2: vouloir, pouvoir...",l.appendChild(Ye);var $e=document.createElement("div");$e.classList.add("examples-list"),l.appendChild($e);for(var Je=[["<i>Je <b>veux</b> les aider.</i> (I want to help them.)","<i>Je <b>peux</b> laisser un message.</i> (I can leave a message.)"],["<i>Tu <b>veux</b> les aider.</i> (You want to help them.)","<i>Tu <b>peux</b> laisser un message.</i> (You can leave a message.)"],["<i>Il/elle/on <b>veut</b> les aider.</i> (He/she/one wants to help them.)","<i>Il/elle/on <b>peut</b> laisser un message.</i> (He/she/one can leave a message.)"],["<i>Nous <b>voulons</b> les aider.</i> (We want to help them.)","<i>Nous <b>pouvons</b> laisser un message.</i> (We can leave a message.)"],["<i>Vous <b>voulez</b> les aider.</i> (You want to help them.)","<i>Vous <b>pouvez</b> laisser un message.</i> (You can leave a message.)"],["<i>Ils/elles <b>veulent</b> les aider.</i> (They want to help them.)","<i>Ils/elles <b>peuvent</b> laisser un message.</i> (They can leave a message.)"]],Ke=0;Ke<Je.length;Ke++){for(var Qe=document.createElement("ul"),Xe=0;Xe<Je[Ke].length;Xe++){var Ze=document.createElement("li");Ze.innerHTML=Je[Ke][Xe],Qe.appendChild(Ze)}$e.appendChild(Qe)}var et=document.createElement("p");et.innerHTML='<i class="fa-solid fa-exclamation-triangle"></i> Here are two important verbs that don\'t exactly\n    follow any of the patterns above: <b><i>voir</i></b> (to see), <b><i>savoir</i></b> (to know, to\n    know how to).',l.appendChild(et);var tt=document.createElement("div");tt.classList.add("examples-list"),l.appendChild(tt);for(var nt=[["<i>Je <b>vois</b> une étoile.</i> (I see a star.)","<i>Je <b>sais</b> cuisiner.</i> (I know how to cook.)"],["<i>Tu <b>vois</b> une étoile.</i> (You see a star.)","<i>Tu <b>sais</b> cuisiner.</i> (You know how to cook.)"],["<i>Il/elle/on <b>voit</b> une étoile.</i> (He/she/one sees a star.)","<i>Il/elle/on <b>sait</b> cuisiner.</i> (He/she/one knows how to cook.)"],["<i>Nous <b>voyons</b> une étoile.</i> (We see a star.)","<i>Nous <b>savons</b> cuisiner.</i> (We know how to cook.)"],["<i>Vous <b>voyez</b> une étoile.</i> (You see a star.)","<i>Vous <b>savez</b> cuisiner.</i> (You know how to cook.)"],["<i>Ils/elles <b>voient</b> une étoile.</i> (They see a star.)","<i>Ils/elles <b>savent</b> cuisiner.</i> (They know how to cook.)"]],rt=0;rt<nt.length;rt++){for(var it=document.createElement("ul"),ot=0;ot<nt[rt].length;ot++){var at=document.createElement("li");at.innerHTML=nt[rt][ot],it.appendChild(at)}tt.appendChild(it)}var st=document.createElement("h3");st.classList.add("red"),st.innerHTML='<i class="fa-solid fa-bolt"></i> Verbs ending in -VRE';var ct=document.createElement("h4");ct.textContent="Pattern: vivre, suivre...",l.appendChild(st),l.appendChild(ct);var lt=document.createElement("div");lt.classList.add("examples-list"),l.appendChild(lt);for(var ut=[["<i>Je <b>vis</b> à Paris.</i> (I live in Paris.)","<i>Je <b>suis</b> ses conseils.</i> (I follow his/her advice.)"],["<i>Tu <b>vis</b> à Paris.</i> (You live in Paris.)","<i>Tu <b>suis</b> ses conseils.</i> (You follow his/her advice.)"],["<i>Il/elle/on <b>vit</b> à Paris.</i> (He/she/one lives in Paris.)","<i>Il/elle/on <b>suit</b> ses conseils.</i> (He/she/one follows his/her advice.)"],["<i>Nous <b>vivons</b> à Paris.</i> (We live in Paris.)","<i>Nous <b>suivons</b> ses conseils.</i> (We follow his/her advice.)"],["<i>Vous <b>vivez</b> à Paris.</i> (You live in Paris.)","<i>Vous <b>suivez</b> ses conseils.</i> (You follow his/her advice.)"],["<i>Ils/elles <b>vivent</b> à Paris.</i> (They live in Paris.)","<i>Ils/elles <b>suivent</b> ses conseils.</i> (They follow his/her advice.)"]],dt=0;dt<ut.length;dt++){for(var ht=document.createElement("ul"),pt=0;pt<ut[dt].length;pt++){var ft=document.createElement("li");ft.innerHTML=ut[dt][pt],ht.appendChild(ft)}lt.appendChild(ht)}var mt=document.createElement("h3");mt.classList.add("red"),mt.innerHTML='<i class="fa-solid fa-bolt"></i> Verbs ending in -OIRE';var vt=document.createElement("h4");vt.innerHTML="The verbs <b><i>boire</i></b> and <b><i>croire</i></b> follow 2 slightly different patterns:",l.appendChild(mt),l.appendChild(vt);var gt=document.createElement("div");gt.classList.add("examples-list"),l.appendChild(gt);for(var yt=[["<i>Je <b>bois</b> de l'eau.</i> (I drink water.)","<i>Je <b>crois</b> que c'est vrai.</i> (I think it's true.)"],["<i>Tu <b>bois</b> de l'eau.</i> (You drink water.)","<i>Tu <b>crois</b> que c'est vrai.</i> (You think it's true.)"],["<i>Il/elle/on <b>boit</b> de l'eau.</i> (He/she/one drinks water.)","<i>Il/elle/on <b>croit</b> que c'est vrai.</i> (He/she/one thinks it's true.)"],["<i>Nous <b>buvons</b> de l'eau.</i> (We drink water.)","<i>Nous <b>croyons</b> que c'est vrai.</i> (We think it's true.)"],["<i>Vous <b>buvez</b> de l'eau.</i> (You drink water.)","<i>Vous <b>croyez</b> que c'est vrai.</i> (You think it's true.)"],["<i>Ils/elles <b>boivent</b> de l'eau.</i> (They drink water.)","<i>Ils/elles <b>croient</b> que c'est vrai.</i> (They think it's true.)"]],bt=0;bt<yt.length;bt++){for(var _t=document.createElement("ul"),wt=0;wt<yt[bt].length;wt++){var Et=document.createElement("li");Et.innerHTML=yt[bt][wt],_t.appendChild(Et)}gt.appendChild(_t)}e.appendChild(l),fd()}function bd(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");t.classList.add("contentNav"),e.appendChild(t);var n=document.createElement("a");n.textContent="Verb conjugation",n.classList.add("verbConjugationLink");var r=document.createElement("span");r.classList.add("icon");var i=document.createElement("i");i.classList.add("fas","fa-chevron-right"),r.appendChild(i);var o=document.createElement("a");o.textContent="The present tense",o.classList.add("presentTenseLink"),t.appendChild(n),t.appendChild(r),t.appendChild(o);var a=document.createElement("span");r.classList.add("icon");var s=document.createElement("i");s.classList.add("fas","fa-chevron-right"),a.appendChild(s);var c=document.createElement("a");c.textContent="Irregular verbs",t.appendChild(a),t.appendChild(c);var l=document.createElement("div");l.classList.add("page-content");var u=document.createElement("h1");u.textContent="Irregular Verbs in the Present Tense";var d=document.createElement("p");d.innerHTML="Let's look at 4 very common irregular verbs conjugated in the present tense:\n    <b><i>être</i></b> (to be), <i><b>avoir</i></b> (to have), <i><b>aller</i></b> (to go),\n    <i><b>faire</i></b> (to do, to make).",l.appendChild(u),l.appendChild(d);var h=document.createElement("div");h.classList.add("examples-list"),l.appendChild(h);for(var p=[["<i>Je <b>suis</b> fatigué.</i> (I'm tired.)","<i>J'<b>ai</b> une voiture.</i> (I have a car.)","<i>Je <b>vais</b> au travail.</i> (I'm going to work.)","<i>Je <b>fais</b> du yoga.</i> (I do yoga.)"],["<i>Tu <b>es</b> fatigué.</i> (You're tired.)","<i>Tu <b>as</b> une voiture.</i> (You have a car.)","<i>Tu <b>vas</b> au travail.</i> (You're going to work.)","<i>Tu <b>fais</b> du yoga.</i> (You do yoga.)"],["<i>Il/elle/on <b>est</b> fatigué.</i> (He/she/one is tired.)","<i>Il/elle/on <b>a</b> une voiture.</i> (He/she/one has a car.)","<i>Il/elle/on <b>va</b> au travail.</i> (He/she/one is going to work.)","<i>Il/elle/on <b>fait</b> du yoga.</i> (He/she/one does yoga.)"],["<i>Nous <b>sommes</b> fatigués.</i> (We're tired.)","<i>Nous <b>avons</b> une voiture.</i> (We have a car.)","<i>Nous <b>allons</b> au travail.</i> (We're going to work.)","<i>Nous <b>faisons</b> du yoga.</i> (We do yoga.)"],["<i>Vous <b>êtes</b> fatigués.</i> (You're tired.)","<i>Vous <b>avez</b> une voiture.</i> (You have a car.)","<i>Vous <b>allez</b> au travail.</i> (You're going to work.)","<i>Vous <b>faites</b> du yoga.</i> (You do yoga.)"],["<i>Ils/elles <b>sont</b> fatigués.</i> (They're tired.)","<i>Ils/elles <b>ont</b> une voiture.</i> (They have a car.)","<i>Ils/elles <b>vont</b> au travail.</i> (They're going to work.)","<i>Ils/elles <b>font</b> du yoga.</i> (They do yoga.)"]],f=0;f<p.length;f++){for(var m=document.createElement("ul"),v=0;v<p[f].length;v++){var g=document.createElement("li");g.innerHTML=p[f][v],m.appendChild(g)}h.appendChild(m)}var y=document.createElement("div"),b=document.createElement("p");b.classList.add("tip"),b.innerHTML='<i class="fa-solid fa-exclamation-triangle"></i> Although in most cases <i>"être"</i> can be\n    translated as "to be" and <i>"avoir"</i> as "to have",\n    this isn\'t always the case. For example, to say "I\'m hungry" you use "avoir" and not "être":\n    <i>"<b>J\'ai</b> faim"</i> (literally "I have hunger").\n    To say how old you are, it\'s the same thing: <i>"<b>J\'ai</b> 25 ans"</i> and not "Je <span\n        class="red">suis</span> 25 ans".',y.appendChild(b),l.appendChild(y),e.appendChild(l),fd()}function _d(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");t.classList.add("contentNav"),e.appendChild(t);var n=document.createElement("a");n.textContent="Verb conjugation",n.classList.add("verbConjugationLink");var r=document.createElement("span");r.classList.add("icon");var i=document.createElement("i");i.classList.add("fas","fa-chevron-right"),r.appendChild(i);var o=document.createElement("a");o.textContent="Passé Composé",o.classList.add("pastTenseLink");var a=document.createElement("span");r.classList.add("icon");var s=document.createElement("i");s.classList.add("fas","fa-chevron-right"),a.appendChild(s);var c=document.createElement("a");c.textContent="'Avoir' VS 'être'",t.appendChild(n),t.appendChild(r),t.appendChild(o),t.appendChild(a),t.appendChild(c);var l=document.createElement("div");l.classList.add("page-content");var u=document.createElement("h1");u.innerHTML="The past tense <span class='tense-name'>Passé Composé</span>";var d=document.createElement("h2");d.innerHTML="Verbs conjugated with 'avoir' and 'être'";var h=document.createElement("div");h.classList.add("definition");var p=document.createElement("p");p.innerHTML='<i class="fa-solid fa-lightbulb"></i> In French, most verbs form their Passé Composé with <span class="tense-name">avoir</span>:\n        <i>"j\'ai regardé"</i>, <i>"elle a donné"</i>, <i>"il a acheté"</i>, etc.',h.appendChild(p);var f=document.createElement("p");f.classList.add("tip"),f.innerHTML="There are two main groups of verbs that form their perfect tense with <i></i>'être'</i> instead\n    of avoir:",l.appendChild(u),l.appendChild(d),l.appendChild(h),l.appendChild(f);var m=document.createElement("ul");m.classList.add("list-no-bullet"),m.innerHTML='<li><i class="fa-solid fa-arrow-right"></i> all reflexive verbs (verbs with \'se\' in the\n    infinitive form: se lever, se coucher, se\n    raser…)</li>\n    <li><i class="fa-solid fa-arrow-right"></i> a small group of French verbs that are mainly used\n    to talk about movement or a change of some kind (see the table below).</li>',l.appendChild(m);var v=document.createElement("table"),g=document.createElement("thead"),y=document.createElement("tr"),b=document.createElement("th");b.colSpan=3,b.className="table-title",b.textContent="Common French verbs conjugated with 'être'",y.appendChild(b),g.appendChild(y);var _=document.createElement("tr");["Verb","Translation","Conjugation example"].forEach((function(e){var t=document.createElement("th");t.textContent=e,_.appendChild(t)})),g.appendChild(_);var w=document.createElement("tbody");[{verb:"aller",translation:"to go",example:"Je suis allé."},{verb:"venir",translation:"to come",example:"Elle est venue."},{verb:"revenir",translation:"to come back",example:"Nous sommes revenus."},{verb:"arriver",translation:"to arrive",example:"Ils sont arrivés."},{verb:"entrer",translation:"to enter",example:"Il est entré."},{verb:"rentrer",translation:"to come (back) home",example:"Tu es rentré."},{verb:"partir",translation:"to leave",example:"Elle est partie."},{verb:"rester",translation:"to stay",example:"Je suis resté."},{verb:"sortir",translation:"to go out",example:"Ils sont sortis."},{verb:"retourner",translation:"to go back",example:"Nous sommes retournés."},{verb:"tomber",translation:"to fall",example:"Vous êtes tombé."}].forEach((function(e){var t=document.createElement("tr"),n=document.createElement("td"),r=document.createElement("b");r.textContent=e.verb,n.appendChild(r),t.appendChild(n);var i=document.createElement("td");i.textContent=e.translation,t.appendChild(i);var o=document.createElement("td");o.textContent=e.example,t.appendChild(o),w.appendChild(t)})),v.appendChild(g),v.appendChild(w),l.appendChild(v);var E=document.createElement("p");E.classList.add("tip"),E.innerHTML="A few more verbs conjugated with 'être': <i><b>devenir</i></b> (to become), <b><i>monter</i></b>\n    (to go up), <i><b>descendre</b></i> (to go down), <i><b>passer</b></i> (to go past, to pass (by)), <i><b>naître</b></i> (to be born),\n    <i><b>mourir</b></i> (to die).";var C=document.createElement("p");C.classList.add("tip"),C.innerHTML="<i class=\"fa-solid fa-exclamation-triangle\"></i> Note that the verbs <i>passer</i>,\n    <i>entrer</i>, <i>sortir</i>, <i>monter</i>, <i>retourner</i> can also be conjugated with 'avoir' in some cases.",l.appendChild(E),l.appendChild(C),e.appendChild(l),fd()}function wd(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");t.classList.add("contentNav"),e.appendChild(t);var n=document.createElement("a");n.textContent="Verb conjugation",n.classList.add("verbConjugationLink");var r=document.createElement("span");r.classList.add("icon");var i=document.createElement("i");i.classList.add("fas","fa-chevron-right"),r.appendChild(i);var o=document.createElement("a");o.textContent="Passé Composé",o.classList.add("pastTenseLink");var a=document.createElement("span");r.classList.add("icon");var s=document.createElement("i");s.classList.add("fas","fa-chevron-right"),a.appendChild(s);var c=document.createElement("a");c.textContent="Past participle",t.appendChild(n),t.appendChild(r),t.appendChild(o),t.appendChild(a),t.appendChild(c);var l=document.createElement("div");l.classList.add("page-content");var u=document.createElement("h1");u.innerHTML="The past tense <span class='tense-name'>Passé Composé</span>";var d=document.createElement("h2");d.innerHTML="The past participle",l.appendChild(u),l.appendChild(d);var h=document.createElement("div");h.classList.add("definition");var p=document.createElement("p");p.innerHTML="As mentioned in a previous chapter, to conjugate a French verb in the Passé Composé, you need to know its <b>past participle</b> form.",h.appendChild(p),l.appendChild(h);var f=document.createElement("div");f.innerHTML="<p class='tip'><i class=\"fa-solid fa-bolt\"></i> To form the <b>past participle</b> of\n    <b>-er verbs</b>, you replace the <b>-er</b> at the end of the infinitive with <b>-é</b>.</p>",l.appendChild(f);var m=document.createElement("table"),v=document.createElement("thead"),g=document.createElement("tr");["Infinitive","Translation","Past participle"].forEach((function(e){var t=document.createElement("th");t.textContent=e,g.appendChild(t)})),v.appendChild(g),m.appendChild(v);var y=document.createElement("tbody");[["<b>parler</b>","to speak",'<b>parl<span class="red">é</span></b>'],["<b>aller</b>","to go",'<b>all<span class="red">é</span></b>'],["<b>manger</b>","to eat",'<b>mang<span class="red">é</span></b>']].forEach((function(e){var t=document.createElement("tr");e.forEach((function(e){var n=document.createElement("td");n.innerHTML=e,t.appendChild(n)})),y.appendChild(t)})),m.appendChild(y),l.appendChild(m);var b=document.createElement("div");b.classList.add("examples");var _=document.createElement("p");_.textContent="Here are a few examples:",l.appendChild(b),b.appendChild(_);var w=document.createElement("ul");w.classList.add("list-no-bullet"),b.appendChild(w),w.innerHTML="<li><i>Je <u><b>suis arrivé</b></u> à huit heures.</i> (I arrived at eight o'clock.)</li>\n    <li><i>Il <u><b>a parlé</b></u> à Marie.</i> (He spoke to Marie.)</li>";var E=document.createElement("div");E.innerHTML="<p class='tip'><i class=\"fa-solid fa-bolt\"></i> For <b>-ir verbs</b>, you usually replace\n    the <b>-ir</b> at the end of the infinitive with <b>-i</b>.</p>",l.appendChild(E);var C=document.createElement("table"),T=document.createElement("thead"),L=document.createElement("tr");["Infinitive","Translation","Past participle"].forEach((function(e){var t=document.createElement("th");t.textContent=e,L.appendChild(t)})),T.appendChild(L),C.appendChild(T);var I=document.createElement("tbody");[["<b>finir</b>","to finish",'<b>fin<span class="red">i</span></b>'],["<b>dormir</b>","to sleep",'<b>dorm<span class="red">i</span></b>'],["<b>partir</b>","to leave",'<b>part<span class="red">i</span></b>']].forEach((function(e){var t=document.createElement("tr");e.forEach((function(e){var n=document.createElement("td");n.innerHTML=e,t.appendChild(n)})),I.appendChild(t)})),C.appendChild(I),l.appendChild(C);var k=document.createElement("div");k.classList.add("examples");var S=document.createElement("p");S.textContent="Here are a few examples:",l.appendChild(k),k.appendChild(S);var x=document.createElement("ul");x.classList.add("list-no-bullet"),k.appendChild(x),x.innerHTML="<li><i>Il <u><b>a</b></u> bien <b><u>dormi</b></u> cette nuit.</i> (He slept well last night.)</li>\n    <li><i>Elle <b><u>a grandi</b></u> en France.</i> (She grew up in France.)</li>";var P=document.createElement("div");P.innerHTML='<p class="tip"><i class="fa-solid fa-exclamation-triangle"></i> Verbs like <i><b>ouvrir</b></i>,\n    <i><b>couvrir</b></i>, <i><b>découvrir</b></i>,\n    <i><b>offrir</b></i>, <i><b>souffrir</b></i> form their past participle\n    with <b>-ert</b> at the end:\n</p>',l.appendChild(P);var N=document.createElement("table"),O=document.createElement("thead"),M=document.createElement("tr");["Infinitive","Translation","Past participle"].forEach((function(e){var t=document.createElement("th");t.textContent=e,M.appendChild(t)})),O.appendChild(M),N.appendChild(O);var j=document.createElement("tbody");[["<b>ouvrir</b>","to open",'<b>ouv<span class="red">ert</span></b>'],["<b>couvrir</b>","to cover",'<b>couv<span class="red">ert</span></b>'],["<b>découvrir</b>","to discover",'<b>découv<span class="red">ert</span></b>'],["<b>offrir</b>","to offer",'<b>off<span class="red">ert</span></b>']].forEach((function(e){var t=document.createElement("tr");e.forEach((function(e){var n=document.createElement("td");n.innerHTML=e,t.appendChild(n)})),j.appendChild(t)})),N.appendChild(j),l.appendChild(N);var A=document.createElement("div");A.innerHTML='<p><i class="fa-solid fa-exclamation-triangle"></i> <i class="fa-solid fa-exclamation-triangle"></i> Some -ir verbs like\n        <i><b>venir</b></i>, <i><b>tenir</b></i>, <i><b>courir</b></i> are irregular and they don\'t follow these patterns \n        (see the table of exceptions at the bottom of the page).</p>',l.appendChild(A);var R=document.createElement("div");R.innerHTML='<p class="tip"><i class="fa-solid fa-bolt"></i> Many verbs ending in <b>-dre</b> form their past\n    participle by replacing the <b>-re</b> ending with <b>-u</b>.</p>',l.appendChild(R);var q=document.createElement("table"),D=document.createElement("thead"),H=document.createElement("tr");["Infinitive","Translation","Past participle"].forEach((function(e){var t=document.createElement("th");t.textContent=e,H.appendChild(t)})),D.appendChild(H),q.appendChild(D);var F=document.createElement("tbody");[["<b>attendre</b>","to wait",'<b>attend<span class="red">u</span></b>'],["<b>entendre</b>","to hear",'<b>entend<span class="red">u</span></b>'],["<b>répondre</b>","to answer, to reply",'<b>répond<span class="red">u</span></b>'],["<b>perdre</b>","to lose",'<b>perd<span class="red">u</span></b>']].forEach((function(e){var t=document.createElement("tr");e.forEach((function(e){var n=document.createElement("td");n.innerHTML=e,t.appendChild(n)})),F.appendChild(t)})),q.appendChild(F),l.appendChild(q);var U=document.createElement("div");U.classList.add("examples");var z=document.createElement("p");z.textContent="Take a look at these examples:",l.appendChild(U),U.appendChild(z);var V=document.createElement("ul");V.classList.add("list-no-bullet"),U.appendChild(V),V.innerHTML="<li><i>Je t'<b><u>ai attendu</b></u> pendant une heure.</i> (I waited for you for an hour.)</li>\n    <li><i>Il ne m'<b><u>a</b></u> pas <b><u>répondu</b></u></i> (He didn't reply.)</li>";var W=document.createElement("div");W.innerHTML='<p class="tip"><i class="fa-solid fa-bolt"></i> Verbs like <b>prendre</b>, <b>apprendre</b>,\n    <b>comprendre</b>, <b>reprendre</b> follow a different pattern: </p>',l.appendChild(W);var B=document.createElement("table"),G=document.createElement("thead"),Y=document.createElement("tr");["Infinitive","Translation","Past participle"].forEach((function(e){var t=document.createElement("th");t.textContent=e,Y.appendChild(t)})),G.appendChild(Y),B.appendChild(G);var $=document.createElement("tbody");[["<b>prendre</b>","to take",'<b>pr<span class="red">is</span></b>'],["<b>apprendre</b>","to learn",'<b>appr<span class="red">is</span></b>'],["<b>comprendre</b>","to understand",'<b>compr<span class="red">is</span></b>'],["<b>reprendre</b>","to take back, to have some more",'<b>repr<span class="red">is</span></b>']].forEach((function(e){var t=document.createElement("tr");e.forEach((function(e){var n=document.createElement("td");n.innerHTML=e,t.appendChild(n)})),$.appendChild(t)})),B.appendChild($),l.appendChild(B);var J=document.createElement("div");J.classList.add("examples");var K=document.createElement("p");K.textContent="Take a look at these examples:",l.appendChild(J),J.appendChild(K);var Q=document.createElement("ul");Q.classList.add("list-no-bullet"),J.appendChild(Q),Q.innerHTML="<li><i>J'<b><u>ai pris</b></u> le train ce matin.</i> (I took the train this morning.)</li>\n    <li><i>J'<b><u>ai appris</b></u> à conduire.</i> (I learned to drive.)</li>";var X=document.createElement("div");X.innerHTML='<p class="tip"><i class="fa-solid fa-bolt"></i> To conjugate verbs ending in <b>-oindre</b>,\n    <b>-eindre</b> and\n    <b>-aindre</b> in the Passé Composé, replace the <b>-dre</b> at the end of the infinitive with\n    <b>-t</b>:</p>',l.appendChild(X);var Z=document.createElement("table"),ee=document.createElement("thead"),te=document.createElement("tr");["Infinitive","Translation","Past participle"].forEach((function(e){var t=document.createElement("th");t.textContent=e,te.appendChild(t)})),ee.appendChild(te),Z.appendChild(ee);var ne=document.createElement("tbody");[["<b>rejoindre</b>","to join, to meet",'<b>rejoin<span class="red">t</span></b>'],["<b>peindre</b>","to paint",'<b>pein<span class="red">t</span></b>'],["<b>se plaindre</b>","to complain",'<b>plain<span class="red">t</span></b>'],["<b>éteindre</b>","to turn off",'<b>étein<span class="red">t</span></b>'],["<b>atteindre</b>","to reach",'<b>attein<span class="red">t</span></b>']].forEach((function(e){var t=document.createElement("tr");e.forEach((function(e){var n=document.createElement("td");n.innerHTML=e,t.appendChild(n)})),ne.appendChild(t)})),Z.appendChild(ne),l.appendChild(Z);var re=document.createElement("div");re.classList.add("examples");var ie=document.createElement("p");ie.textContent="Here are some examples:",l.appendChild(re),re.appendChild(ie);var oe=document.createElement("ul");oe.classList.add("list-no-bullet"),re.appendChild(oe),oe.innerHTML="<li><i>Il <b><u>a éteint</b></u> la lumière.</i> (He turned off the light.)</li>\n    <li><i>Je l'<b><u>ai rejoint</b></u> à la gare.</i> (I met him at the station.)</li>";var ae=document.createElement("div");ae.innerHTML='<p class="tip"><i class="fa-solid fa-exclamation-triangle"></i> Some common verbs don\'t follow the\n    patterns above:</p>',l.appendChild(ae);var se=document.createElement("table"),ce=document.createElement("thead"),le=document.createElement("tr");["Verb","Translation","Past Participle"].forEach((function(e){var t=document.createElement("th");t.textContent=e,le.appendChild(t)})),ce.appendChild(le),se.appendChild(ce);var ue=document.createElement("tbody");[["<b>avoir</b>","to have",'<b><span class="red">eu</span></b>'],["<b>être</b>","to be",'<b><span class="red">été</span></b>'],["<b>dire</b>","to say, to tell",'<b><span class="red">dit</span></b>'],["<b>mettre</b>","to put",'<b><span class="red">mis</span></b>'],["<b>faire</b>","to do, to make",'<b><span class="red">fait</span></b>'],["<b>voir</b>","to see",'<b><span class="red">vu</span></b>'],["<b>boire</b>","to drink",'<b><span class="red">bu</span></b>'],["<b>venir</b>","to come",'<b><span class="red">venu</span></b>'],["<b>lire</b>","to read",'<b><span class="red">lu</span></b>'],["<b>connaître</b>","to know",'<b><span class="red">connu</span></b>'],["<b>courir</b>","to run",'<b><span class="red">couru</span></b>'],["<b>recevoir</b>","to receive, to get",'<b><span class="red">reçu</span></b>'],["<b>devoir</b>","to have to, must",'<b><span class="red">dû</span></b>'],["<b>vouloir</b>","to want",'<b><span class="red">voulu</span></b>'],["<b>pouvoir</b>","to be able to, can",'<b><span class="red">pu</span></b>'],["<b>savoir</b>","to know",'<b><span class="red">su</span></b>'],["<b>tenir</b>","to hold",'<b><span class="red">tenu</span></b>'],["<b>vivre</b>","to live",'<b><span class="red">vécu</span></b>']].forEach((function(e){var t=document.createElement("tr");e.forEach((function(e){var n=document.createElement("td");n.innerHTML=e,t.appendChild(n)})),ue.appendChild(t)})),se.appendChild(ue),l.appendChild(se),e.appendChild(l),fd()}function Ed(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");t.classList.add("contentNav"),e.appendChild(t);var n=document.createElement("a");n.textContent="Verb conjugation",n.classList.add("verbConjugationLink");var r=document.createElement("span");r.classList.add("icon");var i=document.createElement("i");i.classList.add("fas","fa-chevron-right"),r.appendChild(i);var o=document.createElement("a");o.textContent="The imperfect past tense",t.appendChild(n),t.appendChild(r),t.appendChild(o);var a=document.createElement("div");a.classList.add("page-content");var s=document.createElement("h1");s.textContent='The imperfect past tense "l\'imparfait"';var c=document.createElement("h2");c.textContent="When do you use the imperfect past tense?";var l=document.createElement("div");l.classList.add("definition");var u=document.createElement("p");u.innerHTML='<i class="fa-solid fa-book-open"></i> <b>The imperfect tense "l\'imparfait"</b> \n      is a common French past tense, which is mostly used to express a habit, make a description, explain a situation, or an ongoing action in the past. ',l.appendChild(u),a.appendChild(s),a.appendChild(c),a.appendChild(l);var d=document.createElement("h3");d.textContent="Take a look at these examples:";var h=document.createElement("ul");h.classList.add("list-no-bullet"),h.innerHTML="<li><i>Je <b>lisais</b> tous les jours.</i> (I used to read every day.)</li>\n    <li><i>Avant, je <b>sortais</b> tous les soirs.</i> (I used to go out every evening.)</li>\n    <li><i>Il <b>faisait</b> froid et il y avait beaucoup de vent.</i> (It was cold and very windy.)</li>\n    <li><i>J'<b>avais</b> les cheveux courts.</i> (I used to have short hair. / I had short hair.)</li>\n    <li><i>Quelqu'un est venu pendant que je <b>dormais</b>.</i> (Someone came while I was sleeping.)</li>",a.appendChild(d),a.appendChild(h);var p=document.createElement("h2");p.textContent="To form the imperfect tense of regular verbs, follow these steps: ",a.appendChild(p);var f=document.createElement("p");f.innerHTML="Use the 'nous' form of the verb in the present tense, \nremove the '-ons' ending, and add the appropriate ending (-<b>ais</b>, -<b>ais</b>, -<b>ait</b>, -<b>ions</b>, -<b>iez</b>, -<b>aient</b>.). ";var m=document.createElement("p");m.innerHTML="For example, the verbs <b>'parler'</b> and <b>'finir'</b> have the following 'nous' forms:  \n'nous parlons' and 'nous finissons'. So in order to conjugate them with 'je' in the imperfect tense, you \nneed to remove the '-ons' ending and add '-ais', which gives: <b>'je parlais'</b> and <b>'je finissais'</b>. \nYou'll find more details in the table below.",a.appendChild(f),a.appendChild(m);var v=document.createElement("table"),g=document.createElement("thead"),y=document.createElement("tr");["SUBJECT","ENDING","EXAMPLES"].forEach((function(e){var t=document.createElement("th");t.textContent=e,y.appendChild(t)})),g.appendChild(y);var b=document.createElement("tbody");[["Je","-ais","parl<b>ais</b>, finiss<b>ais</b>"],["Tu","-ais","parl<b>ais</b>, finiss<b>ais</b>"],["Il/elle/on","-ait","parl<b>ait</b>, finiss<b>ait</b>"],["Nous","-ions","parl<b>ions</b>, finiss<b>ions</b>"],["Vous","-iez","parl<b>iez</b>, finiss<b>iez</b>"],["Ils/elles","-aient","parl<b>aient</b>, finiss<b>aient</b>"]].forEach((function(e){var t=document.createElement("tr");e.forEach((function(e){var n=document.createElement("td");n.innerHTML=e,t.appendChild(n)})),b.appendChild(t)})),v.appendChild(g),v.appendChild(b),a.appendChild(v);var _=document.createElement("div");_.classList.add("explanation"),a.appendChild(_);var w=document.createElement("p");w.innerHTML='<i class="fa-solid fa-triangle-exclamation"></i> The exception is the verb \'<b>être</b>\', which uses the stem <b>ét-</b> \ninstead of the "nous" form from the present tense:';var E=document.createElement("p");E.innerHTML="<i class='fa-solid fa-arrow-right'></i> j'<b>ét</b>ais, tu <b>ét</b>ais, il/elle/on <b>ét</b>ait, nous <b>ét</b>ions, vous <b>ét</b>iez, ils/elles <b>ét</b>aient. ",_.appendChild(w),_.appendChild(E);var C=document.createElement("div");C.classList.add("definition"),a.appendChild(C);var T=document.createElement("p");T.innerHTML='<i class="fa-solid fa-comment"></i> <b>Pronunciation tip</b>';var L=document.createElement("p");L.classList.add("tip"),L.innerHTML="The 'je', 'tu', 'il/elle/on' and 'ils/elles' forms have the same pronunciation, \nso 'parlais', 'parlait', 'parlaient' are pronounced the same way.",C.appendChild(T),C.appendChild(L);var I=document.createElement("h2");I.textContent="A few more exceptions and difficulties",a.appendChild(I);var k=document.createElement("h3");k.innerHTML="Verbs ending in <i>-ger</i>",a.appendChild(k);var S=document.createElement("div");a.appendChild(S);var x=document.createElement("p");x.innerHTML="Verbs ending in <b>-ger</b> have an additional \"e\" in the 'nous' form of the present tense: 'nous mang<u>e</u>ons'. \nAs this form is used to construct the imperfect tense, we keep the \"e\" (to preserve the soft \"g\" sound), except for the \n'nous' and 'vous' forms:";var P=document.createElement("p");P.innerHTML="<i class='fa-solid fa-arrow-right'></i> je/tu mang<u>e</u>ais, il/elle/on mang<u>e</u>ait, \nnous <b>mangions</b>, vous <b>mangiez</b>, ils/elles mang<u>e</u>aient.",S.appendChild(x),S.appendChild(P);var N=document.createElement("h3");N.innerHTML="Verbs ending in <i>-cer</i>",a.appendChild(N);var O=document.createElement("div");a.appendChild(O);var M=document.createElement("p");M.innerHTML='Verbs ending in <b>-cer</b> change their <i>"<b>c</b>"</i> to <i>"<b>ç</b>"</i> (to preserve the soft "c" sound), except for the \n\'nous\' and \'vous\' forms:';var j=document.createElement("p");j.innerHTML="<i class='fa-solid fa-arrow-right'></i> je/tu commen<b>ç</b>ais, il/elle/on commen<b>ç</b>ait, \nnous commen<u>c</u>ions, vous commen<u>c</u>iez, ils/elles commen<b>ç</b>aient.",O.appendChild(M),O.appendChild(j);var A=document.createElement("h3");A.innerHTML="Verbs ending in <i>-ier</i>",a.appendChild(A);var R=document.createElement("div");a.appendChild(R);var q=document.createElement("p");q.innerHTML="Verbs ending in <b>-ier</b> have a double 'i' ('ii') in the 'nous' and 'vous' forms:";var D=document.createElement("p");D.innerHTML="<i class='fa-solid fa-arrow-right'></i> j'étudiais, tu étudiais, il/elle/on étudiait, \nnous étud<u>ii</u>ons, vous étud<u>ii</u>ez, ils/elles étudiaient.",R.appendChild(q),R.appendChild(D),e.appendChild(a),fd()}function Cd(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");t.classList.add("contentNav"),e.appendChild(t);var n=document.createElement("a");n.textContent="Verb conjugation",n.classList.add("verbConjugationLink");var r=document.createElement("span");r.classList.add("icon");var i=document.createElement("i");i.classList.add("fas","fa-chevron-right"),r.appendChild(i);var o=document.createElement("a");o.textContent="The simple future tense",o.classList.add("futureTenseLink");var a=document.createElement("span");a.classList.add("icon");var s=document.createElement("i");s.classList.add("fas","fa-chevron-right"),a.appendChild(s);var c=document.createElement("a");c.textContent="Spelling changes",t.appendChild(n),t.appendChild(r),t.appendChild(o),t.appendChild(a),t.appendChild(c);var l=document.createElement("div");l.classList.add("page-content"),e.appendChild(l);var u=document.createElement("h1");u.textContent="Verbs with spelling changes";var d=document.createElement("div");d.classList.add("definition");var h=document.createElement("p");h.innerHTML='<i class="fa-solid fa-lightbulb"></i> Some French <b>-er</b> verbs change their spellings in the simple future tense.\n       Some verbs ending in <b>-eler</b> and <b>-eter</b> double the <b><i>l</i></b> or <b><i>t</i></b> in their conjugations.',d.appendChild(h),l.appendChild(u),l.appendChild(d);var p=document.createElement("p");p.textContent="Take a look at the example of the verbs 'appeler' and 'jeter':",l.appendChild(p);var f=document.createElement("table"),m=document.createElement("thead"),v=document.createElement("tr");f.appendChild(m),m.appendChild(v),["","appeler (to call)","jeter (to throw)"].forEach((function(e){var t=document.createElement("th");t.textContent=e,v.appendChild(t)}));var g=document.createElement("tbody");f.appendChild(g),[["je (j')","j'appellerai","je jetterai"],["tu","tu appelleras","tu jetteras"],["il(/elle/on)","il appellera","il jettera"],["nous","nous appellerons","nous jetterons"],["vous","vous appellerez","vous jetterez"],["ils(/elles)","ils appelleront","ils jetteront"]].forEach((function(e){var t=document.createElement("tr");g.appendChild(t),e.forEach((function(e){var n=document.createElement("td");n.textContent=e,t.appendChild(n)}))})),l.appendChild(f);var y=document.createElement("div");y.innerHTML="<p class=\"tip\"><i class=\"fa-solid fa-bolt\"></i> In some verbs like <b>lever</b> (to raise), <b>acheter</b> (to buy), \n    and <b>peser</b> (to weigh), the first 'e' changes to <b>'è'</b></p>",l.appendChild(y);var b=document.createElement("table"),_=document.createElement("thead"),w=document.createElement("tr");["","lever","acheter","peser"].forEach((function(e){var t=document.createElement("th");t.textContent=e,w.appendChild(t)})),_.appendChild(w);var E=document.createElement("tbody");[["je (j')","je lèverai","j'achèterai","je pèserai"],["tu","tu lèveras","tu achèteras","tu pèseras"],["il (/elle/on)","il lèvera","il achètera","il pèsera"],["nous","nous lèverons","nous achèterons","nous pèserons"],["vous","vous lèverez","vous achèterez","vous pèserez"],["ils (/elles)","ils lèveront","ils achèteront","ils pèseront"]].forEach((function(e){var t=document.createElement("tr");e.forEach((function(e){var n=document.createElement("td");n.textContent=e,t.appendChild(n)})),E.appendChild(t)})),b.appendChild(_),b.appendChild(E),l.appendChild(b),e.appendChild(l),fd()}function Td(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");t.classList.add("contentNav"),e.appendChild(t);var n=document.createElement("a");n.textContent="Verb conjugation",n.classList.add("verbConjugationLink");var r=document.createElement("span");r.classList.add("icon");var i=document.createElement("i");i.classList.add("fas","fa-chevron-right"),r.appendChild(i);var o=document.createElement("a");o.textContent="The simple future tense",o.classList.add("futureTenseLink");var a=document.createElement("span");a.classList.add("icon");var s=document.createElement("i");s.classList.add("fas","fa-chevron-right"),a.appendChild(s);var c=document.createElement("a");c.textContent="Exceptions",t.appendChild(n),t.appendChild(r),t.appendChild(o),t.appendChild(a),t.appendChild(c);var l=document.createElement("div");l.classList.add("page-content"),e.appendChild(l);var u=document.createElement("h1");u.textContent="Exceptions";var d=document.createElement("div");d.classList.add("definition");var h=document.createElement("p");h.innerHTML='<i class="fa-solid fa-lightbulb"></i> Some French verbs like <b>avoir</b> <i>(to have)</i>, <b>être</b> <i>(to be)</i>, \n      <b>aller</b> <i>(to go)</i>, and <b>faire</b> <i>(to do/make)</i> change their stem in the future simple tense, \n      though they use the same set of endings as regular verbs.',d.appendChild(h),l.appendChild(u),l.appendChild(d);var p=document.createElement("p");p.textContent="In the table below, you'll find the conjugations of these 4 irregular verbs in the future tense.",l.appendChild(p);var f=document.createElement("table"),m=document.createElement("thead"),v=document.createElement("tr");["","avoir","être","aller","faire"].forEach((function(e){var t=document.createElement("th");t.textContent=e,v.appendChild(t)})),m.appendChild(v);var g=document.createElement("tbody");[["je / j'","j'<b>aur</b>ai","je <b>ser</b>ai","j'<b>ir</b>ai","je <b>fer</b>ai"],["tu","tu <b>aur</b>as","tu <b>ser</b>as","tu <b>ir</b>as","tu <b>fer</b>as"],["il (/elle/on)","il <b>aur</b>a","il <b>ser</b>a","il <b>ir</b>a","il <b>fer</b>a"],["nous","nous <b>aur</b>ons","nous <b>ser</b>ons","nous <b>ir</b>ons","nous <b>fer</b>ons"],["vous","vous <b>aur</b>ez","vous <b>ser</b>ez","vous <b>ir</b>ez","vous <b>fer</b>ez"],["ils (/elles)","ils <b>aur</b>ont","ils <b>ser</b>ont","ils <b>ir</b>ont","ils <b>fer</b>ont"]].forEach((function(e){var t=document.createElement("tr");e.forEach((function(e){var n=document.createElement("td");n.innerHTML=e,t.appendChild(n)})),g.appendChild(t)})),f.appendChild(m),f.appendChild(g),l.appendChild(f);var y=document.createElement("div");y.classList.add("examples");var b=document.createElement("p");b.textContent="Here are a few examples:";var _=document.createElement("p");_.innerHTML="<i>J'<b>aurai</b> trois enfants.</i> (I <b>will have</b> three children.)";var w=document.createElement("p");w.innerHTML="<i>Tu <b>seras</b> déçue. </i> (You'<b>ll be</b> disappointed)";var E=document.createElement("p");E.innerHTML="<i>Elle <b>ira</b> en Italie l'année prochaine.</i> (She <b>will go</b> to Italy next year.)";var C=document.createElement("p");C.innerHTML="<i>Ils feront du tennis.</i> (They <b>will play</b> tennis.)",y.appendChild(b),y.appendChild(_),y.appendChild(w),y.appendChild(E),y.appendChild(C),l.appendChild(y);var T=document.createElement("h3");T.innerHTML="Here are some more common verbs that change their stem in the future tense with 3 forms (<i>je</i>, <i>tu</i>, and <i>il</i>) as examples.",l.appendChild(T);var L=document.createElement("table"),I=document.createElement("thead"),k=document.createElement("tr");["verb","je / j'","tu","il (/elle/on)"].forEach((function(e){var t=document.createElement("th");t.textContent=e,k.appendChild(t)})),I.appendChild(k);var S=document.createElement("tbody");[["venir","je <b>viendr</b>ai","tu <b>viendr</b>as","il <b>viendr</b>a"],["voir","je <b>verr</b>ai","tu <b>verr</b>as","il <b>verr</b>a"],["pouvoir","je <b>pourr</b>ai","tu <b>pourr</b>as","il <b>pourr</b>a"],["devoir","je <b>devr</b>ai","tu <b>devr</b>as","il <b>devr</b>a"],["vouloir","je <b>voudr</b>ai","tu <b>voudr</b>as","il <b>voudr</b>a"],["recevoir","je <b>recevr</b>ai","tu <b>recevr</b>as","il <b>recevr</b>a"],["envoyer","j'<b>enverr</b>ai","tu <b>enverr</b>as","il <b>enverr</b>a"],["savoir","je <b>saur</b>ai","tu <b>saur</b>as","il <b>saur</b>a"],["valoir","je <b>vaudr</b>ai","tu <b>vaudr</b>as","il <b>vaudr</b>a"],["tenir","je <b>tiendr</b>ai","tu <b>tiendr</b>as","il <b>tiendr</b>a"],["falloir","-","-","il <b>faudr</b>a"],["pleuvoir","-","-","il <b>pleuvr</b>a"]].forEach((function(e){var t=document.createElement("tr");e.forEach((function(e){var n=document.createElement("td");n.innerHTML=e,t.appendChild(n)})),S.appendChild(t)})),L.appendChild(I),L.appendChild(S),l.appendChild(L),e.appendChild(l),fd()}function Ld(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");t.classList.add("contentNav"),e.appendChild(t);var n=document.createElement("a");n.textContent="Verb conjugation",n.classList.add("verbConjugationLink");var r=document.createElement("span");r.classList.add("icon");var i=document.createElement("i");i.classList.add("fas","fa-chevron-right"),r.appendChild(i);var o=document.createElement("a");o.textContent="The French subjunctive",o.classList.add("subjunctiveLink");var a=document.createElement("span");a.classList.add("icon");var s=document.createElement("i");s.classList.add("fas","fa-chevron-right"),a.appendChild(s);var c=document.createElement("a");c.textContent="The structure",t.appendChild(n),t.appendChild(r),t.appendChild(o),t.appendChild(a),t.appendChild(c);var l=document.createElement("div");l.classList.add("page-content");var u=document.createElement("h1");u.textContent="Conjugating a verb in the present subjunctive",l.appendChild(u);var d=document.createElement("div");d.classList.add("conjugation");var h=document.createElement("h2");h.textContent="To conjugate a verb in the present subjunctive:",d.appendChild(h);var p=document.createElement("p");p.innerHTML="For <b>je, tu, il/elle/on, ils/elles</b>, remove the ending from the 3rd person plural present \n    (indicative) tense (ils/elles form) and add the subjunctive endings (<b>-e, -es, -e, -ent</b>). \n\n    For example, the present (indicative) conjugation of the verb <b>'venir'</b> (to come) for 'ils/elles' is 'ils <u>viennent</u>', \n    so by removing the '-ent' ending and adding the subjunctive endings, we'll get the present subjunctive conjugations: \n    <i>que je <b>vienne</b>, que tu <b>viennes</b>, qu'il <b>vienne</b>, qu'ils <b>viennent</b>.</i>",d.appendChild(p);var f=document.createElement("p");f.innerHTML="<b>For nous and vous forms</b>, remove the ending from the 1st person plural present indicative (nous form) and add the subjunctive endings (<b>-ions, -iez</b>): so the regular present conjugation ‘nous venons’ transforms to the subjunctive forms <i>que <b>nous venions</b></i>, <i>que <b>vous veniez</b></i>.",d.appendChild(f);var m=document.createElement("h3");m.textContent="Examples of Conjugation:",d.appendChild(m),l.appendChild(d);var v=document.createElement("table"),g=document.createElement("thead"),y=document.createElement("tr");["","venir","finir","donner"].forEach((function(e){var t=document.createElement("th");t.textContent=e,y.appendChild(t)})),g.appendChild(y);var b=document.createElement("tbody");[["je","que je vienne","que je finisse","que je donne"],["tu","que tu viennes","que tu finisses","que tu donnes"],["il/elle/on","qu'il vienne","qu'il finisse","qu'il donne"],["nous","que nous venions","que nous finissions","que nous donnions"],["vous","que vous veniez","que vous finissiez","que vous donniez"],["ils/elles","qu'ils viennent","qu'ils finissent","qu'ils donnent"]].forEach((function(e){var t=document.createElement("tr");e.forEach((function(e){var n=document.createElement("td");n.innerHTML=e,t.appendChild(n)})),b.appendChild(t)})),v.appendChild(g),v.appendChild(b),l.appendChild(v),e.appendChild(l),fd()}function Id(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");t.classList.add("contentNav"),e.appendChild(t);var n=document.createElement("a");n.textContent="Verb conjugation",n.classList.add("verbConjugationLink");var r=document.createElement("span");r.classList.add("icon");var i=document.createElement("i");i.classList.add("fas","fa-chevron-right"),r.appendChild(i);var o=document.createElement("a");o.textContent="The French subjunctive",o.classList.add("subjunctiveLink");var a=document.createElement("span");a.classList.add("icon");var s=document.createElement("i");s.classList.add("fas","fa-chevron-right"),a.appendChild(s);var c=document.createElement("a");c.textContent="Irregular verbs",t.appendChild(n),t.appendChild(r),t.appendChild(o),t.appendChild(a),t.appendChild(c);var l=document.createElement("div");l.classList.add("page-content");var u=document.createElement("h1");u.textContent="Irregular verbs",l.appendChild(u);var d=document.createElement("div");d.classList.add("conjugation");var h=document.createElement("p");h.innerHTML="Some irregular verbs and their subjunctive forms include <b>avoir</b> (to have), <b>être</b> (to be),\n    <b>faire</b> (to do/make), <b>aller</b> (to go), <b>savoir</b> (to know), <b>pouvoir</b> (to be able to), <b>vouloir</b> (to want), and <b>pleuvoir</b> (to rain). \n    You'll find the conjugations of these verbs in the present subjunctive in the tables below.",d.appendChild(h),l.appendChild(d);var p=document.createElement("div"),f=document.createElement("div");p.classList.add("table-container"),f.classList.add("table-container");var m=document.createElement("table"),v=document.createElement("table"),g=document.createElement("thead"),y=document.createElement("tr");["","avoir","être","faire","aller"].forEach((function(e){var t=document.createElement("th");t.textContent=e,y.appendChild(t)})),g.appendChild(y);var b=document.createElement("tbody");[["je","que j'aie","que je sois","que je fasse","que j'aille"],["tu","que tu aies","que tu sois","que tu fasses","que tu ailles"],["il/elle/on","qu'il ait","qu'il soit","qu'il fasse","qu'il aille"],["nous","que nous ayons","que nous soyons","que nous fassions","que nous allions"],["vous","que vous ayez","que vous soyez","que vous fassiez","que vous alliez"],["ils/elles","qu'ils aient","qu'elles soient","qu'ils fassent","qu'ils aillent"]].forEach((function(e){var t=document.createElement("tr");e.forEach((function(e){var n=document.createElement("td");n.innerHTML=e,t.appendChild(n)})),b.appendChild(t)})),m.appendChild(g),m.appendChild(b);var _=document.createElement("thead"),w=document.createElement("tr");["","savoir","pouvoir","vouloir","pleuvoir"].forEach((function(e){var t=document.createElement("th");t.textContent=e,w.appendChild(t)})),_.appendChild(w);var E=document.createElement("tbody");[["je","que je sache","que je puisse","que je veuille"," "],["tu","que tu saches","que tu puisses","que tu veuilles"," "],["il/elle/on","qu'il sache","qu'il puisse","qu'il veuille","qu’il pleuve"],["nous","que nous sachions","que nous puissions","que nous voulions"," "],["vous","que vous sachiez","que vous puissiez","que vous vouliez"," "],["ils/elles","qu'ils sachent","qu'ils puissent","qu'ils veuillent"," "]].forEach((function(e){var t=document.createElement("tr");e.forEach((function(e){var n=document.createElement("td");n.innerHTML=e,t.appendChild(n)})),E.appendChild(t)})),v.appendChild(_),v.appendChild(E),p.appendChild(m),f.appendChild(v),l.appendChild(p),l.appendChild(f),e.appendChild(l),fd()}function kd(e,t){var n=document.querySelector(".content-area");n.innerHTML="";var r=document.createElement("div");r.classList.add("menu"),n.appendChild(r);var i=document.createElement("h1");i.textContent="Learn the fundamentals of verb conjugation";var o=document.createElement("div");o.classList.add("intro-menu"),o.innerHTML="<i class='fa-solid fa-plane-departure'></i>Introduction to\nverb conjugation",r.appendChild(i),r.appendChild(o);var a=document.createElement("div");a.classList.add("present-container"),r.appendChild(a);var s=document.createElement("div");s.classList.add("present-menu"),a.appendChild(s);var c=document.createElement("div");c.classList.add("present-line"),s.appendChild(c),c.innerHTML="<i class='fa-regular fa-calendar-check'></i>The Present Tense";var l=document.createElement("i");l.classList.add("fa-solid","fa-square-plus"),s.appendChild(l);var u=document.createElement("div");u.classList.add("present-subcontainer"),u.style.display="none",a.appendChild(u);var d=document.createElement("div");d.classList.add("present-submenu","present-intro"),d.innerHTML='<i\n  class="fa-solid fa-circle-chevron-right"></i>Introduction';var h=document.createElement("div");h.classList.add("present-submenu","present-group1"),h.innerHTML='<i\n  class="fa-solid fa-circle-chevron-right"></i>Group 1';var p=document.createElement("div");p.classList.add("present-submenu","present-group2"),p.innerHTML='<i\n  class="fa-solid fa-circle-chevron-right"></i>Group 2';var f=document.createElement("div");f.classList.add("present-submenu","present-group3"),f.innerHTML=e&&"active"===t?'<i class="fa-solid fa-circle-chevron-right"></i>Group 3':'<i class="fa-solid fa-lock"></i>Group 3';var m=document.createElement("div");m.classList.add("present-submenu","present-irregular"),m.innerHTML=e&&"active"===t?'<i class="fa-solid fa-circle-chevron-right"></i>Irregular Verbs':'<i class="fa-solid fa-lock"></i>Irregular Verbs',u.appendChild(d),u.appendChild(h),u.appendChild(p),u.appendChild(f),u.appendChild(m);var v=document.createElement("div");v.classList.add("imperfect-menu"),v.innerHTML=e&&"active"===t?"<i class='fa-solid fa-house'></i>The imperfect past tense":"<i class='fa-solid fa-lock'></i>The imperfect past tense",r.appendChild(v);var g=document.createElement("div");g.classList.add("past-container"),r.appendChild(g);var y=document.createElement("div");y.classList.add("past-menu"),g.appendChild(y);var b=document.createElement("div");if(b.classList.add("past-line"),y.appendChild(b),e&&"active"===t){b.innerHTML="<i class='fas fa-compass'></i>The Past Tense \"Passé composé\"";var _=document.createElement("i");_.classList.add("fa-solid","fa-square-plus"),y.appendChild(_)}else b.innerHTML="<i class='fa-solid fa-lock'></i>The Past Tense \"Passé composé\"";var w=document.createElement("div");w.classList.add("past-subcontainer"),w.style.display="none",g.appendChild(w);var E=document.createElement("div");E.classList.add("past-submenu","past-intro"),E.innerHTML='<i\n  class="fa-solid fa-circle-chevron-right"></i>Introduction';var C=document.createElement("div");C.classList.add("past-submenu","past-aux"),C.innerHTML="<i\n  class=\"fa-solid fa-circle-chevron-right\"></i>'Avoir' VS 'être'";var T=document.createElement("div");T.classList.add("past-submenu","past-participle"),T.innerHTML='<i\n  class="fa-solid fa-circle-chevron-right"></i>The past participle',w.appendChild(E),w.appendChild(C),w.appendChild(T);var L=document.createElement("div");L.classList.add("future-container"),r.appendChild(L);var I=document.createElement("div");I.classList.add("future-menu"),L.appendChild(I);var k=document.createElement("div");if(k.classList.add("future-line"),I.appendChild(k),e&&"active"===t){k.innerHTML='<i class="fa-solid fa-chess-rook"></i>The simple future tense (le futur simple)';var S=document.createElement("i");S.classList.add("fa-solid","fa-square-plus"),I.appendChild(S)}else k.innerHTML="<i class='fa-solid fa-lock'></i>The simple future tense (le futur simple)";var x=document.createElement("div");x.classList.add("future-subcontainer"),x.style.display="none",L.appendChild(x);var P=document.createElement("div");P.classList.add("future-submenu","future-intro"),P.innerHTML='<i\n  class="fa-solid fa-circle-chevron-right"></i>Introduction';var N=document.createElement("div");N.classList.add("future-submenu","furure-spelling"),N.innerHTML='<i\n  class="fa-solid fa-circle-chevron-right"></i> Spelling changes';var O=document.createElement("div");O.classList.add("future-submenu","furure-exceptions"),O.innerHTML='<i\n  class="fa-solid fa-circle-chevron-right"></i> Exceptions',x.appendChild(P),x.appendChild(N),x.appendChild(O);var M=document.createElement("div");M.classList.add("sunjunctive-container"),r.appendChild(M);var j=document.createElement("div");j.classList.add("subjunctive-menu"),M.appendChild(j);var A=document.createElement("div");if(A.classList.add("subjunctive-line"),j.appendChild(A),e&&"active"===t){A.innerHTML='<i class="fa-solid fa-mountain"></i>The French subjunctive (le subjonctif)</div>';var R=document.createElement("i");R.classList.add("fa-solid","fa-square-plus"),j.appendChild(R)}else A.innerHTML='<i class="fa-solid fa-lock"></i>The French subjunctive (le subjonctif)';var q=document.createElement("div");q.classList.add("subjunctive-subcontainer"),q.style.display="none",M.appendChild(q);var D=document.createElement("div");D.classList.add("subjunctive-submenu","subjunctive-intro"),D.innerHTML='<i\n  class="fa-solid fa-circle-chevron-right"></i>Introduction';var H=document.createElement("div");H.classList.add("subjunctive-submenu","subjunctive-structure"),H.innerHTML='<i\n  class="fa-solid fa-circle-chevron-right"></i> The structure';var F=document.createElement("div");F.classList.add("subjunctive-submenu","subjunctive-exceptions"),F.innerHTML='<i\n  class="fa-solid fa-circle-chevron-right"></i> Exceptions',q.appendChild(D),q.appendChild(H),q.appendChild(F),function(e,t){var n=document.querySelector(".present-menu"),r=document.querySelector(".present-subcontainer"),i=document.querySelector(".past-menu"),o=document.querySelector(".past-subcontainer"),a=document.querySelector(".future-menu"),s=document.querySelector(".future-subcontainer"),c=document.querySelector(".subjunctive-menu"),l=document.querySelector(".subjunctive-subcontainer");n.addEventListener("click",(function(){"none"===r.style.display?(r.style.display="block",n.innerHTML="<div class='present-line'><i class='fa-regular fa-calendar-check'></i>\n    The Present Tense</div> <i class='fa-solid fa-circle-chevron-up'></i>\n</div>"):(r.style.display="none",n.innerHTML='<div class="present-line"><i class="fa-regular fa-calendar-check"></i>\n    The Present Tense</div> <i class="fa-solid fa-square-plus"></i>\n</div>')})),e&&"active"===t&&i.addEventListener("click",(function(){"none"===o.style.display?(o.style.display="block",i.innerHTML="<div class='past-line'><i class='fa-regular fa-compass'></i>\n      The Past Tense \"Passé composé\"</div> <i class='fa-solid fa-circle-chevron-up'></i>\n  </div>"):(o.style.display="none",i.innerHTML='<div class="past-line"><i class="fa-regular fa-compass"></i>\n      The Past Tense "Passé composé"</div> <i class="fa-solid fa-square-plus"></i>\n  </div>')})),e&&"active"===t&&a.addEventListener("click",(function(){"none"===s.style.display?(s.style.display="block",a.innerHTML="<div class='future-line'><i class=\"fa-solid fa-chess-rook\"></i>\n      The simple future tense (le futur simple)</div> <i class='fa-solid fa-circle-chevron-up'></i>\n  </div>"):(s.style.display="none",a.innerHTML='<div class="future-line"><i class="fa-solid fa-chess-rook"></i>\n      The simple future tense (le futur simple)</div> <i class="fa-solid fa-square-plus"></i>\n  </div>')})),e&&"active"===t&&c.addEventListener("click",(function(){"none"===l.style.display?(l.style.display="block",c.innerHTML="<div class='subjunctive-line'><i class=\"fa-solid fa-mountain\"></i>\n      The French subjunctive (le subjonctif)</div> <i class='fa-solid fa-circle-chevron-up'></i>\n  </div>"):(l.style.display="none",c.innerHTML='<div class="subjunctive-line"><i class="fa-solid fa-mountain"></i>\n      The French subjunctive (le subjonctif)</div> <i class="fa-solid fa-square-plus"></i>\n  </div>')}))}(e,t),o.addEventListener("click",md),d.addEventListener("click",ad),h.addEventListener("click",vd),p.addEventListener("click",gd),e&&"active"===t&&f.addEventListener("click",yd),e&&"active"===t&&m.addEventListener("click",bd),e&&"active"===t&&E.addEventListener("click",sd),C.addEventListener("click",_d),T.addEventListener("click",wd),e&&"active"===t&&v.addEventListener("click",Ed),P.addEventListener("click",cd),N.addEventListener("click",Cd),O.addEventListener("click",Td),D.addEventListener("click",ld),H.addEventListener("click",Ld),F.addEventListener("click",Id)}function Sd(e){return Sd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sd(e)}function xd(){xd=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:I(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",v={};function g(){}function y(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(N([])));E&&E!==n&&r.call(E,a)&&(_=E);var C=b.prototype=g.prototype=Object.create(_);function T(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(i,o,a,s){var c=d(e[i],e,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==Sd(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function I(t,n,r){var i=h;return function(o,a){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var c=k(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var l=d(t,n,r);if("normal"===l.type){if(i=r.done?m:p,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=m,r.method="throw",r.arg=l.arg)}}}function k(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Sd(t)+" is not iterable")}return y.prototype=b,i(C,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,c,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},T(L.prototype),l(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new L(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(C),l(C,c,"Generator"),l(C,a,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Pd(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Nd(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Pd(o,r,i,a,s,"next",e)}function s(e){Pd(o,r,i,a,s,"throw",e)}a(void 0)}))}}function Od(e){var t=document.getElementById("myChart"),n=new Date;n.setHours(0,0,0,0);for(var r=[],i=[],o=function(t){var o=e.find((function(e){var r=e.timestamp,i=new Date(n);i.setDate(n.getDate()-t);var o=new Date(r);return o.getDate()===i.getDate()&&o.getMonth()===i.getMonth()&&o.getFullYear()===i.getFullYear()}));o?(r.push(o.nbOfPhrPractised),i.push(o.nbOfCorrectPhr)):(r.push(0),i.push(0))},a=6;a>=0;a--)o(a);for(var s=[],c=0;c<i.length;c++){var l=i[c]/r[c]*100;s.push(l)}for(var u=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],d=n.getDay(),h=[],p=d+1;p<7;p++)h.push(u[p]);for(var f=0;f<=d;f++)h.push(u[f]);new Chart(t,{type:"bar",data:{labels:h,datasets:[{label:"% of correct answers",data:s,borderWidth:1,barThickness:30,backgroundColor:"#2bc48c"}]},options:{scales:{y:{beginAtZero:!0}}}})}function Md(e){return Md="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Md(e)}function jd(){jd=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:I(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",v={};function g(){}function y(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(N([])));E&&E!==n&&r.call(E,a)&&(_=E);var C=b.prototype=g.prototype=Object.create(_);function T(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(i,o,a,s){var c=d(e[i],e,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==Md(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function I(t,n,r){var i=h;return function(o,a){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var c=k(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var l=d(t,n,r);if("normal"===l.type){if(i=r.done?m:p,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=m,r.method="throw",r.arg=l.arg)}}}function k(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Md(t)+" is not iterable")}return y.prototype=b,i(C,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,c,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},T(L.prototype),l(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new L(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(C),l(C,c,"Generator"),l(C,a,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Ad(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Rd(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Ad(o,r,i,a,s,"next",e)}function s(e){Ad(o,r,i,a,s,"throw",e)}a(void 0)}))}}function qd(){return qd=Rd(jd().mark((function e(){var t,n;return jd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eu();case 2:t=e.sent,Si(n=t.app),Zl=Gl(n);case 6:case"end":return e.stop()}}),e)}))),qd.apply(this,arguments)}function Dd(){return(Dd=Rd(jd().mark((function e(){var t,n,r,i,o,a,s,c,l,u,d;return jd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_u();case 2:if(t=e.sent,n=t.subStatus,!(r=t.userId)||"active"!==n){e.next=14;break}return i=Rl(Zl,"users/"+r+"/data//stats"),e.next=9,vu(i);case 9:o=e.sent,Hd(),Od(o),e.next=36;break;case 14:(a=document.querySelector(".content-area")).innerHTML="",(s=document.createElement("div")).classList.add("premiumStatsContainer"),a.appendChild(s),(c=document.createElement("h1")).classList.add("premiumStatsH1"),s.appendChild(c),c.innerHTML="<i class='fa-regular fa-gem'></i> This is a premium feature",l=document.createElement("div"),s.appendChild(l),l.classList.add("premiumStatsMessage"),l.innerHTML="<p>Subscribe to follow your progress, practise more verbs and take advantage of our Smart Repetition \n      System!</p><p>Log in if you already have a premium account.</p>",(u=document.createElement("div")).classList.add("subscribeSection"),s.appendChild(u),(d=document.createElement("button")).id="noSubsubscribeBtn",d.setAttribute("type","submit"),d.innerText="Subscribe",u.appendChild(d),nu();case 36:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hd(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");e.appendChild(t),t.classList.add("chart");var n=document.createElement("h1");t.appendChild(n),n.innerHTML="<i class='fa-solid fa-square-poll-vertical'></i> Your weekly performance";var r=document.createElement("canvas");t.appendChild(r),r.setAttribute("id","myChart")}function Fd(e,t){var n=document.querySelector(".content-area");n.innerHTML="";var r=document.createElement("div");r.classList.add("bonus-menu"),n.appendChild(r);var i,o=document.createElement("h1");o.textContent="Earn bonuses by using the app regularly",r.appendChild(o),e||(i=localStorage.getItem("streak"));var a=document.createElement("div");r.appendChild(a);var s=document.createElement("div");s.classList.add("bonus1Menu"),a.appendChild(s);var c=document.createElement("div");s.appendChild(c),c.innerHTML='<i class="fa-solid fa-book"></i>Bonus 1: Conjugation guide';var l=document.createElement("i");l.classList.add("fa-solid","fa-square-plus"),s.appendChild(l);var u=document.createElement("div");u.classList.add("bonus-subcontainer","bonus1-subcontainer"),u.style.display="none",a.appendChild(u);var d=document.createElement("div");d.classList.add("bonus-intro");var h=document.createElement("div");if(e&&"active"===t||i>=3){h.innerHTML='<i class="fa-solid fa-circle-chevron-right"></i>\n      Your bonus is ready now!';var p=document.createElement("div");p.classList.add("bonus1Btn"),p.textContent="download",d.appendChild(h),d.appendChild(p),p.addEventListener("click",(function(e){e.preventDefault();var t=document.createElement("a");t.href="../public/conjugation-guide.pdf",t.setAttribute("download",""),document.body.appendChild(t),t.click(),document.body.removeChild(t)}))}else h.innerHTML='<i\n      class="fa-solid fa-lock"></i>Achieve a 3-day streak or become Premium to access it now',d.appendChild(h);u.appendChild(d);var f=document.createElement("div");r.appendChild(f);var m=document.createElement("div");m.classList.add("bonus2Menu"),f.appendChild(m);var v=document.createElement("div");m.appendChild(v),v.innerHTML="<i class='fa-solid fa-chart-line'></i>Bonus 2: 15 of the most common French verbs.";var g=document.createElement("i");g.classList.add("fa-solid","fa-square-plus"),m.appendChild(g);var y=document.createElement("div");y.classList.add("bonus-subcontainer","bonus2-subcontainer"),y.style.display="none",f.appendChild(y);var b=document.createElement("div");b.classList.add("bonus-intro");var _=document.createElement("div");if(e&&"active"===t||i>=7){_.innerHTML='<i class="fa-solid fa-circle-chevron-right"></i>\n      Your bonus is ready now!';var w=document.createElement("div");w.classList.add("bonus2Btn"),w.textContent="download",b.appendChild(_),b.appendChild(w),w.addEventListener("click",(function(e){e.preventDefault();var t=document.createElement("a");t.href="../public/15-verbs.pdf",t.setAttribute("download",""),document.body.appendChild(t),t.click(),document.body.removeChild(t)}))}else _.innerHTML='<i\n      class="fa-solid fa-lock"></i>Achieve a 7-day streak or become Premium to access it now',b.appendChild(_);y.appendChild(b),function(e,t){var n=document.querySelector(".bonus1Menu"),r=document.querySelector(".bonus1-subcontainer"),i=document.querySelector(".bonus2Menu"),o=document.querySelector(".bonus2-subcontainer");n.addEventListener("click",(function(){"none"===r.style.display?(r.style.display="block",n.innerHTML="<div><i class=\"fa-solid fa-book\"></i>Bonus 1: Conjugation guide</div>\n          <i class='fa-solid fa-circle-chevron-up'></i>"):(r.style.display="none",n.innerHTML='<div><i class="fa-solid fa-book"></i>Bonus 1: Conjugation guide</div>\n          <i class="fa-solid fa-square-plus"></i>')})),i.addEventListener("click",(function(){"none"===o.style.display?(o.style.display="block",i.innerHTML="<div><i class='fa-solid fa-chart-line'></i>Bonus 2: 15 of the most common French verbs.</div>\n        <i class='fa-solid fa-circle-chevron-up'></i>"):(o.style.display="none",i.innerHTML="<div><i class='fa-solid fa-chart-line'></i>Bonus 2: 15 of the most common French verbs.</div>\n        <i class=\"fa-solid fa-square-plus\"></i>")}))}()}function Ud(e){return Ud="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ud(e)}function zd(){zd=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:I(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",v={};function g(){}function y(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(N([])));E&&E!==n&&r.call(E,a)&&(_=E);var C=b.prototype=g.prototype=Object.create(_);function T(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(i,o,a,s){var c=d(e[i],e,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==Ud(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function I(t,n,r){var i=h;return function(o,a){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var c=k(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var l=d(t,n,r);if("normal"===l.type){if(i=r.done?m:p,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=m,r.method="throw",r.arg=l.arg)}}}function k(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Ud(t)+" is not iterable")}return y.prototype=b,i(C,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,c,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},T(L.prototype),l(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new L(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(C),l(C,c,"Generator"),l(C,a,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Vd(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Wd(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Vd(o,r,i,a,s,"next",e)}function s(e){Vd(o,r,i,a,s,"throw",e)}a(void 0)}))}}function Bd(e,t,n){var r=new Date;r.setHours(0,0,0,0);var i,o=document.querySelector(".streak p");if(e){var a=parseInt(e)||0;(i=r.getTime()-a)/864e5<1||(i/864e5<2?(t++,o.textContent=t,n.push({streak:t,timestamp:r.getTime()})):(t=1,o.textContent=t,n.push({streak:t,timestamp:r.getTime()})))}else t=1,o.textContent=t,n.push({streak:t,timestamp:r.getTime()});return t}function Gd(e){var t=new Date;t.setHours(0,0,0,0);var n,r=document.querySelector(".streak p"),i=localStorage.getItem("streakLastChangeTime");if(i){var o=parseInt(i);(n=t.getTime()-o)/864e5<1||(n/864e5<2?(e++,r.textContent=e,localStorage.setItem("streakLastChangeTime",t.getTime().toString()),localStorage.setItem("streak",e)):(e=1,r.textContent=e,localStorage.setItem("streakLastChangeTime",t.getTime().toString()),localStorage.setItem("streak",e)))}else e=1,r.textContent=e,localStorage.setItem("streakLastChangeTime",t.getTime().toString()),localStorage.setItem("streak",e);return e}function Yd(e,t,n,r){for(var i=e.data[0].tenseShort,o=function(){var e="box"+(a+1);Dl(Rl(r,"users/"+n+"/data/"+i+"/"+e),t[a]).then((function(){console.log("Box "+e+" added successfully do DB")})).catch((function(t){console.error("Error adding the box "+e+" : ",t)}))},a=0;a<t.length;a++)o()}function $d(e,t,n,r){var i,o=new Date;o.setHours(0,0,0,0);for(var a=r.length,s=0,c=0;c<a;c++)(r[c].isCorrect||r[c].almostCorrectCorrect)&&s++;var l=null===(i=n[n.length-1])||void 0===i?void 0:i.timestamp;if(l){var u=parseInt(l)||0;o.getTime()===u?n[n.length-1].nbOfPhrPractised&&n[n.length-1].nbOfCorrectPhr?(n[n.length-1].nbOfPhrPractised+=a,n[n.length-1].nbOfCorrectPhr+=s,console.log("there is already data from the same date",n[n.length-1])):(n[n.length-1].nbOfPhrPractised=a,n[n.length-1].nbOfCorrectPhr=s):n.push({nbOfPhrPractised:a,nbOfCorrectPhr:s,timestamp:o.getTime()})}else n.push({nbOfPhrPractised:a,nbOfCorrectPhr:s,timestamp:o.getTime()});Dl(Rl(t,"users/"+e+"/data//stats"),n).then((function(){console.log("Stats added successfully do DB")})).catch((function(e){console.error("Error adding the stats ",e)}))}function Jd(e){return Jd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jd(e)}function Kd(){Kd=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:I(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",v={};function g(){}function y(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(N([])));E&&E!==n&&r.call(E,a)&&(_=E);var C=b.prototype=g.prototype=Object.create(_);function T(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(i,o,a,s){var c=d(e[i],e,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==Jd(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function I(t,n,r){var i=h;return function(o,a){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var c=k(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var l=d(t,n,r);if("normal"===l.type){if(i=r.done?m:p,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=m,r.method="throw",r.arg=l.arg)}}}function k(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Jd(t)+" is not iterable")}return y.prototype=b,i(C,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,c,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},T(L.prototype),l(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new L(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(C),l(C,c,"Generator"),l(C,a,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Qd(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Xd(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("form");t.classList.add("signUpForm"),e.appendChild(t);var n=document.createElement("h1");n.innerText="Sign up",t.appendChild(n);var r=document.createElement("section");t.appendChild(r);var i=document.createElement("p");r.appendChild(i);var o=document.createElement("label");i.appendChild(o),o.htmlFor="name",o.innerText="Name:";var a=document.createElement("input");a.setAttribute("type","text"),a.setAttribute("id","name"),a.setAttribute("required",!0),i.appendChild(a);var s=document.createElement("p");r.appendChild(s);var c=document.createElement("label");s.appendChild(c),c.htmlFor="signUpEmail",c.innerText="Email:";var l=document.createElement("input");l.setAttribute("type","email"),l.setAttribute("id","signUpEmail"),l.setAttribute("required",!0),s.appendChild(l);var u=document.createElement("p");r.appendChild(u);var d=document.createElement("label");u.appendChild(d),d.htmlFor="signUpPassword",d.innerText="Password:";var h=document.createElement("input");h.setAttribute("type","password"),h.setAttribute("id","signUpPassword"),h.setAttribute("required",!0),u.appendChild(h);var p=document.createElement("p");r.appendChild(p),p.classList.add("signUpErrorMsg");var f=document.createElement("section");t.appendChild(f),f.classList.add("btn-section");var m=document.createElement("p");f.appendChild(m);var v=document.createElement("button");v.setAttribute("type","submit"),v.setAttribute("id","signUpButton"),v.innerText="Sign Up",m.appendChild(v);var g=document.createElement("section");t.appendChild(g),g.classList.add("switch-section");var y=document.createElement("p");y.innerText="Already have an account?",g.appendChild(y);var b=document.createElement("p");g.appendChild(b);var _=document.createElement("a");_.setAttribute("id","logInSwitch"),_.innerText="Log in",b.appendChild(_)}function Zd(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("form");t.classList.add("logInForm"),e.appendChild(t);var n=document.createElement("h1");n.innerText="Log in",t.appendChild(n);var r=document.createElement("section");r.setAttribute("id","userInfo"),t.appendChild(r);var i=document.createElement("p");r.appendChild(i);var o=document.createElement("label");i.appendChild(o),o.htmlFor="logInEmail",o.innerText="Email:";var a=document.createElement("input");a.setAttribute("type","email"),a.setAttribute("id","logInEmail"),a.setAttribute("required",!0),i.appendChild(a);var s=document.createElement("p");r.appendChild(s);var c=document.createElement("label");s.appendChild(c),c.htmlFor="logInPassword",c.innerText="Password:";var l=document.createElement("input");l.setAttribute("type","password"),l.setAttribute("id","logInPassword"),l.setAttribute("required",!0),s.appendChild(l);var u=document.createElement("p");r.appendChild(u),u.classList.add("logInErrorMsg");var d=document.createElement("section");t.appendChild(d),d.classList.add("btn-section");var h=document.createElement("p");d.appendChild(h);var p=document.createElement("button");p.setAttribute("type","submit"),p.setAttribute("id","logInButton"),p.innerText="Log in",h.appendChild(p);var f=document.createElement("section");t.appendChild(f),f.classList.add("switch-section");var m=document.createElement("p");m.innerText="Don't have an account yet?",f.appendChild(m);var v=document.createElement("p");f.appendChild(v);var g=document.createElement("a");g.setAttribute("id","signUpSwitch"),g.innerText="Sign up",v.appendChild(g);var y=document.createElement("a");y.setAttribute("id","forgotPass"),y.innerText="Forgot your password?",f.appendChild(y)}function eh(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("form");t.classList.add("contact-form"),e.appendChild(t);var n=document.createElement("h1");n.innerText="Contact us",t.appendChild(n);var r=document.createElement("section");t.appendChild(r);var i=document.createElement("p");r.appendChild(i);var o=document.createElement("label");i.appendChild(o),o.htmlFor="name",o.innerText="Name:";var a=document.createElement("input");a.setAttribute("type","text"),a.setAttribute("id","name"),a.setAttribute("name","user_name"),a.setAttribute("required",""),i.appendChild(a);var s=document.createElement("p");r.appendChild(s);var c=document.createElement("label");s.appendChild(c),c.htmlFor="contactEmail",c.innerText="Email:";var l=document.createElement("input");l.setAttribute("type","email"),l.setAttribute("id","contactEmail"),l.setAttribute("name","user_email"),l.setAttribute("required",""),s.appendChild(l);var u=document.createElement("p");t.appendChild(u);var d=document.createElement("label");u.appendChild(d),d.htmlFor="emailSubject",d.innerText="Subject:";var h=document.createElement("input");h.setAttribute("type","text"),h.setAttribute("id","emailSubject"),h.setAttribute("name","subject"),h.setAttribute("required",""),u.appendChild(h);var p=document.createElement("p");t.appendChild(p);var f=document.createElement("label");p.appendChild(f),f.htmlFor="contact-text",f.innerText="Your message:";var m=document.createElement("textArea");m.setAttribute("placeholder","Describe your problem or suggestion in detail. What device are you using?"),m.setAttribute("id","contact-text"),m.setAttribute("name","message"),m.setAttribute("required",""),p.appendChild(m);var v=document.createElement("p");t.appendChild(v),v.classList.add("contactErrorMsg");var g=document.createElement("section");t.appendChild(g),g.classList.add("btn-section");var y=document.createElement("input");y.setAttribute("type","submit"),y.setAttribute("value","Send"),y.setAttribute("id","contactBtn"),g.appendChild(y)}function th(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");t.classList.add("successDiv"),e.appendChild(t);var n=document.createElement("h1");n.innerText="Contact us",t.appendChild(n);var r=document.createElement("p");r.classList.add("successMsgExpl"),r.innerText="To report a problem or share your suggestions, please send an email to vladimir@lingway.net.",t.appendChild(r)}function nh(){return rh.apply(this,arguments)}function rh(){var e;return e=Kd().mark((function e(){var t,n,r,i,o,a,s,c;return Kd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Eu();case 3:t=e.sent,console.log("stripeCustomerID",t),(n=document.querySelector(".content-area")).innerHTML="",(r=document.createElement("form")).classList.add("subscription-portal-form"),r.setAttribute("action","/api/create-portal-session"),r.setAttribute("method","post"),n.appendChild(r),(i=document.createElement("h1")).innerText="Manage your subscription",r.appendChild(i),o=document.createElement("p"),r.appendChild(o),o.classList.add("portal-description"),o.textContent="Click the button below to manage your subscription.",(a=document.createElement("input")).setAttribute("type","hidden"),a.setAttribute("id","stripeCustomerID"),a.setAttribute("name","stripeCustomerID"),a.value=t,r.appendChild(a),s=document.createElement("section"),r.appendChild(s),s.classList.add("btn-section"),(c=document.createElement("button")).setAttribute("type","submit"),c.setAttribute("id","portal-button"),c.innerText="Start",s.appendChild(c),e.next=39;break;case 35:e.prev=35,e.t0=e.catch(0),console.error("Error generating Subscription page ",e.t0),nd();case 39:case"end":return e.stop()}}),e,null,[[0,35]])})),rh=function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Qd(o,r,i,a,s,"next",e)}function s(e){Qd(o,r,i,a,s,"throw",e)}a(void 0)}))},rh.apply(this,arguments)}ta.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},ta.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},Mi=ut,ot(new J("database",((e,{instanceIdentifier:t})=>Wl(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t)),"PUBLIC").setMultipleInstances(!0)),pt(Ni,Oi,void 0),pt(Ni,Oi,"esm2017"),du(),function(){qd.apply(this,arguments)}();class ih{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const oh={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:(()=>{if("undefined"!=typeof localStorage)return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}})()},ah=e=>e?"string"==typeof e?{publicKey:e}:"[object Object]"===e.toString()?e:{}:{},sh=async(e,t,n={})=>{const r=await fetch(oh.origin+e,{method:"POST",headers:n,body:t}),i=await r.text(),o=new ih(r.status,i);if(r.ok)return o;throw o},ch=(e,t,n)=>{if(!e||"string"!=typeof e)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||"string"!=typeof t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n||"string"!=typeof n)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},lh=e=>e.webdriver||!e.languages||0===e.languages.length,uh=()=>new ih(451,"Unavailable For Headless Browser"),dh=(e,t)=>{if((e=>!e.list?.length||!e.watchVariable)(e))return!1;((e,t)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if("string"!=typeof t)throw"The BlockList watchVariable has to be a string"})(e.list,e.watchVariable);const n=(r=t,i=e.watchVariable,r instanceof FormData?r.get(i):r[i]);var r,i;return"string"==typeof n&&e.list.includes(n)},hh=()=>new ih(403,"Forbidden"),ph=async(e,t,n)=>{if(!t.throttle||!n)return!1;((e,t)=>{if("number"!=typeof e||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&"string"!=typeof t)throw"The LimitRate ID has to be a non-empty string"})(t.throttle,t.id);const r=t.id||e,i=await(async(e,t,n)=>{const r=Number(await n.get(e)||0);return t-Date.now()+r})(r,t.throttle,n);return i>0||(await n.set(r,Date.now().toString()),!1)},fh=()=>new ih(429,"Too Many Requests"),mh=async(e,t,n,r)=>{const i=ah(r),o=i.publicKey||oh.publicKey,a=i.blockHeadless||oh.blockHeadless,s=oh.storageProvider||i.storageProvider,c={...oh.blockList,...i.blockList},l={...oh.limitRate,...i.limitRate};if(a&&lh(navigator))return Promise.reject(uh());const u=(e=>"string"==typeof e?document.querySelector(e):e)(n);ch(o,e,t),(e=>{if(!e||"FORM"!==e.nodeName)throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"})(u);const d=new FormData(u);return dh(c,d)?Promise.reject(hh()):await ph(location.pathname,l,s)?Promise.reject(fh()):(d.append("lib_version","4.4.1"),d.append("service_id",e),d.append("template_id",t),d.append("user_id",o),sh("/api/v1.0/email/send-form",d))};function vh(e,t){console.log(t);var n=document.getElementById("forgotPass");switch(t){case"auth/invalid-email":e.innerHTML="<i class='fa-solid fa-circle-exclamation'></i> Please enter a valid email address";break;case"auth/wrong-password":e.innerHTML="<i class='fa-solid fa-circle-exclamation'></i> Error: Incorrect Password",n&&(n.style.display="block");break;case"auth/invalid-credential":e.innerHTML="<i class='fa-solid fa-circle-exclamation'></i> Error: Incorrect Email or Password",n&&(n.style.display="block");break;case"auth/missing-password":e.innerHTML="<i class='fa-solid fa-circle-exclamation'></i> Please enter your password";break;case"auth/missing-email":e.innerHTML="<i class='fa-solid fa-circle-exclamation'></i> Please enter your email address";break;case"auth/weak-password":e.innerHTML="<i class='fa-solid fa-circle-exclamation'></i> Your password must be at least 6 characters long";break;case"auth/email-already-in-use":e.innerHTML="<i class='fa-solid fa-circle-exclamation'></i> A user with this email address already exists";break;case"auth/too-many-requests":e.innerHTML="<i class='fa-solid fa-circle-exclamation'></i> Error: too many login requests. Please try again in a few minutes.";break;default:e.innerHTML="<i class='fa-solid fa-circle-exclamation'></i> An error has occurred. Make sure that the email (or the password) is correct."}}function gh(e){return gh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gh(e)}function yh(){yh=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:I(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",v={};function g(){}function y(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(N([])));E&&E!==n&&r.call(E,a)&&(_=E);var C=b.prototype=g.prototype=Object.create(_);function T(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(i,o,a,s){var c=d(e[i],e,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==gh(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function I(t,n,r){var i=h;return function(o,a){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var c=k(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var l=d(t,n,r);if("normal"===l.type){if(i=r.done?m:p,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=m,r.method="throw",r.arg=l.arg)}}}function k(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(gh(t)+" is not iterable")}return y.prototype=b,i(C,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,c,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},T(L.prototype),l(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new L(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(C),l(C,c,"Generator"),l(C,a,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function bh(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}var _h,wh;function Eh(){var e;return e=yh().mark((function e(){var t,n,r,i,o;return yh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eu();case 2:t=e.sent,n=t.app,r=Si(n),i=document.getElementById("resetEmail"),o=document.querySelector(".passResetErrorMsg"),console.log(i.value),i&&(_h=i.value),mr(r,_h).then((function(){console.log("Password reset email sent"),alert("Password reset email sent. Please check your email. If your email address is not registered on the app, you should sign up instead."),Zd()})).catch((function(e){var t=e.code,n=e.message;console.error(t+n),o&&vh(o,t)}));case 10:case"end":return e.stop()}}),e)})),Eh=function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){bh(o,r,i,a,s,"next",e)}function s(e){bh(o,r,i,a,s,"throw",e)}a(void 0)}))},Eh.apply(this,arguments)}function Ch(e){return Ch="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ch(e)}function Th(){Th=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:I(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",v={};function g(){}function y(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(N([])));E&&E!==n&&r.call(E,a)&&(_=E);var C=b.prototype=g.prototype=Object.create(_);function T(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(i,o,a,s){var c=d(e[i],e,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==Ch(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function I(t,n,r){var i=h;return function(o,a){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var c=k(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var l=d(t,n,r);if("normal"===l.type){if(i=r.done?m:p,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=m,r.method="throw",r.arg=l.arg)}}}function k(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Ch(t)+" is not iterable")}return y.prototype=b,i(C,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,c,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},T(L.prototype),l(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new L(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(C),l(C,c,"Generator"),l(C,a,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Lh(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Ih(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Lh(o,r,i,a,s,"next",e)}function s(e){Lh(o,r,i,a,s,"throw",e)}a(void 0)}))}}function kh(){return kh=Ih(Th().mark((function e(){var t,n,r,i,o,a,s,c,l,u;return Th().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eu();case 2:t=e.sent,n=t.app,r=Si(n),i=document.querySelector(".signUpForm"),o=document.querySelector(".logInForm"),a=document.getElementById("logInButtonMenu"),s=document.getElementById("signUpButtonMenu"),c=document.getElementById("logOutButton"),l=document.querySelector(".menu-element.premiumBtn"),u=document.getElementById("subscription"),yr(r,(function(e){e?(o&&Oh(),i&&Oh(),a.style.display="none",s.style.display="none",c.style.display="block",l.style.display="none",u.style.display="block"):(c.style.display="none",a.style.display="block",s.style.display="block",l.style.display="flex",u.style.display="none")}));case 13:case"end":return e.stop()}}),e)}))),kh.apply(this,arguments)}function Sh(){return Sh=Ih(Th().mark((function e(){var t,n,r,i,o,a,s,c,l,u,d,h,p;return Th().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eu();case 2:t=e.sent,n=t.app,r=Si(n),i=Gl(n),o=document.getElementById("signUpEmail"),a=document.getElementById("signUpPassword"),s=document.getElementById("name"),c=document.querySelector(".content-area"),l=document.querySelector(".sidebarContainer"),u=document.querySelector(".sidebarTabletContainer"),d=document.querySelector("footer"),h=o.value,p=a.value,vr(r,h,p).then((function(e){var t=e.user;alert("Your account has been created!"),c&&(c.innerHTML=""),Dl(Rl(i,"users/"+t.uid+"/info"),{name:s.value,email:t.email,last_login:Date.now()}),Ju(),Gu(),l.style.display="flex",u.style.display="flex",d.style.display="block"})).catch((function(e){var t=e.code,n=e.message;console.log("error code: ",t,"errorMsg: ",n);var r=document.querySelector(".signUpErrorMsg");r&&vh(r,t)}));case 16:case"end":return e.stop()}}),e)}))),Sh.apply(this,arguments)}function xh(){return xh=Ih(Th().mark((function e(){var t,n,r,i,o,a,s,c,l,u,d,h;return Th().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eu();case 2:t=e.sent,n=t.app,r=Si(n),i=Gl(n),o=document.getElementById("logInEmail"),a=document.getElementById("logInPassword"),s=o.value,c=a.value,l=document.querySelector(".content-area"),u=document.querySelector(".sidebarContainer"),d=document.querySelector(".sidebarTabletContainer"),h=document.querySelector("footer"),gr(r,s,c).then((function(e){l.innerHTML="",Ju(),Gu(),u.style.display="flex",d.style.display="flex",h.style.display="block";var t=e.user;alert("Your have logged in!");var n={last_login:Date.now()};Hl(Rl(i,"users/"+t.uid+"/info"),n)})).catch((function(e){var t=e.code,n=e.message;console.error("error message: ",t+n);var r=document.querySelector(".logInErrorMsg");r&&vh(r,t)}));case 15:case"end":return e.stop()}}),e)}))),xh.apply(this,arguments)}function Ph(){return Nh.apply(this,arguments)}function Nh(){return Nh=Ih(Th().mark((function e(){var t,n,r,i,o,a,s,c;return Th().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eu();case 2:return t=e.sent,n=t.app,r=Si(n),i=document.querySelector(".mainSection"),o=document.querySelector(".content-area"),a=document.querySelector(".sidebarContainer"),s=document.querySelector(".sidebarTabletContainer"),c=document.querySelector("footer"),e.next=12,br(r);case 12:i&&(i.innerHTML=""),o.innerHTML="",Ju(),Gu(),a.style.display="flex",s.style.display="flex",c.style.display="block",alert("Your have logged out");case 20:case"end":return e.stop()}}),e)}))),Nh.apply(this,arguments)}function Oh(){var e=document.getElementById("resetEmail"),t=document.getElementById("logInEmail"),n=document.getElementById("logInPassword"),r=document.getElementById("signUpEmail"),i=document.getElementById("signUpPassword"),o=document.querySelector(".logInErrorMsg"),a=document.querySelector(".signUpErrorMsg");o&&(o.innerHTML=""),a&&(a.innerHTML=""),e&&(e.value=""),t&&(t.value=""),n&&(n.value=""),r&&(r.value=""),i&&(i.value="")}function Mh(e,t){for(var n=new Date,r=new Date(n),i=null,o=[3,7,14,30,0],a=4;a>=0;a--)if(i=t[a].find((function(t){return t.id===e+1}))){var s=t[a].indexOf(i);r.setDate(n.getDate()+o[a]),i.repetDate=r.getTime(),t[a+1].push(i),t[a].splice(s,1);break}if(!i){var c={id:e+1,repetDate:0};r.setDate(n.getDate()+3),c.repetDate=r.getTime(),t[0].push(c)}}function jh(e,t){var n=new Date,r=new Date(n),i=null;r.setDate(n.getDate()+1);for(var o=0;o<=4;o++)if(i=t[o].find((function(t){return t.id===e+1}))){var a=t[o].indexOf(i);i.repetDate=r.getTime(),0!==o&&(t[o-1].push(i),t[o].splice(a,1));break}if(!i){var s={id:e+1,repetDate:0};s.repetDate=r.getTime(),t[0].push(s),console.log("ID in moveBack not found: ",e+1)}}function Ah(e,t,n){var r,i=e.verb,o=document.querySelector(".learnMore"),a=document.querySelector(".infoPopupSection");o.addEventListener("click",(function(){o.style.display="none",a.style.display="none",a.innerHTML="<i class='fa-solid fa-xmark popupInfo-close'></i>";var s=document.querySelector(".popupInfo-close"),c=document.createElement("div");switch(c.classList.add("messageDiv"),a.appendChild(c),t){case"present":r=function(e){return{group:{1:{regular:{incorrect:{reflexive:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,'</b> follows the regular \'-er\' \n              conjugation pattern.</p> \n            <p>It\'s also a <u>reflexive</u> verb, so the reflexive pronoun \'se\' \n            should change depending on the subject: "Je me...", "tu te...", "il se...", etc. </p>')},nonReflexive:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> follows the regular '-er' conjugation pattern.</p>")}},almost:{message:'<p><i class="fa-solid fa-exclamation-triangle"></i> Don\'t forget the accent marks (é, è, û, etc.). In this case, the accent remains the same as in the infinitive form.</p>\n    <p>You can use the buttons above the text field to type letters with an accent mark.</p>'}},irregular:{reflexive:{spellingChange:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> is one of the verbs that follow the regular '-er' \n              conjugation pattern with spelling changes: <i>e</i> or <i>é</i> <i class=\"fa-solid fa-arrow-right\"></i> <b><i>è</i></b> \n              (except <i>'nous'</i> and <i>'vous'</i>).</p> \n              <p>It's also a <i>reflexive</i> verb, so the reflexive pronoun 'se' \n              should change depending on the subject: \"Je me...\", \"tu te...\", \"il se...\", etc. </p>")}},nonReflexive:{spellingChange:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> is one of the verbs that follow the regular '-er' \n              conjugation pattern with spelling changes: <i>e</i> or <i>é</i> <i class=\"fa-solid fa-arrow-right\"></i> <b><i>è</i></b>.</p> \n              <p>The conjugations of 'nous' and 'vous' remain regular. </p>")}}}},2:{message:'<i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> follows the same pattern as the verbs <i>choisir</i>, <i>finir</i>,\n        <i>grandir</i> with the following endings: '-is', '-is', '-it', '-issons', '-issez', '-issent'.")},3:{pattern:{lire:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> follows the same pattern as the verbs <i>conduire</i>, <i>dire</i>,\n            <i>lire</i> with the following endings: '-s', '-s', '-t', '-ons', '-ez', '-ent'.</p>\n            <p>The exception is the 'vous' form of <i>'dire'</i>: vous <b>dites</b>.</p>.")},mettre:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> follows the same pattern as the verbs <i>battre</i>, <i>promettre</i>,\n            <i>mettre</i> with the following endings: '-ts', '-ts', '-t', '-ons', '-ez', '-ent'.</p>")},savoir:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> has the following endings in the present tense: \n            '-s', '-s', '-t', '-ons', '-ez', '-ent'.</p> <p>However, it's still quite irregular as it doesn't exactly\n            follow any common conjugation pattern.</p>")},voir:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> has the following endings in the present tense: \n            '-s', '-s', '-t', '-ons', '-ez', '-ent'.</p> <p>However, it's still quite irregular as it doesn't exactly\n            follow any common conjugation pattern.</p>")},ecrire:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> follows the same pattern as the verbs <i>(s')inscrire</i>, <i>décrire</i>,\n            <i>écrire</i> with the following endings: '-s', '-s', '-t', '-ons', '-ez', '-ent'.</p>\n            <p>Note that the 'nous', 'vous' and 'ils/elles' conjugations have a <b>'-v'</b>: \n            <i>vous écri<span class='red'>v</span>ez</i>, <i>elles s'inscri<span class='red'>v</span>ent</i>, etc.")},vouloir:{message:'<p><i class="fa-solid fa-bolt"></i> The verbs <b>pouvoir</b> and <b>vouloir</b> follow the same pattern\n            with the following endings:  -x, -x, -t, -ons, -ez, -ent.</p>'},attendre:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> follows the same pattern as the verbs <i>répondre</i>, <i>attendre</i>,\n            <i>entendre</i> with the following endings: -ds, -ds, -d, -ons, -ez, -ent.</p>")},devoir:{message:"<p><i class=\"fa-solid fa-bolt\"></i> The verbs <b>recevoir</b> and <b>devoir</b> follow the same pattern       \n            with the following endings in the present tense: \n            '-s', '-s', '-t', '-ons', '-ez', '-ent'.</p> <p>Note that in the verb 'recevoir', 'c' changes to '<b>ç</b>'\n            for the <i>je</i>, <i>tu</i> and <i>il/elle/on</i> conjugations.</p>"},prendre:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> follows the same pattern as the verbs <i>apprendre</i>, <i>comprendre</i>,\n            <i>prendre</i> with the following endings: -ds, -ds, -d, -ons, -ez, -ent.</p>")},boire:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> has the following endings in the present tense: \n            '-s', '-s', '-t', '-ons', '-ez', '-ent'.</p> <p>However, it's still quite irregular as it doesn't exactly\n            follow any common conjugation pattern.</p>")},partir:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> follows the same pattern as the verbs <i>sentir</i>, <i>mentir</i>,\n            <i>sortir</i> with the following endings: '-s', '-s', '-t', '-ons', '-ez', '-ent'.</p>")},vivre:{message:"<p><i class=\"fa-solid fa-bolt\"></i> The verbs <b>vivre</b> and <b>suivre</b> follow the same conjugation pattern\n            with the following endings: '-s', '-s', '-t', '-ons', '-ez', '-ent'.</p>\n            <p>Note that the 'je' conjugation of 'suivre' in the present tense is <b>'je suis'</b>.</p>"},venir:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> follows the same pattern as the verbs <i>tenir</i>, <i>venir</i>,\n            <i>devenir</i> with the following endings: '-s', '-s', '-t', '-ons', '-ez', '-ent'.</p>")}}},irregular:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> is an irregular verb. It doesn't follow a common pattern.</p>")}}}}(i),function(e,t,n){var r=document.querySelector(".infoPopupSection"),i=document.querySelector(".messageDiv"),o=e.verb,a=e.group;1===a&&(r.style.display="block",e.irregular||e.reflexive?!e.irregular&&e.reflexive?i.innerHTML=n.group[1].regular.incorrect.reflexive.message:e.irregular&&!e.reflexive&&"accent"===e.spellingChange?i.innerHTML=n.group[1].irregular.nonReflexive.spellingChange.message:e.irregular&&e.reflexive&&"accent"===e.spellingChange?i.innerHTML=n.group[1].irregular.reflexive.spellingChange.message:(console.log("No verb pattern found for the verb ".concat(o," in the Present Tense (group 1).")),r.style.display="none"):i.innerHTML=n.group[1].regular.incorrect.nonReflexive.message),e.irregular||"almostWoAccent"!==t||(i.innerHTML=n.group[1].regular.almost.message,r.style.display="block"),2===a&&(i.innerHTML=n.group[2].message,r.style.display="block"),3===a&&(r.style.display="block","lire"===e.pattern?i.innerHTML=n.group[3].pattern.lire.message:"mettre"===e.pattern?i.innerHTML=n.group[3].pattern.mettre.message:"savoir"===e.pattern?i.innerHTML=n.group[3].pattern.savoir.message:"voir"===e.pattern?i.innerHTML=n.group[3].pattern.voir.message:"écrire"===e.pattern?i.innerHTML=n.group[3].pattern.ecrire.message:"vouloir"===e.pattern?i.innerHTML=n.group[3].pattern.vouloir.message:"attendre"===e.pattern?i.innerHTML=n.group[3].pattern.attendre.message:"devoir"===e.pattern?i.innerHTML=n.group[3].pattern.devoir.message:"prendre"===e.pattern?i.innerHTML=n.group[3].pattern.prendre.message:"boire"===e.pattern?i.innerHTML=n.group[3].pattern.boire.message:"partir"===e.pattern?i.innerHTML=n.group[3].pattern.partir.message:"vivre"===e.pattern?i.innerHTML=n.group[3].pattern.vivre.message:"venir"===e.pattern?i.innerHTML=n.group[3].pattern.venir.message:(console.log("No verb pattern found for the verb ".concat(o," in the Present Tense (group 3).")),r.style.display="none")),"irregular"===a&&(i.innerHTML=n.group.irregular.message,r.style.display="block")}(e,n,r);break;case"pastcomp":r=function(e){return{avoir:{participle:{regular:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> is conjugated with 'avoir' and it follows the regular '-er' pattern \n          in the <i>Passé composé</i>.</p> <p>To form the <b>past participle</b> of\n          <b>-er verbs</b>, you replace the -er\n          at the end of the infinitive with -é.</p>"),link:""},ir:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> is conjugated with 'avoir' and it follows the regular '-ir' pattern \n          in the <i>Passé composé</i>.</p> <p>To form the <b>past participle</b> of\n          <b>-ir verbs</b>, you usually replace the -ir\n          at the end of the infinitive with <b>-i</b>.</p>"),link:""},ouvrir:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> is conjugated with 'avoir'.</p> \n          <p>Verbs like <i><b>ouvrir</b></i>,\n          <i><b>couvrir</b></i>, <i><b>découvrir</b></i>,\n          <i><b>offrir</b></i>, <i><b>souffrir</b></i> form their past participle\n          with <b>-ert</b> at the end.</p>"),link:""},dre:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> is conjugated with 'avoir'.</p><p>Many verbs ending in <b>-dre</b> (<i>attendre</i>, <i>entendre</i>, <i>répondre</i>, etc)\n          form their past participle by replacing the <b>-re</b> ending with <b>-u</b>.</p>"),link:""},prendre:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,'</b> is conjugated with \'avoir\'.</p>\n          <p>Verbs like <i><b>prendre</b></i>, <i><b>apprendre</b></i>,\n          <i><b>comprendre</b></i> form their past participle in the same way: prendre <i class="fa-solid fa-arrow-right"></i> pris,\n          apprendre <i class="fa-solid fa-arrow-right"></i> appris, etc.</p>'),link:""},rejoindre:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> is conjugated with 'avoir' in the <i>Passé composé</i>.</p>\n          <p>To form the <b>past participle</b> of verbs ending in <b>-oindre</b>,\n          <b>-eindre</b> and\n          <b>-aindre</b> in the Passé Composé, replace the <b>-dre</b> at the end of the infinitive with\n          <b>-t</b></p>"),link:""},irregular:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> is conjugated with 'avoir' and \n          has an <u><b>irregular</b></u> past participle.</p>"),link:""}},twoAux:'<p><i class="fa-solid fa-exclamation-triangle"></i> Note that in some cases, <b>'.concat(e,"</b> \n          is conjugated with 'être'.</p>")},etre:{participle:{regular:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> is conjugated with <b>'être'</b> and it follows the regular '-er' pattern \n          in the <i>Passé composé</i>.</p> <p>To form the <b>past participle</b> of\n          <b>-er verbs</b>, you replace the -er\n          at the end of the infinitive with -é.</p>"),link:""},ir:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> is conjugated with <b>'être'</b> and it follows the regular '-ir' pattern \n          in the <i>Passé composé</i>.</p> <p>To form the <b>past participle</b> of\n          <b>-ir verbs</b>, you usually replace the -ir\n          at the end of the infinitive with <b>-i</b>.</p>"),link:""},ouvrir:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> is conjugated with <b>'être'</b>.</p> \n          <p>Verbs like <i><b>ouvrir</b></i>,\n          <i><b>couvrir</b></i>, <i><b>découvrir</b></i>,\n          <i><b>offrir</b></i>, <i><b>souffrir</b></i> form their past participle\n          with <b>-ert</b> at the end.</p>"),link:""},dre:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> is conjugated with <b>'être'</b>.</p><p>Many verbs ending in <b>-dre</b> (<i>attendre</i>, <i>entendre</i>, <i>répondre</i>, etc)\n          form their past participle by replacing the <b>-re</b> ending with <b>-u</b>.</p>"),link:""},prendre:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,'</b> is conjugated with <b>\'être\'</b>.</p>\n          <p>Verbs like <i><b>prendre</b></i>, <i><b>apprendre</b></i>,\n          <i><b>comprendre</b></i> form their past participle in the same way: prendre <i class="fa-solid fa-arrow-right"></i> pris,\n          apprendre <i class="fa-solid fa-arrow-right"></i> appris, etc.</p>'),link:""},rejoindre:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> is conjugated with <b>'être'</b>\n          in the <i>Passé composé</i>.</p>\n          <p>To form the <b>past participle</b> of verbs ending in <b>-oindre</b>,\n          <b>-eindre</b> and\n          <b>-aindre</b> in the Passé Composé, replace the <b>-dre</b> at the end of the infinitive with\n          <b>-t</b></p>"),link:""},irregular:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> is conjugated with <b>'être'</b> and \n          has an <u><b>irregular</b></u> past participle.</p>"),link:""}},twoAux:"<p class='twoAuxMessage'><i class=\"fa-solid fa-exclamation-triangle\"></i> Note that in some cases, <b>".concat(e,"</b> \n          can be conjugated with 'avoir'.</p>")},almostPastComp:{plural:{message:"<p><i class=\"fa-solid fa-exclamation-triangle\"></i> Don't forget to add an <b>'s'</b> to match plural subjects (ils, les enfants, etc.) when a verb is conjugated \n        with 'être' in the Passé composé.</p>",link:""},fem:{message:"<p><i class=\"fa-solid fa-exclamation-triangle\"></i> Don't forget to add an <b>'e'</b> to match feminine singular subjects (elle, Anna, etc.) when a verb \n        in conjugated with 'être' in the Passé composé.</p> <p> For the subjects 'je' and 'tu', \n        pay attention to hints like '(masc.)' and '(fem.)'.</p>",link:""}}}}(i),function(e,t,n){var r=document.querySelector(".infoPopupSection"),i=document.querySelector(".messageDiv"),o=e.verb;if(!e.aux&&(r.style.display="block","regular"===e.participle?i.innerHTML=n.avoir.participle.regular.message:"ir"===e.participle?i.innerHTML=n.avoir.participle.ir.message:"ouvrir"===e.participle?i.innerHTML=n.avoir.participle.ouvrir.message:"dre"===e.participle?i.innerHTML=n.avoir.participle.dre.message:"prendre"===e.participle?i.innerHTML=n.avoir.participle.prendre.message:"rejoindre"===e.participle?i.innerHTML=n.avoir.participle.rejoindre.message:"irregular"===e.participle?i.innerHTML=n.avoir.participle.irregular.message:(console.log("No verb pattern found for the verb ".concat(o," in the Passé Composé ('avoir').")),r.style.display="none"),e.twoAux)){var a=n.avoir.twoAux,s=document.createElement("div");s.innerHTML=a,i.appendChild(s)}if(e.aux&&"être"===e.aux&&(r.style.display="block","regular"===e.participle?i.innerHTML=n.etre.participle.regular.message:"ir"===e.participle?i.innerHTML=n.etre.participle.ir.message:"ouvrir"===e.participle?i.innerHTML=n.etre.participle.ouvrir.message:"dre"===e.participle?i.innerHTML=n.etre.participle.dre.message:"prendre"===e.participle?i.innerHTML=n.etre.participle.prendre.message:"rejoindre"===e.participle?i.innerHTML=n.etre.participle.rejoindre.message:"irregular"===e.participle?i.innerHTML=n.etre.participle.irregular.message:(console.log("No verb pattern found for the verb ".concat(o," in the Passé Composé ('être').")),r.style.display="none"),e.twoAux)){var c=n.etre.twoAux,l=document.createElement("div");l.innerHTML=c,i.appendChild(l)}"almostPastComp"===t&&e.plural&&(i.innerHTML=n.almostPastComp.plural.message,r.style.display="block"),"almostPastComp"===t&&e.fem&&(i.innerHTML=n.almostPastComp.fem.message,r.style.display="block")}(e,n,r);break;case"pastimp":!function(e,t){var n=document.querySelector(".infoPopupSection"),r=document.querySelector(".messageDiv");if(e.pattern)switch(e.pattern){case"je":r.innerHTML=t.pattern.je,n.style.display="block";break;case"tu":r.innerHTML=t.pattern.tu,n.style.display="block";break;case"il":r.innerHTML=t.pattern.il,n.style.display="block";break;case"nous":r.innerHTML=t.pattern.nous,n.style.display="block";break;case"vous":r.innerHTML=t.pattern.vous,n.style.display="block";break;case"ils":r.innerHTML=t.pattern.ils,n.style.display="block"}if("être"===e.verb&&t.etre){var i=document.createElement("div");i.innerHTML=t.etre,r.appendChild(i)}if("pleuvoir"===e.verb&&t.pleuvoir){var o=document.createElement("div");o.innerHTML=t.pleuvoir,r.appendChild(o)}if(e.exception&&"ier"===e.exception&&t.ier){var a=document.createElement("div");a.innerHTML=t.ier,r.appendChild(a)}if(e.exception&&"ger"===e.exception&&t.ger){var s=document.createElement("div");s.innerHTML=t.ger,r.appendChild(s)}}(e,r={pattern:{je:"<p><i class=\"fa-solid fa-bolt\"></i> 'Je' and 'tu' conjugations in the imperfect tense end in '<b>-ais</b>': \n      <i>je parlais</i>, <i>tu parlais</i>.</p>",tu:"<p><i class=\"fa-solid fa-bolt\"></i> 'Je' and 'tu' conjugations in the imperfect tense end in '<b>-ais</b>': \n      <i>je parlais</i>, <i>tu parlais</i>.</p>",il:"<p><i class=\"fa-solid fa-bolt\"></i> 'Il', 'elle', and 'on' conjugations in the imperfect tense end in '<b>-ait</b>': \n      <i>il parlait</i>, <i>elle parlait,</i> <i>on parlait</i>.</p>",nous:"<p><i class=\"fa-solid fa-bolt\"></i> 'Nous' conjugations in the imperfect tense end in '<b>-ions</b>':\n      <i>nous parlions</i>.</p>",vous:"<p><i class=\"fa-solid fa-bolt\"></i> 'Vous' conjugations in the imperfect tense end in '<b>-iez</b>':\n      <i>vous parliez</i>.</p>",ils:"<p><i class=\"fa-solid fa-bolt\"></i> 'Ils' and 'elles' conjugations in the imperfect tense end in '<b>-aient</b>':\n      <i>ils parlaient</i>, <i>elles finissaient</i>.</p>"},etre:'<p><i class="fa-solid fa-exclamation-triangle"></i> The verb <b>\'être\'</b> uses the stem <b>ét-</b> \n  instead of the "nous" form from the present tense to form the imperfect tense conjugations: <i>j\'<b>ét</b>ais</i>, <i>tu <b>ét</b>ais</i>, \n  <i>il/elle/on <b>ét</b>ait</i>...</p>',ier:"<p><i class=\"fa-solid fa-exclamation-triangle\"></i> Verbs ending in <b>-ier</b> have a double 'i' ('ii') in the 'nous' and 'vous' forms.</p>",pleuvoir:"<p>The imperfect conjugation of 'pleuvoir' is 'il <b>pleuvait</b>'.</p>",ger:'<p><i class="fa-solid fa-exclamation-triangle"></i> Verbs ending in <b>-ger</b> have an "e" (to preserve the soft "g" sound) in \n    their imperfect conjugations, except for the \'nous\' and \'vous\' forms: <i>je/tu mang<u>e</u>ais</i>, but <i>nous <b>mangions</i>.</p>'});break;case"future":r=function(e){return{regular:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> follows the regular conjugation pattern in the future tense.</p>"),irregular:{simple:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> changes its stem in the future simple tense while using \n      the same set of endings as regular verbs.</p>"),spelling:{eler:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> like some other verbs verbs ending in <b>-eler</b>\n        double the <b><i>l</i></b> in their simple future conjugations.</p>"),eter:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> like some other verbs verbs ending in <b>-eter</b> \n        double the <b><i>t</i></b> in their simple future conjugations.</p>"),eChange:"<p><i class=\"fa-solid fa-bolt\"></i> In some verbs like <b>lever</b>, <b>acheter</b>, \n        and <b>peser</b>, the first 'e' changes to <b>'è'</b>.</p>"}}}}(i),function(e,t){var n=document.querySelector(".infoPopupSection"),r=document.querySelector(".messageDiv");e.irregular&&!e.spelling&&t.irregular.simple?(r.innerHTML=t.irregular.simple,n.style.display="block"):e.spelling?(console.log(e.spelling),"eler"===e.spelling&&t.irregular.spelling.eler?(r.innerHTML=t.irregular.spelling.eler,n.style.display="block"):"eter"===e.spelling&&t.irregular.spelling.eter?(r.innerHTML=t.irregular.spelling.eter,n.style.display="block"):"eChange"===e.spelling&&t.irregular.spelling.eChange&&(r.innerHTML=t.irregular.spelling.eChange,n.style.display="block")):(console.log("else",e.spelling),r.innerHTML=t.regular,n.style.display="block")}(e,r);break;case"subjunctive":r=function(e){return{regular:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> follows the regular conjugation pattern in the present\n    subjunctive tense.</p>"),irregular:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> is irregular in the present subjunctive tense.</p>")}}(i),function(e,t){var n=document.querySelector(".infoPopupSection"),r=document.querySelector(".messageDiv");e.irregular&&t.irregular?(r.innerHTML=t.irregular,n.style.display="block"):(r.innerHTML=t.regular,n.style.display="block")}(e,r)}s&&s.addEventListener("click",(function(){a.style.display="none",a.innerHTML=""}))}))}function Rh(e){var t=new SpeechSynthesisUtterance;t.lang="fr-FR",t.volume=1,t.rate=1,t.text=e,speechSynthesis.speak(t)}function qh(){new Audio("src/correct.mp3").play()}function Dh(){new Audio("src/incorrect.mp3").play()}function Hh(e,t){var n=document.querySelector(".phrase-section"),r=document.querySelector(".type-section input"),i=document.querySelector(".msg-section"),o=document.querySelector(".learnMore");n.textContent="",n.appendChild(e);var a=document.getElementById("speaker");JSON.parse(localStorage.getItem("soundOn"))&&qh(),r.classList.add("almost-correct-answer"),i.innerHTML="<p class='almost'>Almost correct.</p>",o.style.display="block",a&&a.addEventListener("click",(function(){Rh(t)}))}function Fh(e){return Fh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fh(e)}function Uh(){Uh=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:I(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",v={};function g(){}function y(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(N([])));E&&E!==n&&r.call(E,a)&&(_=E);var C=b.prototype=g.prototype=Object.create(_);function T(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(i,o,a,s){var c=d(e[i],e,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==Fh(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function I(t,n,r){var i=h;return function(o,a){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var c=k(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var l=d(t,n,r);if("normal"===l.type){if(i=r.done?m:p,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=m,r.method="throw",r.arg=l.arg)}}}function k(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Fh(t)+" is not iterable")}return y.prototype=b,i(C,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,c,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},T(L.prototype),l(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new L(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(C),l(C,c,"Generator"),l(C,a,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function zh(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Vh(){var e;return e=Uh().mark((function e(){var t,n;return Uh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("../src/conjugation.json");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})),Vh=function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){zh(o,r,i,a,s,"next",e)}function s(e){zh(o,r,i,a,s,"throw",e)}a(void 0)}))},Vh.apply(this,arguments)}function Wh(e){var t,n,r,i,o=e.data,a=e.k,s=e.phraseCount,c=e.score,l=e.boxes,u=e.phraseStats,d=e.lives,h=e.userId,p={phrase:"",input:"",correctAnswer:"",isCorrect:!1,almostCorrect:!1},f=document.querySelector(".msg-section"),m=document.querySelector(".conjugSection"),v=document.querySelector(".submit-section"),g=document.querySelector(".type-section input"),y=document.querySelector(".next-section"),b=document.querySelector(".finish-section"),_=document.querySelector(".letters-section"),w=document.querySelector(".lives"),E=document.querySelector(".phrase-section"),C=g.value;r=s<5?y:b,p.phrase=o.data[a].phrase,p.input=C,p.correctAnswer=o.data[a].answer;var T=document.createElement("div");T.innerHTML='<i class="fa-solid fa-square-check"></i> '.concat(o.data[a].fullPhrase,' <i class="fa-solid fa-volume-high" id="speaker"></i>\n  <p class="translation">').concat(o.data[a].translation,"</p>");var L=document.createElement("div");switch(L.innerHTML="".concat(o.data[a].fullPhrase,' <i class="fa-solid fa-volume-high" id="speaker"></i>\n  <p class="translation">').concat(o.data[a].translation,"</p>"),""!==C.trim().toLowerCase()&&(g.classList.add("bold"),E.innerHTML="",_&&(_.style.display="none"),g.setAttribute("disabled",""),function(e,t,n,r){console.log(e,t,n,r);try{var i=r.verbs["".concat(e.verb)]["".concat(t.tenseShort)];e.aux&&"être"===e.aux&&e.twoAux&&(i=r.verbs["".concat(e.verb)].pastcompEtre);var o=Object.values(i);n.innerHTML='<div class="popup-icons"><i class="fa-regular fa-lightbulb bulb-animation" \n    style="color: #ef233c;"></i><i class="fa-solid fa-xmark popup-close"></i></div>';for(var a=0;a<o.length;a++)n.innerHTML+="<p>".concat(o[a],"</p>");n.style.display="block"}catch(t){console.log("Verb "+e.verb+" is not found in database ")}}(o.data[a],o.data[0],m,wh)),C.trim().toLowerCase()){case"":f.innerText="Please type a valid verb";break;case o.data[a].answer:case o.data[a].alternativeAnswer:(function(e,t){var n=document.querySelector(".phrase-section"),r=document.querySelector(".type-section input"),i=document.querySelector(".msg-section");n.textContent="",n.appendChild(e);var o=document.getElementById("speaker");JSON.parse(localStorage.getItem("soundOn"))&&qh(),r.classList.add("correct-answer"),i.innerText="Correct!",o&&o.addEventListener("click",(function(){Rh(t)}))})(T,o.data[a].fullPhrase),h&&Mh(a,l),c++,p.isCorrect=!0,u.push(p);break;case null===(t=o.data[a])||void 0===t?void 0:t.answerWoS:i="almostPastComp",Ah(o.data[a],o.data[0].tenseShort,i),Hh(T,o.data[a].fullPhrase),h&&Mh(a,l),c++,p.almostCorrectCorrect=!0,u.push(p);break;case null===(n=o.data[a])||void 0===n?void 0:n.answerWoAccent:i="almostWoAccent",Ah(o.data[a],o.data[0].tenseShort,i),Hh(T,o.data[a].fullPhrase),h&&Mh(a,l),c++,p.almostCorrectCorrect=!0,u.push(p);break;default:!h&&d&&d>0&&0==--d&&(w&&(w.style.color="#ef233c"),localStorage.setItem("appLastUseTime",Date.now().toString())),function(e,t,n,r){var i=document.querySelector(".phrase-section"),o=document.querySelector(".type-section input"),a=document.querySelector(".msg-section"),s=document.querySelector(".learnMore"),c=document.querySelector(".lives p");i.textContent="",i.appendChild(e);var l=document.getElementById("speaker"),u=JSON.parse(localStorage.getItem("soundOn"));console.log(u),u&&Dh(),l&&l.addEventListener("click",(function(){Rh(t)})),o.classList.add("incorrect-answer"),a.innerText='Incorrect. The correct answer is: "'.concat(n,'"'),s.style.display="block",c?c.textContent=r:console.error("Lives element not found in HandleIncorrectAnswer")}(L,o.data[a].fullPhrase,o.data[a].answer,d),h&&jh(a,l),Ah(o.data[a],o.data[0].tenseShort),u.push(p)}var I=document.querySelector(".popup-icons .popup-close");return I&&I.addEventListener("click",(function(){m.innerHTML="",m.style.display="none"})),""!==C.trim().toLowerCase()&&(v.style.display="none",r.style.display="flex"),{score:c,boxes:l,lives:d}}function Bh(e){return Bh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bh(e)}function Gh(){Gh=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:I(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",v={};function g(){}function y(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(N([])));E&&E!==n&&r.call(E,a)&&(_=E);var C=b.prototype=g.prototype=Object.create(_);function T(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(i,o,a,s){var c=d(e[i],e,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==Bh(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function I(t,n,r){var i=h;return function(o,a){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var c=k(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var l=d(t,n,r);if("normal"===l.type){if(i=r.done?m:p,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=m,r.method="throw",r.arg=l.arg)}}}function k(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Bh(t)+" is not iterable")}return y.prototype=b,i(C,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,c,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},T(L.prototype),l(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new L(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(C),l(C,c,"Generator"),l(C,a,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Yh(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function $h(){var e;return e=Gh().mark((function e(){var t,n;return Gh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("../src/conjugation.json");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})),$h=function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Yh(o,r,i,a,s,"next",e)}function s(e){Yh(o,r,i,a,s,"throw",e)}a(void 0)}))},$h.apply(this,arguments)}function Jh(e){var t=e.data,n=e.k,r=e.phraseCount,i=e.score,o=e.boxes,a=e.phraseStats,s=e.lives,c=e.userId;return new Promise((function(e,l){var u=document.querySelector(".option1"),d=document.querySelector(".option2"),h=document.querySelector(".option3"),p=document.querySelector(".option4");if(console.log("before",{score:i,boxes:o,lives:s}),u&&d&&h&&p){var f=function l(u){console.log("click, event:",u.target);var d=u.target.textContent;u.target.classList.add("selectedOption");var h=function(e,t){var n,r=t.data,i=t.k,o=t.phraseCount,a=t.score,s=t.boxes,c=t.phraseStats,l=t.lives,u=t.userId,d={phrase:"",input:"",correctAnswer:"",isCorrect:!1},h=(document.querySelector(".msg-section"),document.querySelector(".conjugSection"),document.querySelector(".options-section"),document.querySelector(".next-section")),p=document.querySelector(".finish-section"),f=document.querySelector(".lives");n=o<5?h:p,d.phrase=r.data[i].phrase,d.input=e,d.correctAnswer=r.data[i].answer;var m=document.createElement("div");m.innerHTML='<i class="fa-solid fa-square-check"></i> '.concat(r.data[i].fullPhrase,' <i class="fa-solid fa-volume-high" id="speaker"></i>\n  <p class="translation">').concat(r.data[i].translation,"</p>");var v=document.createElement("div");return v.innerHTML="".concat(r.data[i].fullPhrase,' <i class="fa-solid fa-volume-high" id="speaker"></i>\n  <p class="translation">').concat(r.data[i].translation,"</p>"),e===r.data[i].answer?(function(e,t){var n=document.querySelector(".phrase-section"),r=document.querySelector(".selectedOption"),i=document.querySelector(".msg-section");n.textContent="",n.appendChild(e);var o=document.getElementById("speaker"),a=JSON.parse(localStorage.getItem("soundOn"));console.log(a),a&&qh(),r&&(r.style.color="#269e52"),i.innerText="Correct!",o&&o.addEventListener("click",(function(){Rh(t)}))}(m,r.data[i].fullPhrase),u&&Mh(i,s),a++,d.isCorrect=!0,c.push(d)):(!u&&l&&l>0&&0==--l&&f&&(f.style.color="#ef233c"),function(e,t,n,r){var i=document.querySelector(".phrase-section"),o=document.querySelector(".selectedOption"),a=document.querySelector(".msg-section"),s=document.querySelector(".correct-option"),c=document.querySelector(".lives p");i.textContent="",i.appendChild(e);var l=document.getElementById("speaker");if(JSON.parse(localStorage.getItem("soundOn"))&&Dh(),l&&l.addEventListener("click",(function(){Rh(t)})),o&&(o.style.color="#ef233c"),s){var u=document.createElement("i");u.classList.add("fa-solid","fa-circle-check"),s.appendChild(u)}a.innerText="Incorrect",c?c.textContent=r:console.error("Lives element not found in HandleIncorrectAnswerQuiz")}(v,r.data[i].fullPhrase,r.data[i].answer,l),u&&jh(i,s),c.push(d)),n&&(n.style.display="flex"),{score:a,boxes:s,lives:l}}(d,{data:t,k:n,phraseCount:r,score:i,boxes:o,phraseStats:a,lives:s,userId:c});i=h.score,o=h.boxes,s=h.lives,console.log("inside",{score:i,boxes:o,lives:s}),m.forEach((function(e){e.removeEventListener("click",l)})),e({score:i,boxes:o,lives:s})},m=[u,d,h,p];m.forEach((function(e){e.addEventListener("click",f)}))}else l(new Error("Options not found"))}))}((e,t="https://api.emailjs.com")=>{if(!e)return;const n=ah(e);oh.publicKey=n.publicKey,oh.blockHeadless=n.blockHeadless,oh.storageProvider=n.storageProvider,oh.blockList=n.blockList,oh.limitRate=n.limitRate,oh.origin=n.origin||t})({publicKey:"Y5Qz1lQ7G8HnUd_eX"}),function(){return Vh.apply(this,arguments)}().then((function(e){wh=e})).catch((function(e){console.error("Error fetching conjugations:",e)})),function(){return $h.apply(this,arguments)}().then((function(e){})).catch((function(e){console.error("Error fetching conjugations:",e)}));const Kh="@firebase/installations",Qh="0.6.7",Xh=1e4,Zh=`w:${Qh}`,ep="FIS_v2",tp="https://firebaseinstallations.googleapis.com/v1",np=36e5,rp=new T("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ip(e){return e instanceof C&&e.code.includes("request-failed")}function op({projectId:e}){return`${tp}/projects/${e}/installations`}function ap(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function sp(e,t){const n=(await t.json()).error;return rp.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function cp({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}async function lp(e){const t=await e();return t.status>=500&&t.status<600?e():t}function up(e){return new Promise((t=>{setTimeout(t,e)}))}const dp=/^[cdef][\w-]{21}$/,hp="";function pp(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){var t;return(t=e,btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22)}(e);return dp.test(t)?t:hp}catch(e){return hp}}function fp(e){return`${e.appName}!${e.appId}`}const mp=new Map;function vp(e,t){const n=fp(e);gp(n,t),function(e,t){const n=(!yp&&"BroadcastChannel"in self&&(yp=new BroadcastChannel("[Firebase] FID Change"),yp.onmessage=e=>{gp(e.data.key,e.data.fid)}),yp);n&&n.postMessage({key:e,fid:t}),0===mp.size&&yp&&(yp.close(),yp=null)}(n,t)}function gp(e,t){const n=mp.get(e);if(n)for(const e of n)e(t)}let yp=null;const bp="firebase-installations-database",_p=1,wp="firebase-installations-store";let Ep=null;function Cp(){return Ep||(Ep=ye(bp,_p,{upgrade:(e,t)=>{0===t&&e.createObjectStore(wp)}})),Ep}async function Tp(e,t){const n=fp(e),r=(await Cp()).transaction(wp,"readwrite"),i=r.objectStore(wp),o=await i.get(n);return await i.put(t,n),await r.done,o&&o.fid===t.fid||vp(e,t.fid),t}async function Lp(e){const t=fp(e),n=(await Cp()).transaction(wp,"readwrite");await n.objectStore(wp).delete(t),await n.done}async function Ip(e,t){const n=fp(e),r=(await Cp()).transaction(wp,"readwrite"),i=r.objectStore(wp),o=await i.get(n),a=t(o);return void 0===a?await i.delete(n):await i.put(a,n),await r.done,!a||o&&o.fid===a.fid||vp(e,a.fid),a}async function kp(e){let t;const n=await Ip(e.appConfig,(n=>{const r=function(e){return Pp(e||{fid:pp(),registrationStatus:0})}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(rp.create("app-offline"))};const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const r=op(e),i=cp(e),o=t.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const a={fid:n,authVersion:ep,appId:e.appId,sdkVersion:Zh},s={method:"POST",headers:i,body:JSON.stringify(a)},c=await lp((()=>fetch(r,s)));if(c.ok){const e=await c.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:ap(e.authToken)}}throw await sp("Create Installation",c)}(e,t);return Tp(e.appConfig,n)}catch(n){throw ip(n)&&409===n.customData.serverCode?await Lp(e.appConfig):await Tp(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Sp(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}));return n.fid===hp?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function Sp(e){let t=await xp(e.appConfig);for(;1===t.registrationStatus;)await up(100),t=await xp(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await kp(e);return n||t}return t}function xp(e){return Ip(e,(e=>{if(!e)throw rp.create("installation-not-found");return Pp(e)}))}function Pp(e){return 1===(t=e).registrationStatus&&t.registrationTime+Xh<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function Np({appConfig:e,heartbeatServiceProvider:t},n){const r=function(e,{fid:t}){return`${op(e)}/${t}/authTokens:generate`}(e,n),i=function(e,{refreshToken:t}){const n=cp(e);return n.append("Authorization",function(e){return`${ep} ${e}`}(t)),n}(e,n),o=t.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const a={installation:{sdkVersion:Zh,appId:e.appId}},s={method:"POST",headers:i,body:JSON.stringify(a)},c=await lp((()=>fetch(r,s)));if(c.ok)return ap(await c.json());throw await sp("Generate Auth Token",c)}async function Op(e,t=!1){let n;const r=await Ip(e.appConfig,(r=>{if(!jp(r))throw rp.create("not-registered");const i=r.authToken;if(!t&&(2===(o=i).requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+np}(o)))return r;var o;if(1===i.requestStatus)return n=async function(e,t){let n=await Mp(e.appConfig);for(;1===n.authToken.requestStatus;)await up(100),n=await Mp(e.appConfig);const r=n.authToken;return 0===r.requestStatus?Op(e,t):r}(e,t),r;{if(!navigator.onLine)throw rp.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return n=async function(e,t){try{const n=await Np(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await Tp(e.appConfig,r),n}catch(n){if(!ip(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Tp(e.appConfig,n)}else await Lp(e.appConfig);throw n}}(e,t),t}}));return n?await n:r.authToken}function Mp(e){return Ip(e,(e=>{if(!jp(e))throw rp.create("not-registered");return 1===(t=e.authToken).requestStatus&&t.requestTime+Xh<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var t}))}function jp(e){return void 0!==e&&2===e.registrationStatus}function Ap(e){return rp.create("missing-app-config-values",{valueName:e})}const Rp="installations";ot(new J(Rp,(e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw Ap("App Configuration");if(!e.name)throw Ap("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Ap(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:at(t,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),ot(new J("installations-internal",(e=>{const t=at(e.getProvider("app").getImmediate(),Rp).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await kp(t);return r?r.catch(console.error):Op(t).catch(console.error),n.fid}(t),getToken:e=>async function(e,t=!1){const n=e;return await async function(e){const{registrationPromise:t}=await kp(e);t&&await t}(n),(await Op(n,t)).token}(t,e)}}),"PRIVATE")),pt(Kh,Qh),pt(Kh,Qh,"esm2017");const qp="analytics",Dp="firebase_id",Hp="origin",Fp=6e4,Up="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",zp="https://www.googletagmanager.com/gtag/js",Vp=new oe("@firebase/analytics"),Wp=new T("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Bp(e){if(!e.startsWith(zp)){const t=Wp.create("invalid-gtag-resource",{gtagURL:e});return Vp.warn(t.message),""}return e}function Gp(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}const Yp=30,$p=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Jp(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function Kp(e,t=$p,n){const{appId:r,apiKey:i,measurementId:o}=e.options;if(!r)throw Wp.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw Wp.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},s=new Xp;return setTimeout((async()=>{s.abort()}),void 0!==n?n:Fp),Qp({appId:r,apiKey:i,measurementId:o},a,s,t)}async function Qp(e,{throttleEndTimeMillis:t,backoffCount:n},r,i=$p){var o;const{appId:a,measurementId:s}=e;try{await function(e,t){return new Promise(((n,r)=>{const i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener((()=>{clearTimeout(o),r(Wp.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(r,t)}catch(e){if(s)return Vp.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${null==e?void 0:e.message}]`),{appId:a,measurementId:s};throw e}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:Jp(r)},o=Up.replace("{app-id}",n),a=await fetch(o,i);if(200!==a.status&&304!==a.status){let e="";try{const n=await a.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(e){}throw Wp.create("config-fetch-failed",{httpStatus:a.status,responseMessage:e})}return a.json()}(e);return i.deleteThrottleMetadata(a),t}catch(t){const c=t;if(!function(e){if(!(e instanceof C&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(c)){if(i.deleteThrottleMetadata(a),s)return Vp.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${null==c?void 0:c.message}]`),{appId:a,measurementId:s};throw t}const l=503===Number(null===(o=null==c?void 0:c.customData)||void 0===o?void 0:o.httpStatus)?Y(n,i.intervalMillis,Yp):Y(n,i.intervalMillis),u={throttleEndTimeMillis:Date.now()+l,backoffCount:n+1};return i.setThrottleMetadata(a,u),Vp.debug(`Calling attemptFetch again in ${l} millis`),Qp(e,u,r,i)}}class Xp{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let Zp,ef;async function tf(e,t,n,r,i,o,a){var s;const c=Kp(e);c.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&Vp.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>Vp.error(e))),t.push(c);const l=async function(){if(!w())return Vp.warn(Wp.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await E()}catch(e){return Vp.warn(Wp.create("indexeddb-unavailable",{errorInfo:null==e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?r.getId():void 0)),[u,d]=await Promise.all([c,l]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(zp)&&n.src.includes(e))return n;return null})(o)||function(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy("firebase-js-sdk-policy",t)),n}(0,{createScriptURL:Bp}),r=document.createElement("script"),i=`${zp}?l=${e}&id=${t}`;r.src=n?null==n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(o,u.measurementId),ef&&(i("consent","default",ef),ef=void 0),i("js",new Date);const h=null!==(s=null==a?void 0:a.config)&&void 0!==s?s:{};return h[Hp]="firebase",h.update=!0,null!=d&&(h[Dp]=d),i("config",u.measurementId,h),Zp&&(i("set",Zp),Zp=void 0),u.measurementId}class nf{constructor(e){this.app=e}_delete(){return delete rf[this.app.options.appId],Promise.resolve()}}let rf={},of=[];const af={};let sf,cf,lf="dataLayer",uf=!1;function df(e,t,n){!function(){const e=[];if(b()&&e.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=Wp.create("invalid-analytics-context",{errorInfo:t});Vp.warn(n.message)}}();const r=e.options.appId;if(!r)throw Wp.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Wp.create("no-api-key");Vp.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=rf[r])throw Wp.create("already-exists",{id:r});if(!uf){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(lf);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let o=function(...e){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function(e,t,n,r){return async function(i,...o){try{if("event"===i){const[r,i]=o;await async function(e,t,n,r,i){try{let o=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await Gp(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),i=e&&t[e.appId];if(!i){o=[];break}o.push(i)}}0===o.length&&(o=Object.values(t)),await Promise.all(o),e("event",r,i||{})}catch(e){Vp.error(e)}}(e,t,n,r,i)}else if("config"===i){const[i,a]=o;await async function(e,t,n,r,i,o){const a=r[i];try{if(a)await t[a];else{const e=(await Gp(n)).find((e=>e.measurementId===i));e&&await t[e.appId]}}catch(e){Vp.error(e)}e("config",i,o)}(e,t,n,r,i,a)}else if("consent"===i){const[t,n]=o;e("consent",t,n)}else if("get"===i){const[t,n,r]=o;e("get",t,n,r)}else if("set"===i){const[t]=o;e("set",t)}else e(i,...o)}catch(e){Vp.error(e)}}}(o,e,t,n),{gtagCore:o,wrappedGtag:window[i]}}(rf,of,af,lf,"gtag");cf=e,sf=t,uf=!0}return rf[r]=tf(e,of,af,t,sf,lf,n),new nf(e)}function hf(e=ht()){const t=at(e=$(e),qp);return t.isInitialized()?t.getImmediate():function(e,t={}){const n=at(e,qp);if(n.isInitialized()){const e=n.getImmediate();if(M(t,n.getOptions()))return e;throw Wp.create("already-initialized")}return n.initialize({options:t})}(e)}function pf(e,t,n,r){e=$(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(cf,rf[e.app.options.appId],t,n,r).catch((e=>Vp.error(e)))}const ff="@firebase/analytics",mf="0.10.4";function vf(){var e=document.querySelector(".sound .fa-volume-low"),t=document.querySelector(".sound .fa-volume-xmark");e&&t&&(e.addEventListener("click",(function(){e.style.display="none",t.style.display="inline-block",localStorage.setItem("soundOn",JSON.stringify(!1))})),t.addEventListener("click",(function(){t.style.display="none",e.style.display="inline-block",localStorage.setItem("soundOn",JSON.stringify(!0))})))}function gf(e){return gf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gf(e)}function yf(){yf=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:I(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",v={};function g(){}function y(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(N([])));E&&E!==n&&r.call(E,a)&&(_=E);var C=b.prototype=g.prototype=Object.create(_);function T(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(i,o,a,s){var c=d(e[i],e,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==gf(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function I(t,n,r){var i=h;return function(o,a){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var c=k(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var l=d(t,n,r);if("normal"===l.type){if(i=r.done?m:p,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=m,r.method="throw",r.arg=l.arg)}}}function k(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(gf(t)+" is not iterable")}return y.prototype=b,i(C,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,c,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},T(L.prototype),l(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new L(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(C),l(C,c,"Generator"),l(C,a,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function bf(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function _f(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){bf(o,r,i,a,s,"next",e)}function s(e){bf(o,r,i,a,s,"throw",e)}a(void 0)}))}}var wf,Ef,Cf,Tf,Lf,If,kf,Sf,xf,Pf,Nf,Of;function Mf(e,t,n){return jf.apply(this,arguments)}function jf(){return jf=_f(yf().mark((function e(t,n,r){var i,o,a,s,c,l,u,d,h,p,f,m,v,g,y,b,_,w,E,C,T,L,I,k,S,x,P,N,O,M,j,A,R,q,D,H,F,U,z,V,W,B;return yf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=eu(),o=i.app,a=Gl(o),s=hf(o),c=[[],[],[],[],[],[]],l=[],d=0,h=[],p=0,f=0,e.next=11,Tu(t,c,l,h);case 11:if(m=e.sent,f=m.userId,l=m.stats,v=f||"guest",s&&pf(s,"app_launch",{appUserId:v,exercise_mode:r}),(b=new Date).setHours(0,0,0,0),f?(S=null===(I=l[l.length-1])||void 0===I?void 0:I.streak,x=parseInt(null===(k=l[l.length-1])||void 0===k?void 0:k.timestamp)||0,y=S?parseInt(S):0,(b.getTime()-x)/864e5>=2&&(y=0),(P=document.querySelector(".streak p"))?P.textContent=y:console.error("Streak element not found")):(_=localStorage.getItem("streakLastChangeTime"),w=localStorage.getItem("lives"),g=w?parseInt(w):7,(E=document.querySelector(".lives p"))?E.textContent=g:console.error("Lives element not found"),C=localStorage.getItem("streak"),y=C?parseInt(C):0,_&&(T=parseInt(_),(b.getTime()-T)/864e5>=2&&(y=0)),(L=document.querySelector(".streak p"))?L.textContent=y:console.error("Streak element not found")),t&&t.data.length>0&&c.every((function(e){return 0===e.length})))for(N=0;N<t.data.length;N++)O={id:N+1,repetDate:0},c[0].push(O);if("typeMode"===r?Ku():Qu(),G=void 0,Y=void 0,G=document.querySelector(".sound .fa-volume-low"),Y=document.querySelector(".sound .fa-volume-xmark"),(null===localStorage.getItem("soundOn")||JSON.parse(localStorage.getItem("soundOn")))&&G?(G.style.display="inline-block",Y.style.display="none",localStorage.setItem("soundOn",JSON.stringify(!0))):Y&&(Y.style.display="inline-block",G.style.display="none",localStorage.setItem("soundOn",JSON.stringify(!1))),(M=document.querySelector(".sound"))&&(M.style.display="block"),vf(),id(t),Xu(),j=[],e.prev=28,u=rd({data:t,indexArray:h,k:u,score:p,phraseStats:j,phraseType:n,mode:r}),d++,"quizMode"!==r){e.next=39;break}return e.next=34,Jh({data:t,k:u,phraseCount:d,score:p,boxes:c,phraseStats:j,lives:g,userId:f});case 34:A=e.sent,p=(R=A).score,c=R.boxes,g=R.lives;case 39:e.next=45;break;case 41:e.prev=41,e.t0=e.catch(28),console.error(e.t0.message),ed(p,j);case 45:q=document.querySelector(".conjugSection"),D=document.querySelector(".phrase-section p"),H=document.querySelector(".type-section input"),F=document.querySelector(".learnMore"),U=document.querySelector(".infoPopupSection"),z=document.getElementById("submit-btn"),V=document.getElementById("next-btn"),W=document.getElementById("finish-btn"),B=document.querySelector(".menu-element.account"),"typeMode"===r&&z&&z.addEventListener("click",(function(){var e=Wh({data:t,k:u,phraseCount:d,score:p,boxes:c,phraseStats:j,lives:g,userId:f});p=e.score,c=e.boxes,g=e.lives})),V&&V.addEventListener("click",_f(yf().mark((function e(){var i,o,a,s,l;return yf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q&&(q.innerHTML="",q.style.display="none"),U&&(U.innerHTML="",U.style.display="none"),F&&(F.style.display="none"),D&&(D.style.color="black"),H&&H.classList.remove("almost-correct-answer","correct-answer","incorrect-answer"),i=document.querySelector(".selectedOption"),o=document.querySelector(".correct-option"),i&&(i.style.color="black",i.classList.remove("selectedOption")),a=document.querySelector(".fa-circle-check"),o&&a&&o.removeChild(a),o&&o.classList.remove("correct-option"),u=od({data:t,indexArray:h,k:u,score:p,phraseStats:j,phraseType:n,mode:r}),d++,"quizMode"!==r){e.next=21;break}return e.next=16,Jh({data:t,k:u,phraseCount:d,score:p,boxes:c,phraseStats:j,lives:g,userId:f});case 16:s=e.sent,p=(l=s).score,c=l.boxes,g=l.lives;case 21:f||localStorage.setItem("lives",g);case 22:case"end":return e.stop()}}),e)})))),W.addEventListener("click",(function(){M&&(M.style.display="none"),U&&(U.style.display="none"),q&&(q.style.display="none");var e=document.querySelector(".stats-container");JSON.parse(localStorage.getItem("soundOn"))&&new Audio("src/success-fanfare.mp3").play(),B&&(B.style.display="none"),e&&(e.style.display="none");var n=Date.now();if(f){var r,i,o=null===(r=l[l.length-1])||void 0===r?void 0:r.timestamp,u=null===(i=l[l.length-1])||void 0===i?void 0:i.streak;y=Bd(o,y=u?parseInt(u):0,l),Yd(t,c,f,a),$d(f,a,l,j)}else y=Gd(y=localStorage.getItem("streak")||0),localStorage.setItem("lives",g);f||localStorage.setItem("appLastUseTime",n.toString()),Zu({score:p,phraseStats:j,stats:l,userId:f,streak:y}),s&&pf(s,"app_finish",{appUserId:v,streak:y,score:p})}));case 57:case"end":return e.stop()}var G,Y}),e,null,[[28,41]])}))),jf.apply(this,arguments)}ot(new J(qp,((e,{options:t})=>df(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t)),"PUBLIC")),ot(new J("analytics-internal",(function(e){try{const t=e.getProvider(qp).getImmediate();return{logEvent:(e,n,r)=>pf(t,e,n,r)}}catch(e){throw Wp.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),pt(ff,mf),pt(ff,mf,"esm2017"),function(){kh.apply(this,arguments)}(),(wf=document.querySelector(".content-area"))&&wf.addEventListener("click",(function(e){if(e.target)switch(e.target.id){case"signUpSwitch":e.preventDefault(),Xd();break;case"logInSwitch":e.preventDefault(),Zd();break;case"signUpButton":e.preventDefault(),function(){Sh.apply(this,arguments)}();break;case"logInButton":e.preventDefault();var t=document.querySelector(".logInErrorMsg");t&&(t.innerHTML="");var n=document.querySelector(".signUpErrorMsg");n&&(n.innerHTML=""),function(){xh.apply(this,arguments)}();break;case"forgotPass":e.preventDefault(),function(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("form");t.classList.add("passResetForm"),e.appendChild(t);var n=document.createElement("h1");n.innerText="Reset your password",t.appendChild(n);var r=document.createElement("section");r.setAttribute("id","userInfo"),t.appendChild(r);var i=document.createElement("p");r.appendChild(i);var o=document.createElement("label");i.appendChild(o),o.htmlFor="logInEmail",o.innerText="Email:";var a=document.createElement("input");a.setAttribute("type","email"),a.setAttribute("id","resetEmail"),a.setAttribute("required",!0),i.appendChild(a);var s=document.createElement("p");r.appendChild(s),s.classList.add("passResetErrorMsg");var c=document.createElement("section");t.appendChild(c),c.classList.add("btn-section");var l=document.createElement("p");c.appendChild(l);var u=document.createElement("button");u.setAttribute("type","submit"),u.setAttribute("id","passResetButton"),u.innerText="Submit",l.appendChild(u)}();break;case"passResetButton":e.preventDefault(),function(){Eh.apply(this,arguments)}();case"contactBtn":e.preventDefault(),i=document.getElementById("name"),o=document.getElementById("contactEmail"),a=document.getElementById("emailSubject"),s=document.getElementById("contact-text"),c=document.querySelector(".contactErrorMsg"),l=!1,""===i.value?c.innerHTML="<i class='fa-solid fa-circle-exclamation'></i> Please type your name":""===o.value?c.innerHTML="<i class='fa-solid fa-circle-exclamation'></i> Please type your email address":""===a.value?c.innerHTML="<i class='fa-solid fa-circle-exclamation'></i> Describe your problem or suggestion in a few words in the subject field":""===s.value?c.innerHTML="<i class='fa-solid fa-circle-exclamation'></i> Describe your problem or suggestion in detail in the message field":/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(o.value)?l=!0:c.innerHTML="<i class='fa-solid fa-circle-exclamation'></i> Please type a valid email address",l&&(r=document.querySelector(".contact-form"),mh("service_b247irw","template_34r13a2",r).then((function(){console.log("SUCCESS!"),function(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");t.classList.add("successDiv"),e.appendChild(t);var n=document.createElement("h1");n.innerHTML="<i class='fa-regular fa-envelope'></i> Thank you for your message!",t.appendChild(n);var r=document.createElement("p");r.classList.add("successMsgExpl"),r.innerText="Thank you for contacting us! We'll be in touch shortly.",t.appendChild(r)}()}),(function(e){console.log("FAILED...",e),nd()})))}var r,i,o,a,s,c,l})),function(){var e=document.querySelector("main"),t=document.querySelector(".content-area"),n=document.querySelector("header"),r=document.querySelector(".account-popup"),i=document.querySelector(".help-popup");n.addEventListener("click",function(){var n=Ih(Th().mark((function n(o){var a,s,c;return Th().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o.preventDefault(),o.stopPropagation(),Oh(),(a=document.querySelector(".summary"))&&(e.removeChild(a),a=null),(s=document.querySelector(".conjugSection"))&&t.removeChild(s),!o.target){n.next=32;break}n.t0=o.target.id,n.next="logInButtonMenu"===n.t0?11:"signUpButtonMenu"===n.t0?14:"logOutButton"===n.t0?17:"subscription"===n.t0?20:"contact-button"===n.t0?23:31;break;case 11:return r&&"flex"===r.style.display&&(r.style.display="none"),Zd(),n.abrupt("break",32);case 14:return r&&"flex"===r.style.display&&(r.style.display="none"),Xd(),n.abrupt("break",32);case 17:return r&&"flex"===r.style.display&&(r.style.display="none"),Ph(),n.abrupt("break",32);case 20:return r&&"flex"===r.style.display&&(r.style.display="none"),nh(),n.abrupt("break",32);case 23:return n.next=25,yu();case 25:return c=n.sent,i&&"flex"===i.style.display&&(i.style.display="none"),l=void 0,u=void 0,d=void 0,h=void 0,l=document.querySelectorAll(".learn"),u=document.querySelectorAll(".practice"),d=document.querySelectorAll(".stats"),h=document.querySelectorAll(".bonus"),d.forEach((function(e){e.classList.remove("select")})),h.forEach((function(e){e.classList.remove("select")})),l.forEach((function(e){e.classList.remove("select")})),u.forEach((function(e){e.classList.remove("select")})),c?eh():th(),n.abrupt("break",32);case 31:return n.abrupt("break",32);case 32:case"end":return n.stop()}var l,u,d,h}),n)})));return function(e){return n.apply(this,arguments)}}())}(),Gu(),document.querySelectorAll(".practice").forEach((function(e){e.addEventListener("click",(function(){Gu(),Ju()}))})),Ef=document.querySelector(".menu-element.account"),Cf=document.querySelector(".account-popup"),Tf=document.querySelector(".help-popup"),Ef&&Ef.addEventListener("click",(function(){Cf.style.display="flex",Tf&&"none"!==Tf.style.display&&(Tf.style.display="none")})),function(){var e=document.querySelector(".menu-element.help"),t=document.querySelector(".help-popup"),n=document.querySelector(".account-popup");e&&e.addEventListener("click",(function(){t.style.display="flex",n&&"none"!==n.style.display&&(n.style.display="none")}))}(),Lf=document.querySelectorAll(".learn"),If=document.querySelectorAll(".practice"),kf=document.querySelectorAll(".stats"),Sf=document.querySelectorAll(".bonus"),Lf.forEach((function(e){return e.addEventListener("click",Nd(xd().mark((function e(){var t,n,r;return xd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_u();case 2:t=e.sent,n=t.subStatus,r=t.userId,If.forEach((function(e){e.classList.remove("select")})),kf.forEach((function(e){e.classList.remove("select")})),Sf.forEach((function(e){e.classList.remove("select")})),Lf.forEach((function(e){e.classList.add("select")})),kd(r,n);case 10:case"end":return e.stop()}}),e)}))))})),function(){var e=document.querySelectorAll(".stats"),t=document.querySelectorAll(".learn"),n=document.querySelectorAll(".practice"),r=document.querySelectorAll(".bonus");e.forEach((function(i){i.addEventListener("click",(function(){!function(){Dd.apply(this,arguments)}(),n.forEach((function(e){e.classList.remove("select")})),t.forEach((function(e){e.classList.remove("select")})),r.forEach((function(e){e.classList.remove("select")})),e.forEach((function(e){e.classList.add("select")}))}))}))}(),function(){var e=document.querySelectorAll(".practice"),t=document.querySelectorAll(".learn"),n=document.querySelectorAll(".stats"),r=document.querySelectorAll(".bonus");r.forEach((function(i){return i.addEventListener("click",Wd(zd().mark((function i(){var o,a,s;return zd().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,_u();case 2:o=i.sent,a=o.subStatus,s=o.userId,e.forEach((function(e){e.classList.remove("select")})),t.forEach((function(e){e.classList.remove("select")})),n.forEach((function(e){e.classList.remove("select")})),r.forEach((function(e){e.classList.add("select")})),Fd(s,a);case 10:case"end":return i.stop()}}),i)}))))}))}(),xf=document.querySelector("main"),(Pf=document.createElement("div")).classList.add("blurContainer"),xf.appendChild(Pf),Pf.style.display="none",function(){var e=document.querySelector("main"),t=document.createElement("div");t.classList.add("rulesSection"),e.appendChild(t),t.style.display="none";var n=document.createElement("i");n.classList.add("fa-solid","fa-xmark","popup-close"),t.appendChild(n);var r=document.createElement("div");t.appendChild(r),r.innerHTML="<h1>How to use the app</h1>",function(){var e=document.querySelector(".rulesSection"),t=document.createElement("div");e.appendChild(t),t.classList.add("rulesStartDiv");var n=document.createElement("div");n.classList.add("rulesH"),t.appendChild(n),n.innerHTML="<i class='fa-solid fa-rocket'></i><h2>Getting started</h2>";var r=document.createElement("div");t.appendChild(r);var i=document.createElement("p");r.appendChild(i),i.innerHTML="You can get started by simply choosing a tense and a level of difficulty and clicking <span class='bold'>'Start now'</span> on the main page (welcome page).";var o=document.createElement("p");r.appendChild(o),o.innerHTML="If you choose <b>'easy'</b>, you can practice regular conjugations. Selecting <b>'medium'</b> includes regular and irregular verbs, while <b>'hard'</b> covers only \n    irregular verbs.";var a=document.createElement("p");r.appendChild(a),a.innerHTML="On the second page, choose a type of exercise: 'Quiz Mode' or 'Typing Mode'.";var s=document.createElement("div");s.classList.add("photosDiv"),r.appendChild(s);var c=document.createElement("div");c.classList.add("carouselContainer"),s.appendChild(c);var l=document.createElement("div");l.classList.add("slide","slide1");var u=document.createElement("img");u.setAttribute("src","./public/start1.png"),l.appendChild(u);var d=document.createElement("div");d.classList.add("slide","slide2");var h=document.createElement("img");h.setAttribute("src","./public/start2.png"),d.appendChild(h);var p=document.createElement("div");p.classList.add("slide","slide3");var f=document.createElement("img");f.setAttribute("src","./public/start3.png"),p.appendChild(f),c.appendChild(l),c.appendChild(d),c.appendChild(p),function(){var e=document.querySelector(".carouselContainer .slide1"),t=document.querySelector(".carouselContainer .slide2"),n=document.querySelector(".carouselContainer .slide3"),r=[e,t];n&&r.push(n);var i=0,o=document.querySelector(".carouselContainer");setInterval((function(){var e;e=100*-(i=i<r.length-1?i+1:0),o&&(o.style.transform="translateX(".concat(e,"%)"))}),4e3)}()}(),function(){var e=document.querySelector(".rulesSection"),t=document.createElement("div");t.style.display="none",e.appendChild(t),t.classList.add("rulesQuestDiv");var n=document.createElement("div");n.classList.add("rulesH"),t.appendChild(n),n.innerHTML="<i class='fa-regular fa-circle-question'></i> <h2>Understand the question</h2>";var r=document.createElement("div");t.appendChild(r);var i=document.createElement("p");r.appendChild(i),i.innerHTML="You'll see a verb you need to conjugate in the selected tense (e.g.: 'vouloir'). \n      Under the verb, you'll see a sentence with one or more spaces that you need to complete with the conjugated verb.";var o=document.createElement("div");o.classList.add("photoDiv"),r.appendChild(o);var a=document.createElement("img");a.setAttribute("src","./public/question.png"),o.appendChild(a)}(),function(){var e=document.querySelector(".rulesSection"),t=document.createElement("div");t.style.display="none",e.appendChild(t),t.classList.add("rulesQuizDiv");var n=document.createElement("div");n.classList.add("rulesH"),t.appendChild(n),n.innerHTML="<i class='fa-regular fa-circle-question'></i> <h2>Choose the correct answer (quiz mode)</h2>";var r=document.createElement("div");t.appendChild(r);var i=document.createElement("p");r.appendChild(i),i.innerHTML="In quiz mode, simply choose the correct answer from 4 options.";var o=document.createElement("div");o.classList.add("photoDiv"),r.appendChild(o);var a=document.createElement("img");a.setAttribute("src","./public/quiz-question.png"),o.appendChild(a)}(),function(){var e=document.querySelector(".rulesSection"),t=document.createElement("div");t.style.display="none",e.appendChild(t),t.classList.add("rulesAnswerDiv");var n=document.createElement("div");n.classList.add("rulesH"),t.appendChild(n),n.innerHTML="<i class='fa-solid fa-keyboard'></i> <h2>Type your answer (typing mode)</h2>";var r=document.createElement("div");t.appendChild(r);var i=document.createElement("p");r.appendChild(i),i.innerHTML="In the example below, you need to conjugate <b>'vouloir'</b> in the present tense with the pronoun <b>'tu'</b>, which gives 'tu veux'.\nSo we should type <b>'veux'</b> to complete the sentence.";var o=document.createElement("p");r.appendChild(o),o.innerHTML="Use <u>the keyboard on your device</u> to type your answers. You can also use the buttons with <u>special characters</u> such as 'é' or 'ç' to type faster.";var a=document.createElement("div");a.classList.add("photoDiv"),r.appendChild(a);var s=document.createElement("img");s.setAttribute("src","./public/answer.png"),a.appendChild(s)}(),function(){var e=document.querySelector(".rulesSection"),t=document.createElement("div");t.style.display="none",e.appendChild(t),t.classList.add("rulesPronuncDiv");var n=document.createElement("div");n.classList.add("rulesH"),t.appendChild(n),n.innerHTML="<i class='fa-solid fa-volume-low'></i><h2>The pronunciation</h2>";var r=document.createElement("div");t.appendChild(r);var i=document.createElement("p");r.appendChild(i),i.innerHTML="Once you've submitted your answer, you'll see a <span class='bold'>speaker icon</span> appear next to the phrase. \n      Click on it to hear an automatically generated pronunciation of the phrase.";var o=document.createElement("p");r.appendChild(o),o.innerHTML="Note that this feature might not be available in all browsers, so we recommend using <u>Chrome</u>, <u>Edge</u>, or <u>Safari</u>.";var a=document.createElement("div");a.classList.add("photoDiv"),r.appendChild(a);var s=document.createElement("img");s.setAttribute("src","./public/correct-answer.png"),a.appendChild(s)}(),function(){var e=document.querySelector(".rulesSection"),t=document.createElement("div");t.style.display="none",e.appendChild(t),t.classList.add("rulesLearnMoreDiv");var n=document.createElement("div");n.classList.add("rulesH"),t.appendChild(n),n.innerHTML="<i class='fa-solid fa-circle-info'></i> <h2>See explanations</h2>";var r=document.createElement("div");t.appendChild(r);var i=document.createElement("p");r.appendChild(i),i.innerHTML="If the answer you've typed is incorrect, you can click on 'learn more' to see additional information to help you master French conjugation.";var o=document.createElement("div");o.classList.add("photoDiv"),r.appendChild(o);var a=document.createElement("img");a.setAttribute("src","./public/incorrect-answer.png"),o.appendChild(a)}();var i=document.createElement("div");i.classList.add("buttons"),t.appendChild(i);var o=document.createElement("i");o.classList.add("fa-solid","fa-circle-arrow-left"),o.style.display="none",i.appendChild(o);var a=document.createElement("i");a.classList.add("fa-solid","fa-circle-arrow-right"),i.appendChild(a);var s=[document.querySelector(".rulesStartDiv"),document.querySelector(".rulesQuestDiv"),document.querySelector(".rulesQuizDiv"),document.querySelector(".rulesAnswerDiv"),document.querySelector(".rulesPronuncDiv"),document.querySelector(".rulesLearnMoreDiv")];a.addEventListener("click",(function(){for(var e=0;e<s.length-1;e++)if("none"!==s[e].style.display){s[e].style.display="none",s[e+1].style.display="block",4===e&&(a.style.display="none"),o.style.display="block";break}})),o.addEventListener("click",(function(){for(var e=1;e<s.length;e++)if("none"!==s[e].style.display){s[e].style.display="none",s[e-1].style.display="block",1===e&&(o.style.display="none"),a.style.display="block";break}}))}(),(Nf=document.querySelector(".menu-element.premiumBtn"))&&Nf.addEventListener("click",(function(){window.location="../checkout.html"})),(Of=document.querySelector(".logo"))&&Of.addEventListener("click",(function(){location.reload()})),function(){var e=document.querySelector(".rules-button"),t=document.querySelector(".rulesSection"),n=document.querySelector(".blurContainer"),r=document.querySelector(".popup-close");e&&e.addEventListener("click",(function(e){t.style.display="block",n.style.display="block",e.stopPropagation()})),r&&r.addEventListener("click",(function(e){t.style.display="none",n.style.display="none",e.stopPropagation()}))}(),document.addEventListener("click",(function(e){var t=document.querySelector(".tenseSelectPopupContainer"),n=document.querySelector(".blurContainer"),r=document.querySelector(".selectDiv"),i=document.querySelector(".selectPhrTypeContainer"),o=document.querySelector(".account-popup"),a=document.querySelector(".help-popup");t&&"none"!==t.style.display&&!t.contains(e.target)&&e.target!==r&&(n&&(n.style.display="none"),t.style.display="none"),i&&"none"!==i.style.display&&!i.contains(e.target)&&(n&&(n.style.display="none"),i.style.display="none"),o&&"none"!==o.style.display&&!o.contains(e.target)&&(o.style.display="none"),a&&"none"!==a.style.display&&!a.contains(e.target)&&(a.style.display="none")}))})();