/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e.d({},{x:()=>Fh});const t=function(e,t){if(!e)throw n(t)},n=function(e){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+e)},r=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){const i=e[t],o=t+1<e.length,a=o?e[t+1]:0,s=t+2<e.length,l=s?e[t+2]:0,c=i>>2,u=(3&i)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;s||(h=64,o||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){const i=n[e.charAt(t++)],a=t<e.length?n[e.charAt(t)]:0;++t;const s=t<e.length?n[e.charAt(t)]:64;++t;const l=t<e.length?n[e.charAt(t)]:64;if(++t,null==i||null==a||null==s||null==l)throw new o;const c=i<<2|a>>4;if(r.push(c),64!==s){const e=a<<4&240|s>>2;if(r.push(e),64!==l){const e=s<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class o extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const a=function(e){const t=r(e);return i.encodeByteArray(t,!0)},s=function(e){return a(e).replace(/\./g,"")},l=function(e){try{return i.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function c(e){return u(void 0,e)}function u(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=u(e[n],t[n]));return e}const d=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e.g)return e.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&l(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},h=e=>{var t,n;return null===(n=null===(t=d())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},p=e=>{const t=h(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},f=()=>{var e;return null===(e=d())||void 0===e?void 0:e.config},m=e=>{var t;return null===(t=d())||void 0===t?void 0:t[`_${e}`]};class v{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function g(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function b(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())}function y(){return"object"==typeof navigator&&"ReactNative"===navigator.product}class _ extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,_.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,w.prototype.create)}}class w{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?function(e,t){return e.replace(E,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new _(r,a,n)}}const E=/\{\$([^}]+)}/g;function C(e){return JSON.parse(e)}function T(e){return JSON.stringify(e)}const L=function(e){let t={},n={},r={},i="";try{const o=e.split(".");t=C(l(o[0])||""),n=C(l(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:r,signature:i}};function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function k(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function S(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function x(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function P(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(N(n)&&N(o)){if(!P(n,o))return!1}else if(n!==o)return!1}for(const e of r)if(!n.includes(e))return!1;return!0}function N(e){return null!==e&&"object"==typeof e}function M(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function O(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function A(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class R{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"==typeof e)for(let r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let e=16;e<80;e++){const t=n[e-3]^n[e-8]^n[e-14]^n[e-16];n[e]=4294967295&(t<<1|t>>>31)}let r,i,o=this.chain_[0],a=this.chain_[1],s=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let e=0;e<80;e++){e<40?e<20?(r=l^a&(s^l),i=1518500249):(r=a^s^l,i=1859775393):e<60?(r=a&s|l&(a|s),i=2400959708):(r=a^s^l,i=3395469782);const t=(o<<5|o>>>27)+r+c+i+n[e]&4294967295;c=l,l=s,s=4294967295&(a<<30|a>>>2),a=o,o=t}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let o=this.inbuf_;for(;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let e=this.blockSize-1;e>=56;e--)this.buf_[e]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let t=0;t<5;t++)for(let r=24;r>=0;r-=8)e[n]=this.chain_[t]>>r&255,++n;return e}}class j{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const t of["next","error","complete"])if(t in e&&"function"==typeof e[t])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=q),void 0===r.error&&(r.error=q),void 0===r.complete&&(r.complete=q);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function q(){}function D(e,t){return`${e} failed: ${t} argument `}const H=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function F(e){return e&&e._delegate?e._delegate:e}class U{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const V="[DEFAULT]";class z{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new v;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:V})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=V){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=V){return this.instances.has(e)}getOptions(e=V){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===V?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var r;return n||null}normalizeInstanceIdentifier(e=V){return this.component?this.component.multipleInstances?e:V:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class W{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new z(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const B=[];var Y;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Y||(Y={}));const G={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},J=Y.INFO,$={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},K=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=$[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class Q{constructor(e){this.name=e,this._logLevel=J,this._logHandler=K,this._userLogHandler=null,B.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Y))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?G[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...e),this._logHandler(this,Y.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...e),this._logHandler(this,Y.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...e),this._logHandler(this,Y.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...e),this._logHandler(this,Y.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...e),this._logHandler(this,Y.ERROR,...e)}}const X=(e,t)=>t.some((t=>e instanceof t));let Z,ee;const te=new WeakMap,ne=new WeakMap,re=new WeakMap,ie=new WeakMap,oe=new WeakMap;let ae={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ne.get(e);if("objectStoreNames"===t)return e.objectStoreNames||re.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return le(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function se(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ee||(ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(ce(this),e),le(te.get(this))}:function(...e){return le(t.apply(ce(this),e))}:function(e,...n){const r=t.call(ce(this),e,...n);return re.set(r,e.sort?e.sort():[e]),le(r)}:(e instanceof IDBTransaction&&function(e){if(ne.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));ne.set(e,t)}(e),X(e,Z||(Z=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,ae):e);var t}function le(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(le(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&te.set(t,e)})).catch((()=>{})),oe.set(t,e),t}(e);if(ie.has(e))return ie.get(e);const t=se(e);return t!==e&&(ie.set(e,t),oe.set(t,e)),t}const ce=e=>oe.get(e),ue=["get","getKey","getAll","getAllKeys","count"],de=["put","add","delete","clear"],he=new Map;function pe(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(he.get(t))return he.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=de.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!ue.includes(n))return;const o=async function(e,...t){const o=this.transaction(e,i?"readwrite":"readonly");let a=o.store;return r&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),i&&o.done]))[0]};return he.set(t,o),o}var fe;fe=ae,ae={...fe,get:(e,t,n)=>pe(e,t)||fe.get(e,t,n),has:(e,t)=>!!pe(e,t)||fe.has(e,t)};class me{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const ve="@firebase/app",ge="0.10.5",be=new Q("@firebase/app"),ye="@firebase/app-compat",_e="@firebase/analytics-compat",we="@firebase/analytics",Ee="@firebase/app-check-compat",Ce="@firebase/app-check",Te="@firebase/auth",Le="@firebase/auth-compat",Ie="@firebase/database",ke="@firebase/database-compat",Se="@firebase/functions",xe="@firebase/functions-compat",Pe="@firebase/installations",Ne="@firebase/installations-compat",Me="@firebase/messaging",Oe="@firebase/messaging-compat",Ae="@firebase/performance",Re="@firebase/performance-compat",je="@firebase/remote-config",qe="@firebase/remote-config-compat",De="@firebase/storage",He="@firebase/storage-compat",Fe="@firebase/firestore",Ue="@firebase/vertexai-preview",Ve="@firebase/firestore-compat",ze="firebase",We="[DEFAULT]",Be={[ve]:"fire-core",[ye]:"fire-core-compat",[we]:"fire-analytics",[_e]:"fire-analytics-compat",[Ce]:"fire-app-check",[Ee]:"fire-app-check-compat",[Te]:"fire-auth",[Le]:"fire-auth-compat",[Ie]:"fire-rtdb",[ke]:"fire-rtdb-compat",[Se]:"fire-fn",[xe]:"fire-fn-compat",[Pe]:"fire-iid",[Ne]:"fire-iid-compat",[Me]:"fire-fcm",[Oe]:"fire-fcm-compat",[Ae]:"fire-perf",[Re]:"fire-perf-compat",[je]:"fire-rc",[qe]:"fire-rc-compat",[De]:"fire-gcs",[He]:"fire-gcs-compat",[Fe]:"fire-fst",[Ve]:"fire-fst-compat",[Ue]:"fire-vertex","fire-js":"fire-js",[ze]:"fire-js-all"},Ye=new Map,Ge=new Map,Je=new Map;function $e(e,t){try{e.container.addComponent(t)}catch(n){be.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Ke(e){const t=e.name;if(Je.has(t))return be.debug(`There were multiple attempts to register component ${t}.`),!1;Je.set(t,e);for(const t of Ye.values())$e(t,e);for(const t of Ge.values())$e(t,e);return!0}function Qe(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Xe(e){return void 0!==e.settings}const Ze=new w("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class et{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new U("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ze.create("app-deleted",{appName:this._name})}}const tt="10.12.2";function nt(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});const r=Object.assign({name:We,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!=typeof i||!i)throw Ze.create("bad-app-name",{appName:String(i)});if(n||(n=f()),!n)throw Ze.create("no-options");const o=Ye.get(i);if(o){if(P(n,o.options)&&P(r,o.config))return o;throw Ze.create("duplicate-app",{appName:i})}const a=new W(i);for(const e of Je.values())a.addComponent(e);const s=new et(n,r,a);return Ye.set(i,s),s}function rt(e=We){const t=Ye.get(e);if(!t&&e===We&&f())return nt();if(!t)throw Ze.create("no-app",{appName:e});return t}function it(e,t,n){var r;let i=null!==(r=Be[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${i}" with version "${t}":`];return o&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void be.warn(e.join(" "))}Ke(new U(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}const ot="firebase-heartbeat-database",at=1,st="firebase-heartbeat-store";let lt=null;function ct(){return lt||(lt=function(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const a=indexedDB.open(e,t),s=le(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(le(a.result),e.oldVersion,e.newVersion,le(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),s.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),s}(ot,at,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(st)}catch(e){console.warn(e)}}}).catch((e=>{throw Ze.create("idb-open",{originalErrorMessage:e.message})}))),lt}async function ut(e,t){try{const n=(await ct()).transaction(st,"readwrite"),r=n.objectStore(st);await r.put(t,dt(e)),await n.done}catch(e){if(e instanceof _)be.warn(e.message);else{const t=Ze.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});be.warn(t.message)}}}function dt(e){return`${e.name}!${e.options.appId}`}class ht{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ft(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=pt();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=pt(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),mt(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),mt(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=s(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function pt(){return(new Date).toISOString().substring(0,10)}class ft{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(e){return!1}}()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ct()).transaction(st),n=await t.objectStore(st).get(dt(e));return await t.done,n}catch(e){if(e instanceof _)be.warn(e.message);else{const t=Ze.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});be.warn(t.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ut(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ut(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function mt(e){return s(JSON.stringify({version:2,heartbeats:e})).length}function vt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Ke(new U("platform-logger",(e=>new me(e)),"PRIVATE")),Ke(new U("heartbeat",(e=>new ht(e)),"PRIVATE")),it(ve,ge,""),it(ve,ge,"esm2017"),it("fire-js",""),it("firebase","10.12.2","app"),Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;const gt=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},bt=new w("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),yt=new Q("@firebase/auth");function _t(e,...t){yt.logLevel<=Y.ERROR&&yt.error(`Auth (${tt}): ${e}`,...t)}function wt(e,...t){throw Lt(e,...t)}function Et(e,...t){return Lt(e,...t)}function Ct(e,t,n){const r=Object.assign(Object.assign({},gt()),{[t]:n});return new w("auth","Firebase",r).create(t,{appName:e.name})}function Tt(e){return Ct(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Lt(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return bt.create(e,...t)}function It(e,t,...n){if(!e)throw Lt(t,...n)}function kt(e){const t="INTERNAL ASSERTION FAILED: "+e;throw _t(t),new Error(t)}function St(e,t){e||kt(t)}function xt(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Pt(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Nt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===Pt()||"https:"===Pt()||function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Mt{constructor(e,t){this.shortDelay=e,this.longDelay=t,St(t>e,"Short delay should be less than long delay!"),this.isMobile=b()||y()}get(){return Nt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ot(e,t){St(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class At{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void kt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void kt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void kt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Rt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},jt=new Mt(3e4,6e4);function qt(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Dt(e,t,n,r,i={}){return Ht(e,i,(async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const a=M(Object.assign({key:e.config.apiKey},o)).slice(1),s=await e._getAdditionalHeaders();return s["Content-Type"]="application/json",e.languageCode&&(s["X-Firebase-Locale"]=e.languageCode),At.fetch()(Ut(e,e.config.apiHost,n,a),Object.assign({method:t,headers:s,referrerPolicy:"no-referrer"},i))}))}async function Ht(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Rt),t);try{const t=new zt(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Wt(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Wt(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw Wt(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw Wt(e,"user-disabled",o);const s=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Ct(e,s,a);wt(e,s)}}catch(t){if(t instanceof _)throw t;wt(e,"network-request-failed",{message:String(t)})}}async function Ft(e,t,n,r,i={}){const o=await Dt(e,t,n,r,i);return"mfaPendingCredential"in o&&wt(e,"multi-factor-auth-required",{_serverResponse:o}),o}function Ut(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?Ot(e.config,i):`${e.config.apiScheme}://${i}`}function Vt(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zt{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Et(this.auth,"network-request-failed"))),jt.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Wt(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Et(e,t,r);return i.customData._tokenResponse=n,i}function Bt(e){return void 0!==e&&void 0!==e.enterprise}class Yt{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Vt(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Gt(e,t){return Dt(e,"POST","/v1/accounts:lookup",t)}function Jt(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function $t(e){return 1e3*Number(e)}function Kt(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return _t("JWT malformed, contained fewer than 3 sections"),null;try{const e=l(n);return e?JSON.parse(e):(_t("Failed to decode base64 JWT payload"),null)}catch(e){return _t("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}function Qt(e){const t=Kt(e);return It(t,"internal-error"),It(void 0!==t.exp,"internal-error"),It(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Xt(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof _&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class Zt{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class en{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jt(this.lastLoginAt),this.creationTime=Jt(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function tn(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Xt(e,Gt(n,{idToken:r}));It(null==i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const a=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?nn(o.providerUserInfo):[],s=(l=e.providerData,c=a,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&o.passwordHash||(null==s?void 0:s.length)),h=!!u&&d,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new en(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(e,p)}function nn(e){return e.map((e=>{var{providerId:t}=e,n=vt(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class rn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){It(e.idToken,"internal-error"),It(void 0!==e.idToken,"internal-error"),It(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):Qt(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){It(0!==e.length,"internal-error");const t=Qt(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(It(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Ht(e,{},(async()=>{const n=M({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=Ut(e,r,"/v1/token",`key=${i}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",At.fetch()(o,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new rn;return n&&(It("string"==typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(It("string"==typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(It("number"==typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new rn,this.toJSON())}_performRefresh(){return kt("not implemented")}}function on(e,t){It("string"==typeof e||void 0===e,"internal-error",{appName:t})}class an{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=vt(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Zt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new en(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Xt(this,this.stsTokenManager.getToken(this.auth,e));return It(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=F(e),r=await n.getIdToken(t),i=Kt(r);It(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"==typeof i.firebase?i.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Jt($t(i.auth_time)),issuedAtTime:Jt($t(i.iat)),expirationTime:Jt($t(i.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=F(e);await tn(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(It(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new an(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){It(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await tn(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xe(this.auth.app))return Promise.reject(Tt(this.auth));const e=await this.getIdToken();return await Xt(this,async function(e,t){return Dt(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,a,s,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(o=t.photoURL)&&void 0!==o?o:void 0,f=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(s=t._redirectEventId)&&void 0!==s?s:void 0,v=null!==(l=t.createdAt)&&void 0!==l?l:void 0,g=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:b,emailVerified:y,isAnonymous:_,providerData:w,stsTokenManager:E}=t;It(b&&E,e,"internal-error");const C=rn.fromJSON(this.name,E);It("string"==typeof b,e,"internal-error"),on(u,e.name),on(d,e.name),It("boolean"==typeof y,e,"internal-error"),It("boolean"==typeof _,e,"internal-error"),on(h,e.name),on(p,e.name),on(f,e.name),on(m,e.name),on(v,e.name),on(g,e.name);const T=new an({uid:b,auth:e,email:d,emailVerified:y,displayName:u,isAnonymous:_,photoURL:p,phoneNumber:h,tenantId:f,stsTokenManager:C,createdAt:v,lastLoginAt:g});return w&&Array.isArray(w)&&(T.providerData=w.map((e=>Object.assign({},e)))),m&&(T._redirectEventId=m),T}static async _fromIdTokenResponse(e,t,n=!1){const r=new rn;r.updateFromServerResponse(t);const i=new an({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await tn(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];It(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?nn(r.providerUserInfo):[],o=!(r.email&&r.passwordHash||(null==i?void 0:i.length)),a=new rn;a.updateFromIdToken(n);const s=new an({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new en(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash||(null==i?void 0:i.length))};return Object.assign(s,l),s}}const sn=new Map;function ln(e){St(e instanceof Function,"Expected a class definition");let t=sn.get(e);return t?(St(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,sn.set(e,t),t)}class cn{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}cn.type="NONE";const un=cn;function dn(e,t,n){return`firebase:${e}:${t}:${n}`}class hn{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=dn(this.userKey,r.apiKey,i),this.fullPersistenceKey=dn("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?an._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new hn(ln(un),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||ln(un);const o=dn(n,e.config.apiKey,e.name);let a=null;for(const n of t)try{const t=await n._get(o);if(t){const r=an._fromJSON(e,t);n!==i&&(a=r),i=n;break}}catch(e){}const s=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&s.length?(i=s[0],a&&await i._set(o,a.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(o)}catch(e){}}))),new hn(i,e,n)):new hn(i,e,n)}}function pn(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(gn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(fn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(yn(t))return"Blackberry";if(_n(t))return"Webos";if(mn(t))return"Safari";if((t.includes("chrome/")||vn(t))&&!t.includes("edge/"))return"Chrome";if(bn(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function fn(e=g()){return/firefox\//i.test(e)}function mn(e=g()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function vn(e=g()){return/crios\//i.test(e)}function gn(e=g()){return/iemobile/i.test(e)}function bn(e=g()){return/android/i.test(e)}function yn(e=g()){return/blackberry/i.test(e)}function _n(e=g()){return/webos/i.test(e)}function wn(e=g()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function En(e=g()){return wn(e)||bn(e)||_n(e)||yn(e)||/windows phone/i.test(e)||gn(e)}function Cn(e,t=[]){let n;switch(e){case"Browser":n=pn(g());break;case"Worker":n=`${pn(g())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${tt}/${r}`}class Tn{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(e){r(e)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(const e of t)try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==e?void 0:e.message})}}}class Ln{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,a;const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=null===(t=s.meetsMinPasswordLength)||void 0===t||t),s.isValid&&(s.isValid=null===(n=s.meetsMaxPasswordLength)||void 0===n||n),s.isValid&&(s.isValid=null===(r=s.containsLowercaseLetter)||void 0===r||r),s.isValid&&(s.isValid=null===(i=s.containsUppercaseLetter)||void 0===i||i),s.isValid&&(s.isValid=null===(o=s.containsNumericCharacter)||void 0===o||o),s.isValid&&(s.isValid=null===(a=s.containsNonAlphanumericCharacter)||void 0===a||a),s}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class In{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Sn(this),this.idTokenSubscription=new Sn(this),this.beforeStateQueue=new Tn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ln(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await hn.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Gt(this,{idToken:e}),n=await an._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Xe(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null==r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==o||!(null==a?void 0:a.user)||(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(e){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(e)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return It(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await tn(e)}catch(e){if("auth/network-request-failed"!==(null==e?void 0:e.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xe(this.app))return Promise.reject(Tt(this));const t=e?F(e):null;return t&&It(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&It(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return Xe(this.app)?Promise.reject(Tt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xe(this.app)?Promise.reject(Tt(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(ln(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e,t={}){return Dt(e,"GET","/v2/passwordPolicy",qt(e,t))}(this),t=new Ln(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new w("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Dt(e,"POST","/v2/accounts:revokeToken",qt(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ln(e)||this._popupRedirectResolver;It(t,this,"argument-error"),this.redirectPersistenceManager=await hn.create(this,[ln(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(It(a,this,"internal-error"),a.then((()=>{o||i(this.currentUser)})),"function"==typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return It(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Cn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){yt.logLevel<=Y.WARN&&yt.warn(`Auth (${tt}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function kn(e){return F(e)}class Sn{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new j(e,void 0);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return It(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let xn={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Pn(e){return xn.loadJS(e)}function Nn(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Mn{constructor(e){this.type="recaptcha-enterprise",this.auth=kn(e)}async verify(e="verify",t=!1){function n(t,n,r){const i=window.grecaptcha;Bt(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{(async function(e,t){return Dt(e,"GET","/v2/recaptchaConfig",qt(e,t))})(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new Yt(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&Bt(window.grecaptcha))n(i,e,r);else{if("undefined"==typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=xn.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Pn(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function On(e,t,n,r=!1){const i=new Mn(e);let o;try{o=await i.verify(n)}catch(e){o=await i.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function An(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await On(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await On(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function Rn(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function jn(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class qn{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return kt("not implemented")}_getIdTokenResponse(e){return kt("not implemented")}_linkToIdToken(e,t){return kt("not implemented")}_getReauthenticationResolver(e){return kt("not implemented")}}async function Dn(e,t){return Dt(e,"POST","/v1/accounts:signUp",t)}async function Hn(e,t){return Ft(e,"POST","/v1/accounts:signInWithPassword",qt(e,t))}async function Fn(e,t){return async function(e,t){return Dt(e,"POST","/v1/accounts:sendOobCode",qt(e,t))}(e,t)}class Un extends qn{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Un(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Un(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return An(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Hn);case"emailLink":return async function(e,t){return Ft(e,"POST","/v1/accounts:signInWithEmailLink",qt(e,t))}(e,{email:this._email,oobCode:this._password});default:wt(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return An(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Dn);case"emailLink":return async function(e,t){return Ft(e,"POST","/v1/accounts:signInWithEmailLink",qt(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:wt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Vn(e,t){return Ft(e,"POST","/v1/accounts:signInWithIdp",qt(e,t))}class zn extends qn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new zn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):wt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=vt(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new zn(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return Vn(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Vn(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Vn(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=M(t)}return e}}const Wn={USER_NOT_FOUND:"user-not-found"};class Bn extends qn{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Bn({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Bn({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Ft(e,"POST","/v1/accounts:signInWithPhoneNumber",qt(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Ft(e,"POST","/v1/accounts:signInWithPhoneNumber",qt(e,t));if(n.temporaryProof)throw Wt(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Ft(e,"POST","/v1/accounts:signInWithPhoneNumber",qt(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Wn)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Bn({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Yn{constructor(e){var t,n,r,i,o,a;const s=O(A(e)),l=null!==(t=s.apiKey)&&void 0!==t?t:null,c=null!==(n=s.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=s.mode)&&void 0!==r?r:null);It(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=s.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=s.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=O(A(e)).link,n=t?O(A(t)).deep_link_id:null,r=O(A(e)).deep_link_id;return(r?O(A(r)).link:null)||r||n||t||e}(e);try{return new Yn(t)}catch(e){return null}}}class Gn{constructor(){this.providerId=Gn.PROVIDER_ID}static credential(e,t){return Un._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Yn.parseLink(t);return It(n,"argument-error"),Un._fromEmailAndCode(e,n.code,n.tenantId)}}Gn.PROVIDER_ID="password",Gn.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Gn.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Jn{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class $n extends Jn{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Kn extends $n{constructor(){super("facebook.com")}static credential(e){return zn._fromParams({providerId:Kn.PROVIDER_ID,signInMethod:Kn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Kn.credentialFromTaggedObject(e)}static credentialFromError(e){return Kn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Kn.credential(e.oauthAccessToken)}catch(e){return null}}}Kn.FACEBOOK_SIGN_IN_METHOD="facebook.com",Kn.PROVIDER_ID="facebook.com";class Qn extends $n{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return zn._fromParams({providerId:Qn.PROVIDER_ID,signInMethod:Qn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Qn.credentialFromTaggedObject(e)}static credentialFromError(e){return Qn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Qn.credential(t,n)}catch(e){return null}}}Qn.GOOGLE_SIGN_IN_METHOD="google.com",Qn.PROVIDER_ID="google.com";class Xn extends $n{constructor(){super("github.com")}static credential(e){return zn._fromParams({providerId:Xn.PROVIDER_ID,signInMethod:Xn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xn.credentialFromTaggedObject(e)}static credentialFromError(e){return Xn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Xn.credential(e.oauthAccessToken)}catch(e){return null}}}Xn.GITHUB_SIGN_IN_METHOD="github.com",Xn.PROVIDER_ID="github.com";class Zn extends $n{constructor(){super("twitter.com")}static credential(e,t){return zn._fromParams({providerId:Zn.PROVIDER_ID,signInMethod:Zn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Zn.credentialFromTaggedObject(e)}static credentialFromError(e){return Zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Zn.credential(t,n)}catch(e){return null}}}async function er(e,t){return Ft(e,"POST","/v1/accounts:signUp",qt(e,t))}Zn.TWITTER_SIGN_IN_METHOD="twitter.com",Zn.PROVIDER_ID="twitter.com";class tr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await an._fromIdTokenResponse(e,n,r),o=nr(n);return new tr({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=nr(n);return new tr({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function nr(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class rr extends _{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,rr.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new rr(e,t,n,r)}}function ir(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw rr._fromErrorAndOperation(e,n,t,r);throw n}))}async function or(e,t,n=!1){if(Xe(e.app))return Promise.reject(Tt(e));const r="signIn",i=await ir(e,r,t),o=await tr._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function ar(e){const t=kn(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function sr(e,t,n){const r=kn(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&function(e,t,n){var r;It((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),It(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(It(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(It(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}(r,i,n),await An(r,i,"getOobCode",Fn)}async function lr(e,t,n){if(Xe(e.app))return Promise.reject(Tt(e));const r=kn(e),i=An(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",er),o=await i.catch((t=>{throw"auth/password-does-not-meet-requirements"===t.code&&ar(e),t})),a=await tr._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function cr(e,t,n){return Xe(e.app)?Promise.reject(Tt(e)):async function(e,t){return or(kn(e),t)}(F(e),Gn.credential(t,n)).catch((async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&ar(e),t}))}function ur(e,t,n,r){return F(e).onAuthStateChanged(t,n,r)}function dr(e){return F(e).signOut()}new WeakMap;const hr="__sak";class pr{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(hr,"1"),this.storage.removeItem(hr),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class fr extends pr{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=g();return mn(e)||wn(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=En(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);!function(){const e=g();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()||10!==document.documentMode||i===e.newValue||e.newValue===e.oldValue?r():setTimeout(r,10)}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}fr.type="LOCAL";const mr=fr;class vr extends pr{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}vr.type="SESSION";const gr=vr;class br{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new br(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(null==o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(o).map((async e=>e(t.origin,i))),s=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}})))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:s})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function yr(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}br.receivers=[];class _r{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise(((a,s)=>{const l=yr("",20);r.port1.start();const c=setTimeout((()=>{s(new Error("unsupported_event"))}),n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),s(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{o&&this.removeMessageHandler(o)}))}}function wr(){return window}function Er(){return void 0!==wr().WorkerGlobalScope&&"function"==typeof wr().importScripts}const Cr="firebaseLocalStorageDb",Tr="firebaseLocalStorage",Lr="fbase_key";class Ir{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function kr(e,t){return e.transaction([Tr],t?"readwrite":"readonly").objectStore(Tr)}function Sr(){const e=indexedDB.open(Cr,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Tr,{keyPath:Lr})}catch(e){n(e)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Tr)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Cr);return new Ir(e).toPromise()}(),t(await Sr()))}))}))}async function xr(e,t,n){const r=kr(e,!0).put({[Lr]:t,value:n});return new Ir(r).toPromise()}function Pr(e,t){const n=kr(e,!0).delete(t);return new Ir(n).toPromise()}class Nr{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Sr()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Er()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=br._getInstance(Er()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new _r(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sr();return await xr(e,hr,"1"),await Pr(e,hr),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>xr(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=kr(e,!1).get(t),r=await new Ir(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Pr(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=kr(e,!1).getAll();return new Ir(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Nr.type="LOCAL";const Mr=Nr;Nn("rcb"),new Mt(3e4,6e4);class Or{constructor(e){this.providerId=Or.PROVIDER_ID,this.auth=kn(e)}verifyPhoneNumber(e,t){return async function(e,t,n){var r;const i=await n.verify();try{let o;if(It("string"==typeof i,e,"argument-error"),It("recaptcha"===n.type,e,"argument-error"),o="string"==typeof t?{phoneNumber:t}:t,"session"in o){const t=o.session;if("phoneNumber"in o){It("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Dt(e,"POST","/v2/accounts/mfaEnrollment:start",qt(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{It("signin"===t.type,e,"internal-error");const n=(null===(r=o.multiFactorHint)||void 0===r?void 0:r.uid)||o.multiFactorUid;It(n,e,"missing-multi-factor-info");const a=await function(e,t){return Dt(e,"POST","/v2/accounts/mfaSignIn:start",qt(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Dt(e,"POST","/v1/accounts:sendVerificationCode",qt(e,t))}(e,{phoneNumber:o.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}(this.auth,e,F(t))}static credential(e,t){return Bn._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Or.credentialFromTaggedObject(t)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?Bn._fromTokenResponse(t,n):null}}Or.PROVIDER_ID="phone",Or.PHONE_SIGN_IN_METHOD="phone";class Ar extends qn{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vn(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Vn(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Vn(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Rr(e){return or(e.auth,new Ar(e),e.bypassAuthState)}function jr(e){const{auth:t,user:n}=e;return It(n,t,"internal-error"),async function(e,t,n=!1){const{auth:r}=e;if(Xe(r.app))return Promise.reject(Tt(r));const i="reauthenticate";try{const o=await Xt(e,ir(r,i,t,e),n);It(o.idToken,r,"internal-error");const a=Kt(o.idToken);It(a,r,"internal-error");const{sub:s}=a;return It(e.uid===s,r,"user-mismatch"),tr._forOperation(e,i,o)}catch(e){throw"auth/user-not-found"===(null==e?void 0:e.code)&&wt(r,"user-mismatch"),e}}(n,new Ar(e),e.bypassAuthState)}async function qr(e){const{auth:t,user:n}=e;return It(n,t,"internal-error"),async function(e,t,n=!1){const r=await Xt(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return tr._forOperation(e,"link",r)}(n,new Ar(e),e.bypassAuthState)}class Dr{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:a}=e;if(o)return void this.reject(o);const s={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(s))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Rr;case"linkViaPopup":case"linkViaRedirect":return qr;case"reauthViaPopup":case"reauthViaRedirect":return jr;default:wt(this.auth,"internal-error")}}resolve(e){St(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){St(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Hr=new Mt(2e3,1e4);class Fr extends Dr{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Fr.currentPopupAction&&Fr.currentPopupAction.cancel(),Fr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return It(e,this.auth,"internal-error"),e}async onExecution(){St(1===this.filter.length,"Popup operations only handle one event");const e=yr();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Et(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Et(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Et(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Hr.get())};e()}}Fr.currentPopupAction=null;const Ur="pendingRedirect",Vr=new Map;class zr extends Dr{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Vr.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return dn(Ur,e.config.apiKey,e.name)}(t),r=function(e){return ln(e._redirectPersistence)}(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}Vr.set(this.auth._key(),e)}return this.bypassAuthState||Vr.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Wr(e,t){Vr.set(e._key(),t)}async function Br(e,t,n=!1){if(Xe(e.app))return Promise.reject(Tt(e));const r=kn(e),i=function(e,t){return t?ln(t):(It(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}(r,t),o=new zr(r,i,n),a=await o.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class Yr{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Jr(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Jr(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Et(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gr(e))}saveEventToCache(e){this.cachedEventUids.add(Gr(e)),this.lastProcessedEventTime=Date.now()}}function Gr(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Jr({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}const $r=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Kr=/^https?/;function Qr(e){const t=xt(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Kr.test(n))return!1;if($r.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Xr=new Mt(3e4,6e4);function Zr(){const e=wr().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}function ei(e){return new Promise(((t,n)=>{var r,i,o;function a(){Zr(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Zr(),n(Et(e,"network-request-failed"))},timeout:Xr.get()})}if(null===(i=null===(r=wr().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=wr().gapi)||void 0===o?void 0:o.load)){const t=Nn("iframefcb");return wr()[t]=()=>{gapi.load?a():n(Et(e,"network-request-failed"))},Pn(`${xn.gapiScript}?onload=${t}`).catch((e=>n(e)))}a()}})).catch((e=>{throw ti=null,e}))}let ti=null;const ni=new Mt(5e3,15e3),ri="__/auth/iframe",ii="emulator/auth/iframe",oi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ai=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function si(e){const t=e.config;It(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Ot(t,ii):`https://${e.config.authDomain}/${ri}`,r={apiKey:t.apiKey,appName:e.name,v:tt},i=ai.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${M(r).slice(1)}`}const li={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ci{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}const ui=encodeURIComponent("fac");async function di(e,t,n,r,i,o){It(e.config.authDomain,e,"auth-domain-config-required"),It(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:tt,eventId:i};if(t instanceof Jn){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",S(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))a[e]=t}if(t instanceof $n){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const s=a;for(const e of Object.keys(s))void 0===s[e]&&delete s[e];const l=await e._getAppCheckToken(),c=l?`#${ui}=${encodeURIComponent(l)}`:"";return`${function({config:e}){return e.emulator?Ot(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${M(s).slice(1)}${c}`}const hi="webStorageSupport",pi=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gr,this._completeRedirectFn=Br,this._overrideRedirectResult=Wr}async _openPopup(e,t,n,r){var i;return St(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()"),function(e,t,n,r=500,i=600){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let s="";const l=Object.assign(Object.assign({},li),{width:r.toString(),height:i.toString(),top:o,left:a}),c=g().toLowerCase();n&&(s=vn(c)?"_blank":n),fn(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=g()){var t;return wn(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(c)&&"_self"!==s)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new ci(null);const d=window.open(t||"",s,u);It(d,e,"popup-blocked");try{d.focus()}catch(e){}return new ci(d)}(e,await di(e,t,n,xt(),r),yr())}async _openRedirect(e,t,n,r){return await this._originValidation(e),i=await di(e,t,n,xt(),r),wr().location.href=i,new Promise((()=>{}));var i}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(St(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await function(e){return ti=ti||ei(e),ti}(e),n=wr().gapi;return It(n,e,"internal-error"),t.open({where:document.body,url:si(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:oi,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Et(e,"network-request-failed"),o=wr().setTimeout((()=>{r(i)}),ni.get());function a(){wr().clearTimeout(o),n(t)}t.ping(a).then(a,(()=>{r(i)}))}))))}(e),n=new Yr(e);return t.register("authEvent",(t=>(It(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:n.onEvent(t.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(hi,{type:hi},(n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r[hi];void 0!==i&&t(!!i),wt(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return Dt(e,"GET","/v1/projects",t)}(e);for(const e of t)try{if(Qr(e))return}catch(e){}wt(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return En()||mn()||wn()}};var fi="@firebase/auth",mi="1.7.4";class vi{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){It(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const gi=m("authIdTokenMaxAge")||300;let bi=null;const yi=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>gi)return;const i=null==n?void 0:n.token;bi!==i&&(bi=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function _i(e=rt()){const t=Qe(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Qe(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(P(n.getOptions(),null!=t?t:{}))return e;wt(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:pi,persistence:[Mr,mr,gr]}),r=m("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=yi(e.toString());!function(e,t,n){F(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,n,r,i){F(e).onIdTokenChanged((e=>t(e)),void 0,void 0)}(n)}}const i=h("auth");return i&&function(e,t,n){const r=kn(e);It(r._canInitEmulator,r,"emulator-config-failed"),It(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),o=Rn(t),{host:a,port:s}=function(e){const t=Rn(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:jn(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:jn(t)}}}(t),l=null===s?"":`:${s}`;r.config.emulator={url:`${o}//${a}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:s,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(n,`http://${i}`),n}var wi,Ei;wi={loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");var i,o;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Et("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(o=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==o?o:document).appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},xn=wi,Ei="Browser",Ke(new U("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=n.options;It(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const s={apiKey:o,authDomain:a,clientPlatform:Ei,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Cn(Ei)},l=new In(n,r,i,s);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ln);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(l,t),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Ke(new U("auth-internal",(e=>{return t=kn(e.getProvider("auth").getImmediate()),new vi(t);var t}),"PRIVATE").setInstantiationMode("EXPLICIT")),it(fi,mi,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Ei)),it(fi,mi,"esm2017");const Ci="@firebase/database",Ti="1.0.5";let Li="";class Ii{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),T(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:C(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class ki{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return I(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Si=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Ii(t)}}catch(e){}return new ki},xi=Si("localStorage"),Pi=Si("sessionStorage"),Ni=new Q("@firebase/database"),Mi=function(){let e=1;return function(){return e++}}(),Oi=function(e){const n=function(e){const n=[];let r=0;for(let i=0;i<e.length;i++){let o=e.charCodeAt(i);if(o>=55296&&o<=56319){const n=o-55296;i++,t(i<e.length,"Surrogate pair missing trail surrogate."),o=65536+(n<<10)+(e.charCodeAt(i)-56320)}o<128?n[r++]=o:o<2048?(n[r++]=o>>6|192,n[r++]=63&o|128):o<65536?(n[r++]=o>>12|224,n[r++]=o>>6&63|128,n[r++]=63&o|128):(n[r++]=o>>18|240,n[r++]=o>>12&63|128,n[r++]=o>>6&63|128,n[r++]=63&o|128)}return n}(e),r=new R;r.update(n);const o=r.digest();return i.encodeByteArray(o)},Ai=function(...e){let t="";for(let n=0;n<e.length;n++){const r=e[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?t+=Ai.apply(null,r):t+="object"==typeof r?T(r):r,t+=" "}return t};let Ri=null,ji=!0;const qi=function(...e){if(!0===ji&&(ji=!1,null===Ri&&!0===Pi.get("logging_enabled")&&(n=!0,t(!r||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Ni.logLevel=Y.VERBOSE,Ri=Ni.log.bind(Ni),r&&Pi.set("logging_enabled",!0)):"function"==typeof n?Ri=n:(Ri=null,Pi.remove("logging_enabled")))),Ri){const t=Ai.apply(null,e);Ri(t)}var n,r},Di=function(e){return function(...t){qi(e,...t)}},Hi=function(...e){const t="FIREBASE INTERNAL ERROR: "+Ai(...e);Ni.error(t)},Fi=function(...e){const t=`FIREBASE FATAL ERROR: ${Ai(...e)}`;throw Ni.error(t),new Error(t)},Ui=function(...e){const t="FIREBASE WARNING: "+Ai(...e);Ni.warn(t)},Vi=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},zi="[MIN_NAME]",Wi="[MAX_NAME]",Bi=function(e,t){if(e===t)return 0;if(e===zi||t===Wi)return-1;if(t===zi||e===Wi)return 1;{const n=Zi(e),r=Zi(t);return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},Yi=function(e,t){return e===t?0:e<t?-1:1},Gi=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+T(t))},Ji=function(e){if("object"!=typeof e||null===e)return T(e);const t=[];for(const n in e)t.push(n);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=T(t[r]),n+=":",n+=Ji(e[t[r]]);return n+="}",n},$i=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Ki(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const Qi=function(e){t(!Vi(e),"Invalid JSON number");let n,r,i,o,a;0===e?(r=0,i=0,n=1/e==-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(o=Math.min(Math.floor(Math.log(e)/Math.LN2),1023),r=o+1023,i=Math.round(e*Math.pow(2,52-o)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const s=[];for(a=52;a;a-=1)s.push(i%2?1:0),i=Math.floor(i/2);for(a=11;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);s.push(n?1:0),s.reverse();const l=s.join("");let c="";for(a=0;a<64;a+=8){let e=parseInt(l.substr(a,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()},Xi=new RegExp("^-?(0*)\\d{1,10}$"),Zi=function(e){if(Xi.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},eo=function(e){try{e()}catch(e){setTimeout((()=>{const t=e.stack||"";throw Ui("Exception was thrown by user callback.",t),e}),Math.floor(0))}},to=function(e,t){const n=setTimeout(e,t);return"number"==typeof n&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"==typeof n&&n.unref&&n.unref(),n};class no{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){Ui(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class ro{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(qi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ui(e)}}class io{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}io.OWNER="owner";const oo="5",ao=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,so="ac",lo="websocket",co="long_polling";class uo{constructor(e,t,n,r,i=!1,o="",a=!1,s=!1){this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=s,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=xi.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&xi.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function ho(e,n,r){let i;if(t("string"==typeof n,"typeof type must == string"),t("object"==typeof r,"typeof params must == object"),n===lo)i=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(n!==co)throw new Error("Unknown connection type: "+n);i=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(r.ns=e.namespace);const o=[];return Ki(r,((e,t)=>{o.push(e+"="+t)})),i+o.join("&")}class po{constructor(){this.counters_={}}incrementCounter(e,t=1){I(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return c(this.counters_)}}const fo={},mo={};function vo(e){const t=e.toString();return fo[t]||(fo[t]=new po),fo[t]}class go{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&eo((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const bo="start";class yo{constructor(e,t,n,r,i,o,a){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Di(e),this.stats_=vo(t),this.urlFn=e=>(this.appCheckToken&&(e[so]=this.appCheckToken),ho(t,co,e))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new go(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if("complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new _o(((...e)=>{const[t,n,r,i,o]=e;if(this.incrementIncomingBytes_(e),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,t===bo)this.id=n,this.password=r;else{if("close"!==t)throw new Error("Unrecognized command received: "+t);n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,(()=>{this.onClosed_()}))):this.onClosed_()}}),((...e)=>{const[t,n]=e;this.incrementIncomingBytes_(e),this.myPacketOrderer.handleResponse(t,n)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[bo]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=oo,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[so]=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&ao.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){yo.forceAllow_=!0}static forceDisallow(){yo.forceDisallow_=!0}static isAvailable(){return!(!yo.forceAllow_&&(yo.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=T(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=a(t),r=$i(n,1840);for(let e=0;e<r.length;e++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[e]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=T(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class _o{constructor(e,t,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Mi(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=_o.createIFrame_();let n="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(n='<script>document.domain="'+document.domain+'";<\/script>');const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(e){qi("frame writing exception"),e.stack&&qi(e.stack),qi(e)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||qi("No IE domain setting required")}catch(t){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{qi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(e){}}),Math.floor(1))}}let wo=null;"undefined"!=typeof MozWebSocket?wo=MozWebSocket:"undefined"!=typeof WebSocket&&(wo=WebSocket);class Eo{constructor(e,t,n,r,i,o,a){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Di(this.connId),this.stats_=vo(t),this.connURL=Eo.connectionURL_(t,o,a,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const o={};return o.v=oo,"undefined"!=typeof location&&location.hostname&&ao.test(location.hostname)&&(o.r="f"),t&&(o.s=t),n&&(o.ls=n),r&&(o[so]=r),i&&(o.p=i),ho(e,lo,o)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,xi.set("previous_websocket_failure",!0);try{let e;0,this.mySock=new wo(this.connURL,[],e)}catch(e){this.log_("Error instantiating WebSocket.");const t=e.message||e.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){Eo.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==wo&&!Eo.forceDisallow_}static previouslyFailed(){return xi.isInMemoryStorage||!0===xi.get("previous_websocket_failure")}markConnectionHealthy(){xi.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=C(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(t(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=T(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=$i(t,16384);n.length>1&&this.sendString_(String(n.length));for(let e=0;e<n.length;e++)this.sendString_(n[e])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Eo.responsesRequiredToBeHealthy=2,Eo.healthyTimeout=3e4;class Co{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[yo,Eo]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=Eo&&Eo.isAvailable();let n=t&&!Eo.previouslyFailed();if(e.webSocketOnly&&(t||Ui("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Eo];else{const e=this.transports_=[];for(const t of Co.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);Co.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Co.globalTransportInitialized_=!1;class To{constructor(e,t,n,r,i,o,a,s,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=s,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Di("c:"+this.id+":"),this.transportManager_=new Co(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=to((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Gi("t",e),n=Gi("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Gi("t",e),n=Gi("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Gi("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Hi("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Hi("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),oo!==n&&Ui("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),to((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):to((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(xi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Lo{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class Io{constructor(e){this.allowedEvents_=e,this.listeners_={},t(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let e=0;e<n.length;e++)n[e].callback.apply(n[e].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let e=0;e<r.length;e++)if(r[e].callback===t&&(!n||n===r[e].context))return void r.splice(e,1)}validateEventType_(e){t(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class ko extends Io{constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||b()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new ko}getInitialEvent(e){return t("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class So{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function xo(){return new So("")}function Po(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function No(e){return e.pieces_.length-e.pieceNum_}function Mo(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new So(e.pieces_,t)}function Oo(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Ao(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function Ro(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new So(t,0)}function jo(e,t){const n=[];for(let t=e.pieceNum_;t<e.pieces_.length;t++)n.push(e.pieces_[t]);if(t instanceof So)for(let e=t.pieceNum_;e<t.pieces_.length;e++)n.push(t.pieces_[e]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new So(n,0)}function qo(e){return e.pieceNum_>=e.pieces_.length}function Do(e,t){const n=Po(e),r=Po(t);if(null===n)return t;if(n===r)return Do(Mo(e),Mo(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Ho(e,t){const n=Ao(e,0),r=Ao(t,0);for(let e=0;e<n.length&&e<r.length;e++){const t=Bi(n[e],r[e]);if(0!==t)return t}return n.length===r.length?0:n.length<r.length?-1:1}function Fo(e,t){if(No(e)!==No(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Uo(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(No(e)>No(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class Vo{constructor(e,t){this.errorPrefix_=t,this.parts_=Ao(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let e=0;e<this.parts_.length;e++)this.byteLength_+=H(this.parts_[e]);zo(this)}}function zo(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Wo(e))}function Wo(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class Bo extends Io{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new Bo}getInitialEvent(e){return t("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Yo=1e3;class Go extends Lo{constructor(e,t,n,r,i,o,a,s){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=s,this.id=Go.nextPersistentConnectionId_++,this.log_=Di("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Yo,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,s)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Bo.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&ko.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,o={r:i,a:e,b:n};this.log_(T(o)),t(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const t=new v,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,n,r,i){this.initConnection_();const o=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),t(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),t(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const s={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(a).set(o,s),this.connected_&&this.sendListen_(s)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const o=i.d,a=i.s;Go.warnOnListenWarnings_(o,t),(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==a&&this.removeListen_(n,r),e.onComplete&&e.onComplete(a,o))}))}static warnOnListenWarnings_(e,t){if(e&&"object"==typeof e&&I(e,"w")){const n=k(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();Ui(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=L(e).claims;return"object"==typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=L(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),t(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+T(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Hi("Unrecognized action received from server: "+T(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){t(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Yo,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Yo,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Yo),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Go.nextConnectionId_++,o=this.lastSessionId;let a=!1,s=null;const l=function(){s?s.close():(a=!0,r())},c=function(e){t(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[t,l]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);a?qi("getToken() completed but was canceled"):(qi("getToken() completed. Creating connection."),this.authToken_=t&&t.accessToken,this.appCheckToken_=l&&l.token,s=new To(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,(e=>{Ui(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),o))}catch(e){this.log_("Failed to get token: "+e),a||(this.repoInfo_.nodeAdmin&&Ui(e),l())}}}interrupt(e){qi("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){qi("Resuming connection for reason: "+e),delete this.interruptReasons_[e],S(this.interruptReasons_)&&(this.reconnectDelay_=Yo,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>Ji(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new So(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){qi("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){qi("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+Li.replace(/\./g,"-")]=1,b()?e["framework.cordova"]=1:y()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=ko.getInstance().currentlyOnline();return S(this.interruptReasons_)&&e}}Go.nextPersistentConnectionId_=0,Go.nextConnectionId_=0;class Jo{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Jo(e,t)}}class $o{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new Jo(zi,e),r=new Jo(zi,t);return 0!==this.compare(n,r)}minPost(){return Jo.MIN}}let Ko;class Qo extends $o{static get __EMPTY_NODE(){return Ko}static set __EMPTY_NODE(e){Ko=e}compare(e,t){return Bi(e.name,t.name)}isDefinedOn(e){throw n("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Jo.MIN}maxPost(){return new Jo(Wi,Ko)}makePost(e,n){return t("string"==typeof e,"KeyIndex indexValue must always be a string."),new Jo(e,Ko)}toString(){return".key"}}const Xo=new Qo;class Zo{constructor(e,t,n,r,i=null){this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ea{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:ea.RED,this.left=null!=r?r:ta.EMPTY_NODE,this.right=null!=i?i:ta.EMPTY_NODE}copy(e,t,n,r,i){return new ea(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return ta.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return ta.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ea.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ea.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ea.RED=!0,ea.BLACK=!1;class ta{constructor(e,t=ta.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ta(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ea.BLACK,null,null))}remove(e){return new ta(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ea.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Zo(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Zo(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Zo(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Zo(this.root_,null,this.comparator_,!0,e)}}function na(e,t){return Bi(e.name,t.name)}function ra(e,t){return Bi(e,t)}let ia;ta.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new ea(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const oa=function(e){return"number"==typeof e?"number:"+Qi(e):"string:"+e},aa=function(e){if(e.isLeafNode()){const n=e.val();t("string"==typeof n||"number"==typeof n||"object"==typeof n&&I(n,".sv"),"Priority must be a string or number.")}else t(e===ia||e.isEmpty(),"priority of unexpected type.");t(e===ia||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let sa,la,ca;class ua{constructor(e,n=ua.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,t(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),aa(this.priorityNode_)}static set __childrenNodeConstructor(e){sa=e}static get __childrenNodeConstructor(){return sa}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ua(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:ua.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return qo(e)?this:".priority"===Po(e)?this.priorityNode_:ua.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:ua.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Po(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(t(".priority"!==r||1===No(e),".priority must be the last token in a path"),this.updateImmediateChild(r,ua.__childrenNodeConstructor.EMPTY_NODE.updateChild(Mo(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+oa(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?Qi(this.value_):this.value_,this.lazyHash_=Oi(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ua.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ua.__childrenNodeConstructor?-1:(t(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=ua.VALUE_TYPE_ORDER.indexOf(n),o=ua.VALUE_TYPE_ORDER.indexOf(r);return t(i>=0,"Unknown leaf type: "+n),t(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}ua.VALUE_TYPE_ORDER=["object","boolean","number","string"];const da=new class extends $o{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Bi(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Jo.MIN}maxPost(){return new Jo(Wi,new ua("[PRIORITY-POST]",ca))}makePost(e,t){const n=la(e);return new Jo(t,new ua("[PRIORITY-POST]",n))}toString(){return".priority"}},ha=Math.log(2);class pa{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/ha,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const fa=function(e,t,n,r){e.sort(t);const i=function(t,r){const o=r-t;let a,s;if(0===o)return null;if(1===o)return a=e[t],s=n?n(a):a,new ea(s,a.node,ea.BLACK,null,null);{const l=parseInt(o/2,10)+t,c=i(t,l),u=i(l+1,r);return a=e[l],s=n?n(a):a,new ea(s,a.node,ea.BLACK,c,u)}},o=function(t){let r=null,o=null,a=e.length;const s=function(t,r){const o=a-t,s=a;a-=t;const c=i(o+1,s),u=e[o],d=n?n(u):u;l(new ea(d,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(o=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?s(r,ea.BLACK):(s(r,ea.BLACK),s(r,ea.RED))}return o}(new pa(e.length));return new ta(r||t,o)};let ma;const va={};class ga{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return t(va&&da,"ChildrenNode.ts has not been loaded"),ma=ma||new ga({".priority":va},{".priority":da}),ma}get(e){const t=k(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ta?t:null}hasIndex(e){return I(this.indexSet_,e.toString())}addIndex(e,n){t(e!==Xo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=n.getIterator(Jo.Wrap);let a,s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();a=i?fa(r,e.getCompare()):va;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new ga(u,c)}addToIndexes(e,n){const r=x(this.indexes_,((r,i)=>{const o=k(this.indexSet_,i);if(t(o,"Missing index implementation for "+i),r===va){if(o.isDefinedOn(e.node)){const t=[],r=n.getIterator(Jo.Wrap);let i=r.getNext();for(;i;)i.name!==e.name&&t.push(i),i=r.getNext();return t.push(e),fa(t,o.getCompare())}return va}{const t=n.get(e.name);let i=r;return t&&(i=i.remove(new Jo(e.name,t))),i.insert(e,e.node)}}));return new ga(r,this.indexSet_)}removeFromIndexes(e,t){const n=x(this.indexes_,(n=>{if(n===va)return n;{const r=t.get(e.name);return r?n.remove(new Jo(e.name,r)):n}}));return new ga(n,this.indexSet_)}}let ba;class ya{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&aa(this.priorityNode_),this.children_.isEmpty()&&t(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ba||(ba=new ya(new ta(ra),null,ga.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ba}updatePriority(e){return this.children_.isEmpty()?this:new ya(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?ba:t}}getChild(e){const t=Po(e);return null===t?this:this.getImmediateChild(t).getChild(Mo(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,n){if(t(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);{const t=new Jo(e,n);let r,i;n.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(t,this.children_)):(r=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(t,this.children_));const o=r.isEmpty()?ba:this.priorityNode_;return new ya(r,o,i)}}updateChild(e,n){const r=Po(e);if(null===r)return n;{t(".priority"!==Po(e)||1===No(e),".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(Mo(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(da,((o,a)=>{t[o]=a.val(e),n++,i&&ya.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+oa(this.getPriority().val())+":"),this.forEachChild(da,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":Oi(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new Jo(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Jo(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Jo(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,Jo.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,Jo.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===_a?-1:0}withIndex(e){if(e===Xo||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new ya(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Xo||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(da),n=t.getIterator(da);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===Xo?null:this.indexMap_.get(e.toString())}}ya.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const _a=new class extends ya{constructor(){super(new ta(ra),ya.EMPTY_NODE,ga.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ya.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Jo,{MIN:{value:new Jo(zi,ya.EMPTY_NODE)},MAX:{value:new Jo(Wi,_a)}}),Qo.__EMPTY_NODE=ya.EMPTY_NODE,ua.__childrenNodeConstructor=ya,ia=_a,ca=_a;const wa=!0;function Ea(e,n=null){if(null===e)return ya.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(n=e[".priority"]),t(null===n||"string"==typeof n||"number"==typeof n||"object"==typeof n&&".sv"in n,"Invalid priority type found: "+typeof n),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new ua(e,Ea(n));if(e instanceof Array||!wa){let t=ya.EMPTY_NODE;return Ki(e,((n,r)=>{if(I(e,n)&&"."!==n.substring(0,1)){const e=Ea(r);!e.isLeafNode()&&e.isEmpty()||(t=t.updateImmediateChild(n,e))}})),t.updatePriority(Ea(n))}{const t=[];let r=!1;if(Ki(e,((e,n)=>{if("."!==e.substring(0,1)){const i=Ea(n);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),t.push(new Jo(e,i)))}})),0===t.length)return ya.EMPTY_NODE;const i=fa(t,na,(e=>e.name),ra);if(r){const e=fa(t,da.getCompare());return new ya(i,Ea(n),new ga({".priority":e},{".priority":da}))}return new ya(i,Ea(n),ga.Default)}}!function(e){la=e}(Ea);class Ca extends $o{constructor(e){super(),this.indexPath_=e,t(!qo(e)&&".priority"!==Po(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Bi(e.name,t.name):i}makePost(e,t){const n=Ea(e),r=ya.EMPTY_NODE.updateChild(this.indexPath_,n);return new Jo(t,r)}maxPost(){const e=ya.EMPTY_NODE.updateChild(this.indexPath_,_a);return new Jo(Wi,e)}toString(){return Ao(this.indexPath_,0).join("/")}}const Ta=new class extends $o{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?Bi(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Jo.MIN}maxPost(){return Jo.MAX}makePost(e,t){const n=Ea(e);return new Jo(t,n)}toString(){return".value"}};function La(e){return{type:"value",snapshotNode:e}}function Ia(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function ka(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Sa(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class xa{constructor(e){this.index_=e}updateChild(e,n,r,i,o,a){t(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const s=e.getImmediateChild(n);return s.getChild(i).equals(r.getChild(i))&&s.isEmpty()===r.isEmpty()?e:(null!=a&&(r.isEmpty()?e.hasChild(n)?a.trackChildChange(ka(n,s)):t(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?a.trackChildChange(Ia(n,r)):a.trackChildChange(Sa(n,r,s))),e.isLeafNode()&&r.isEmpty()?e:e.updateImmediateChild(n,r).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(da,((e,r)=>{t.hasChild(e)||n.trackChildChange(ka(e,r))})),t.isLeafNode()||t.forEachChild(da,((t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Sa(t,r,i))}else n.trackChildChange(Ia(t,r))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?ya.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Pa{constructor(e){this.indexedFilter_=new xa(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Pa.getStartPost_(e),this.endPost_=Pa.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,o){return this.matches(new Jo(t,n))||(n=ya.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)}updateFullNode(e,t,n){t.isLeafNode()&&(t=ya.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(ya.EMPTY_NODE);const i=this;return t.forEachChild(da,((e,t)=>{i.matches(new Jo(e,t))||(r=r.updateImmediateChild(e,ya.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Na{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new Pa(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,o){return this.rangedFilter_.matches(new Jo(t,n))||(n=ya.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=ya.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=ya.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority(ya.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,ya.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,o){let a;if(this.reverse_){const e=this.index_.getCompare();a=(t,n)=>e(n,t)}else a=this.index_.getCompare();const s=e;t(s.numChildren()===this.limit_,"");const l=new Jo(n,r),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(s.hasChild(n)){const e=s.getImmediateChild(n);let t=i.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=t&&(t.name===n||s.hasChild(t.name));)t=i.getChildAfterChild(this.index_,t,this.reverse_);const d=null==t?1:a(t,l);if(u&&!r.isEmpty()&&d>=0)return null!=o&&o.trackChildChange(Sa(n,r,e)),s.updateImmediateChild(n,r);{null!=o&&o.trackChildChange(ka(n,e));const r=s.updateImmediateChild(n,ya.EMPTY_NODE);return null!=t&&this.rangedFilter_.matches(t)?(null!=o&&o.trackChildChange(Ia(t.name,t.node)),r.updateImmediateChild(t.name,t.node)):r}}return r.isEmpty()?e:u&&a(c,l)>=0?(null!=o&&(o.trackChildChange(ka(c.name,c.node)),o.trackChildChange(Ia(n,r))),s.updateImmediateChild(n,r).updateImmediateChild(c.name,ya.EMPTY_NODE)):e}}class Ma{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=da}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return t(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return t(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:zi}hasEnd(){return this.endSet_}getIndexEndValue(){return t(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return t(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Wi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return t(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===da}copy(){const e=new Ma;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Oa(e){const n={};if(e.isDefault())return n;let r;if(e.index_===da?r="$priority":e.index_===Ta?r="$value":e.index_===Xo?r="$key":(t(e.index_ instanceof Ca,"Unrecognized index type!"),r=e.index_.toString()),n.orderBy=T(r),e.startSet_){const t=e.startAfterSet_?"startAfter":"startAt";n[t]=T(e.indexStartValue_),e.startNameSet_&&(n[t]+=","+T(e.indexStartName_))}if(e.endSet_){const t=e.endBeforeSet_?"endBefore":"endAt";n[t]=T(e.indexEndValue_),e.endNameSet_&&(n[t]+=","+T(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function Aa(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==da&&(t.i=e.index_.toString()),t}class Ra extends Lo{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=Di("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return void 0!==n?"tag$"+n:(t(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=Ra.getListenId_(e,n),a={};this.listens_[o]=a;const s=Oa(e._queryParams);this.restRequest_(i+".json",s,((e,t)=>{let s=t;if(404===e&&(s=null,e=null),null===e&&this.onDataUpdate_(i,s,!1,n),k(this.listens_,o)===a){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=Ra.getListenId_(e,t);delete this.listens_[n]}get(e){const t=Oa(e._queryParams),n=e._path.toString(),r=new v;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((([r,i])=>{r&&r.accessToken&&(t.auth=r.accessToken),i&&i.token&&(t.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+M(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let e=null;if(a.status>=200&&a.status<300){try{e=C(a.responseText)}catch(e){Ui("Failed to parse JSON response for "+o+": "+a.responseText)}n(null,e)}else 401!==a.status&&404!==a.status&&Ui("Got unsuccessful REST response for "+o+" Status: "+a.status),n(a.status);n=null}},a.open("GET",o,!0),a.send()}))}}class ja{constructor(){this.rootNode_=ya.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function qa(){return{value:null,children:new Map}}function Da(e,t,n){if(qo(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=Po(t);e.children.has(r)||e.children.set(r,qa()),Da(e.children.get(r),t=Mo(t),n)}}function Ha(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{Ha(r,new So(t.toString()+"/"+e),n)}))}class Fa{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Ki(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class Ua{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Fa(e);const n=1e4+2e4*Math.random();to(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;Ki(e,((e,r)=>{r>0&&I(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),to(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Va,za;function Wa(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}(za=Va||(Va={}))[za.OVERWRITE=0]="OVERWRITE",za[za.MERGE=1]="MERGE",za[za.ACK_USER_WRITE=2]="ACK_USER_WRITE",za[za.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";class Ba{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Va.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(qo(this.path)){if(null!=this.affectedTree.value)return t(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new So(e));return new Ba(xo(),t,this.revert)}}return t(Po(this.path)===e,"operationForChild called for unrelated child."),new Ba(Mo(this.path),this.affectedTree,this.revert)}}class Ya{constructor(e,t){this.source=e,this.path=t,this.type=Va.LISTEN_COMPLETE}operationForChild(e){return qo(this.path)?new Ya(this.source,xo()):new Ya(this.source,Mo(this.path))}}class Ga{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Va.OVERWRITE}operationForChild(e){return qo(this.path)?new Ga(this.source,xo(),this.snap.getImmediateChild(e)):new Ga(this.source,Mo(this.path),this.snap)}}class Ja{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Va.MERGE}operationForChild(e){if(qo(this.path)){const t=this.children.subtree(new So(e));return t.isEmpty()?null:t.value?new Ga(this.source,xo(),t.value):new Ja(this.source,xo(),t)}return t(Po(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ja(this.source,Mo(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class $a{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(qo(e))return this.isFullyInitialized()&&!this.filtered_;const t=Po(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Ka{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Qa(e,t,r,i,o,a){const s=i.filter((e=>e.type===r));s.sort(((t,r)=>function(e,t,r){if(null==t.childName||null==r.childName)throw n("Should only compare child_ events.");const i=new Jo(t.childName,t.snapshotNode),o=new Jo(r.childName,r.snapshotNode);return e.index_.compare(i,o)}(e,t,r))),s.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);o.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function Xa(e,t){return{eventCache:e,serverCache:t}}function Za(e,t,n,r){return Xa(new $a(t,n,r),e.serverCache)}function es(e,t,n,r){return Xa(e.eventCache,new $a(t,n,r))}function ts(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function ns(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let rs;class is{constructor(e,t=(()=>(rs||(rs=new ta(Yi)),rs))()){this.value=e,this.children=t}static fromObject(e){let t=new is(null);return Ki(e,((e,n)=>{t=t.set(new So(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:xo(),value:this.value};if(qo(e))return null;{const n=Po(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(Mo(e),t);return null!=i?{path:jo(new So(n),i.path),value:i.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(qo(e))return this;{const t=Po(e),n=this.children.get(t);return null!==n?n.subtree(Mo(e)):new is(null)}}set(e,t){if(qo(e))return new is(t,this.children);{const n=Po(e),r=(this.children.get(n)||new is(null)).set(Mo(e),t),i=this.children.insert(n,r);return new is(this.value,i)}}remove(e){if(qo(e))return this.children.isEmpty()?new is(null):new is(null,this.children);{const t=Po(e),n=this.children.get(t);if(n){const r=n.remove(Mo(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new is(null):new is(this.value,i)}return this}}get(e){if(qo(e))return this.value;{const t=Po(e),n=this.children.get(t);return n?n.get(Mo(e)):null}}setTree(e,t){if(qo(e))return t;{const n=Po(e),r=(this.children.get(n)||new is(null)).setTree(Mo(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new is(this.value,i)}}fold(e){return this.fold_(xo(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(jo(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,xo(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(qo(e))return null;{const r=Po(e),i=this.children.get(r);return i?i.findOnPath_(Mo(e),jo(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,xo(),t)}foreachOnPath_(e,t,n){if(qo(e))return this;{this.value&&n(t,this.value);const r=Po(e),i=this.children.get(r);return i?i.foreachOnPath_(Mo(e),jo(t,r),n):new is(null)}}foreach(e){this.foreach_(xo(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(jo(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class os{constructor(e){this.writeTree_=e}static empty(){return new os(new is(null))}}function as(e,t,n){if(qo(t))return new os(new is(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let o=r.value;const a=Do(i,t);return o=o.updateChild(a,n),new os(e.writeTree_.set(i,o))}{const r=new is(n),i=e.writeTree_.setTree(t,r);return new os(i)}}}function ss(e,t,n){let r=e;return Ki(n,((e,n)=>{r=as(r,jo(t,e),n)})),r}function ls(e,t){if(qo(t))return os.empty();{const n=e.writeTree_.setTree(t,new is(null));return new os(n)}}function cs(e,t){return null!=us(e,t)}function us(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Do(n.path,t)):null}function ds(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(da,((e,n)=>{t.push(new Jo(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new Jo(e,n.value))})),t}function hs(e,t){if(qo(t))return e;{const n=us(e,t);return new os(null!=n?new is(n):e.writeTree_.subtree(t))}}function ps(e){return e.writeTree_.isEmpty()}function fs(e,t){return ms(xo(),e.writeTree_,t)}function ms(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);{let i=null;return n.children.inorderTraversal(((n,o)=>{".priority"===n?(t(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=ms(jo(e,n),o,r)})),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(jo(e,".priority"),i)),r}}function vs(e,t){return ks(t,e)}function gs(e,t){if(e.snap)return Uo(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Uo(jo(e.path,n),t))return!0;return!1}function bs(e){return e.visible}function ys(e,t,r){let i=os.empty();for(let o=0;o<e.length;++o){const a=e[o];if(t(a)){const e=a.path;let t;if(a.snap)Uo(r,e)?(t=Do(r,e),i=as(i,t,a.snap)):Uo(e,r)&&(t=Do(e,r),i=as(i,xo(),a.snap.getChild(t)));else{if(!a.children)throw n("WriteRecord should have .snap or .children");if(Uo(r,e))t=Do(r,e),i=ss(i,t,a.children);else if(Uo(e,r))if(t=Do(e,r),qo(t))i=ss(i,xo(),a.children);else{const e=k(a.children,Po(t));if(e){const n=e.getChild(Mo(t));i=as(i,xo(),n)}}}}}return i}function _s(e,t,n,r,i){if(r||i){const o=hs(e.visibleWrites,t);if(!i&&ps(o))return n;if(i||null!=n||cs(o,xo())){const o=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Uo(e.path,t)||Uo(t,e.path))};return fs(ys(e.allWrites,o,t),n||ya.EMPTY_NODE)}return null}{const r=us(e.visibleWrites,t);if(null!=r)return r;{const r=hs(e.visibleWrites,t);return ps(r)?n:null!=n||cs(r,xo())?fs(r,n||ya.EMPTY_NODE):null}}}function ws(e,t,n,r){return _s(e.writeTree,e.treePath,t,n,r)}function Es(e,t){return function(e,t,n){let r=ya.EMPTY_NODE;const i=us(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(da,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=hs(e.visibleWrites,t);return n.forEachChild(da,((e,t)=>{const n=fs(hs(i,new So(e)),t);r=r.updateImmediateChild(e,n)})),ds(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return ds(hs(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function Cs(e,n,r,i){return function(e,n,r,i,o){t(i||o,"Either existingEventSnap or existingServerSnap must exist");const a=jo(n,r);if(cs(e.visibleWrites,a))return null;{const t=hs(e.visibleWrites,a);return ps(t)?o.getChild(r):fs(t,o.getChild(r))}}(e.writeTree,e.treePath,n,r,i)}function Ts(e,t){return function(e,t){return us(e.visibleWrites,t)}(e.writeTree,jo(e.treePath,t))}function Ls(e,t,n){return function(e,t,n,r){const i=jo(t,n),o=us(e.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?fs(hs(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function Is(e,t){return ks(jo(e.treePath,t),e.writeTree)}function ks(e,t){return{treePath:e,writeTree:t}}class Ss{constructor(){this.changeMap=new Map}trackChildChange(e){const r=e.type,i=e.childName;t("child_added"===r||"child_changed"===r||"child_removed"===r,"Only child changes supported for tracking"),t(".priority"!==i,"Only non-priority child changes can be tracked.");const o=this.changeMap.get(i);if(o){const t=o.type;if("child_added"===r&&"child_removed"===t)this.changeMap.set(i,Sa(i,e.snapshotNode,o.snapshotNode));else if("child_removed"===r&&"child_added"===t)this.changeMap.delete(i);else if("child_removed"===r&&"child_changed"===t)this.changeMap.set(i,ka(i,o.oldSnap));else if("child_changed"===r&&"child_added"===t)this.changeMap.set(i,Ia(i,e.snapshotNode));else{if("child_changed"!==r||"child_changed"!==t)throw n("Illegal combination of changes: "+e+" occurred after "+o);this.changeMap.set(i,Sa(i,e.snapshotNode,o.oldSnap))}}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}const xs=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class Ps{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new $a(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ls(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ns(this.viewCache_),i=function(e,t,n,r,i,o){return function(e,t,n,r,i,o,a){let s;const l=hs(e.visibleWrites,t),c=us(l,xo());if(null!=c)s=c;else{if(null==n)return[];s=fs(l,n)}if(s=s.withIndex(a),s.isEmpty()||s.isLeafNode())return[];{const e=[],t=a.getCompare(),n=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,o)}(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function Ns(e,n,r,i,o,a){const s=n.eventCache;if(null!=Ts(i,r))return n;{let l,c;if(qo(r))if(t(n.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),n.serverCache.isFiltered()){const t=ns(n),r=Es(i,t instanceof ya?t:ya.EMPTY_NODE);l=e.filter.updateFullNode(n.eventCache.getNode(),r,a)}else{const t=ws(i,ns(n));l=e.filter.updateFullNode(n.eventCache.getNode(),t,a)}else{const u=Po(r);if(".priority"===u){t(1===No(r),"Can't have a priority with additional path components");const o=s.getNode();c=n.serverCache.getNode();const a=Cs(i,r,o,c);l=null!=a?e.filter.updatePriority(o,a):s.getNode()}else{const t=Mo(r);let d;if(s.isCompleteForChild(u)){c=n.serverCache.getNode();const e=Cs(i,r,s.getNode(),c);d=null!=e?s.getNode().getImmediateChild(u).updateChild(t,e):s.getNode().getImmediateChild(u)}else d=Ls(i,u,n.serverCache);l=null!=d?e.filter.updateChild(s.getNode(),u,d,t,o,a):s.getNode()}}return Za(n,l,s.isFullyInitialized()||qo(r),e.filter.filtersNodes())}}function Ms(e,t,n,r,i,o,a,s){const l=t.serverCache;let c;const u=a?e.filter:e.filter.getIndexedFilter();if(qo(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=Po(n);if(!l.isCompleteForPath(n)&&No(n)>1)return t;const i=Mo(n),o=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),o):u.updateChild(l.getNode(),e,o,i,xs,null)}const d=es(t,c,l.isFullyInitialized()||qo(n),u.filtersNodes());return Ns(e,d,n,i,new Ps(i,d,o),s)}function Os(e,t,n,r,i,o,a){const s=t.eventCache;let l,c;const u=new Ps(i,t,o);if(qo(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,a),l=Za(t,c,!0,e.filter.filtersNodes());else{const i=Po(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=Za(t,c,s.isFullyInitialized(),s.isFiltered());else{const o=Mo(n),c=s.getNode().getImmediateChild(i);let d;if(qo(o))d=r;else{const e=u.getCompleteChild(i);d=null!=e?".priority"===Oo(o)&&e.getChild(Ro(o)).isEmpty()?e:e.updateChild(o,r):ya.EMPTY_NODE}l=c.equals(d)?t:Za(t,e.filter.updateChild(s.getNode(),i,d,o,u,a),s.isFullyInitialized(),e.filter.filtersNodes())}}return l}function As(e,t){return e.eventCache.isCompleteForChild(t)}function Rs(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function js(e,t,n,r,i,o,a,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=qo(n)?r:new is(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(u.hasChild(n)){const l=Rs(0,t.serverCache.getNode().getImmediateChild(n),r);c=Ms(e,c,new So(n),l,i,o,a,s)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){const l=Rs(0,t.serverCache.getNode().getImmediateChild(n),r);c=Ms(e,c,new So(n),l,i,o,a,s)}})),c}class qs{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new xa(n.getIndex()),i=(o=n).loadsAllData()?new xa(o.getIndex()):o.hasLimit()?new Na(o):new Pa(o);var o;this.processor_=function(e){return{filter:e}}(i);const a=t.serverCache,s=t.eventCache,l=r.updateFullNode(ya.EMPTY_NODE,a.getNode(),null),c=i.updateFullNode(ya.EMPTY_NODE,s.getNode(),null),u=new $a(l,a.isFullyInitialized(),r.filtersNodes()),d=new $a(c,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=Xa(d,u),this.eventGenerator_=new Ka(this.query_)}get query(){return this.query_}}function Ds(e,t){const n=ns(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!qo(t)&&!n.getImmediateChild(Po(t)).isEmpty())?n.getChild(t):null}function Hs(e){return 0===e.eventRegistrations_.length}function Fs(e,n,r){const i=[];if(r){t(null==n,"A cancel should cancel all event registrations.");const o=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(r,o);t&&i.push(t)}))}if(n){let t=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(n)){if(n.hasAnyCallback()){t=t.concat(e.eventRegistrations_.slice(r+1));break}}else t.push(i)}e.eventRegistrations_=t}else e.eventRegistrations_=[];return i}function Us(e,r,i,o){r.type===Va.MERGE&&null!==r.source.queryId&&(t(ns(e.viewCache_),"We should always have a full cache before handling merges"),t(ts(e.viewCache_),"Missing event cache, even though we have a server cache"));const a=e.viewCache_,s=function(e,r,i,o,a){const s=new Ss;let l,c;if(i.type===Va.OVERWRITE){const n=i;n.source.fromUser?l=Os(e,r,n.path,n.snap,o,a,s):(t(n.source.fromServer,"Unknown source."),c=n.source.tagged||r.serverCache.isFiltered()&&!qo(n.path),l=Ms(e,r,n.path,n.snap,o,a,c,s))}else if(i.type===Va.MERGE){const n=i;n.source.fromUser?l=function(e,t,n,r,i,o,a){let s=t;return r.foreach(((r,l)=>{const c=jo(n,r);As(t,Po(c))&&(s=Os(e,s,c,l,i,o,a))})),r.foreach(((r,l)=>{const c=jo(n,r);As(t,Po(c))||(s=Os(e,s,c,l,i,o,a))})),s}(e,r,n.path,n.children,o,a,s):(t(n.source.fromServer,"Unknown source."),c=n.source.tagged||r.serverCache.isFiltered(),l=js(e,r,n.path,n.children,o,a,c,s))}else if(i.type===Va.ACK_USER_WRITE){const n=i;l=n.revert?function(e,n,r,i,o,a){let s;if(null!=Ts(i,r))return n;{const l=new Ps(i,n,o),c=n.eventCache.getNode();let u;if(qo(r)||".priority"===Po(r)){let r;if(n.serverCache.isFullyInitialized())r=ws(i,ns(n));else{const e=n.serverCache.getNode();t(e instanceof ya,"serverChildren would be complete if leaf node"),r=Es(i,e)}u=e.filter.updateFullNode(c,r,a)}else{const t=Po(r);let o=Ls(i,t,n.serverCache);null==o&&n.serverCache.isCompleteForChild(t)&&(o=c.getImmediateChild(t)),u=null!=o?e.filter.updateChild(c,t,o,Mo(r),l,a):n.eventCache.getNode().hasChild(t)?e.filter.updateChild(c,t,ya.EMPTY_NODE,Mo(r),l,a):c,u.isEmpty()&&n.serverCache.isFullyInitialized()&&(s=ws(i,ns(n)),s.isLeafNode()&&(u=e.filter.updateFullNode(u,s,a)))}return s=n.serverCache.isFullyInitialized()||null!=Ts(i,xo()),Za(n,u,s,e.filter.filtersNodes())}}(e,r,n.path,o,a,s):function(e,t,n,r,i,o,a){if(null!=Ts(i,n))return t;const s=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(qo(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Ms(e,t,n,l.getNode().getChild(n),i,o,s,a);if(qo(n)){let r=new is(null);return l.getNode().forEachChild(Xo,((e,t)=>{r=r.set(new So(e),t)})),js(e,t,n,r,i,o,s,a)}return t}{let c=new is(null);return r.foreach(((e,t)=>{const r=jo(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))})),js(e,t,n,c,i,o,s,a)}}(e,r,n.path,n.affectedTree,o,a,s)}else{if(i.type!==Va.LISTEN_COMPLETE)throw n("Unknown operation type: "+i.type);l=function(e,t,n,r,i){const o=t.serverCache;return Ns(e,es(t,o.getNode(),o.isFullyInitialized()||qo(n),o.isFiltered()),n,r,xs,i)}(e,r,i.path,o,s)}const u=s.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=ts(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(La(ts(t)))}}(r,l,u),{viewCache:l,changes:u}}(e.processor_,a,r,i,o);var l,c;return l=e.processor_,c=s.viewCache,t(c.eventCache.getNode().isIndexed(l.filter.getIndex()),"Event snap not indexed"),t(c.serverCache.getNode().isIndexed(l.filter.getIndex()),"Server snap not indexed"),t(s.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,Vs(e,s.changes,s.viewCache.eventCache.getNode(),null)}function Vs(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],o=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Qa(e,i,"child_removed",t,r,n),Qa(e,i,"child_added",t,r,n),Qa(e,i,"child_moved",o,r,n),Qa(e,i,"child_changed",t,r,n),Qa(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let zs,Ws;class Bs{constructor(){this.views=new Map}}function Ys(e,n,r,i){const o=n.source.queryId;if(null!==o){const a=e.views.get(o);return t(null!=a,"SyncTree gave us an op for an invalid query."),Us(a,n,r,i)}{let t=[];for(const o of e.views.values())t=t.concat(Us(o,n,r,i));return t}}function Gs(e,t,n,r,i,o){const a=function(e,t,n,r,i){const o=t._queryIdentifier,a=e.views.get(o);if(!a){let e=ws(n,i?r:null),o=!1;e?o=!0:r instanceof ya?(e=Es(n,r),o=!1):(e=ya.EMPTY_NODE,o=!1);const a=Xa(new $a(e,o,!1),new $a(r,i,!1));return new qs(t,a)}return a}(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,a),function(e,t){e.eventRegistrations_.push(t)}(a,n),function(e,t){const n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(da,((e,t)=>{r.push(Ia(e,t))})),n.isFullyInitialized()&&r.push(La(n.getNode())),Vs(e,r,n.getNode(),t)}(a,n)}function Js(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function $s(e,t){let n=null;for(const r of e.views.values())n=n||Ds(r,t);return n}function Ks(e,t){if(t._queryParams.loadsAllData())return Zs(e);{const n=t._queryIdentifier;return e.views.get(n)}}function Qs(e,t){return null!=Ks(e,t)}function Xs(e){return null!=Zs(e)}function Zs(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let el=1;class tl{constructor(e){this.listenProvider_=e,this.syncPointTree_=new is(null),this.pendingWriteTree_={visibleWrites:os.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function nl(e,n,r,i,o){return function(e,n,r,i,o){t(i>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),e.allWrites.push({path:n,snap:r,writeId:i,visible:o}),o&&(e.visibleWrites=as(e.visibleWrites,n,r)),e.lastWriteId=i}(e.pendingWriteTree_,n,r,i,o),o?ll(e,new Ga({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},n,r)):[]}function rl(e,n,r=!1){const i=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,n);if(function(e,n){const r=e.allWrites.findIndex((e=>e.writeId===n));t(r>=0,"removeWrite called with nonexistent writeId.");const i=e.allWrites[r];e.allWrites.splice(r,1);let o=i.visible,a=!1,s=e.allWrites.length-1;for(;o&&s>=0;){const t=e.allWrites[s];t.visible&&(s>=r&&gs(t,i.path)?o=!1:Uo(i.path,t.path)&&(a=!0)),s--}return!!o&&(a?(function(e){e.visibleWrites=ys(e.allWrites,bs,xo()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0):(i.snap?e.visibleWrites=ls(e.visibleWrites,i.path):Ki(i.children,(t=>{e.visibleWrites=ls(e.visibleWrites,jo(i.path,t))})),!0))}(e.pendingWriteTree_,n)){let t=new is(null);return null!=i.snap?t=t.set(xo(),!0):Ki(i.children,(e=>{t=t.set(new So(e),!0)})),ll(e,new Ba(i.path,t,r))}return[]}function il(e,t,n){return ll(e,new Ga({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function ol(e,n,r,i,o=!1){const a=n._path,s=e.syncPointTree_.get(a);let l=[];if(s&&("default"===n._queryIdentifier||Qs(s,n))){const c=function(e,n,r,i){const o=n._queryIdentifier,a=[];let s=[];const l=Xs(e);if("default"===o)for(const[t,n]of e.views.entries())s=s.concat(Fs(n,r,i)),Hs(n)&&(e.views.delete(t),n.query._queryParams.loadsAllData()||a.push(n.query));else{const t=e.views.get(o);t&&(s=s.concat(Fs(t,r,i)),Hs(t)&&(e.views.delete(o),t.query._queryParams.loadsAllData()||a.push(t.query)))}return l&&!Xs(e)&&a.push(new(t(zs,"Reference.ts has not been loaded"),zs)(n._repo,n._path)),{removed:a,events:s}}(s,n,r,i);0===s.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(a));const u=c.removed;if(l=c.events,!o){const t=-1!==u.findIndex((e=>e._queryParams.loadsAllData())),r=e.syncPointTree_.findOnPath(a,((e,t)=>Xs(t)));if(t&&!r){const t=e.syncPointTree_.subtree(a);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&Xs(t))return[Zs(t)];{let e=[];return t&&(e=Js(t)),Ki(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,o=dl(e,r);e.listenProvider_.startListening(gl(i),hl(e,i),o.hashFn,o.onComplete)}}}if(!r&&u.length>0&&!i)if(t){const t=null;e.listenProvider_.stopListening(gl(n),t)}else u.forEach((t=>{const n=e.queryToTagMap.get(pl(t));e.listenProvider_.stopListening(gl(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=pl(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,u)}return l}function al(e,n,r,i=!1){const o=n._path;let a=null,s=!1;e.syncPointTree_.foreachOnPath(o,((e,t)=>{const n=Do(e,o);a=a||$s(t,n),s=s||Xs(t)}));let l,c=e.syncPointTree_.get(o);c?(s=s||Xs(c),a=a||$s(c,xo())):(c=new Bs,e.syncPointTree_=e.syncPointTree_.set(o,c)),null!=a?l=!0:(l=!1,a=ya.EMPTY_NODE,e.syncPointTree_.subtree(o).foreachChild(((e,t)=>{const n=$s(t,xo());n&&(a=a.updateImmediateChild(e,n))})));const u=Qs(c,n);if(!u&&!n._queryParams.loadsAllData()){const r=pl(n);t(!e.queryToTagMap.has(r),"View does not exist, but we have a tag");const i=el++;e.queryToTagMap.set(r,i),e.tagToQueryMap.set(i,r)}let d=Gs(c,n,r,vs(e.pendingWriteTree_,o),a,l);if(!u&&!s&&!i){const r=Ks(c,n);d=d.concat(function(e,n,r){const i=n._path,o=hl(e,n),a=dl(e,r),s=e.listenProvider_.startListening(gl(n),o,a.hashFn,a.onComplete),l=e.syncPointTree_.subtree(i);if(o)t(!Xs(l.value),"If we're adding a query, it shouldn't be shadowed");else{const t=l.fold(((e,t,n)=>{if(!qo(e)&&t&&Xs(t))return[Zs(t).query];{let e=[];return t&&(e=e.concat(Js(t).map((e=>e.query)))),Ki(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(gl(r),hl(e,r))}}return s}(e,n,r))}return d}function sl(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=$s(n,Do(e,t));if(r)return r}));return _s(r,t,i,n,!0)}function ll(e,t){return cl(t,e.syncPointTree_,null,vs(e.pendingWriteTree_,xo()))}function cl(e,t,n,r){if(qo(e.path))return ul(e,t,n,r);{const i=t.get(xo());null==n&&null!=i&&(n=$s(i,xo()));let o=[];const a=Po(e.path),s=e.operationForChild(a),l=t.children.get(a);if(l&&s){const e=n?n.getImmediateChild(a):null,t=Is(r,a);o=o.concat(cl(s,l,e,t))}return i&&(o=o.concat(Ys(i,e,r,n))),o}}function ul(e,t,n,r){const i=t.get(xo());null==n&&null!=i&&(n=$s(i,xo()));let o=[];return t.children.inorderTraversal(((t,i)=>{const a=n?n.getImmediateChild(t):null,s=Is(r,t),l=e.operationForChild(t);l&&(o=o.concat(ul(l,i,a,s)))})),i&&(o=o.concat(Ys(i,e,r,n))),o}function dl(e,t){const n=t.query,r=hl(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||ya.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=fl(e,n);if(r){const n=ml(r),i=n.path,o=n.queryId,a=Do(i,t);return vl(e,i,new Ya(Wa(o),a))}return[]}(e,n._path,r):function(e,t){return ll(e,new Ya({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return ol(e,n,null,r)}}}}function hl(e,t){const n=pl(t);return e.queryToTagMap.get(n)}function pl(e){return e._path.toString()+"$"+e._queryIdentifier}function fl(e,t){return e.tagToQueryMap.get(t)}function ml(e){const n=e.indexOf("$");return t(-1!==n&&n<e.length-1,"Bad queryKey."),{queryId:e.substr(n+1),path:new So(e.substr(0,n))}}function vl(e,n,r){const i=e.syncPointTree_.get(n);return t(i,"Missing sync point for query tag that we're tracking"),Ys(i,r,vs(e.pendingWriteTree_,n),null)}function gl(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(t(Ws,"Reference.ts has not been loaded"),Ws)(e._repo,e._path):e}class bl{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new bl(t)}node(){return this.node_}}class yl{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=jo(this.path_,e);return new yl(this.syncTree_,t)}node(){return sl(this.syncTree_,this.path_)}}const _l=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},wl=function(e,n,r){return e&&"object"==typeof e?(t(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?El(e[".sv"],n,r):"object"==typeof e[".sv"]?Cl(e[".sv"],n):void t(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},El=function(e,n,r){if("timestamp"===e)return r.timestamp;t(!1,"Unexpected server value: "+e)},Cl=function(e,n,r){e.hasOwnProperty("increment")||t(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const i=e.increment;"number"!=typeof i&&t(!1,"Unexpected increment value: "+i);const o=n.node();if(t(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return i;const a=o.getValue();return"number"!=typeof a?i:a+i},Tl=function(e,t,n,r){return Il(t,new yl(n,e),r)},Ll=function(e,t,n){return Il(e,new bl(t),n)};function Il(e,t,n){const r=e.getPriority().val(),i=wl(r,t.getImmediateChild(".priority"),n);let o;if(e.isLeafNode()){const r=e,o=wl(r.getValue(),t,n);return o!==r.getValue()||i!==r.getPriority().val()?new ua(o,Ea(i)):e}{const r=e;return o=r,i!==r.getPriority().val()&&(o=o.updatePriority(new ua(i))),r.forEachChild(da,((e,r)=>{const i=Il(r,t.getImmediateChild(e),n);i!==r&&(o=o.updateImmediateChild(e,i))})),o}}class kl{constructor(e="",t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}}function Sl(e,t){let n=t instanceof So?t:new So(t),r=e,i=Po(n);for(;null!==i;){const e=k(r.node.children,i)||{children:{},childCount:0};r=new kl(i,r,e),n=Mo(n),i=Po(n)}return r}function xl(e){return e.node.value}function Pl(e,t){e.node.value=t,Rl(e)}function Nl(e){return e.node.childCount>0}function Ml(e,t){Ki(e.node.children,((n,r)=>{t(new kl(n,e,r))}))}function Ol(e,t,n,r){n&&!r&&t(e),Ml(e,(e=>{Ol(e,t,!0,r)})),n&&r&&t(e)}function Al(e){return new So(null===e.parent?e.name:Al(e.parent)+"/"+e.name)}function Rl(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===xl(e)&&!Nl(e)}(n),i=I(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Rl(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Rl(e))}(e.parent,e.name,e)}const jl=/[\[\].#$\/\u0000-\u001F\u007F]/,ql=/[\[\].#$\u0000-\u001F\u007F]/,Dl=10485760,Hl=function(e){return"string"==typeof e&&0!==e.length&&!jl.test(e)},Fl=function(e){return"string"==typeof e&&0!==e.length&&!ql.test(e)},Ul=function(e,t,n,r){r&&void 0===t||Vl(D(e,"value"),t,n)},Vl=function(e,t,n){const r=n instanceof So?new Vo(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+Wo(r));if("function"==typeof t)throw new Error(e+"contains a function "+Wo(r)+" with contents = "+t.toString());if(Vi(t))throw new Error(e+"contains "+t.toString()+" "+Wo(r));if("string"==typeof t&&t.length>Dl/3&&H(t)>Dl)throw new Error(e+"contains a string greater than "+Dl+" utf8 bytes "+Wo(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let n=!1,i=!1;if(Ki(t,((t,o)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!Hl(t)))throw new Error(e+" contains an invalid key ("+t+") "+Wo(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=H(t),zo(e)}(r,t),Vl(e,o,r),function(e){const t=e.parts_.pop();e.byteLength_-=H(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+Wo(r)+" in addition to actual children.")}},zl=function(e,t,n,r){if(r&&void 0===t)return;const i=D(e,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const o=[];Ki(t,((e,t)=>{const r=new So(e);if(Vl(i,t,jo(n,r)),".priority"===Oo(r)&&!(null===(a=t)||"string"==typeof a||"number"==typeof a&&!Vi(a)||a&&"object"==typeof a&&I(a,".sv")))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");var a;o.push(r)})),function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];const i=Ao(r);for(let t=0;t<i.length;t++)if(".priority"===i[t]&&t===i.length-1);else if(!Hl(i[t]))throw new Error(e+"contains an invalid key ("+i[t]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(Ho);let i=null;for(n=0;n<t.length;n++){if(r=t[n],null!==i&&Uo(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,o)},Wl=function(e,t,n,r){if(!(r&&void 0===n||Fl(n)))throw new Error(D(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Bl=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Wl(e,t,n,r)},Yl=function(e,t){if(".info"===Po(t))throw new Error(e+" failed = Can't modify data under /.info/")};class Gl{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Jl(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],o=i.getPath();null===n||Fo(o,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function $l(e,t,n){Jl(e,n),Ql(e,(e=>Fo(e,t)))}function Kl(e,t,n){Jl(e,n),Ql(e,(e=>Uo(e,t)||Uo(t,e)))}function Ql(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];i&&(t(i.path)?(Xl(e.eventLists_[r]),e.eventLists_[r]=null):n=!1)}n&&(e.eventLists_=[]),e.recursionDepth_--}function Xl(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();Ri&&qi("event: "+n.toString()),eo(r)}}}const Zl=25;class ec{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Gl,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=qa(),this.transactionQueueTree_=new kl,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function tc(e,t,n){if(e.stats_=vo(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Ra(e.repoInfo_,((t,n,r,i)=>{ic(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>oc(e,!0)),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{T(n)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}e.persistentConnection_=new Go(e.repoInfo_,t,((t,n,r,i)=>{ic(e,t,n,r,i)}),(t=>{oc(e,t)}),(t=>{!function(e,t){Ki(t,((t,n)=>{ac(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(t,n){const r=t.toString();return mo[r]||(mo[r]=new Ua(e.stats_,e.server_)),mo[r]}(e.repoInfo_),e.infoData_=new ja,e.infoSyncTree_=new tl({startListening:(t,n,r,i)=>{let o=[];const a=e.infoData_.getNode(t._path);return a.isEmpty()||(o=il(e.infoSyncTree_,t._path,a),setTimeout((()=>{i("ok")}),0)),o},stopListening:()=>{}}),ac(e,"connected",!1),e.serverSyncTree_=new tl({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const o=i(n,r);Kl(e.eventQueue_,t._path,o)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function nc(e){const t=e.infoData_.getNode(new So(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function rc(e){return _l({timestamp:nc(e)})}function ic(e,t,n,r,i){e.dataUpdateCount++;const o=new So(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let a=[];if(i)if(r){const t=x(n,(e=>Ea(e)));a=function(e,t,n,r){const i=fl(e,r);if(i){const r=ml(i),o=r.path,a=r.queryId,s=Do(o,t),l=is.fromObject(n);return vl(e,o,new Ja(Wa(a),s,l))}return[]}(e.serverSyncTree_,o,t,i)}else{const t=Ea(n);a=function(e,t,n,r){const i=fl(e,r);if(null!=i){const r=ml(i),o=r.path,a=r.queryId,s=Do(o,t);return vl(e,o,new Ga(Wa(a),s,n))}return[]}(e.serverSyncTree_,o,t,i)}else if(r){const t=x(n,(e=>Ea(e)));a=function(e,t,n){const r=is.fromObject(n);return ll(e,new Ja({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,o,t)}else{const t=Ea(n);a=il(e.serverSyncTree_,o,t)}let s=o;a.length>0&&(s=pc(e,o)),Kl(e.eventQueue_,s,a)}function oc(e,t){ac(e,"connected",t),!1===t&&function(e){cc(e,"onDisconnectEvents");const t=rc(e),n=qa();Ha(e.onDisconnect_,xo(),((r,i)=>{const o=Tl(r,i,e.serverSyncTree_,t);Da(n,r,o)}));let r=[];Ha(n,xo(),((t,n)=>{r=r.concat(il(e.serverSyncTree_,t,n));const i=bc(e,t);pc(e,i)})),e.onDisconnect_=qa(),Kl(e.eventQueue_,xo(),r)}(e)}function ac(e,t,n){const r=new So("/.info/"+t),i=Ea(n);e.infoData_.updateSnapshot(r,i);const o=il(e.infoSyncTree_,r,i);Kl(e.eventQueue_,r,o)}function sc(e){return e.nextWriteId_++}function lc(e,t,n){let r;r=".info"===Po(t._path)?ol(e.infoSyncTree_,t,n):ol(e.serverSyncTree_,t,n),$l(e.eventQueue_,t._path,r)}function cc(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),qi(n,...t)}function uc(e,t,n,r){t&&eo((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const o=new Error(i);o.code=e,t(o)}}))}function dc(e,t,n){return sl(e.serverSyncTree_,t,n)||ya.EMPTY_NODE}function hc(e,n=e.transactionQueueTree_){if(n||gc(e,n),xl(n)){const r=mc(e,n);t(r.length>0,"Sending zero length transaction queue"),r.every((e=>0===e.status))&&function(e,n,r){const i=r.map((e=>e.currentWriteId)),o=dc(e,n,i);let a=o;const s=o.hash();for(let e=0;e<r.length;e++){const i=r[e];t(0===i.status,"tryToSendTransactionQueue_: items in queue should all be run."),i.status=1,i.retryCount++;const o=Do(n,i.path);a=a.updateChild(o,i.currentOutputSnapshotRaw)}const l=a.val(!0),c=n;e.server_.put(c.toString(),l,(t=>{cc(e,"transaction put response",{path:c.toString(),status:t});let i=[];if("ok"===t){const t=[];for(let n=0;n<r.length;n++)r[n].status=2,i=i.concat(rl(e.serverSyncTree_,r[n].currentWriteId)),r[n].onComplete&&t.push((()=>r[n].onComplete(null,!0,r[n].currentOutputSnapshotResolved))),r[n].unwatcher();gc(e,Sl(e.transactionQueueTree_,n)),hc(e,e.transactionQueueTree_),Kl(e.eventQueue_,n,i);for(let e=0;e<t.length;e++)eo(t[e])}else{if("datastale"===t)for(let e=0;e<r.length;e++)3===r[e].status?r[e].status=4:r[e].status=0;else{Ui("transaction at "+c.toString()+" failed: "+t);for(let e=0;e<r.length;e++)r[e].status=4,r[e].abortReason=t}pc(e,n)}}),s)}(e,Al(n),r)}else Nl(n)&&Ml(n,(t=>{hc(e,t)}))}function pc(e,n){const r=fc(e,n),i=Al(r);return function(e,n,r){if(0===n.length)return;const i=[];let o=[];const a=n.filter((e=>0===e.status)).map((e=>e.currentWriteId));for(let l=0;l<n.length;l++){const c=n[l],u=Do(r,c.path);let d,h=!1;if(t(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,d=c.abortReason,o=o.concat(rl(e.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=Zl)h=!0,d="maxretry",o=o.concat(rl(e.serverSyncTree_,c.currentWriteId,!0));else{const t=dc(e,c.path,a);c.currentInputSnapshot=t;const r=n[l].update(t.val());if(void 0!==r){Vl("transaction failed: Data returned ",r,c.path);let n=Ea(r);"object"==typeof r&&null!=r&&I(r,".priority")||(n=n.updatePriority(t.getPriority()));const i=c.currentWriteId,s=rc(e),l=Ll(n,t,s);c.currentOutputSnapshotRaw=n,c.currentOutputSnapshotResolved=l,c.currentWriteId=sc(e),a.splice(a.indexOf(i),1),o=o.concat(nl(e.serverSyncTree_,c.path,l,c.currentWriteId,c.applyLocally)),o=o.concat(rl(e.serverSyncTree_,i,!0))}else h=!0,d="nodata",o=o.concat(rl(e.serverSyncTree_,c.currentWriteId,!0))}Kl(e.eventQueue_,r,o),o=[],h&&(n[l].status=2,s=n[l].unwatcher,setTimeout(s,Math.floor(0)),n[l].onComplete&&("nodata"===d?i.push((()=>n[l].onComplete(null,!1,n[l].currentInputSnapshot))):i.push((()=>n[l].onComplete(new Error(d),!1,null)))))}var s;gc(e,e.transactionQueueTree_);for(let e=0;e<i.length;e++)eo(i[e]);hc(e,e.transactionQueueTree_)}(e,mc(e,r),i),i}function fc(e,t){let n,r=e.transactionQueueTree_;for(n=Po(t);null!==n&&void 0===xl(r);)r=Sl(r,n),n=Po(t=Mo(t));return r}function mc(e,t){const n=[];return vc(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function vc(e,t,n){const r=xl(t);if(r)for(let e=0;e<r.length;e++)n.push(r[e]);Ml(t,(t=>{vc(e,t,n)}))}function gc(e,t){const n=xl(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,Pl(t,n.length>0?n:void 0)}Ml(t,(t=>{gc(e,t)}))}function bc(e,t){const n=Al(fc(e,t)),r=Sl(e.transactionQueueTree_,t);return function(e,t,n){let r=e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{yc(e,t)})),yc(e,r),Ol(r,(t=>{yc(e,t)})),n}function yc(e,n){const r=xl(n);if(r){const i=[];let o=[],a=-1;for(let n=0;n<r.length;n++)3===r[n].status||(1===r[n].status?(t(a===n-1,"All SENT items should be at beginning of queue."),a=n,r[n].status=3,r[n].abortReason="set"):(t(0===r[n].status,"Unexpected transaction status in abort"),r[n].unwatcher(),o=o.concat(rl(e.serverSyncTree_,r[n].currentWriteId,!0)),r[n].onComplete&&i.push(r[n].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Pl(n,void 0):r.length=a+1,Kl(e.eventQueue_,Al(n),o);for(let e=0;e<i.length;e++)eo(i[e])}}const _c=function(e,t){const n=wc(e),r=n.namespace;"firebase.com"===n.domain&&Fi(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Fi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ui("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new uo(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new So(n.pathString)}},wc=function(e){let t="",n="",r="",i="",o="",a=!0,s="https",l=443;if("string"==typeof e){let c=e.indexOf("//");c>=0&&(s=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let d=e.indexOf("?");-1===d&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(i=function(e){let t="";const n=e.split("/");for(let e=0;e<n.length;e++)if(n[e].length>0){let r=n[e];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(e){}t+="/"+r}return t}(e.substring(u,d)));const h=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ui(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,d)));c=t.indexOf(":"),c>=0?(a="https"===s||"wss"===s,l=parseInt(t.substring(c+1),10)):c=t.length;const p=t.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),o=r}"ns"in h&&(o=h.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:a,scheme:s,pathString:i,namespace:o}};class Ec{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+T(this.snapshot.exportVal())}}class Cc{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Tc{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return t(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Lc{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return qo(this._path)?null:Oo(this._path)}get ref(){return new Ic(this._repo,this._path)}get _queryIdentifier(){const e=Aa(this._queryParams),t=Ji(e);return"{}"===t?"default":t}get _queryObject(){return Aa(this._queryParams)}isEqual(e){if(!((e=F(e))instanceof Lc))return!1;const t=this._repo===e._repo,n=Fo(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class Ic extends Lc{constructor(e,t){super(e,t,new Ma,!1)}get parent(){const e=Ro(this._path);return null===e?null:new Ic(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class kc{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new So(e),n=xc(this.ref,e);return new kc(this._node.getChild(t),n,da)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,((t,n)=>e(new kc(n,xc(this.ref,t),da))))}hasChild(e){const t=new So(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Sc(e,t){return(e=F(e))._checkNotDeleted("ref"),void 0!==t?xc(e._root,t):e._root}function xc(e,t){return null===Po((e=F(e))._path)?Bl("child","path",t,!1):Wl("child","path",t,!1),new Ic(e._repo,jo(e._path,t))}function Pc(e,t){e=F(e),Yl("set",e._path),Ul("set",t,e._path,!1);const n=new v;return function(e,t,n,r,i){cc(e,"set",{path:t.toString(),value:n,priority:r});const o=rc(e),a=Ea(n,r),s=sl(e.serverSyncTree_,t),l=Ll(a,s,o),c=sc(e),u=nl(e.serverSyncTree_,t,l,c,!0);Jl(e.eventQueue_,u),e.server_.put(t.toString(),a.val(!0),((n,r)=>{const o="ok"===n;o||Ui("set at "+t+" failed: "+n);const a=rl(e.serverSyncTree_,c,!o);Kl(e.eventQueue_,t,a),uc(0,i,n,r)}));const d=bc(e,t);pc(e,d),Kl(e.eventQueue_,d,[])}(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}function Nc(e,n){zl("update",n,e._path,!1);const r=new v;return function(e,n,r,i){cc(e,"update",{path:n.toString(),value:r});let o=!0;const a=rc(e),s={};if(Ki(r,((t,r)=>{o=!1,s[t]=Tl(jo(n,t),Ea(r),e.serverSyncTree_,a)})),o)qi("update() called with empty data.  Don't do anything."),uc(0,i,"ok",void 0);else{const o=sc(e),a=function(e,n,r,i){!function(e,n,r,i){t(i>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:n,children:r,writeId:i,visible:!0}),e.visibleWrites=ss(e.visibleWrites,n,r),e.lastWriteId=i}(e.pendingWriteTree_,n,r,i);const o=is.fromObject(r);return ll(e,new Ja({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},n,o))}(e.serverSyncTree_,n,s,o);Jl(e.eventQueue_,a),e.server_.merge(n.toString(),r,((t,r)=>{const a="ok"===t;a||Ui("update at "+n+" failed: "+t);const s=rl(e.serverSyncTree_,o,!a),l=s.length>0?pc(e,n):n;Kl(e.eventQueue_,l,s),uc(0,i,t,r)})),Ki(r,(t=>{const r=bc(e,jo(n,t));pc(e,r)})),Kl(e.eventQueue_,n,[])}}(e._repo,e._path,n,r.wrapCallback((()=>{}))),r.promise}class Mc{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new Ec("value",this,new kc(e.snapshotNode,new Ic(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Cc(this,e,t):null}matches(e){return e instanceof Mc&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Oc{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Cc(this,e,t):null}createEvent(e,n){t(null!=e.childName,"Child events should have a childName.");const r=xc(new Ic(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new Ec(e.type,this,new kc(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Oc&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Ac(e,t,n,r){return function(e,t,n,r,i){let o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{lc(e._repo,e,s),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const a=new Tc(n,o||void 0),s="value"===t?new Mc(a):new Oc(t,a);return function(e,t,n){let r;r=".info"===Po(t._path)?al(e.infoSyncTree_,t,n):al(e.serverSyncTree_,t,n),$l(e.eventQueue_,t._path,r)}(e._repo,e,s),()=>lc(e._repo,e,s)}(e,"value",t,n,r)}!function(e){t(!zs,"__referenceConstructor has already been defined"),zs=e}(Ic),function(e){t(!Ws,"__referenceConstructor has already been defined"),Ws=e}(Ic);const Rc={};function jc(e,t,n,r,i){let o=r||e.options.databaseURL;void 0===o&&(e.options.projectId||Fi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),qi("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let a,s,l=_c(o,i),c=l.repoInfo;"undefined"!=typeof process&&process.env&&(s=process.env.FIREBASE_DATABASE_EMULATOR_HOST),s?(a=!0,o=`http://${s}?ns=${c.namespace}`,l=_c(o,i),c=l.repoInfo):a=!l.repoInfo.secure;const u=i&&a?new io(io.OWNER):new ro(e.name,e.options,t);(function(e,t){const n=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!Hl(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Fl(e)}(n))throw new Error(D(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",l),qo(l.path)||Fi("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function(e,t,n,r){let i=Rc[t.name];i||(i={},Rc[t.name]=i);let o=i[e.toURLString()];return o&&Fi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new ec(e,false,n,r),i[e.toURLString()]=o,o}(c,e,u,new no(e.name,n));return new qc(d,e)}class qc{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(tc(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ic(this._repo,xo())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(e,t){const n=Rc[t];n&&n[e.key]===e||Fi(`Database ${t}(${e.repoInfo_}) has already been deleted.`),function(e){e.persistentConnection_&&e.persistentConnection_.interrupt("repo_interrupt")}(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Fi("Cannot call "+e+" on a deleted database.")}}function Dc(e=rt(),t){const n=Qe(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=p("database");e&&function(e,t,n,r={}){(e=F(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&Fi("Cannot call useEmulator() after instance has already been initialized.");const i=e._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Fi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new io(io.OWNER);else if(r.mockUserToken){const t="string"==typeof r.mockUserToken?r.mockUserToken:function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[s(JSON.stringify({alg:"none",type:"JWT"})),s(JSON.stringify(o)),""].join(".")}(r.mockUserToken,e.app.options.projectId);o=new io(t)}!function(e,t,n,r){e.repoInfo_=new uo(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,o)}(n,...e)}return n}function Hc(e){return Hc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hc(e)}function Fc(){Fc=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:I(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",v={};function g(){}function b(){}function y(){}var _={};c(_,a,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(N([])));E&&E!==n&&r.call(E,a)&&(_=E);var C=y.prototype=g.prototype=Object.create(_);function T(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(i,o,a,s){var l=d(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==Hc(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function I(t,n,r){var i=h;return function(o,a){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=k(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var c=d(t,n,r);if("normal"===c.type){if(i=r.done?m:p,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function k(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Hc(t)+" is not iterable")}return b.prototype=y,i(C,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:b,configurable:!0}),b.displayName=c(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,l,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},T(L.prototype),c(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new L(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(C),c(C,l,"Generator"),c(C,a,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Uc(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var Vc,zc,Wc,Bc;function Yc(){return Gc.apply(this,arguments)}function Gc(){var e;return e=Fc().mark((function e(){var t,n,r;return Fc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/.netlify/functions/config");case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("Network response was not ok");case 6:return e.next=8,t.json();case 8:n=e.sent,r={apiKey:n.apiKey,authDomain:n.authDomain,databaseURL:n.databaseURL,projectId:n.projectId,storageBucket:n.storageBucket,messagingSenderId:n.messagingSenderId,appId:n.appId,measurementId:n.measurementId},_i(Vc=nt(r)),Dc(Vc),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.error("Failed to fetch Firebase configuration:",e.t0);case 18:return e.abrupt("return",{app:Vc});case 19:case"end":return e.stop()}}),e,null,[[0,15]])})),Gc=function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Uc(o,r,i,a,s,"next",e)}function s(e){Uc(o,r,i,a,s,"throw",e)}a(void 0)}))},Gc.apply(this,arguments)}function Jc(e){var t=document.querySelector(".mainSection"),n=document.createElement("div");t.appendChild(n),n.classList.add("tenseSelectPopupContainer"),n.style.display="none";var r=document.querySelector(".currentTense").textContent;$c("present","present (le prsent de l'indicatif)","present (le prsent de l'indicatif)"===r?"fa-solid":"fa-regular","fa-circle","radio-present"),$c("pastImp","imperfect past (l'imparfait)","imperfect past (l'imparfait)"===r?"fa-solid":"fa-regular","fa-circle","radio-pastimp"),e?($c("pastComp","past (le pass compos)","past (le pass compos)"===r?"fa-solid":"fa-regular","fa-circle","radio-pastcomp"),$c("future","future (le futur simple)","future (le futur simple)"===r?"fa-solid":"fa-regular","fa-circle","radio-future"),$c("subjunctive","present subjunctive (le subjonctif prsent)","present subjunctive (le subjonctif prsent)"===r?"fa-solid":"fa-regular","fa-circle","radio-pastcomp")):($c("pastComp","past (le pass compos)","fa-solid","fa-lock","lock-pastcomp"),$c("future","future (le futur simple)","fa-solid","fa-lock","lock-future"),$c("subjunctive","present subjunctive (le subjonctif prsent)","fa-solid","fa-lock","lock-subjunctive"))}function $c(e,t,n,r,i){var o=document.querySelector(".tenseSelectPopupContainer"),a=document.createElement("div");a.classList.add(e);var s=document.createElement("p");s.textContent=t;var l=document.createElement("i");l.classList.add(n,r,i),a.appendChild(s),a.appendChild(l),o.appendChild(a)}function Kc(){var e=document.querySelector(".selectPhrTypeDiv"),t=document.createElement("div");e.appendChild(t),t.classList.add("selectPhrTypeContainer"),t.style.display="none",Qc("easy","easy"),Qc("medium","medium"),Qc("hard","hard")}function Qc(e,t){var n=document.querySelector(".selectPhrTypeContainer"),r=document.createElement("div");r.classList.add(e);var i=document.createElement("p");i.textContent=t,r.appendChild(i),n.appendChild(r)}function Xc(e){return Xc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xc(e)}function Zc(){Zc=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:I(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",v={};function g(){}function b(){}function y(){}var _={};c(_,a,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(N([])));E&&E!==n&&r.call(E,a)&&(_=E);var C=y.prototype=g.prototype=Object.create(_);function T(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(i,o,a,s){var l=d(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==Xc(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function I(t,n,r){var i=h;return function(o,a){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=k(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var c=d(t,n,r);if("normal"===c.type){if(i=r.done?m:p,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function k(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Xc(t)+" is not iterable")}return b.prototype=y,i(C,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:b,configurable:!0}),b.displayName=c(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,l,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},T(L.prototype),c(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new L(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(C),c(C,l,"Generator"),c(C,a,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function eu(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function tu(e){return nu.apply(this,arguments)}function nu(){var e;return e=Zc().mark((function e(t){var n,r,i,o,a,s,l,c,u,d,h,p,f,m,v,g,b,y,_,w,E,C,T,L,I,k,S,x;return Zc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=document.querySelector(".content-area")).innerHTML="",(r=document.querySelector(".mainSection"))||((r=document.createElement("div")).classList.add("mainSection"),n.appendChild(r)),(i=document.createElement("div")).classList.add("welcome"),r.appendChild(i),(o=document.createElement("p")).innerText="Welcome to Conjugation Master!",i.appendChild(o),(a=document.createElement("div")).classList.add("tense-section"),r.appendChild(a),(s=document.createElement("label")).htmlFor="tense",s.innerText="Choose a tense you'd like to practise:",a.appendChild(s),(l=document.createElement("div")).classList.add("selectDiv"),a.appendChild(l),(c=document.createElement("p")).classList.add("currentTense"),l.appendChild(c),u=document.createElement("i"),d=localStorage.getItem("selectedTense"),u.classList.add("fa-solid","fa-caret-down"),l.appendChild(u),c.textContent=t&&d?d:"present (le prsent de l'indicatif)",(h=document.createElement("div")).classList.add("phrase-type"),r.appendChild(h),(p=document.createElement("div")).innerText="Choose a level of difficulty:",h.appendChild(p),(f=document.createElement("div")).classList.add("selectPhrTypeDiv"),h.appendChild(f),(m=document.createElement("p")).id="phraseType",f.appendChild(m),m.textContent=localStorage.getItem("phraseType")||"medium",(v=document.createElement("i")).classList.add("fa-solid","fa-caret-down"),f.appendChild(v),Kc(),g=document.querySelector(".selectPhrTypeContainer"),f.addEventListener("click",(function(e){g&&(g.style.display="block"),e.stopPropagation()})),document.querySelectorAll(".selectPhrTypeContainer div").forEach((function(e){e.addEventListener("click",(function(t){t.stopPropagation(),m.textContent=e.textContent,g.style.display="none"}))})),(b=document.createElement("div")).classList.add("start-section"),r.appendChild(b),(y=document.createElement("button")).id="start-btn",y.innerText="Start now!",b.appendChild(y),(_=document.createElement("div")).classList.add("firstTimeDiv"),_.innerHTML="First time here? <p><span class='firstTimeBtn'>Click here</span> to learn how to use the app!</p>",r.appendChild(_),w=document.querySelector(".rulesSection"),E=document.querySelector(".blurContainer"),(C=document.querySelector(".firstTimeBtn"))&&C.addEventListener("click",(function(e){w.style.display="block",E.style.display="block",e.stopPropagation()})),Jc(t),l.addEventListener("click",(function(e){var t=document.querySelector(".tenseSelectPopupContainer");t&&(t.style.display="block");var n=document.querySelector(".blurContainer");n&&(n.style.display="block"),e.stopPropagation()})),k=document.querySelector(".tenseSelectPopupContainer"),S=document.querySelectorAll(".fa-circle"),x=[],S.forEach((function(e){var t=e.parentNode;x.push(t)})),x.forEach((function(e){var t=document.querySelector(".blurContainer");e.addEventListener("click",(function(){S.forEach((function(e){e.classList.remove("fa-solid"),e.classList.add("fa-regular")})),L=e.querySelector("p"),(I=e.querySelector("i")).classList.remove("fa-regular"),I.classList.add("fa-solid"),T=L.textContent,c.textContent=T,t.style.display="none",k.style.display="none"}))}));case 71:case"end":return e.stop()}}),e)})),nu=function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){eu(o,r,i,a,s,"next",e)}function s(e){eu(o,r,i,a,s,"throw",e)}a(void 0)}))},nu.apply(this,arguments)}function ru(){var e=document.getElementById("noSubsubscribeBtn");e&&e.addEventListener("click",(function(){window.location="../checkout.html"}))}function iu(){var e=document.querySelector(".content-area"),t=document.createElement("div");t.classList.add("noSubDiv"),e.appendChild(t);var n=document.createElement("h1");n.innerText="You currently have no active subscription",t.appendChild(n);var r=document.createElement("p");r.classList.add("noSubExpl1"),r.innerText="Click the 'subscribe' button below to select a subscription or log out to use the free version.",t.appendChild(r);var i=document.createElement("div");i.classList.add("subscribeSection"),t.appendChild(i);var o=document.createElement("button");o.id="noSubsubscribeBtn",o.setAttribute("type","submit"),o.innerText="Subscribe",i.appendChild(o),ru()}function ou(){var e,t=localStorage.getItem("appLastUseTime");if(t){var n=parseInt(t);e=Math.floor((Date.now()-n)/1e3/60),console.log(e)}else e=-1;return e}function au(){var e=document.querySelector(".content-area"),t=document.querySelector(".mainSection");t&&e.removeChild(t);var n=document.createElement("div");n.classList.add("noSubDiv"),e.appendChild(n);var r=document.createElement("h1");r.innerHTML="<i class='fa-solid fa-heart-crack'></i> Out of hearts!",n.appendChild(r);var i=document.createElement("p");i.classList.add("noSubExpl1"),i.innerText="You have no more hearts left! Come back in an hour to continue, or get a premium subscription to use the app with no limits.",n.appendChild(i);var o=document.createElement("div");o.classList.add("subscribeSection"),n.appendChild(o);var a=document.createElement("button");a.id="noSubsubscribeBtn",a.setAttribute("type","submit"),a.innerText="Subscribe",o.appendChild(a),ru()}function su(){var e=document.querySelector(".loader");e&&e.classList.add("loader-hidden")}function lu(e){return lu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lu(e)}function cu(){cu=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:I(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",v={};function g(){}function b(){}function y(){}var _={};c(_,a,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(N([])));E&&E!==n&&r.call(E,a)&&(_=E);var C=y.prototype=g.prototype=Object.create(_);function T(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(i,o,a,s){var l=d(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==lu(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function I(t,n,r){var i=h;return function(o,a){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=k(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var c=d(t,n,r);if("normal"===c.type){if(i=r.done?m:p,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function k(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(lu(t)+" is not iterable")}return b.prototype=y,i(C,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:b,configurable:!0}),b.displayName=c(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,l,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},T(L.prototype),c(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new L(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(C),c(C,l,"Generator"),c(C,a,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function uu(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function du(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){uu(o,r,i,a,s,"next",e)}function s(e){uu(o,r,i,a,s,"throw",e)}a(void 0)}))}}function hu(){return pu.apply(this,arguments)}function pu(){return pu=du(cu().mark((function e(){var t,n;return cu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yc();case 2:t=e.sent,n=t.app,zc=_i(n),Wc=Dc(n);case 6:case"end":return e.stop()}}),e)}))),pu.apply(this,arguments)}function fu(){return mu.apply(this,arguments)}function mu(){return(mu=du(cu().mark((function e(){var t,n,r,i,o,a,s,l,c,u,d,h,p,f,m;return cu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.querySelector(".content-area").innerHTML="",v=void 0,g=void 0,v=document.querySelector("main"),(g=document.querySelector(".loader"))?g.classList.remove("loader-hidden"):((g=document.createElement("div")).classList.add("loader"),v.appendChild(g)),e.next=5,hu();case 5:return e.next=7,Tu();case 7:if(t=e.sent,n=t.subStatus,r=t.userId,(i=localStorage.getItem("lives"))&&"undefined"!==i?o=parseInt(i):(o=7,localStorage.setItem("lives",7)),a=ou(),!r){e.next=22;break}if("active"!==n){e.next=19;break}return e.next=17,tu(r);case 17:e.next=20;break;case 19:iu();case 20:e.next=35;break;case 22:if(!(o>0)){e.next=27;break}return e.next=25,tu(r);case 25:e.next=35;break;case 27:if(!(0===o&&a>=60)){e.next=34;break}return o=7,localStorage.setItem("lives",7),e.next=32,tu(r);case 32:e.next=35;break;case 34:au();case 35:return su(),e.prev=36,e.next=39,fetch("../src/present.json");case 39:return l=e.sent,e.next=42,l.json();case 42:s=e.sent,e.next=48;break;case 45:e.prev=45,e.t0=e.catch(36),console.error("Couldn't fetch Present tense data ",e.t0);case 48:c=document.getElementById("start-btn"),u=document.querySelector(".sidebarContainer"),d=document.querySelector(".sidebarTabletContainer"),h=document.querySelector("footer"),p=document.querySelector("nav"),f=document.querySelector(".lives"),m=document.querySelector(".stats-container"),c&&c.addEventListener("click",du(cu().mark((function e(){var t,n,i,o,a;return cu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("phraseType"),n=t.innerText,i=vu(),o=i.selectedTense,a=i.tenseValue,localStorage.setItem("phraseType",n),localStorage.setItem("selectedTense",o),"present"===a){e.next=12;break}return e.next=8,gu(a);case 8:Fh(s=e.sent,n),e.next=13;break;case 12:Fh(s,n);case 13:p.style.display="none",u.style.display="none",d.style.display="none",h.style.display="none",r?f.style.display="none":(f.style.display="flex",f.style.color="#2b2d42"),m.style.display="flex";case 19:case"end":return e.stop()}}),e)}))));case 56:case"end":return e.stop()}var v,g}),e,null,[[36,45]])})))).apply(this,arguments)}function vu(){var e,t=document.querySelector(".currentTense").textContent;switch(t){case"present (le prsent de l'indicatif)":e="present";break;case"past (le pass compos)":e="pastComp";break;case"imperfect past (l'imparfait)":e="pastImp";break;case"future (le futur simple)":e="future";break;case"present subjunctive (le subjonctif prsent)":e="subjunctive";break;default:console.log("unkown tense")}return{selectedTense:t,tenseValue:e}}function gu(e){return bu.apply(this,arguments)}function bu(){return(bu=du(cu().mark((function e(t){var n,r;return cu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("../src/".concat(t,".json"));case 3:return r=e.sent,e.next=6,r.json();case 6:n=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Couldn't fetch tense data ",e.t0);case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function yu(e,t){return new Promise((function(n){Ac(e,(function(e){var r=e.val();r?(r.box1&&(t[0]=r.box1),r.box2&&(t[1]=r.box2),r.box3&&(t[2]=r.box3),r.box4&&(t[3]=r.box4),r.box5&&(t[4]=r.box5),r.box6&&(t[5]=r.box6),n(t)):n([])}),{onlyOnce:!0})}))}function _u(e){return new Promise((function(t){Ac(e,(function(e){var n=e.val();t(n||[])}),{onlyOnce:!0})}))}function wu(e){return new Promise((function(t){Ac(e,(function(e){var n=e.val();t(n||[])}),{onlyOnce:!0})}))}function Eu(){return new Promise((function(e){ur(zc,(function(t){e(t?zc.currentUser.uid:null)}))}))}function Cu(e){var t=Sc(Wc,"users/"+e+"/info/email");return new Promise((function(e){Ac(t,(function(t){var n=t.val();n&&e(n)}),{onlyOnce:!0})}))}function Tu(){return Lu.apply(this,arguments)}function Lu(){return(Lu=du(cu().mark((function e(){var t,n,r,i,o;return cu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",e.next=3,hu();case 3:return e.prev=3,e.next=6,Eu();case 6:if(!(n=e.sent)){e.next=19;break}return e.next=10,Cu(n);case 10:if(r=e.sent,i=r.replace(/\./g,","),!(o=Sc(Wc,"subscription/"+i+"/status"))){e.next=17;break}return e.next=16,wu(o);case 16:t=e.sent;case 17:e.next=20;break;case 19:console.log("User is signed out");case 20:return e.abrupt("return",{subStatus:t,userId:n});case 23:e.prev=23,e.t0=e.catch(3),console.error("error line 215",e.t0.message);case 26:case"end":return e.stop()}}),e,null,[[3,23]])})))).apply(this,arguments)}function Iu(){return ku.apply(this,arguments)}function ku(){return(ku=du(cu().mark((function e(){var t,n,r,i,o;return cu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hu();case 2:return e.prev=2,e.next=5,Eu();case 5:if(!(n=e.sent)){e.next=18;break}return e.next=9,Cu(n);case 9:if(r=e.sent,i=r.replace(/\./g,","),!(o=Sc(Wc,"subscription/"+i+"/customerId"))){e.next=16;break}return e.next=15,wu(o);case 15:t=e.sent;case 16:e.next=19;break;case 18:console.log("User is signed out");case 19:return e.abrupt("return",t);case 22:e.prev=22,e.t0=e.catch(2),console.error("error line 370",e.t0.message);case 25:case"end":return e.stop()}}),e,null,[[2,22]])})))).apply(this,arguments)}function Su(e,t,n,r,i){return xu.apply(this,arguments)}function xu(){return(xu=du(cu().mark((function e(t,n,r,i,o){var a,s,l,c,u,d,h;return cu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Eu();case 3:if(!(o=e.sent)){e.next=41;break}return a=Sc(Wc,"users/"+o+"/data//present"),s=Sc(Wc,"users/"+o+"/data//pastcomp"),l=Sc(Wc,"users/"+o+"/data//pastimp"),c=Sc(Wc,"users/"+o+"/data//future"),u=Sc(Wc,"users/"+o+"/data//subjunctive"),d=Sc(Wc,"users/"+o+"/data//stats"),e.next=13,_u(d);case 13:r=e.sent,e.t0=t.data[0].tense,e.next="present (le prsent de l'indicatif)"===e.t0?17:"past (le pass compos)"===e.t0?21:"imperfect past (l'imparfait)"===e.t0?25:"future (le futur simple)"===e.t0?29:"present subjunctive (le subjonctif prsent)"===e.t0?33:37;break;case 17:return e.next=19,yu(a,n);case 19:return n=e.sent,e.abrupt("break",38);case 21:return e.next=23,yu(s,n);case 23:return n=e.sent,e.abrupt("break",38);case 25:return e.next=27,yu(l,n);case 27:return n=e.sent,e.abrupt("break",38);case 29:return e.next=31,yu(c,n);case 31:return n=e.sent,e.abrupt("break",38);case 33:return e.next=35,yu(u,n);case 35:return n=e.sent,e.abrupt("break",38);case 37:console.log("unkown tense");case 38:if(n.length>0){for(h=0;h<n.length-1;h++)Pu(n[h],i);Nu(n,i)}e.next=42;break;case 41:console.log("User is signed out");case 42:return e.abrupt("return",{userId:o,stats:r});case 45:e.prev=45,e.t1=e.catch(0),console.error(e.t1.message);case 48:case"end":return e.stop()}}),e,null,[[0,45]])})))).apply(this,arguments)}function Pu(e,t){for(var n=new Date,r=0;r<e.length;r++)e[r].repetDate>n.getTime()&&t.push(e[r].id-1)}function Nu(e,t){for(var n=0;n<e[5].length;n++)0!==e[5][n].repetDate&&t.push(e[5][n].id-1)}function Mu(e){var t=document.getElementById("myChart"),n=new Date;n.setHours(0,0,0,0);for(var r=[],i=[],o=function(t){var o=e.find((function(e){var r=e.timestamp,i=new Date(n);i.setDate(n.getDate()-t);var o=new Date(r);return o.getDate()===i.getDate()&&o.getMonth()===i.getMonth()&&o.getFullYear()===i.getFullYear()}));o?(r.push(o.nbOfPhrPractised),i.push(o.nbOfCorrectPhr)):(r.push(0),i.push(0))},a=6;a>=0;a--)o(a);for(var s=[],l=0;l<i.length;l++){var c=i[l]/r[l]*100;s.push(c)}for(var u=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],d=n.getDay(),h=[],p=d+1;p<7;p++)h.push(u[p]);for(var f=0;f<=d;f++)h.push(u[f]);new Chart(t,{type:"bar",data:{labels:h,datasets:[{label:"% of correct answers",data:s,borderWidth:1,barThickness:30,backgroundColor:"#2bc48c"}]},options:{scales:{y:{beginAtZero:!0}}}})}function Ou(){var e=document.querySelectorAll(".learn"),t=document.querySelectorAll(".practice"),n=document.querySelectorAll(".stats"),r=document.querySelectorAll(".bonus");n.forEach((function(e){e.classList.remove("select")})),r.forEach((function(e){e.classList.remove("select")})),e.forEach((function(e){e.classList.remove("select")})),t.forEach((function(e){e.classList.add("select")}))}function Au(e){var t=document.querySelector(".content-area"),n=document.querySelector(".mainSection");n.innerHTML="";var r=document.createElement("div");r.classList.add("tense-display-section"),n.appendChild(r);var i=document.createElement("p");i.innerText="The tense:",r.appendChild(i);var o=document.createElement("div");o.classList.add("tense-display"),r.appendChild(o);var a=document.createElement("p");o.appendChild(a);var s=document.createElement("div");s.classList.add("verb-display-section"),n.appendChild(s);var l=document.createElement("p");l.innerText="The verb to conjugate:",s.appendChild(l);var c=document.createElement("div");c.classList.add("verb-display"),s.appendChild(c);var u=document.createElement("p");c.appendChild(u);var d=document.createElement("div");d.classList.add("phrase-section"),n.appendChild(d);var h=document.createElement("p");d.appendChild(h);var p=document.createElement("div");p.classList.add("letters-section"),n.appendChild(p);var f=document.createElement("p"),m=document.createElement("button");m.innerText="",f.appendChild(m),p.appendChild(f);var v=document.createElement("p"),g=document.createElement("button");g.innerText="",v.appendChild(g),p.appendChild(v);var b=document.createElement("p"),y=document.createElement("button");y.innerText="",b.appendChild(y),p.appendChild(b);var _=document.createElement("p"),w=document.createElement("button");w.innerText="",_.appendChild(w),p.appendChild(_);var E=document.createElement("p"),C=document.createElement("button");C.innerText="",E.appendChild(C),p.appendChild(E);var T=document.createElement("p"),L=document.createElement("button");L.innerText="",T.appendChild(L),p.appendChild(T);var I=document.createElement("p"),k=document.createElement("button");k.innerText="",I.appendChild(k),p.appendChild(I);var S=document.createElement("div");S.classList.add("type-section"),n.appendChild(S);var x=document.createElement("input");x.setAttribute("type","text"),x.setAttribute("placeholder","type the verb form"),S.appendChild(x);var P=document.createElement("div");P.classList.add("msg-section"),n.appendChild(P);var N=document.createElement("div");N.classList.add("learnMore"),n.appendChild(N),N.innerHTML='<i class="fa-solid fa-circle-info"></i> Learn more',N.style.display="none";var M=document.querySelector("main"),O=document.createElement("div");O.classList.add("infoPopupSection"),M.appendChild(O),O.style.display="none";var A=document.createElement("div");A.classList.add("conjugSection"),t.appendChild(A),A.style.display="none";var R=document.createElement("div");R.classList.add("submit-section"),n.appendChild(R);var j=document.createElement("button");j.id="submit-btn",j.innerText="submit",R.appendChild(j);var q=document.createElement("div");q.classList.add("next-section"),n.appendChild(q);var D=document.createElement("button");D.id="next-btn",D.innerText="next",q.appendChild(D);var H=document.createElement("div");H.classList.add("finish-section"),n.appendChild(H),H.style.display="none";var F=document.createElement("button");F.id="finish-btn",F.innerText="finish",H.appendChild(F)}function Ru(){var e=document.querySelector(".type-section input");document.querySelectorAll(".letters-section button").forEach((function(t){t.addEventListener("click",(function(){e.value+=t.innerText}))}))}function ju(e){var t=e.score,n=e.phraseStats,r=e.stats,i=e.userId,o=e.streak,a=document.querySelector("main"),s=document.querySelector(".mainSection");s.innerHTML="";var l=document.querySelector(".content-area"),c=document.querySelector(".infoPopupSection");c&&a.removeChild(c);var u=document.querySelector(".conjugSection");u&&l.removeChild(u);var d=document.querySelector(".sidebarContainer"),h=document.querySelector(".sidebarTabletContainer"),p=document.querySelector("footer"),f=document.querySelector("nav"),m=document.createElement("div");m.classList.add("result"),s.appendChild(m);var v=document.createElement("p");v.innerText="You have finished the exercise!",m.appendChild(v);var g=document.createElement("div");g.classList.add("score-section"),s.appendChild(g);var b=document.createElement("i");b.classList.add("fa-solid"),b.classList.add("fa-trophy"),g.appendChild(b);var y=document.createElement("p");y.innerHTML="Your score: ".concat(t,"/").concat(n.length),g.appendChild(y);var _=document.createElement("div");_.classList.add("streak-section"),s.appendChild(_),_.innerHTML='Your streak: <i class="fa-solid fa-fire"></i> '.concat(o);var w=document.createElement("div");w.classList.add("restart"),s.appendChild(w);var E=document.createElement("button");E.id="restart-btn",E.innerText="restart",w.appendChild(E);var C,T=document.createElement("button");T.id="showSummary-btn",T.innerText="show summary",w.appendChild(T),i&&(function(){var e=document.querySelector(".content-area"),t=document.createElement("div");e.appendChild(t),t.classList.add("chart");var n=document.createElement("h2");t.appendChild(n),n.innerText="Your weekly performance";var r=document.createElement("canvas");t.appendChild(r),r.setAttribute("id","myChart")}(),Mu(r)),f.style.display="flex";var L=document.querySelector(".chart");T.addEventListener("click",(function(){var e=document.querySelector(".blurContainer");0!=n.length&&(Du(n),e&&(e.style.display="block"),T=document.getElementById("showSummary-btn"),w.removeChild(T));var t=document.querySelector(".summaryCloseBtn");t&&t.addEventListener("click",(function(){(C=document.querySelector(".summary"))&&(a.removeChild(C),C=null),e&&(e.style.display="none")})),L&&(l.removeChild(L),L=null)})),E.addEventListener("click",(function(){s.innerHTML="";var e=document.querySelector(".stats-container"),t=document.querySelector(".menu-element.account");t&&(t.style.display="flex"),C&&(a.removeChild(C),C=null),L&&(l.removeChild(L),L=null),d.style.display="flex",h.style.display="flex",p.style.display="block",e.style.display="none",fu(),Ou()}))}function qu(e,t){var n=document.querySelector("main"),r=document.querySelector(".mainSection");r.innerHTML="";var i=document.querySelector(".content-area"),o=document.createElement("div");o.classList.add("noMorePhrDiv"),r.appendChild(o);var a=document.createElement("p");a.innerText="You have no more phrases to practise!",o.appendChild(a);var s=document.createElement("p");s.classList.add("noMorePhrExpl"),s.innerText="Please try another tense, change the level, or come back later. Our smart repetition system shows you phrases at specific intervals, enhancing your ability to memorize them efficiently.",o.appendChild(s);var l=document.createElement("div");l.classList.add("score-section"),r.appendChild(l);var c=document.createElement("i");c.classList.add("fa-solid"),c.classList.add("fa-trophy"),l.appendChild(c);var u=document.createElement("p");0!=t.length&&(u.innerText="Your score is: ".concat(e,"/").concat(t.length),l.appendChild(u));var d=document.querySelector(".sidebarContainer"),h=document.querySelector(".sidebarTabletContainer"),p=document.querySelector("footer"),f=document.querySelector("nav"),m=document.querySelector(".lives"),v=document.createElement("div");v.classList.add("restart"),r.appendChild(v);var g=document.createElement("button");g.id="restart-btn",g.innerText="restart",v.appendChild(g);var b,y=document.createElement("button");y.id="showSummary-btn",y.innerText="show summary",v.appendChild(y);var _=document.querySelector(".chart");y.addEventListener("click",(function(){var e=document.querySelector(".blurContainer");0!=t.length&&(Du(t),e&&(e.style.display="block"),b=document.querySelector(".summary"),y=document.getElementById("showSummary-btn"),v.removeChild(y)),f.style.display="flex",m.style.display="none";var r=document.querySelector(".summaryCloseBtn");r&&r.addEventListener("click",(function(){(b=document.querySelector(".summary"))&&(n.removeChild(b),b=null),e&&(e.style.display="none")})),_&&(i.removeChild(_),_=null)})),g.addEventListener("click",(function(){r.innerHTML="",b&&(n.removeChild(b),b=null),_&&(i.removeChild(_),_=null),d.style.display="flex",h.style.display="flex",p.style.display="block",fu()}))}function Du(e){var t=document.querySelector("main"),n=document.querySelector(".summary");n||((n=document.createElement("div")).classList.add("summary"),t.appendChild(n));var r=document.createElement("i");r.classList.add("fa-solid","fa-xmark","summaryCloseBtn"),n.appendChild(r);var i=document.createElement("h1");n.appendChild(i),i.innerText="Summary";var o=document.createElement("ul");n.appendChild(o);for(var a=0;a<e.length;a++){var s=document.createElement("li");o.appendChild(s),s.innerHTML="Question ".concat(a+1,': <span style="font-weight: bold;">').concat(e[a].phrase,'</span>\n    <p>Your answer: <span style="font-weight: bold;">').concat(e[a].input,'</span> <i class="fa-solid fa-square-check correctCheck"></i></p>\n    <p class="correctAnswer">The correct answer: <span style="font-weight: bold;">').concat(e[a].correctAnswer,"</span></p>");var l=s.querySelector(".correctCheck"),c=s.querySelector(".correctAnswer");e[a].isCorrect?(l.style.display="inline",c.style.display="none"):(c.style.display="inline",l.style.display="none"),e[a].almostCorrectCorrect&&(l.style.display="inline")}}function Hu(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");t.classList.add("successDiv"),e.appendChild(t);var n=document.createElement("h1");n.innerText="An error has occurred",t.appendChild(n);var r=document.createElement("p");r.classList.add("successMsgExpl"),r.innerText="An error has occurred. Please send an email to vladimir@lingway.net.",t.appendChild(r)}function Fu(e){var t=e.data,n=e.indexArray,r=e.k,i=e.score,o=e.phraseStats,a=[];if(function(e,t,n){var r,i=e.data[0].tenseShort;"easy"===t?"present"===i?(r=e.data.filter((function(e){return 1===e.group&&!e.irregular})),n.length=0,r.forEach((function(e){return n.push(e.id-1)}))):"pastcomp"===i?(r=e.data.filter((function(e){return"regular"===e.participle&&!e.aux})),n.length=0,r.forEach((function(e){return n.push(e.id-1)}))):"pastimp"===i||"pastimp"===i?(r=e.data.filter((function(e){return("je"===e.pattern||"tu"===e.pattern||"il"===e.pattern)&&!e.exception})),n.length=0,r.forEach((function(e){return n.push(e.id-1)}))):"future"===i?(r=e.data.filter((function(e){return!e.spelling&&!e.irregular})),n.length=0,r.forEach((function(e){return n.push(e.id-1)}))):"subjunctive"===i&&(r=e.data.filter((function(e){return!e.irregular})),n.length=0,r.forEach((function(e){return n.push(e.id-1)}))):"medium"===t?"present"===i?(r=e.data.filter((function(e){return 1===e.group||2===e.group})),n.length=0,r.forEach((function(e){return n.push(e.id-1)}))):"pastcomp"===i?(r=e.data.filter((function(e){return!e.aux})),n.length=0,r.forEach((function(e){return n.push(e.id-1)}))):"pastimp"===i?(r=e.data.filter((function(e){return("je"===e.pattern||"tu"===e.pattern||"il"===e.pattern)&&!e.exception})),n.length=0,r.forEach((function(e){return n.push(e.id-1)}))):"pastimp"===i?(r=e.data.filter((function(e){return"ils"===!e.pattern&&!e.exception})),n.length=0,r.forEach((function(e){return n.push(e.id-1)}))):"future"===i?(r=e.data.filter((function(e){return!e.irregular})),n.length=0,r.forEach((function(e){return n.push(e.id-1)}))):"subjunctive"===i&&(r=e.data.filter((function(e){return e.irregular||!e.irregular})),n.length=0,r.forEach((function(e){return n.push(e.id-1)}))):"hard"===t&&(n.length=0)}(t,e.phraseType,a),n.length!==t.data.length){var s=0;if(0!==a.length){do{if(r=Math.floor(Math.random()*t.data.length),++s>t.data.length)throw new Error("Exceeded maximum attempts to find a valid index.")}while(n.includes(r)||!a.includes(r))}else do{r=Math.floor(Math.random()*t.data.length)}while(n.includes(r));n.push(r),function(e,t){var n=document.querySelector(".verb-display p");e&&e.data.length>0&&(n.textContent=e.data[t].verb)}(t,r),function(e,t){var n=document.querySelector(".phrase-section p");e&&e.data.length>0&&(n.textContent=e.data[t].phrase)}(t,r)}else console.log("No more phrases to practise!"),qu(i,o);return r}function Uu(e){var t=document.querySelector(".tense-display p");e&&e.data.length>0&&(t.textContent=e.data[0].tense)}function Vu(e){var t=e.data,n=e.indexArray,r=e.k,i=e.score,o=e.phraseStats,a=e.phraseType,s=document.querySelector(".next-section"),l=document.querySelector(".submit-section"),c=document.querySelector(".msg-section"),u=document.querySelector(".type-section input");n&&(u.removeAttribute("disabled"),u.classList.remove("bold"));var d=document.querySelector(".letters-section");d&&(d.style.display="flex"),c.innerHTML="",u.value="";try{r=Fu({data:t,indexArray:n,k:r,score:i,phraseStats:o,phraseType:a})}catch(e){console.error(e.message),qu(i,o)}return s.style.display="none",l.style.display="flex",r}function zu(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");t.classList.add("contentNav"),e.appendChild(t);var n=document.createElement("a");n.textContent="Verb conjugation",n.classList.add("verbConjugationLink");var r=document.createElement("span");r.classList.add("icon");var i=document.createElement("i");i.classList.add("fas","fa-chevron-right"),r.appendChild(i);var o=document.createElement("a");o.textContent="The present tense",o.classList.add("presentTenseLink"),t.appendChild(n),t.appendChild(r),t.appendChild(o);var a=document.createElement("div");a.classList.add("page-content");var s=document.createElement("h1");s.textContent="The present tense (le prsent de l'indicatif)";var l=document.createElement("h2");l.textContent="When Do You Use the Present Tense in French?";var c=document.createElement("div");c.classList.add("definition");var u=document.createElement("p");u.innerHTML='<i class="fa-solid fa-lightbulb"></i> In French, <span class="tense-name">the simple present tense</span> (le prsent de \n      l\'indicatif) is often used to describe an action that is happening now, a habit, a general fact/truth or a future plan.',c.appendChild(u);var d=document.createElement("div");d.classList.add("examples");var h=document.createElement("p");h.textContent="Here are a few examples:";var p=document.createElement("p");p.innerHTML="<i>Je <b>regarde</b> un film.</i> (I'm <b>watching</b> a film.)";var f=document.createElement("p");f.innerHTML="<i>Il <b>travaille</b> tous les jours.</i> (He <b>works</b> every day.)";var m=document.createElement("p");m.innerHTML="<i>Elle <b>parle</b> trois langues.</i> (She <b>speaks</b> three languages.)";var v=document.createElement("p");v.innerHTML="<i>Vous <b>arrivez</b>  16h.</i> (You <b>arrive</b> at 4pm.)",d.appendChild(h),d.appendChild(p),d.appendChild(f),d.appendChild(m),d.appendChild(v),a.appendChild(s),a.appendChild(l),a.appendChild(c),a.appendChild(d),e.appendChild(a),Qu()}function Wu(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");t.classList.add("contentNav"),e.appendChild(t);var n=document.createElement("a");n.textContent="Verb conjugation",n.classList.add("verbConjugationLink");var r=document.createElement("span");r.classList.add("icon");var i=document.createElement("i");i.classList.add("fas","fa-chevron-right"),r.appendChild(i);var o=document.createElement("a");o.textContent="Pass Compos",t.appendChild(n),t.appendChild(r),t.appendChild(o);var a=document.createElement("div");a.classList.add("page-content");var s=document.createElement("h1");s.innerHTML="The past tense <span class='tense-name'>Pass Compos</span>";var l=document.createElement("h2");l.innerHTML="When Do You Use <i>Pass Compos</i> in French?";var c=document.createElement("div");c.classList.add("definition");var u=document.createElement("p");u.innerHTML='In French, <span class="tense-name">Pass compos</span> is used to talk about the past,\n      especially to describe actions that took place and were completed in the past.',c.appendChild(u);var d=document.createElement("p");d.innerHTML="It often corresponds to two different tenses in English: the past simple\n    (<i>I worked</i>, <i>you met</i>, <i>he saw</i>) and the present perfect (<i> have worked</i>,\n    <i>you've met</i>, <i>he has seen</i>).",a.appendChild(s),a.appendChild(l),a.appendChild(c),a.appendChild(d);var h=document.createElement("div");h.classList.add("examples");var p=document.createElement("p");p.textContent="Take a look at these examples:",a.appendChild(h);var f=document.createElement("p");f.innerHTML="<i>Il <b>a achet</b> une maison.</i> (<i>He bought</i> a house. / <i>He has bought</i> a house.)";var m=document.createElement("p");m.innerHTML="<i>Je <b>suis all</b> au cinma.</i> (<i>I went</i> to the cinema.)";var v=document.createElement("p");v.innerHTML="<i>Elle <b>a perdu</b> ses cls.</i> (<i>She lost</i> her keys. / <i>She has lost</i> her keys.)",h.appendChild(p),h.appendChild(f),h.appendChild(m),h.appendChild(v);var g=document.createElement("h3");g.innerHTML="<i class='fa-solid fa-bolt'></i> To form <span class='tense-name'>Pass Compos</span> you'll need 2 parts:";var b=document.createElement("ul");b.classList.add("list-no-bullet"),b.innerHTML='<li><i class="fa-solid fa-arrow-right"></i> the <b>present tense</b>\n  of the verb <b>avoir</b> (meaning to have) or <b>tre</b> (meaning to be),</li>\n<li><i class="fa-solid fa-arrow-right"></i> a part of the main verb\n  called the <b>past participle</b> (<i>achet</i>, <i>all</i>, <i>vu</i>, etc.).',a.appendChild(g),a.appendChild(b),e.appendChild(a),Qu()}function Bu(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");t.classList.add("contentNav"),e.appendChild(t);var n=document.createElement("a");n.textContent="Verb conjugation",n.classList.add("verbConjugationLink");var r=document.createElement("span");r.classList.add("icon");var i=document.createElement("i");i.classList.add("fas","fa-chevron-right"),r.appendChild(i);var o=document.createElement("a");o.textContent="The simple future tense",t.appendChild(n),t.appendChild(r),t.appendChild(o);var a=document.createElement("div");a.classList.add("page-content");var s=document.createElement("h1");s.textContent="The simple future tense (le futur simple)";var l=document.createElement("h2");l.textContent="When Do You Use the Present Tense in French?";var c=document.createElement("div");c.classList.add("definition");var u=document.createElement("p");u.innerHTML="<i class=\"fa-solid fa-lightbulb\"></i> In French, <span class=\"tense-name\">the simple future tense</span> (le futur simple) is used to describe future actions. \n      It is often translated into English using 'will' (or its contracted form <i>'ll</i>) and sometimes other structures used to talk about \n      the future, like 'to be going to' or the present tense.",c.appendChild(u);var d=document.createElement("div");d.classList.add("examples");var h=document.createElement("p");h.textContent="Here are a few examples:";var p=document.createElement("p");p.innerHTML="<i>Il <b>fera</b> chaud demain.</i> (The weather <b>will be</b> warm tomorrow.)";var f=document.createElement("p");f.innerHTML="<i>Je te <b>rappellerai</b> plus tard.</i> (I'<b>ll call</b> you <b>back</b> later.)";var m=document.createElement("p");m.innerHTML="<i>Il <b>sera</b> bientt l.</i> (He<b>'ll be</b> here soon.)";var v=document.createElement("p");v.innerHTML="<i>Vous <b>arrivez</b>  16h.</i> (You <b>arrive</b> at 4pm.)",d.appendChild(h),d.appendChild(p),d.appendChild(f),d.appendChild(m),d.appendChild(v),a.appendChild(s),a.appendChild(l),a.appendChild(c),a.appendChild(d);var g=document.createElement("div");g.innerHTML='<p class="tip"><i class="fa-solid fa-bolt"></i> To form the simple future tense in French, you generally use \n    the infinitive form of the verb and add specific endings. For <b>-re</b> verbs, you drop the final <b>-e</b> before adding the endings.</p>',a.appendChild(g);var b=document.createElement("p");b.innerHTML="You'll find the endings and examples in the table below.",a.appendChild(b);var y=document.createElement("table"),_=document.createElement("thead"),w=document.createElement("tr");["SUBJECT","ENDING","EXAMPLES"].forEach((function(e){var t=document.createElement("th");t.textContent=e,w.appendChild(t)})),_.appendChild(w);var E=document.createElement("tbody");[["Je (j')","-ai","je donnerai, je finirai, j'attendrai"],["Tu","-as","tu donneras, tu finiras, tu attendras"],["Il/elle/on","-a","il/elle/on donnera, il/elle/on finira, il/elle/on attendra"],["Nous","-ons","nous donnerons, nous finirons, nous attendrons"],["Vous","-ez","vous donnerez, vous finirez, vous attendrez"],["Ils/elles","-ont","ils/elles donneront, ils/elles finiront, ils/elles attendront"]].forEach((function(e){var t=document.createElement("tr");e.forEach((function(e){var n=document.createElement("td");n.textContent=e,t.appendChild(n)})),E.appendChild(t)})),y.appendChild(_),y.appendChild(E),a.appendChild(y);var C=document.createElement("div");C.classList.add("examples");var T=document.createElement("p");T.textContent="Here are some more examples:";var L=document.createElement("p");L.innerHTML="<i>S'il ne pleut pas, nous <b>irons</b> dehors.</i> (If it doesn't rain, we'<b>ll go</b> outside.)";var I=document.createElement("p");I.innerHTML="<i>Le cours <b>finira</b>  onze heures.</i> (The lesson <b>will finish</b> at eleven o'clock.)",a.appendChild(C),C.appendChild(T),C.appendChild(L),C.appendChild(I),e.appendChild(a),Qu()}function Yu(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");t.classList.add("contentNav"),e.appendChild(t);var n=document.createElement("a");n.textContent="Verb conjugation",n.classList.add("verbConjugationLink");var r=document.createElement("span");r.classList.add("icon");var i=document.createElement("i");i.classList.add("fas","fa-chevron-right"),r.appendChild(i);var o=document.createElement("a");o.textContent="The French subjunctive",o.classList.add("subjunctiveLink"),t.appendChild(n),t.appendChild(r),t.appendChild(o);var a=document.createElement("div");a.classList.add("page-content");var s=document.createElement("h1");s.textContent="The French subjunctive (Le subjonctif)",a.appendChild(s);var l=document.createElement("div");l.classList.add("definition");var c=document.createElement("p");c.innerHTML='<i class="fa-solid fa-book-open"></i> <b>The French subjunctive (le subjonctif)</b> \n    is a grammatical mood (a verb form or a category such as "imperative" or "conditional") \n    used after certain verbs and phrases expressing emotions, desires, doubts, necessity, etc.',l.appendChild(c),a.appendChild(l);var u=document.createElement("div");u.classList.add("explanation"),a.appendChild(u);var d=document.createElement("p");d.innerHTML="It may seem complicated, but it comes down to knowing whether a verb or expression \n      takes the subjunctive mood (or, in contrast, the indicative mood). Look at this example:";var h=document.createElement("p");h.innerHTML='<i><b>Il faut que tu sois l  18h.</b> ("You need to be here at 6pm." / \n      "You must be here at 6pm." or more literally "It is necessary that you be here")</i>';var p=document.createElement("p");p.innerHTML="In this case, it's not correct to say \"<i>Il faut que tu <span class=\"wrong\">es</span> l</i>\", \n      because \"<b>il faut que</b>\" (it's necessary that) is always used with a subjunctive, \n      and the present subjunctive form of 'tre' for 'tu' is '<b>tu sois</b>'.";var f=document.createElement("p");f.innerHTML='In contrast, "<i>esprer que</i>" does not use the subjunctive, so you should say \n      "<i>J\'espre que tu <b>pourras</b> m\'aider.</i>" and not "<i>J\'espre que tu \n      <span class="wrong">puisses</span> m\'aider.</i>"',u.append(d,h,p,f);var m=document.createElement("h3");m.textContent="Here are some common verbs and expressions after which the subjunctive is used:",a.appendChild(m);var v=document.createElement("ul");v.classList.add("list-no-bullet");var g=document.createElement("li");g.classList.add("list-paragraph"),g.innerHTML="<i class=\"fa-solid fa-arrow-right\"></i> <b>Vouloir, souhaiter, aimer, demander</b> (que)</b><ul>\n    <li>- <i><u>Je souhaite que</u> tu <b>viennes</b> me voir.</i> (I'd like you to come and see me.)</li>\n    <li>- <i><u>Il voudrait que</u> vous <b>finissiez</b> le rapport avant samedi.</i> (He'd like you to finish the report by Saturday.)</li>\n  </ul>";var b=document.createElement("li");b.classList.add("list-paragraph"),b.innerHTML="<i class=\"fa-solid fa-arrow-right\"></i> Je suis, tu es... + <b>content, ravi, furieux, du, triste, dsol</b> ... (que)<ul>\n    <li>- <i><u>Ils sont contents que</u> nous <b>partions</b> avec eux.</i> (They're happy we're going with them.)</li>\n    <li>- <i><u>Je suis dsol que</u> vous ne <b>puissiez</b> pas venir.</i> (I'm sorry you can't come.)</li>\n  </ul>";var y=document.createElement("li");y.classList.add("list-paragraph"),y.innerHTML="<i class=\"fa-solid fa-arrow-right\"></i> C'est/Il est + <b>bien, important, intressant, bizarre, tonnant</b>... (que)<ul>\n    <li>- <i><u>C'est bien que</u> les habitants <b>prennent</b> soin de leur ville.</i> (It's good that residents are taking care of their town.)</li>\n    <li>- <i><u>Il est important que</u> tu <b>sois</b> l.</i> (It's important that you're here.)</li>\n  </ul>";var _=document.createElement("li");_.classList.add("list-paragraph"),_.innerHTML="<i class=\"fa-solid fa-arrow-right\"></i> <b>Je ne pense pas</b> (que), <b>je ne crois pas</b> (que), <b>je ne suis pas sr</b> (que), <b>je doute</b> (que)* (phrases expressing doubt or uncertainty)<ul>\n    <li>- <i><u>Je ne suis pas sr qu</u>'il <b>fasse</b> beau demain.</i> (I'm not sure if the weather will be good tomorrow.)</li>\n    <li>- <i>Il <u>doute que</u> Jade <b>vienne</b> voir le match.</i> (He doubts that Jade will come to watch the match.)</li>\n  </ul>";var w=document.createElement("li");w.classList.add("list-paragraph"),w.innerHTML='<i class="fa-solid fa-arrow-right"></i> <b>Il faut</b> (que), <b>il est ncessaire</b> (que)<ul>\n    <li>- <i><u>Il faut que</u> j\'<b>aille</b>  la poste.</i> (I need to go to the post office.)</li>\n  </ul>';var E=document.createElement("li");E.classList.add("list-paragraph"),E.innerHTML='<i class="fa-solid fa-arrow-right"></i> Various connectors like "<b>pour que</b>" (so that), \n"<b>avant que</b>" (before), "<b>bien que</b>" (although), "<b>en attendant que</b>" (until), etc.<ul>\n    <li>- <i>Je vais regarder ma srie <u>en attendant que</u> tu <b>finisses</b> ton travail.</i> (I\'m going to watch my series until you finish your work.)</li>\n  </ul>',v.append(g,b,y,_,w,E),a.appendChild(v);var C=document.createElement("div");C.classList.add("explanation");var T=document.createElement("p");C.appendChild(T),T.innerHTML='* In affirmative sentences such as <i>"Je suis sr que"</i>, <i>"je pense que"</i>, we <u>do not</u> use the subjunctive: \n<i>"Je suis sr qu\'il <u>fera</u> beau demain"</i> (I\'m sure the weather will be good tomorrow).',a.appendChild(C);var L=document.createElement("div");L.classList.add("explanation");var I=document.createElement("p");I.innerHTML='<i class="fa-regular fa-lightbulb"></i> As you can see, the subjunctive always follows "<b>que</b>" (or sometimes "<b>qui</b>"), \n      but the presence of "<b>que</b>" or "<b>qui</b>" does not mean that you should use the subjunctive. \n      We recommend that you learn the expressions that require the subjunctive and you can do this by \n      practising the sentences using this app in the "practice mode" (just click the "practice" button and select the subjunctive).',L.appendChild(I);var k=document.createElement("div");k.classList.add("explanation");var S=document.createElement("p");S.innerHTML='<i class="fa-solid fa-triangle-exclamation"></i> Note that the subjunctive is usually used when there are <u>2 different subjects</u> in the sentence. \n      In other words, you can\'t have the same subject twice when using the subjunctive. \n      To avoid repeating the subject, we use the infinitive:';var x=document.createElement("p");x.innerHTML='We don\'t say "<u>Je</u> veux que <u>je</u> <span class="wrong">vienne</span>.", we say "Je veux <b>venir</b>."',k.appendChild(S),k.appendChild(x),a.appendChild(L),a.appendChild(k),e.appendChild(a),Qu()}function Gu(e){return Gu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gu(e)}function Ju(){Ju=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:I(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",v={};function g(){}function b(){}function y(){}var _={};c(_,a,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(N([])));E&&E!==n&&r.call(E,a)&&(_=E);var C=y.prototype=g.prototype=Object.create(_);function T(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(i,o,a,s){var l=d(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==Gu(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function I(t,n,r){var i=h;return function(o,a){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=k(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var c=d(t,n,r);if("normal"===c.type){if(i=r.done?m:p,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function k(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Gu(t)+" is not iterable")}return b.prototype=y,i(C,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:b,configurable:!0}),b.displayName=c(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,l,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},T(L.prototype),c(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new L(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(C),c(C,l,"Generator"),c(C,a,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function $u(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function Ku(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){$u(o,r,i,a,s,"next",e)}function s(e){$u(o,r,i,a,s,"throw",e)}a(void 0)}))}}function Qu(){var e=document.querySelector(".verbConjugationLink"),t=document.querySelector(".presentTenseLink"),n=document.querySelector(".pastTenseLink"),r=document.querySelector(".futureTenseLink"),i=document.querySelector(".subjunctiveLink");e&&e.addEventListener("click",Ku(Ju().mark((function e(){var t,n;return Ju().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tu();case 2:t=e.sent,n=t.subStatus,ud(t.userId,n);case 6:case"end":return e.stop()}}),e)})))),t&&t.addEventListener("click",zu),n&&n.addEventListener("click",Wu),r&&r.addEventListener("click",Bu),i&&i.addEventListener("click",Yu)}function Xu(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");t.classList.add("contentNav"),e.appendChild(t);var n=document.createElement("a");n.textContent="Verb conjugation",n.classList.add("verbConjugationLink");var r=document.createElement("span");r.classList.add("icon");var i=document.createElement("i");i.classList.add("fas","fa-chevron-right"),r.appendChild(i);var o=document.createElement("a");o.textContent="Intro",o.classList.add("introLink"),t.appendChild(n),t.appendChild(r),t.appendChild(o);var a=document.createElement("div");a.classList.add("page-content");var s=document.createElement("h1");s.textContent="Introduction to French conjugation and tenses";var l=document.createElement("h2");l.textContent="What is verb conjugation?";var c=document.createElement("div");c.classList.add("definition");var u=document.createElement("p");u.innerHTML='<i class="fa-solid fa-book-open"></i> <b>Verb conjugation</b> refers to changing a\n      verb to express different aspects, such as when the action happens, who is\n      performing the action, whether the action is completed or ongoing.',c.appendChild(u),a.appendChild(s),a.appendChild(l),a.appendChild(c),document.createElement("p").innerHTML='For example, if you want to express <i>"I work"</i> or <i>"I\'m working"</i>, you\'ll use: <b>je\n    travaille</b>.\nFor <i>"you work"</i> / <i>"you\'re working"</i> (singular, informal), you\'d use: <b>tu\n    travailles</b>.\nAnd for <i>"he works"</i> / <i>"he\'s working"</i>, the correct phrase is: <b>il travaille.</b></p>\n<p>So you can\'t just say "je travaill<span class="red">er</span>", "tu travaill<span\n    class="red">er</span>", etc. You have to\nconjugate the verb,\nso in this case you have to change the ending according to the subject (the person).';var d=document.createElement("h2");d.textContent="What is an infinitive?",a.appendChild(d);var h=document.createElement("p");h.innerHTML='Each verb has an <b>infinitive</b> form, which typically have one of these endings:\n<i>"-er"</i>,\n<i>"-ir"</i>, or\n<i>"-re"</i>.\nIt\'s the form of a verb that has not been conjugated and that you can find in a dictionary.';var p=document.createElement("p");p.innerHTML="For example, <b>parler</b> (to speak), <b>finir</b> (to finish), <b>attendre</b> (to wait).",a.appendChild(h),a.appendChild(p),e.appendChild(a),Qu()}function Zu(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");t.classList.add("contentNav"),e.appendChild(t);var n=document.createElement("a");n.textContent="Verb conjugation",n.classList.add("verbConjugationLink");var r=document.createElement("span");r.classList.add("icon");var i=document.createElement("i");i.classList.add("fas","fa-chevron-right"),r.appendChild(i);var o=document.createElement("a");o.textContent="The present tense",o.classList.add("presentTenseLink"),t.appendChild(n),t.appendChild(r),t.appendChild(o);var a=document.createElement("span");r.classList.add("icon");var s=document.createElement("i");s.classList.add("fas","fa-chevron-right"),a.appendChild(s);var l=document.createElement("a");l.textContent="Group 1",t.appendChild(a),t.appendChild(l);var c=document.createElement("div");c.classList.add("page-content");var u=document.createElement("h1");u.textContent="Examples of Verbs Conjugated in the Present Tense (group 1)";var d=document.createElement("p");d.innerHTML='<i class="fa-solid fa-bolt"></i> Let\'s look at a few examples of verbs conjugated in the present\n    tense in French:';var h=document.createElement("div");h.classList.add("examples-list"),c.appendChild(u),c.appendChild(d),c.appendChild(h);for(var p=[["<i>J'<b>aime</b> la musique.</i> (I like music.)","<i>Je <b>cherche</b> du travail.</i> (I'm looking for a job.)","<i>Je <b>parle</b> anglais.</i> (I speak English.)"],["<i>Tu <b>aimes</b> la musique.</i> (You like music.)","<i>Tu <b>cherches</b> du travail.</i> (You're looking for a job.)","<i>Tu <b>parles</b> anglais.</i> (You speak English.)"],["<i>Il / elle / on <b>aime</b> la musique.</i> (He / she / one likes music.)","<i>Il / elle / on <b>cherche</b> du travail.</i> (He / she / one is looking for a job.)","<i>Il / elle / on <b>parle</b> anglais.</i> (He / she / one speaks English.)"],["<i>Nous <b>aimons</b> la musique.</i> (We like music.)","<i>Nous <b>cherchons</b> du travail.</i> (We're looking for a job.)","<i>Nous <b>parlons</b> anglais.</i> (We speak English.)"],["<i>Vous <b>aimez</b> la musique.</i> (You like music.)","<i>Vous <b>cherchez</b> du travail.</i> (You're looking for a job.)","<i>Vous <b>parlez</b> anglais.</i> (You speak English.)"],["<i>Ils/elles <b>aiment</b> la musique.</i> (They like music.)","<i>Ils/elles <b>cherchent</b> du travail.</i> (They're looking for a job.)","<i>Ils/elles <b>parlent</b> anglais.</i> (They speak English.)"]],f=0;f<p.length;f++){for(var m=document.createElement("ul"),v=0;v<p[f].length;v++){var g=document.createElement("li");g.innerHTML=p[f][v],m.appendChild(g)}h.appendChild(m)}var b=document.createElement("p");b.innerHTML='<i class="fa-solid fa-bolt"></i> More verbs that follow the same pattern:';var y=document.createElement("p");y.innerHTML="<i><b>chanter</b></i> (to sing), <i><b>marcher</b></i> (to walk), <i><b>regarder</b></i> (to\n        watch), <i><b>demander</b></i> (to ask),\n        <i><b>commencer</b></i> (to start), <i><b>manger</b></i> (to eat),\n        <i><b>travailler</b></i> (to work), <i><b>habiter</b></i> (to live), <i><b>couter</b></i> (to\n        listen).";var _=document.createElement("p");_.innerHTML="Most verbs with an infinitive ending in '-er' are commonly known as first-group verbs.";var w=document.createElement("h2");w.innerHTML="To conjugate a first-group verb in the present tense, follow these steps:";var E=document.createElement("p");E.innerHTML='Remove the infinitive ending (-er) to get the stem.\n    Example: "parler" becomes "parl-". Add the appropriate ending to the stem. You\'ll find the\n    endings in the table below.',c.appendChild(b),c.appendChild(y),c.appendChild(_),c.appendChild(w),c.appendChild(E);var C=document.createElement("table"),T=document.createElement("thead"),L=document.createElement("tr");["SUBJECT","ENDING","EXAMPLE"].forEach((function(e){var t=document.createElement("th");t.textContent=e,L.appendChild(t)})),T.appendChild(L);var I=document.createElement("tbody");[["je","-e","parle"],["tu","-es","parles"],["il/elle/on","-e","parle"],["nous","-ons","parlons"],["vous","-ez","parlez"],["ils/elles","-ent","parlent"]].forEach((function(e){var t=document.createElement("tr");e.forEach((function(e){var n=document.createElement("td");n.textContent=e,t.appendChild(n)})),I.appendChild(t)})),C.appendChild(T),C.appendChild(I),c.appendChild(C);var k=document.createElement("div");k.classList.add("definition"),c.appendChild(k);var S=document.createElement("p");S.innerHTML='<i class="fa-solid fa-comment"></i> <b>Pronunciation tip</b>';var x=document.createElement("p");x.classList.add("tip"),x.innerHTML="For verbs that follow the pattern above, the present tense endings <i>'-e'</i>, <i>'-es'</i> and <i>'-ent'</i> are not pronounced,\n    so 'parle', 'parles', and 'parlent' have the same pronunciation.",k.appendChild(S),k.appendChild(x);var P=document.createElement("p");P.innerHTML='Note that when a verb starts with a vowel and is conjugated with "je" in the present tense, the "e" from "je" is removed:',c.appendChild(P);var N=document.createElement("ul");N.classList.add("list-no-bullet"),c.appendChild(N),N.innerHTML='<li>- instead of "je aime", you say "j\'aime",</li>\n    <li>- instead of "je coute", you say "j\'coute".</li>';var M=document.createElement("h2");M.textContent="Verbs with Spelling Changes";var O=document.createElement("p");O.innerText="Let's look at some '-er' verbs that follow a similar pattern as the verbs above, but undergo some spelling changes often related to pronunciation and spelling rules.";var A=document.createElement("h3");A.textContent="Common patterns and examples of verbs that follow these patterns";var R=document.createElement("h4");R.textContent="Pattern 1: acheter, (se) lever, amener, emmener...",c.appendChild(M),c.appendChild(O),c.appendChild(A),c.appendChild(R);var j=document.createElement("div");j.classList.add("examples-list"),c.appendChild(j);for(var q=[["<i>J'<b>ach<u></u>te</b> des vtements.</i> (I buy clothes.)","<i>Je <b>me l<u></u>ve</b>  8 heures.</i> (I wake up at 8 o'clock.)"],["<i>Tu <b>ach<u></u>tes</b> des vtements.</i> (You buy clothes.)","<i>Tu <b>te l<u></u>ves</b>  8 heures.</i> (You wake up at 8 o'clock.)"],["<i>Il / elle / on <b>ach<u></u>te</b> des vtements.</i> (He / she / one buys clothes.)","<i>Il / elle / on <b>se l<u></u>ve</b>  8 heures.</i> (He / she / one wakes up at 8 o'clock.)"],["<i>Nous <b>achetons</b> des vtements.</i> (We buy clothes.)","<i><i>Nous <b>nous levons</b>  8 heures.</i> (We wake up at 8 o'clock.)"],["<i>Vous <b>achetez</b> des vtements.</i> (You buy clothes.)","<i>Vous <b>vous levez</b>  8 heures.</i> (You wake up at 8 o'clock.)"],["<i>Ils/elles <b>ach<u></u>tent</b> des vtements.</i> (They buy clothes.)","<i>Ils/elles <b>se l<u></u>vent</b>  8 heures.</i> (They wake up at 8 o'clock.)"]],D=0;D<q.length;D++){for(var H=document.createElement("ul"),F=0;F<q[D].length;F++){var U=document.createElement("li");U.innerHTML=q[D][F],H.appendChild(U)}j.appendChild(H)}var V=document.createElement("h4");V.textContent="Pattern 2: esprer, rpter, accder, complter...",c.appendChild(V);var z=document.createElement("div");z.classList.add("examples-list"),c.appendChild(z);for(var W=[["<i>J'<b>esp<u></u>re</b> arriver  l'heure.</i> (I hope to arrive on time.)","<i>Je <b>prf<u></u>re</b> la pizza.</i> (I prefer pizza.)"],["<i>Tu <b>esp<u></u>res</b> arriver  l'heure.</i> (You hope to arrive on time.)","<i>Tu <b>prf<u></u>res</b> la pizza.</i> (You prefer pizza.)"],["<i>Il / elle / on <b>esp<u></u>re</b> arriver  l'heure.</i> (He / She / One hopes to arrive on time.)","<i>Il / elle / on <b>prf<u></u>re</b> la pizza.</i> (He / She / One prefers pizza.)"],["<i>Nous <b>esprons</b> arriver  l'heure.</i> (We hope to arrive on time.)","<i>Nous <b>prfrons</b> la pizza.</i> (We prefer pizza.)</li>"],["<i>Vous <b>esprez</b> arriver  l'heure.</i> (You hope to arrive on time.)","<i><i>Vous <b>prfrez</b> la pizza.</i> (You prefer pizza.)"],["<i>Ils/elles <b>esp<u></u>rent</b> arriver  l'heure.</i> (They hope to arrive on time.)","<i>Ils/elles <b>prf<u></u>rent</b> la pizza.</i> (They prefer pizza.)"]],B=0;B<W.length;B++){for(var Y=document.createElement("ul"),G=0;G<W[B].length;G++){var J=document.createElement("li");J.innerHTML=W[B][G],Y.appendChild(J)}z.appendChild(Y)}var $=document.createElement("h4");$.textContent="Pattern 3: appeler, s'appeler, jeter...",c.appendChild($);var K=document.createElement("div");K.classList.add("list-no-bullet"),c.appendChild(K);for(var Q=["<i>J'<b>appe<u>ll</u>e</b> son frre.</i> (I call his brother.)","<i>Tu <b>appe<u>ll</u>es</b> son frre.</i> (You call his brother.)","<i>Il/ elle/ on <b>appe<u>ll</u>e</b> son frre.</i> (He / She / One calls his brother.)","<i>Nous <b>appelons</b> son frre.</i> (We call his brother.)","<i>Vous <b>appelez</b> son frre.</i> (You call his brother.)","<i>Ils/elles <b>appe<u>ll</u>ent</b> son frre.</i> (They call his brother.)"],X=document.createElement("ul"),Z=0;Z<Q.length;Z++){var ee=document.createElement("li");ee.innerHTML=Q[Z],X.appendChild(ee)}K.appendChild(X),e.appendChild(c),Qu()}function ed(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");t.classList.add("contentNav"),e.appendChild(t);var n=document.createElement("a");n.textContent="Verb conjugation",n.classList.add("verbConjugationLink");var r=document.createElement("span");r.classList.add("icon");var i=document.createElement("i");i.classList.add("fas","fa-chevron-right"),r.appendChild(i);var o=document.createElement("a");o.textContent="The present tense",o.classList.add("presentTenseLink"),t.appendChild(n),t.appendChild(r),t.appendChild(o);var a=document.createElement("span");r.classList.add("icon");var s=document.createElement("i");s.classList.add("fas","fa-chevron-right"),a.appendChild(s);var l=document.createElement("a");l.textContent="Group 2",t.appendChild(a),t.appendChild(l);var c=document.createElement("div");c.classList.add("page-content");var u=document.createElement("h1");u.textContent="Examples of Verbs Conjugated in the Present Tense (group 2)";var d=document.createElement("p");d.innerHTML='<i class="fa-solid fa-bolt"></i> Let\'s look at another pattern commonly referred to as 2nd group verbs.';var h=document.createElement("div");h.classList.add("examples-list"),c.appendChild(u),c.appendChild(d),c.appendChild(h);for(var p=[["<i>Je <b>chois<span class='red'>is</span></b> un film.</i> (I choose a movie.)","<i>Je <b>fin<span class='red'>is</span></b> mes tudes.</i> (I finish my studies.)"],["<i>Tu <b>chois<span class='red'>is</span></b> un film.</i> (You choose a movie.)","<i>Tu <b>fin<span class='red'>is</span></b> tes tudes.</i> (You finish your studies.)"],["<i>Il / elle <b>chois<span class='red'>it</span></b> un film.</i> (He / She chooses a\n            movie.)","<i>Il / elle <b>fin<span class='red'>it</span></b> ses tudes.</i> (He / She finishes his /\n            her studies.)"],["<i>Nous <b>chois<span class='red'>issons</span></b> un film.</i> (We choose a movie.)","<i>Nous <b>fin<span class='red'>issons</span></b> nos tudes.</i> (We finish our studies.)"],["<i>Vous <b>chois<span class='red'>issez</span></b> un film.</i> (You choose a movie.)","<i>Vous <b>fin<span class='red'>issez</span></b> vos tudes.</i> (You finish your studies.)"],["<i>Ils/elles <b>chois<span class='red'>issent</span></b> un film.</i> (They choose a movie.)","<i>Ils/elles <b>fin<span class='red'>issent</span></b> leurs tudes.</i> (They finish their studies.)"]],f=0;f<p.length;f++){for(var m=document.createElement("ul"),v=0;v<p[f].length;v++){var g=document.createElement("li");g.innerHTML=p[f][v],m.appendChild(g)}h.appendChild(m)}var b=document.createElement("p");b.innerHTML='<i class="fa-solid fa-bolt"></i> Some common verbs that follow this pattern:';var y=document.createElement("p");y.innerHTML="<i><b>finir</b></i> (to\n        finish), <i><b>choisir</b></i>\n        (to choose),\n        <i><b>rflchir</b></i> (to think), <i><b>grandir</b></i> (to grow),\n        <i><b>russir</b></i> (to succeed), <i><b>grossir</b></i> (to gain weight), <i><b>investir</b></i>\n        (to invest),\n        <i><b>remplir</b></i> (to fill (in)), <i><b>atterrir</b></i> (to land).";var _=document.createElement("h2");_.innerHTML="More examples";var w=document.createElement("div");w.classList.add("list-no-bullet"),c.appendChild(b),c.appendChild(y),c.appendChild(_),c.appendChild(w),document.createElement("li");var E=document.createElement("li");E.innerHTML="<i>Tu finis  quelle heure ?</i> (What time do you finish?)";var C=document.createElement("li");C.innerHTML="<i>Je finis tard.</i> (I finish late. / I'm finishing late.)";var T=document.createElement("li");T.innerHTML="<i>Il russit toujours.</i> (He always succeeds.)",w.appendChild(E),w.appendChild(C),w.appendChild(T);var L=document.createElement("h3");L.innerHTML="Here is a table explaining how to conjugate a 2nd group verb",c.appendChild(L);var I=document.createElement("table"),k=document.createElement("thead"),S=document.createElement("tr");["SUBJECT","ENDING","EXAMPLE"].forEach((function(e){var t=document.createElement("th");t.textContent=e,S.appendChild(t)})),k.appendChild(S);var x=document.createElement("tbody");[["je","-is","choisis"],["tu","-is","choisis"],["il/elle/on","-it","choisit"],["nous","-issons","choisissons"],["vous","-issez","choisissez"],["ils/elles","-issent","choisissent"]].forEach((function(e){var t=document.createElement("tr");e.forEach((function(e){var n=document.createElement("td");n.textContent=e,t.appendChild(n)})),x.appendChild(t)})),I.appendChild(k),I.appendChild(x),c.appendChild(I);var P=document.createElement("p");P.innerHTML='<i class="fa-solid fa-exclamation-triangle"></i> Note that not all verbs that end in "-ir" are\n    conjugated like this. You\'ll see examples in the next chapter.',c.appendChild(P),e.appendChild(c),Qu()}function td(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");t.classList.add("contentNav"),e.appendChild(t);var n=document.createElement("a");n.textContent="Verb conjugation",n.classList.add("verbConjugationLink");var r=document.createElement("span");r.classList.add("icon");var i=document.createElement("i");i.classList.add("fas","fa-chevron-right"),r.appendChild(i);var o=document.createElement("a");o.textContent="The present tense",o.classList.add("presentTenseLink"),t.appendChild(n),t.appendChild(r),t.appendChild(o);var a=document.createElement("span");r.classList.add("icon");var s=document.createElement("i");s.classList.add("fas","fa-chevron-right"),a.appendChild(s);var l=document.createElement("a");l.textContent="Group 3",t.appendChild(a),t.appendChild(l);var c=document.createElement("div");c.classList.add("page-content");var u=document.createElement("h1");u.textContent="3rd Group Verbs in the Present Tense";var d=document.createElement("p");d.innerHTML='<i class="fa-solid fa-lightbulb red"></i> The 3rd group is the most irregular in French. It includes verbs with endings like -ir, -ire, -tre,\n    -dre, -oir, -ondre, -endre.';var h=document.createElement("h2");h.textContent="Common patterns and examples of verbs that follow these patterns";var p=document.createElement("h3");p.classList.add("color3"),p.innerHTML='<i class="fa-solid fa-bolt"></i> Verbs ending in -IR';var f=document.createElement("h4");f.textContent="Pattern 1: partir, sortir, servir, (se) sentir, dormir, mentir...",c.appendChild(u),c.appendChild(d),c.appendChild(h),c.appendChild(p),c.appendChild(f);var m=document.createElement("div");m.classList.add("examples-list"),c.appendChild(m);for(var v=[["<i>Je <b>pars</b> demain.</i> (I'm leaving tomorrow.)","<i>Je <b>sors</b> ce soir.</i> (I'm going out tonight.)"],["<i>Tu <b>pars</b> demain.</i> (You're leaving tomorrow.)","<i>Tu <b>sors</b> ce soir.</i> (You're going out tonight.)"],["<i>Il / elle / on <b>part</b> demain.</i> (He / She / One is leaving tomorrow.)","<i>Il / elle / on <b>sort</b> ce soir.</i> (He / She / One is going out tonight.)"],["<i>Nous <b>partons</b> demain.</i> (We're leaving tomorrow.)","<i>Nous <b>sortons</b> ce soir.</i> (We're going out tonight.)"],["<i>Vous <b>partez</b> demain.</i> (You're leaving tomorrow.)","<i>Vous <b>sortez</b> ce soir.</i> (You're going out tonight.)"],["<i>Ils/elles <b>partent</b> demain.</i> (They're leaving tomorrow.)","<i>Ils/elles <b>sortent</b> ce soir.</i> (They're going out tonight.)"]],g=0;g<v.length;g++){for(var b=document.createElement("ul"),y=0;y<v[g].length;y++){var _=document.createElement("li");_.innerHTML=v[g][y],b.appendChild(_)}m.appendChild(b)}var w=document.createElement("h5");w.innerHTML='<i class="fa-solid fa-bolt"></i> More examples:';var E=document.createElement("div");E.classList.add("list-no-bullet");var C=document.createElement("ul");C.innerHTML="<li><i>Je me sens bien. </i> (I feel good.)</li>\n    <li><i>Les enfants ne dor<b>ment</b> pas trs bien.</i> (The children don't sleep very well.)\n    </li>",E.appendChild(C),c.appendChild(w),c.appendChild(E);var T=document.createElement("h4");T.textContent="Pattern 2: offrir, ouvrir, souffrir, couvrir, dcouvrir...",c.appendChild(T);var L=document.createElement("div");L.classList.add("examples-list"),c.appendChild(L);for(var I=[["<i>J'<b>offre</b> un cadeau.</i> (I offer a gift.)","<i>J'<b>ouvre</b> la porte.</i> (I open the door.)"],["<i>Tu <b>offres</b> un cadeau.</i> (You offer a gift.)","<i>Tu <b>ouvres</b> la porte.</i> (You open the door.)"],["<i>Il / elle / on <b>offre</b> un cadeau.</i> (He / She / One offers a gift.)","<i>Il / elle / on <b>ouvre</b> la porte.</i> (He / She / One opens the door.)"],["<i>Nous <b>offrons</b> un cadeau.</i> (We offer a gift.)","<i>Nous <b>ouvrons</b> la porte.</i> (We open the door.)"],["<i>Vous <b>offrez</b> un cadeau.</i> (You offer a gift.)","<i>Vous <b>ouvrez</b> la porte.</i> (You open the door.)"],["<i>Ils/elles <b>offrent</b> un cadeau.</i> (They offer a gift.)","<i>Ils/elles <b>ouvrent</b> la porte.</i> (They open the door.)"]],k=0;k<I.length;k++){for(var S=document.createElement("ul"),x=0;x<I[k].length;x++){var P=document.createElement("li");P.innerHTML=I[k][x],S.appendChild(P)}L.appendChild(S)}var N=document.createElement("h4");N.textContent="Pattern 3: venir, revenir, devenir, tenir, maintenir...",c.appendChild(N);var M=document.createElement("div");M.classList.add("examples-list"),c.appendChild(M);for(var O=[["<i>Je <b>viens</b> d'Italie.</i> (I come from Italy.)","<i>Je le <b>soutiens</b>.</i> (I support him.)"],["<i>Tu <b>viens</b> d'Italie.</i> (You come from Italy.)","<i>Tu le <b>soutiens</b>.</i> (You support him.)"],["<i>Il / elle / on <b>vient</b> d'Italie.</i> (He / She / One comes from Italy.)","<i>Il / elle / on le <b>soutient</b>.</i> (He / She / One supports him.)"],["<i>Nous <b>venons</b> d'Italie.</i> (We come from Italy.)","<i>Nous le <b>soutenons</b>.</i> (We support him.)"],["<i>Vous <b>venez</b> d'Italie.</i> (You come from Italy.)","<i>Vous le <b>soutenez</b>.</i> (You support him.)"],["<i>Ils/elles <b>viennent</b> d'Italie.</i> (They come from Italy.)","<i>Ils/elles le <b>soutiennent</b>.</i> (They support him.)"]],A=0;A<O.length;A++){for(var R=document.createElement("ul"),j=0;j<O[A].length;j++){var q=document.createElement("li");q.innerHTML=O[A][j],R.appendChild(q)}M.appendChild(R)}var D=document.createElement("h4");D.textContent="Pattern 4: courir, secourir, parcourir...",c.appendChild(D);var H=document.createElement("div");H.classList.add("list-no-bullet"),c.appendChild(H);for(var F=["<i>Je <b>cours</b> vite.</i> (I run fast.)","<i>Tu <b>cours</b> vite.</i> (You run fast.)","<i>Il / elle / on <b>court</b> vite.</i> (He / She / One runs fast.)","<i>Nous <b>courons</b> vite.</i> (We run fast.)","<i>Vous <b>courez</b> vite.</i> (You run fast.)","<i>Ils/elles <b>courent</b> vite.</i> (They run fast.)"],U=document.createElement("ul"),V=0;V<F.length;V++){var z=document.createElement("li");z.innerHTML=F[V],U.appendChild(z)}H.appendChild(U);var W=document.createElement("h3");W.classList.add("color3"),W.innerHTML='<i class="fa-solid fa-bolt"></i> Verbs ending in -IRE';var B=document.createElement("h4");B.textContent="Pattern 1: lire, dire, traduire, conduire...",c.appendChild(W),c.appendChild(B);var Y=document.createElement("div");Y.classList.add("examples-list"),c.appendChild(Y);for(var G=[["<i>Je <b>lis</b> un livre.</i> (I'm reading a book.)","<i>Je <b>conduis</b> une voiture.</i> (I drive a car.)","<i>Je <b>dis</b> la vrit.</i> (I'm telling the truth.)"],["<i>Tu <b>lis</b> un livre.</i> (You're reading a book.)","<i>Tu <b>conduis</b> une voiture.</i> (You drive a car.)","<i>Tu <b>dis</b> la vrit.</i> (You're telling the truth.)"],["<i>Il / elle / on <b>lit</b> un livre.</i> (He / She / One is reading a book.)","<i>Il / elle / on <b>conduit</b> une voiture.</i> (He / She / One drives a car.)","<i>Il / elle / on <b>dit</b> la vrit.</i> (He / She / One is telling the truth.)"],["<i>Nous <b>lisons</b> un livre.</i> (We're reading a book.)","<i>Nous <b>conduisons</b> une voiture.</i> (We drive a car.)","<i>Nous <b>disons</b> la vrit.</i> (We're telling the truth.)"],["<i>Vous <b>lisez</b> un livre.</i> (You're reading a book.)","<i>Vous <b>conduisez</b> une voiture.</i> (You drive a car.)",'<i>Vous <b>di<span class="red">tes</span></b> la vrit.</i> (You\'re telling the truth.)'],["<i>Ils/elles <b>lisent</b> un livre.</i> (They're reading a book.)","<i>Ils/elles <b>conduisent</b> une voiture.</i> (They drive a car.)","<i>Ils/elles <b>disent</b> la vrit.</i> (They're telling the truth.)"]],J=0;J<G.length;J++){for(var $=document.createElement("ul"),K=0;K<G[J].length;K++){var Q=document.createElement("li");Q.innerHTML=G[J][K],$.appendChild(Q)}Y.appendChild($)}var X=document.createElement("h4");X.textContent="Pattern 2: crire, dcrire, (s')inscrire... ",c.appendChild(X);var Z=document.createElement("div");Z.classList.add("examples-list"),c.appendChild(Z);for(var ee=[["<i>J'<b>cris</b> une lettre.</i> (I'm writing a letter.)","<i>Je <b>m'inscris</b>  un cours de franais.</i> (I'm signing up for a French course.)"],["<i>Tu <b>cris</b> une lettre.</i> (You're writing a letter.)","<i>Tu <b>t'inscris</b>  un cours de franais.</i> (You're signing up for a French course.)"],["<i>Il/elle/on <b>crit</b> une lettre.</i> (He's writing a letter.)","<i>Il/elle/on <b>s'inscrit</b>  un cours de franais.</i> (He/she/one is signing up for a\n                French course.)"],["<i>Nous <b>crivons</b> une lettre.</i> (We're writing a letter.)","<i>Nous nous <b>inscrivons</b>  un cours de franais.</i> (We're signing up for a French\n                course.)"],["<i>Vous <b>crivez</b> une lettre.</i> (You're writing a letter.)","<i>Vous vous <b>inscrivez</b>  un cours de franais.</i> (You're signing up for a French\n                course.)"],["<i>Ils/elles <b>crivent</b> une lettre.</i> (They're writing a letter.)","<i>Ils/elles <b>s'inscrivent</b>  un cours de franais.</i> (They're signing up for a\n                French course.)"]],te=0;te<ee.length;te++){for(var ne=document.createElement("ul"),re=0;re<ee[te].length;re++){var ie=document.createElement("li");ie.innerHTML=ee[te][re],ne.appendChild(ie)}Z.appendChild(ne)}var oe=document.createElement("h3");oe.classList.add("color3"),oe.innerHTML='<i class="fa-solid fa-bolt"></i> Verbs ending in -TRE';var ae=document.createElement("h4");ae.textContent="Pattern 1: mettre, promettre, remettre, (se) battre...",c.appendChild(oe),c.appendChild(ae);var se=document.createElement("div");se.classList.add("list-no-bullet"),c.appendChild(se);for(var le=["<i>Je <b>mets</b> une veste.</i> (I'm putting on a jacket.)","<i>Tu <b>mets</b> une veste.</i> (You're putting on a jacket.)","<i>Il/elle/on <b>met</b> une veste.</i> (He/she/one is putting on a jacket.)","<i>Nous <b>mettons</b> une veste.</i> (We're putting on a jacket.)","<i>Vous <b>mettez</b> une veste.</i> (You're putting on a jacket.)","<i>Ils/elles <b>mettent</b> une veste.</i> (They're putting on a jacket.)"],ce=document.createElement("ul"),ue=0;ue<le.length;ue++){var de=document.createElement("li");de.innerHTML=le[ue],ce.appendChild(de)}se.appendChild(ce);var he=document.createElement("h4");he.textContent="Pattern 2: connatre, reconnatre, natre... ",c.appendChild(he);var pe=document.createElement("div");pe.classList.add("list-no-bullet"),c.appendChild(pe);for(var fe=["<i>Je <b>connais</b> cette ville.</i> (I know this city.)","<i>Tu <b>connais</b> cette ville.</i> (You know this city.)","<i>Il/elle/on <b>connat</b> cette ville.</i> (He/she/one knows this city.)","<i>Nous <b>connaissons</b> cette ville.</i> (We know this city.)","<i>Vous <b>connaissez</b> cette ville.</i> (You know this city.)","<i>Ils/elles <b>connaissent</b> cette ville.</i> (They know this city.)"],me=document.createElement("ul"),ve=0;ve<fe.length;ve++){var ge=document.createElement("li");ge.innerHTML=fe[ve],me.appendChild(ge)}pe.appendChild(me);var be=document.createElement("h3");be.classList.add("color3"),be.innerHTML='<i class="fa-solid fa-bolt"></i> Verbs ending in -DRE';var ye=document.createElement("h4");ye.textContent="Pattern 1: prendre, apprendre, comprendre...",c.appendChild(be),c.appendChild(ye);var _e=document.createElement("div");_e.classList.add("examples-list"),c.appendChild(_e);for(var we=[["<i>J'<b>apprends</b> le franais.</i> (I'm learning French.)","<i>Je <b>prends</b> une photo.</i> (I'm taking a photo.)"],["<i>Tu <b>apprends</b> le franais.</i> (You're learning French.)","<i>Tu <b>prends</b> une photo.</i> (You're taking a photo.)"],["<i>Il/elle/on <b>apprend</b> le franais.</i> (He/she/one is learning French.)","<i>Il/elle/on <b>prend</b> une photo.</i> (He/she/one is taking a photo.)"],["<i>Nous <b>apprenons</b> le franais.</i> (We're learning French.)","<i>Nous <b>prenons</b> une photo.</i> (We're taking a photo.)"],["<i>Vous <b>apprenez</b> le franais.</i> (You're learning French.)","<i>Vous <b>prenez</b> une photo.</i> (You're taking a photo.)"],["<i>Ils/elles <b>apprennent</b> le franais.</i> (They're learning French.)","<i>Ils/elles <b>prennent</b> une photo.</i> (They're taking a photo.)"]],Ee=0;Ee<we.length;Ee++){for(var Ce=document.createElement("ul"),Te=0;Te<we[Ee].length;Te++){var Le=document.createElement("li");Le.innerHTML=we[Ee][Te],Ce.appendChild(Le)}_e.appendChild(Ce)}var Ie=document.createElement("h4");Ie.textContent="Pattern 2: attendre, entendre, rpondre, perdre, vendre",c.appendChild(Ie);var ke=document.createElement("div");ke.classList.add("list-no-bullet"),c.appendChild(ke);for(var Se=["<i>J'<b>attends</b> le bus.</i> (I'm waiting for the bus.)","<i>Tu <b>attends</b> le bus.</i> (You're waiting for the bus.)","<i>Il/elle/on <b>attend</b> le bus.</i> (He/she/one is waiting for the bus.)","<i>Nous <b>attendons</b> le bus.</i> (We're waiting for the bus.)","<i>Vous <b>attendez</b> le bus.</i> (You're waiting for the bus.)","<i>Ils/elles <b>attendent</b> le bus.</i> (They're waiting for the bus.)"],xe=document.createElement("ul"),Pe=0;Pe<Se.length;Pe++){var Ne=document.createElement("li");Ne.innerHTML=Se[Pe],xe.appendChild(Ne)}ke.appendChild(xe);var Me=document.createElement("h4");Me.textContent="Pattern 3: teindre, peindre, joindre, rejoindre, se plaindre...",c.appendChild(Me);var Oe=document.createElement("div");Oe.classList.add("examples-list"),c.appendChild(Oe);for(var Ae=[["<i>J'<b>teins</b> la lumire.</i> (I turn off the light.)","<i>Je la <b>rejoins</b> plus tard.</i> (I'll join her later.)"],["<i>Tu <b>teins</b> la lumire.</i> (You turn off the light.)","<i>Tu la <b>rejoins</b> plus tard.</i> (You'll join her later.)"],["<i>Il/elle/on <b>teint</b> la lumire.</i> (He/she/one turns off the light.)","<i>Il/elle/on la <b>rejoint</b> plus tard.</i> (He/she/one will join her later.)"],["<i>Nous <b>teignons</b> la lumire.</i> (We turn off the light.)","<i>Nous la <b>rejoignons</b> plus tard.</i> (We'll join her later.)"],["<i>Vous <b>teignez</b> la lumire.</i> (You turn off the light.)","<i>Vous la <b>rejoignez</b> plus tard.</i> (You'll join her later.)"],["<i>Ils/elles <b>teignent</b> la lumire.</i> (They turn off the light.)","<i>Ils/elles la <b>rejoignent</b> plus tard.</i> (They'll join her later.)"]],Re=0;Re<Ae.length;Re++){for(var je=document.createElement("ul"),qe=0;qe<Ae[Re].length;qe++){var De=document.createElement("li");De.innerHTML=Ae[Re][qe],je.appendChild(De)}Oe.appendChild(je)}var He=document.createElement("h3");He.classList.add("color3"),He.innerHTML='<i class="fa-solid fa-bolt"></i>Verbs ending in -OIR';var Fe=document.createElement("h4");Fe.textContent="Pattern 1: devoir, recevoir...",c.appendChild(He),c.appendChild(Fe);var Ue=document.createElement("div");Ue.classList.add("examples-list"),c.appendChild(Ue);for(var Ve=[["<i>Je <b>dois</b> partir.</i> (I have to go.)","<i>Je <b>re<span class='red'></span>ois</b> des messages.</i> (I get messages.)"],["<i>Tu <b>dois</b> partir.</i> (You have to go.)","<i>Tu <b>re<span class='red'></span>ois</b> des messages.</i> (You get messages.)"],["<i>Il/elle/on <b>doit</b> partir.</i> (He/she/one has to go.)","<i>Il/elle/on <b>re<span class='red'></span>oit</b> des messages.</i> (He/she/one gets messages.)"],["<i>Nous <b>devons</b> partir.</i> (We have to go.)","<i>Nous <b>recevons</b> des messages.</i> (We get messages.)"],["<i>Vous <b>devez</b> partir.</i> (You have to go.)","<i>Vous <b>recevez</b> des messages.</i> (You get messages.)"],["<i>Ils/elles <b>doivent</b> partir.</i> (They have to go.)","<i>Ils/elles <b>re<span class='red'></span>oivent</b> des messages.</i> (They get messages.)"]],ze=0;ze<Ve.length;ze++){for(var We=document.createElement("ul"),Be=0;Be<Ve[ze].length;Be++){var Ye=document.createElement("li");Ye.innerHTML=Ve[ze][Be],We.appendChild(Ye)}Ue.appendChild(We)}var Ge=document.createElement("h4");Ge.textContent="Pattern 2: vouloir, pouvoir...",c.appendChild(Ge);var Je=document.createElement("div");Je.classList.add("examples-list"),c.appendChild(Je);for(var $e=[["<i>Je <b>veux</b> les aider.</i> (I want to help them.)","<i>Je <b>peux</b> laisser un message.</i> (I can leave a message.)"],["<i>Tu <b>veux</b> les aider.</i> (You want to help them.)","<i>Tu <b>peux</b> laisser un message.</i> (You can leave a message.)"],["<i>Il/elle/on <b>veut</b> les aider.</i> (He/she/one wants to help them.)","<i>Il/elle/on <b>peut</b> laisser un message.</i> (He/she/one can leave a message.)"],["<i>Nous <b>voulons</b> les aider.</i> (We want to help them.)","<i>Nous <b>pouvons</b> laisser un message.</i> (We can leave a message.)"],["<i>Vous <b>voulez</b> les aider.</i> (You want to help them.)","<i>Vous <b>pouvez</b> laisser un message.</i> (You can leave a message.)"],["<i>Ils/elles <b>veulent</b> les aider.</i> (They want to help them.)","<i>Ils/elles <b>peuvent</b> laisser un message.</i> (They can leave a message.)"]],Ke=0;Ke<$e.length;Ke++){for(var Qe=document.createElement("ul"),Xe=0;Xe<$e[Ke].length;Xe++){var Ze=document.createElement("li");Ze.innerHTML=$e[Ke][Xe],Qe.appendChild(Ze)}Je.appendChild(Qe)}var et=document.createElement("p");et.innerHTML='<i class="fa-solid fa-exclamation-triangle"></i> Here are two important verbs that don\'t exactly\n    follow any of the patterns above: <b><i>voir</i></b> (to see), <b><i>savoir</i></b> (to know, to\n    know how to).',c.appendChild(et);var tt=document.createElement("div");tt.classList.add("examples-list"),c.appendChild(tt);for(var nt=[["<i>Je <b>vois</b> une toile.</i> (I see a star.)","<i>Je <b>sais</b> cuisiner.</i> (I know how to cook.)"],["<i>Tu <b>vois</b> une toile.</i> (You see a star.)","<i>Tu <b>sais</b> cuisiner.</i> (You know how to cook.)"],["<i>Il/elle/on <b>voit</b> une toile.</i> (He/she/one sees a star.)","<i>Il/elle/on <b>sait</b> cuisiner.</i> (He/she/one knows how to cook.)"],["<i>Nous <b>voyons</b> une toile.</i> (We see a star.)","<i>Nous <b>savons</b> cuisiner.</i> (We know how to cook.)"],["<i>Vous <b>voyez</b> une toile.</i> (You see a star.)","<i>Vous <b>savez</b> cuisiner.</i> (You know how to cook.)"],["<i>Ils/elles <b>voient</b> une toile.</i> (They see a star.)","<i>Ils/elles <b>savent</b> cuisiner.</i> (They know how to cook.)"]],rt=0;rt<nt.length;rt++){for(var it=document.createElement("ul"),ot=0;ot<nt[rt].length;ot++){var at=document.createElement("li");at.innerHTML=nt[rt][ot],it.appendChild(at)}tt.appendChild(it)}var st=document.createElement("h3");st.classList.add("red"),st.innerHTML='<i class="fa-solid fa-bolt"></i> Verbs ending in -VRE';var lt=document.createElement("h4");lt.textContent="Pattern: vivre, suivre...",c.appendChild(st),c.appendChild(lt);var ct=document.createElement("div");ct.classList.add("examples-list"),c.appendChild(ct);for(var ut=[["<i>Je <b>vis</b>  Paris.</i> (I live in Paris.)","<i>Je <b>suis</b> ses conseils.</i> (I follow his/her advice.)"],["<i>Tu <b>vis</b>  Paris.</i> (You live in Paris.)","<i>Tu <b>suis</b> ses conseils.</i> (You follow his/her advice.)"],["<i>Il/elle/on <b>vit</b>  Paris.</i> (He/she/one lives in Paris.)","<i>Il/elle/on <b>suit</b> ses conseils.</i> (He/she/one follows his/her advice.)"],["<i>Nous <b>vivons</b>  Paris.</i> (We live in Paris.)","<i>Nous <b>suivons</b> ses conseils.</i> (We follow his/her advice.)"],["<i>Vous <b>vivez</b>  Paris.</i> (You live in Paris.)","<i>Vous <b>suivez</b> ses conseils.</i> (You follow his/her advice.)"],["<i>Ils/elles <b>vivent</b>  Paris.</i> (They live in Paris.)","<i>Ils/elles <b>suivent</b> ses conseils.</i> (They follow his/her advice.)"]],dt=0;dt<ut.length;dt++){for(var ht=document.createElement("ul"),pt=0;pt<ut[dt].length;pt++){var ft=document.createElement("li");ft.innerHTML=ut[dt][pt],ht.appendChild(ft)}ct.appendChild(ht)}var mt=document.createElement("h3");mt.classList.add("red"),mt.innerHTML='<i class="fa-solid fa-bolt"></i> Verbs ending in -OIRE';var vt=document.createElement("h4");vt.innerHTML="The verbs <b><i>boire</i></b> and <b><i>croire</i></b> follow 2 slightly different patterns:",c.appendChild(mt),c.appendChild(vt);var gt=document.createElement("div");gt.classList.add("examples-list"),c.appendChild(gt);for(var bt=[["<i>Je <b>bois</b> de l'eau.</i> (I drink water.)","<i>Je <b>crois</b> que c'est vrai.</i> (I think it's true.)"],["<i>Tu <b>bois</b> de l'eau.</i> (You drink water.)","<i>Tu <b>crois</b> que c'est vrai.</i> (You think it's true.)"],["<i>Il/elle/on <b>boit</b> de l'eau.</i> (He/she/one drinks water.)","<i>Il/elle/on <b>croit</b> que c'est vrai.</i> (He/she/one thinks it's true.)"],["<i>Nous <b>buvons</b> de l'eau.</i> (We drink water.)","<i>Nous <b>croyons</b> que c'est vrai.</i> (We think it's true.)"],["<i>Vous <b>buvez</b> de l'eau.</i> (You drink water.)","<i>Vous <b>croyez</b> que c'est vrai.</i> (You think it's true.)"],["<i>Ils/elles <b>boivent</b> de l'eau.</i> (They drink water.)","<i>Ils/elles <b>croient</b> que c'est vrai.</i> (They think it's true.)"]],yt=0;yt<bt.length;yt++){for(var _t=document.createElement("ul"),wt=0;wt<bt[yt].length;wt++){var Et=document.createElement("li");Et.innerHTML=bt[yt][wt],_t.appendChild(Et)}gt.appendChild(_t)}e.appendChild(c),Qu()}function nd(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");t.classList.add("contentNav"),e.appendChild(t);var n=document.createElement("a");n.textContent="Verb conjugation",n.classList.add("verbConjugationLink");var r=document.createElement("span");r.classList.add("icon");var i=document.createElement("i");i.classList.add("fas","fa-chevron-right"),r.appendChild(i);var o=document.createElement("a");o.textContent="The present tense",o.classList.add("presentTenseLink"),t.appendChild(n),t.appendChild(r),t.appendChild(o);var a=document.createElement("span");r.classList.add("icon");var s=document.createElement("i");s.classList.add("fas","fa-chevron-right"),a.appendChild(s);var l=document.createElement("a");l.textContent="Irregular verbs",t.appendChild(a),t.appendChild(l);var c=document.createElement("div");c.classList.add("page-content");var u=document.createElement("h1");u.textContent="Irregular Verbs in the Present Tense";var d=document.createElement("p");d.innerHTML="Let's look at 4 very common irregular verbs conjugated in the present tense:\n    <b><i>tre</i></b> (to be), <i><b>avoir</i></b> (to have), <i><b>aller</i></b> (to go),\n    <i><b>faire</i></b> (to do, to make).",c.appendChild(u),c.appendChild(d);var h=document.createElement("div");h.classList.add("examples-list"),c.appendChild(h);for(var p=[["<i>Je <b>suis</b> fatigu.</i> (I'm tired.)","<i>J'<b>ai</b> une voiture.</i> (I have a car.)","<i>Je <b>vais</b> au travail.</i> (I'm going to work.)","<i>Je <b>fais</b> du yoga.</i> (I do yoga.)"],["<i>Tu <b>es</b> fatigu.</i> (You're tired.)","<i>Tu <b>as</b> une voiture.</i> (You have a car.)","<i>Tu <b>vas</b> au travail.</i> (You're going to work.)","<i>Tu <b>fais</b> du yoga.</i> (You do yoga.)"],["<i>Il/elle/on <b>est</b> fatigu.</i> (He/she/one is tired.)","<i>Il/elle/on <b>a</b> une voiture.</i> (He/she/one has a car.)","<i>Il/elle/on <b>va</b> au travail.</i> (He/she/one is going to work.)","<i>Il/elle/on <b>fait</b> du yoga.</i> (He/she/one does yoga.)"],["<i>Nous <b>sommes</b> fatigus.</i> (We're tired.)","<i>Nous <b>avons</b> une voiture.</i> (We have a car.)","<i>Nous <b>allons</b> au travail.</i> (We're going to work.)","<i>Nous <b>faisons</b> du yoga.</i> (We do yoga.)"],["<i>Vous <b>tes</b> fatigus.</i> (You're tired.)","<i>Vous <b>avez</b> une voiture.</i> (You have a car.)","<i>Vous <b>allez</b> au travail.</i> (You're going to work.)","<i>Vous <b>faites</b> du yoga.</i> (You do yoga.)"],["<i>Ils/elles <b>sont</b> fatigus.</i> (They're tired.)","<i>Ils/elles <b>ont</b> une voiture.</i> (They have a car.)","<i>Ils/elles <b>vont</b> au travail.</i> (They're going to work.)","<i>Ils/elles <b>font</b> du yoga.</i> (They do yoga.)"]],f=0;f<p.length;f++){for(var m=document.createElement("ul"),v=0;v<p[f].length;v++){var g=document.createElement("li");g.innerHTML=p[f][v],m.appendChild(g)}h.appendChild(m)}var b=document.createElement("div"),y=document.createElement("p");y.classList.add("tip"),y.innerHTML='<i class="fa-solid fa-exclamation-triangle"></i> Although in most cases <i>"tre"</i> can be\n    translated as "to be" and <i>"avoir"</i> as "to have",\n    this isn\'t always the case. For example, to say "I\'m hungry" you use "avoir" and not "tre":\n    <i>"<b>J\'ai</b> faim"</i> (literally "I have hunger").\n    To say how old you are, it\'s the same thing: <i>"<b>J\'ai</b> 25 ans"</i> and not "Je <span\n        class="red">suis</span> 25 ans".',b.appendChild(y),c.appendChild(b),e.appendChild(c),Qu()}function rd(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");t.classList.add("contentNav"),e.appendChild(t);var n=document.createElement("a");n.textContent="Verb conjugation",n.classList.add("verbConjugationLink");var r=document.createElement("span");r.classList.add("icon");var i=document.createElement("i");i.classList.add("fas","fa-chevron-right"),r.appendChild(i);var o=document.createElement("a");o.textContent="Pass Compos",o.classList.add("pastTenseLink");var a=document.createElement("span");r.classList.add("icon");var s=document.createElement("i");s.classList.add("fas","fa-chevron-right"),a.appendChild(s);var l=document.createElement("a");l.textContent="'Avoir' VS 'tre'",t.appendChild(n),t.appendChild(r),t.appendChild(o),t.appendChild(a),t.appendChild(l);var c=document.createElement("div");c.classList.add("page-content");var u=document.createElement("h1");u.innerHTML="The past tense <span class='tense-name'>Pass Compos</span>";var d=document.createElement("h2");d.innerHTML="Verbs conjugated with 'avoir' and 'tre'";var h=document.createElement("div");h.classList.add("definition");var p=document.createElement("p");p.innerHTML='<i class="fa-solid fa-lightbulb"></i> In French, most verbs form their Pass Compos with <span class="tense-name">avoir</span>:\n        <i>"j\'ai regard"</i>, <i>"elle a donn"</i>, <i>"il a achet"</i>, etc.',h.appendChild(p);var f=document.createElement("p");f.classList.add("tip"),f.innerHTML="There are two main groups of verbs that form their perfect tense with <i></i>'tre'</i> instead\n    of avoir:",c.appendChild(u),c.appendChild(d),c.appendChild(h),c.appendChild(f);var m=document.createElement("ul");m.classList.add("list-no-bullet"),m.innerHTML='<li><i class="fa-solid fa-arrow-right"></i> all reflexive verbs (verbs with \'se\' in the\n    infinitive form: se lever, se coucher, se\n    raser)</li>\n    <li><i class="fa-solid fa-arrow-right"></i> a small group of French verbs that are mainly used\n    to talk about movement or a change of some kind (see the table below).</li>',c.appendChild(m);var v=document.createElement("table"),g=document.createElement("thead"),b=document.createElement("tr"),y=document.createElement("th");y.colSpan=3,y.className="table-title",y.textContent="Common French verbs conjugated with 'tre'",b.appendChild(y),g.appendChild(b);var _=document.createElement("tr");["Verb","Translation","Conjugation example"].forEach((function(e){var t=document.createElement("th");t.textContent=e,_.appendChild(t)})),g.appendChild(_);var w=document.createElement("tbody");[{verb:"aller",translation:"to go",example:"Je suis all."},{verb:"venir",translation:"to come",example:"Elle est venue."},{verb:"revenir",translation:"to come back",example:"Nous sommes revenus."},{verb:"arriver",translation:"to arrive",example:"Ils sont arrivs."},{verb:"entrer",translation:"to enter",example:"Il est entr."},{verb:"rentrer",translation:"to come (back) home",example:"Tu es rentr."},{verb:"partir",translation:"to leave",example:"Elle est partie."},{verb:"rester",translation:"to stay",example:"Je suis rest."},{verb:"sortir",translation:"to go out",example:"Ils sont sortis."},{verb:"retourner",translation:"to go back",example:"Nous sommes retourns."},{verb:"tomber",translation:"to fall",example:"Vous tes tomb."}].forEach((function(e){var t=document.createElement("tr"),n=document.createElement("td"),r=document.createElement("b");r.textContent=e.verb,n.appendChild(r),t.appendChild(n);var i=document.createElement("td");i.textContent=e.translation,t.appendChild(i);var o=document.createElement("td");o.textContent=e.example,t.appendChild(o),w.appendChild(t)})),v.appendChild(g),v.appendChild(w),c.appendChild(v);var E=document.createElement("p");E.classList.add("tip"),E.innerHTML="A few more verbs conjugated with 'tre': <i><b>devenir</i></b> (to become), <b><i>monter</i></b>\n    (to go up), <i><b>descendre</b></i> (to go down), <i><b>passer</b></i> (to go past, to pass (by)), <i><b>natre</b></i> (to be born),\n    <i><b>mourir</b></i> (to die).";var C=document.createElement("p");C.classList.add("tip"),C.innerHTML="<i class=\"fa-solid fa-exclamation-triangle\"></i> Note that the verbs <i>passer</i>,\n    <i>entrer</i>, <i>sortir</i>, <i>monter</i>, <i>retourner</i> can also be conjugated with 'avoir' in some cases.",c.appendChild(E),c.appendChild(C),e.appendChild(c),Qu()}function id(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");t.classList.add("contentNav"),e.appendChild(t);var n=document.createElement("a");n.textContent="Verb conjugation",n.classList.add("verbConjugationLink");var r=document.createElement("span");r.classList.add("icon");var i=document.createElement("i");i.classList.add("fas","fa-chevron-right"),r.appendChild(i);var o=document.createElement("a");o.textContent="Pass Compos",o.classList.add("pastTenseLink");var a=document.createElement("span");r.classList.add("icon");var s=document.createElement("i");s.classList.add("fas","fa-chevron-right"),a.appendChild(s);var l=document.createElement("a");l.textContent="Past participle",t.appendChild(n),t.appendChild(r),t.appendChild(o),t.appendChild(a),t.appendChild(l);var c=document.createElement("div");c.classList.add("page-content");var u=document.createElement("h1");u.innerHTML="The past tense <span class='tense-name'>Pass Compos</span>";var d=document.createElement("h2");d.innerHTML="The past participle",c.appendChild(u),c.appendChild(d);var h=document.createElement("div");h.classList.add("definition");var p=document.createElement("p");p.innerHTML="As mentioned in a previous chapter, to conjugate a French verb in the Pass Compos, you need to know its <b>past participle</b> form.",h.appendChild(p),c.appendChild(h);var f=document.createElement("div");f.innerHTML="<p class='tip'><i class=\"fa-solid fa-bolt\"></i> To form the <b>past participle</b> of\n    <b>-er verbs</b>, you replace the <b>-er</b> at the end of the infinitive with <b>-</b>.</p>",c.appendChild(f);var m=document.createElement("table"),v=document.createElement("thead"),g=document.createElement("tr");["Infinitive","Translation","Past participle"].forEach((function(e){var t=document.createElement("th");t.textContent=e,g.appendChild(t)})),v.appendChild(g),m.appendChild(v);var b=document.createElement("tbody");[["<b>parler</b>","to speak",'<b>parl<span class="red"></span></b>'],["<b>aller</b>","to go",'<b>all<span class="red"></span></b>'],["<b>manger</b>","to eat",'<b>mang<span class="red"></span></b>']].forEach((function(e){var t=document.createElement("tr");e.forEach((function(e){var n=document.createElement("td");n.innerHTML=e,t.appendChild(n)})),b.appendChild(t)})),m.appendChild(b),c.appendChild(m);var y=document.createElement("div");y.classList.add("examples");var _=document.createElement("p");_.textContent="Here are a few examples:",c.appendChild(y),y.appendChild(_);var w=document.createElement("ul");w.classList.add("list-no-bullet"),y.appendChild(w),w.innerHTML="<li><i>Je <u><b>suis arriv</b></u>  huit heures.</i> (I arrived at eight o'clock.)</li>\n    <li><i>Il <u><b>a parl</b></u>  Marie.</i> (He spoke to Marie.)</li>";var E=document.createElement("div");E.innerHTML="<p class='tip'><i class=\"fa-solid fa-bolt\"></i> For <b>-ir verbs</b>, you usually replace\n    the <b>-ir</b> at the end of the infinitive with <b>-i</b>.</p>",c.appendChild(E);var C=document.createElement("table"),T=document.createElement("thead"),L=document.createElement("tr");["Infinitive","Translation","Past participle"].forEach((function(e){var t=document.createElement("th");t.textContent=e,L.appendChild(t)})),T.appendChild(L),C.appendChild(T);var I=document.createElement("tbody");[["<b>finir</b>","to finish",'<b>fin<span class="red">i</span></b>'],["<b>dormir</b>","to sleep",'<b>dorm<span class="red">i</span></b>'],["<b>partir</b>","to leave",'<b>part<span class="red">i</span></b>']].forEach((function(e){var t=document.createElement("tr");e.forEach((function(e){var n=document.createElement("td");n.innerHTML=e,t.appendChild(n)})),I.appendChild(t)})),C.appendChild(I),c.appendChild(C);var k=document.createElement("div");k.classList.add("examples");var S=document.createElement("p");S.textContent="Here are a few examples:",c.appendChild(k),k.appendChild(S);var x=document.createElement("ul");x.classList.add("list-no-bullet"),k.appendChild(x),x.innerHTML="<li><i>Il <u><b>a</b></u> bien <b><u>dormi</b></u> cette nuit.</i> (He slept well last night.)</li>\n    <li><i>Elle <b><u>a grandi</b></u> en France.</i> (She grew up in France.)</li>";var P=document.createElement("div");P.innerHTML='<p class="tip"><i class="fa-solid fa-exclamation-triangle"></i> Verbs like <i><b>ouvrir</b></i>,\n    <i><b>couvrir</b></i>, <i><b>dcouvrir</b></i>,\n    <i><b>offrir</b></i>, <i><b>souffrir</b></i> form their past participle\n    with <b>-ert</b> at the end:\n</p>',c.appendChild(P);var N=document.createElement("table"),M=document.createElement("thead"),O=document.createElement("tr");["Infinitive","Translation","Past participle"].forEach((function(e){var t=document.createElement("th");t.textContent=e,O.appendChild(t)})),M.appendChild(O),N.appendChild(M);var A=document.createElement("tbody");[["<b>ouvrir</b>","to open",'<b>ouv<span class="red">ert</span></b>'],["<b>couvrir</b>","to cover",'<b>couv<span class="red">ert</span></b>'],["<b>dcouvrir</b>","to discover",'<b>dcouv<span class="red">ert</span></b>'],["<b>offrir</b>","to offer",'<b>off<span class="red">ert</span></b>']].forEach((function(e){var t=document.createElement("tr");e.forEach((function(e){var n=document.createElement("td");n.innerHTML=e,t.appendChild(n)})),A.appendChild(t)})),N.appendChild(A),c.appendChild(N);var R=document.createElement("div");R.innerHTML='<p><i class="fa-solid fa-exclamation-triangle"></i> <i class="fa-solid fa-exclamation-triangle"></i> Some -ir verbs like\n        <i><b>venir</b></i>, <i><b>tenir</b></i>, <i><b>courir</b></i> are irregular and they don\'t follow these patterns \n        (see the table of exceptions at the bottom of the page).</p>',c.appendChild(R);var j=document.createElement("div");j.innerHTML='<p class="tip"><i class="fa-solid fa-bolt"></i> Many verbs ending in <b>-dre</b> form their past\n    participle by replacing the <b>-re</b> ending with <b>-u</b>.</p>',c.appendChild(j);var q=document.createElement("table"),D=document.createElement("thead"),H=document.createElement("tr");["Infinitive","Translation","Past participle"].forEach((function(e){var t=document.createElement("th");t.textContent=e,H.appendChild(t)})),D.appendChild(H),q.appendChild(D);var F=document.createElement("tbody");[["<b>attendre</b>","to wait",'<b>attend<span class="red">u</span></b>'],["<b>entendre</b>","to hear",'<b>entend<span class="red">u</span></b>'],["<b>rpondre</b>","to answer, to reply",'<b>rpond<span class="red">u</span></b>'],["<b>perdre</b>","to lose",'<b>perd<span class="red">u</span></b>']].forEach((function(e){var t=document.createElement("tr");e.forEach((function(e){var n=document.createElement("td");n.innerHTML=e,t.appendChild(n)})),F.appendChild(t)})),q.appendChild(F),c.appendChild(q);var U=document.createElement("div");U.classList.add("examples");var V=document.createElement("p");V.textContent="Take a look at these examples:",c.appendChild(U),U.appendChild(V);var z=document.createElement("ul");z.classList.add("list-no-bullet"),U.appendChild(z),z.innerHTML="<li><i>Je t'<b><u>ai attendu</b></u> pendant une heure.</i> (I waited for you for an hour.)</li>\n    <li><i>Il ne m'<b><u>a</b></u> pas <b><u>rpondu</b></u></i> (He didn't reply.)</li>";var W=document.createElement("div");W.innerHTML='<p class="tip"><i class="fa-solid fa-bolt"></i> Verbs like <b>prendre</b>, <b>apprendre</b>,\n    <b>comprendre</b>, <b>reprendre</b> follow a different pattern: </p>',c.appendChild(W);var B=document.createElement("table"),Y=document.createElement("thead"),G=document.createElement("tr");["Infinitive","Translation","Past participle"].forEach((function(e){var t=document.createElement("th");t.textContent=e,G.appendChild(t)})),Y.appendChild(G),B.appendChild(Y);var J=document.createElement("tbody");[["<b>prendre</b>","to take",'<b>pr<span class="red">is</span></b>'],["<b>apprendre</b>","to learn",'<b>appr<span class="red">is</span></b>'],["<b>comprendre</b>","to understand",'<b>compr<span class="red">is</span></b>'],["<b>reprendre</b>","to take back, to have some more",'<b>repr<span class="red">is</span></b>']].forEach((function(e){var t=document.createElement("tr");e.forEach((function(e){var n=document.createElement("td");n.innerHTML=e,t.appendChild(n)})),J.appendChild(t)})),B.appendChild(J),c.appendChild(B);var $=document.createElement("div");$.classList.add("examples");var K=document.createElement("p");K.textContent="Take a look at these examples:",c.appendChild($),$.appendChild(K);var Q=document.createElement("ul");Q.classList.add("list-no-bullet"),$.appendChild(Q),Q.innerHTML="<li><i>J'<b><u>ai pris</b></u> le train ce matin.</i> (I took the train this morning.)</li>\n    <li><i>J'<b><u>ai appris</b></u>  conduire.</i> (I learned to drive.)</li>";var X=document.createElement("div");X.innerHTML='<p class="tip"><i class="fa-solid fa-bolt"></i> To conjugate verbs ending in <b>-oindre</b>,\n    <b>-eindre</b> and\n    <b>-aindre</b> in the Pass Compos, replace the <b>-dre</b> at the end of the infinitive with\n    <b>-t</b>:</p>',c.appendChild(X);var Z=document.createElement("table"),ee=document.createElement("thead"),te=document.createElement("tr");["Infinitive","Translation","Past participle"].forEach((function(e){var t=document.createElement("th");t.textContent=e,te.appendChild(t)})),ee.appendChild(te),Z.appendChild(ee);var ne=document.createElement("tbody");[["<b>rejoindre</b>","to join, to meet",'<b>rejoin<span class="red">t</span></b>'],["<b>peindre</b>","to paint",'<b>pein<span class="red">t</span></b>'],["<b>se plaindre</b>","to complain",'<b>plain<span class="red">t</span></b>'],["<b>teindre</b>","to turn off",'<b>tein<span class="red">t</span></b>'],["<b>atteindre</b>","to reach",'<b>attein<span class="red">t</span></b>']].forEach((function(e){var t=document.createElement("tr");e.forEach((function(e){var n=document.createElement("td");n.innerHTML=e,t.appendChild(n)})),ne.appendChild(t)})),Z.appendChild(ne),c.appendChild(Z);var re=document.createElement("div");re.classList.add("examples");var ie=document.createElement("p");ie.textContent="Here are some examples:",c.appendChild(re),re.appendChild(ie);var oe=document.createElement("ul");oe.classList.add("list-no-bullet"),re.appendChild(oe),oe.innerHTML="<li><i>Il <b><u>a teint</b></u> la lumire.</i> (He turned off the light.)</li>\n    <li><i>Je l'<b><u>ai rejoint</b></u>  la gare.</i> (I met him at the station.)</li>";var ae=document.createElement("div");ae.innerHTML='<p class="tip"><i class="fa-solid fa-exclamation-triangle"></i> Some common verbs don\'t follow the\n    patterns above:</p>',c.appendChild(ae);var se=document.createElement("table"),le=document.createElement("thead"),ce=document.createElement("tr");["Verb","Translation","Past Participle"].forEach((function(e){var t=document.createElement("th");t.textContent=e,ce.appendChild(t)})),le.appendChild(ce),se.appendChild(le);var ue=document.createElement("tbody");[["<b>avoir</b>","to have",'<b><span class="red">eu</span></b>'],["<b>tre</b>","to be",'<b><span class="red">t</span></b>'],["<b>dire</b>","to say, to tell",'<b><span class="red">dit</span></b>'],["<b>mettre</b>","to put",'<b><span class="red">mis</span></b>'],["<b>faire</b>","to do, to make",'<b><span class="red">fait</span></b>'],["<b>voir</b>","to see",'<b><span class="red">vu</span></b>'],["<b>boire</b>","to drink",'<b><span class="red">bu</span></b>'],["<b>venir</b>","to come",'<b><span class="red">venu</span></b>'],["<b>lire</b>","to read",'<b><span class="red">lu</span></b>'],["<b>connatre</b>","to know",'<b><span class="red">connu</span></b>'],["<b>courir</b>","to run",'<b><span class="red">couru</span></b>'],["<b>recevoir</b>","to receive, to get",'<b><span class="red">reu</span></b>'],["<b>devoir</b>","to have to, must",'<b><span class="red">d</span></b>'],["<b>vouloir</b>","to want",'<b><span class="red">voulu</span></b>'],["<b>pouvoir</b>","to be able to, can",'<b><span class="red">pu</span></b>'],["<b>savoir</b>","to know",'<b><span class="red">su</span></b>'],["<b>tenir</b>","to hold",'<b><span class="red">tenu</span></b>'],["<b>vivre</b>","to live",'<b><span class="red">vcu</span></b>']].forEach((function(e){var t=document.createElement("tr");e.forEach((function(e){var n=document.createElement("td");n.innerHTML=e,t.appendChild(n)})),ue.appendChild(t)})),se.appendChild(ue),c.appendChild(se),e.appendChild(c),Qu()}function od(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");t.classList.add("contentNav"),e.appendChild(t);var n=document.createElement("a");n.textContent="Verb conjugation",n.classList.add("verbConjugationLink");var r=document.createElement("span");r.classList.add("icon");var i=document.createElement("i");i.classList.add("fas","fa-chevron-right"),r.appendChild(i);var o=document.createElement("a");o.textContent="The imperfect past tense",t.appendChild(n),t.appendChild(r),t.appendChild(o);var a=document.createElement("div");a.classList.add("page-content");var s=document.createElement("h1");s.textContent='The imperfect past tense "l\'imparfait"';var l=document.createElement("h2");l.textContent="When do you use the imperfect past tense?";var c=document.createElement("div");c.classList.add("definition");var u=document.createElement("p");u.innerHTML='<i class="fa-solid fa-book-open"></i> <b>The imperfect tense "l\'imparfait"</b> \n      is a common French past tense, which is mostly used to express a habit, make a description, explain a situation, or an ongoing action in the past. ',c.appendChild(u),a.appendChild(s),a.appendChild(l),a.appendChild(c);var d=document.createElement("h3");d.textContent="Take a look at these examples:";var h=document.createElement("ul");h.classList.add("list-no-bullet"),h.innerHTML="<li><i>Je <b>lisais</b> tous les jours.</i> (I used to read every day.)</li>\n    <li><i>Avant, je <b>sortais</b> tous les soirs.</i> (I used to go out every evening.)</li>\n    <li><i>Il <b>faisait</b> froid et il y avait beaucoup de vent.</i> (It was cold and very windy.)</li>\n    <li><i>J'<b>avais</b> les cheveux courts.</i> (I used to have short hair. / I had short hair.)</li>\n    <li><i>Quelqu'un est venu pendant que je <b>dormais</b>.</i> (Someone came while I was sleeping.)</li>",a.appendChild(d),a.appendChild(h);var p=document.createElement("h2");p.textContent="To form the imperfect tense of regular verbs, follow these steps: ",a.appendChild(p);var f=document.createElement("p");f.innerHTML="Use the 'nous' form of the verb in the present tense, \nremove the '-ons' ending, and add the appropriate ending (-<b>ais</b>, -<b>ais</b>, -<b>ait</b>, -<b>ions</b>, -<b>iez</b>, -<b>aient</b>.). ";var m=document.createElement("p");m.innerHTML="For example, the verbs <b>'parler'</b> and <b>'finir'</b> have the following 'nous' forms:  \n'nous parlons' and 'nous finissons'. So in order to conjugate them with 'je' in the imperfect tense, you \nneed to remove the '-ons' ending and add '-ais', which gives: <b>'je parlais'</b> and <b>'je finissais'</b>. \nYou'll find more details in the table below.",a.appendChild(f),a.appendChild(m);var v=document.createElement("table"),g=document.createElement("thead"),b=document.createElement("tr");["SUBJECT","ENDING","EXAMPLES"].forEach((function(e){var t=document.createElement("th");t.textContent=e,b.appendChild(t)})),g.appendChild(b);var y=document.createElement("tbody");[["Je","-ais","parl<b>ais</b>, finiss<b>ais</b>"],["Tu","-ais","parl<b>ais</b>, finiss<b>ais</b>"],["Il/elle/on","-ait","parl<b>ait</b>, finiss<b>ait</b>"],["Nous","-ions","parl<b>ions</b>, finiss<b>ions</b>"],["Vous","-iez","parl<b>iez</b>, finiss<b>iez</b>"],["Ils/elles","-aient","parl<b>aient</b>, finiss<b>aient</b>"]].forEach((function(e){var t=document.createElement("tr");e.forEach((function(e){var n=document.createElement("td");n.innerHTML=e,t.appendChild(n)})),y.appendChild(t)})),v.appendChild(g),v.appendChild(y),a.appendChild(v);var _=document.createElement("div");_.classList.add("explanation"),a.appendChild(_);var w=document.createElement("p");w.innerHTML='<i class="fa-solid fa-triangle-exclamation"></i> The exception is the verb \'<b>tre</b>\', which uses the stem <b>t-</b> \ninstead of the "nous" form from the present tense:';var E=document.createElement("p");E.innerHTML="<i class='fa-solid fa-arrow-right'></i> j'<b>t</b>ais, tu <b>t</b>ais, il/elle/on <b>t</b>ait, nous <b>t</b>ions, vous <b>t</b>iez, ils/elles <b>t</b>aient. ",_.appendChild(w),_.appendChild(E);var C=document.createElement("div");C.classList.add("definition"),a.appendChild(C);var T=document.createElement("p");T.innerHTML='<i class="fa-solid fa-comment"></i> <b>Pronunciation tip</b>';var L=document.createElement("p");L.classList.add("tip"),L.innerHTML="The 'je', 'tu', 'il/elle/on' and 'ils/elles' forms have the same pronunciation, \nso 'parlais', 'parlait', 'parlaient' are pronounced the same way.",C.appendChild(T),C.appendChild(L);var I=document.createElement("h2");I.textContent="A few more exceptions and difficulties",a.appendChild(I);var k=document.createElement("h3");k.innerHTML="Verbs ending in <i>-ger</i>",a.appendChild(k);var S=document.createElement("div");a.appendChild(S);var x=document.createElement("p");x.innerHTML="Verbs ending in <b>-ger</b> have an additional \"e\" in the 'nous' form of the present tense: 'nous mang<u>e</u>ons'. \nAs this form is used to construct the imperfect tense, we keep the \"e\" (to preserve the soft \"g\" sound), except for the \n'nous' and 'vous' forms:";var P=document.createElement("p");P.innerHTML="<i class='fa-solid fa-arrow-right'></i> je/tu mang<u>e</u>ais, il/elle/on mang<u>e</u>ait, \nnous <b>mangions</b>, vous <b>mangiez</b>, ils/elles mang<u>e</u>aient.",S.appendChild(x),S.appendChild(P);var N=document.createElement("h3");N.innerHTML="Verbs ending in <i>-cer</i>",a.appendChild(N);var M=document.createElement("div");a.appendChild(M);var O=document.createElement("p");O.innerHTML='Verbs ending in <b>-cer</b> change their <i>"<b>c</b>"</i> to <i>"<b></b>"</i> (to preserve the soft "c" sound), except for the \n\'nous\' and \'vous\' forms:';var A=document.createElement("p");A.innerHTML="<i class='fa-solid fa-arrow-right'></i> je/tu commen<b></b>ais, il/elle/on commen<b></b>ait, \nnous commen<u>c</u>ions, vous commen<u>c</u>iez, ils/elles commen<b></b>aient.",M.appendChild(O),M.appendChild(A);var R=document.createElement("h3");R.innerHTML="Verbs ending in <i>-ier</i>",a.appendChild(R);var j=document.createElement("div");a.appendChild(j);var q=document.createElement("p");q.innerHTML="Verbs ending in <b>-ier</b> have a double 'i' ('ii') in the 'nous' and 'vous' forms:";var D=document.createElement("p");D.innerHTML="<i class='fa-solid fa-arrow-right'></i> j'tudiais, tu tudiais, il/elle/on tudiait, \nnous tud<u>ii</u>ons, vous tud<u>ii</u>ez, ils/elles tudiaient.",j.appendChild(q),j.appendChild(D),e.appendChild(a),Qu()}function ad(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");t.classList.add("contentNav"),e.appendChild(t);var n=document.createElement("a");n.textContent="Verb conjugation",n.classList.add("verbConjugationLink");var r=document.createElement("span");r.classList.add("icon");var i=document.createElement("i");i.classList.add("fas","fa-chevron-right"),r.appendChild(i);var o=document.createElement("a");o.textContent="The simple future tense",o.classList.add("futureTenseLink");var a=document.createElement("span");a.classList.add("icon");var s=document.createElement("i");s.classList.add("fas","fa-chevron-right"),a.appendChild(s);var l=document.createElement("a");l.textContent="Spelling changes",t.appendChild(n),t.appendChild(r),t.appendChild(o),t.appendChild(a),t.appendChild(l);var c=document.createElement("div");c.classList.add("page-content"),e.appendChild(c);var u=document.createElement("h1");u.textContent="Verbs with spelling changes";var d=document.createElement("div");d.classList.add("definition");var h=document.createElement("p");h.innerHTML='<i class="fa-solid fa-lightbulb"></i> Some French <b>-er</b> verbs change their spellings in the simple future tense.\n       Some verbs ending in <b>-eler</b> and <b>-eter</b> double the <b><i>l</i></b> or <b><i>t</i></b> in their conjugations.',d.appendChild(h),c.appendChild(u),c.appendChild(d);var p=document.createElement("p");p.textContent="Take a look at the example of the verbs 'appeler' and 'jeter':",c.appendChild(p);var f=document.createElement("table"),m=document.createElement("thead"),v=document.createElement("tr");f.appendChild(m),m.appendChild(v),["","appeler (to call)","jeter (to throw)"].forEach((function(e){var t=document.createElement("th");t.textContent=e,v.appendChild(t)}));var g=document.createElement("tbody");f.appendChild(g),[["je (j')","j'appellerai","je jetterai"],["tu","tu appelleras","tu jetteras"],["il(/elle/on)","il appellera","il jettera"],["nous","nous appellerons","nous jetterons"],["vous","vous appellerez","vous jetterez"],["ils(/elles)","ils appelleront","ils jetteront"]].forEach((function(e){var t=document.createElement("tr");g.appendChild(t),e.forEach((function(e){var n=document.createElement("td");n.textContent=e,t.appendChild(n)}))})),c.appendChild(f);var b=document.createElement("div");b.innerHTML="<p class=\"tip\"><i class=\"fa-solid fa-bolt\"></i> In some verbs like <b>lever</b> (to raise), <b>acheter</b> (to buy), \n    and <b>peser</b> (to weigh), the first 'e' changes to <b>''</b></p>",c.appendChild(b);var y=document.createElement("table"),_=document.createElement("thead"),w=document.createElement("tr");["","lever","acheter","peser"].forEach((function(e){var t=document.createElement("th");t.textContent=e,w.appendChild(t)})),_.appendChild(w);var E=document.createElement("tbody");[["je (j')","je lverai","j'achterai","je pserai"],["tu","tu lveras","tu achteras","tu pseras"],["il (/elle/on)","il lvera","il achtera","il psera"],["nous","nous lverons","nous achterons","nous pserons"],["vous","vous lverez","vous achterez","vous pserez"],["ils (/elles)","ils lveront","ils achteront","ils pseront"]].forEach((function(e){var t=document.createElement("tr");e.forEach((function(e){var n=document.createElement("td");n.textContent=e,t.appendChild(n)})),E.appendChild(t)})),y.appendChild(_),y.appendChild(E),c.appendChild(y),e.appendChild(c),Qu()}function sd(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");t.classList.add("contentNav"),e.appendChild(t);var n=document.createElement("a");n.textContent="Verb conjugation",n.classList.add("verbConjugationLink");var r=document.createElement("span");r.classList.add("icon");var i=document.createElement("i");i.classList.add("fas","fa-chevron-right"),r.appendChild(i);var o=document.createElement("a");o.textContent="The simple future tense",o.classList.add("futureTenseLink");var a=document.createElement("span");a.classList.add("icon");var s=document.createElement("i");s.classList.add("fas","fa-chevron-right"),a.appendChild(s);var l=document.createElement("a");l.textContent="Exceptions",t.appendChild(n),t.appendChild(r),t.appendChild(o),t.appendChild(a),t.appendChild(l);var c=document.createElement("div");c.classList.add("page-content"),e.appendChild(c);var u=document.createElement("h1");u.textContent="Exceptions";var d=document.createElement("div");d.classList.add("definition");var h=document.createElement("p");h.innerHTML='<i class="fa-solid fa-lightbulb"></i> Some French verbs like <b>avoir</b> <i>(to have)</i>, <b>tre</b> <i>(to be)</i>, \n      <b>aller</b> <i>(to go)</i>, and <b>faire</b> <i>(to do/make)</i> change their stem in the future simple tense, \n      though they use the same set of endings as regular verbs.',d.appendChild(h),c.appendChild(u),c.appendChild(d);var p=document.createElement("p");p.textContent="In the table below, you'll find the conjugations of these 4 irregular verbs in the future tense.",c.appendChild(p);var f=document.createElement("table"),m=document.createElement("thead"),v=document.createElement("tr");["","avoir","tre","aller","faire"].forEach((function(e){var t=document.createElement("th");t.textContent=e,v.appendChild(t)})),m.appendChild(v);var g=document.createElement("tbody");[["je / j'","j'<b>aur</b>ai","je <b>ser</b>ai","j'<b>ir</b>ai","je <b>fer</b>ai"],["tu","tu <b>aur</b>as","tu <b>ser</b>as","tu <b>ir</b>as","tu <b>fer</b>as"],["il (/elle/on)","il <b>aur</b>a","il <b>ser</b>a","il <b>ir</b>a","il <b>fer</b>a"],["nous","nous <b>aur</b>ons","nous <b>ser</b>ons","nous <b>ir</b>ons","nous <b>fer</b>ons"],["vous","vous <b>aur</b>ez","vous <b>ser</b>ez","vous <b>ir</b>ez","vous <b>fer</b>ez"],["ils (/elles)","ils <b>aur</b>ont","ils <b>ser</b>ont","ils <b>ir</b>ont","ils <b>fer</b>ont"]].forEach((function(e){var t=document.createElement("tr");e.forEach((function(e){var n=document.createElement("td");n.innerHTML=e,t.appendChild(n)})),g.appendChild(t)})),f.appendChild(m),f.appendChild(g),c.appendChild(f);var b=document.createElement("div");b.classList.add("examples");var y=document.createElement("p");y.textContent="Here are a few examples:";var _=document.createElement("p");_.innerHTML="<i>J'<b>aurai</b> trois enfants.</i> (I <b>will have</b> three children.)";var w=document.createElement("p");w.innerHTML="<i>Tu <b>seras</b> due. </i> (You'<b>ll be</b> disappointed)";var E=document.createElement("p");E.innerHTML="<i>Elle <b>ira</b> en Italie l'anne prochaine.</i> (She <b>will go</b> to Italy next year.)";var C=document.createElement("p");C.innerHTML="<i>Ils feront du tennis.</i> (They <b>will play</b> tennis.)",b.appendChild(y),b.appendChild(_),b.appendChild(w),b.appendChild(E),b.appendChild(C),c.appendChild(b);var T=document.createElement("h3");T.innerHTML="Here are some more common verbs that change their stem in the future tense with 3 forms (<i>je</i>, <i>tu</i>, and <i>il</i>) as examples.",c.appendChild(T);var L=document.createElement("table"),I=document.createElement("thead"),k=document.createElement("tr");["verb","je / j'","tu","il (/elle/on)"].forEach((function(e){var t=document.createElement("th");t.textContent=e,k.appendChild(t)})),I.appendChild(k);var S=document.createElement("tbody");[["venir","je <b>viendr</b>ai","tu <b>viendr</b>as","il <b>viendr</b>a"],["voir","je <b>verr</b>ai","tu <b>verr</b>as","il <b>verr</b>a"],["pouvoir","je <b>pourr</b>ai","tu <b>pourr</b>as","il <b>pourr</b>a"],["devoir","je <b>devr</b>ai","tu <b>devr</b>as","il <b>devr</b>a"],["vouloir","je <b>voudr</b>ai","tu <b>voudr</b>as","il <b>voudr</b>a"],["recevoir","je <b>recevr</b>ai","tu <b>recevr</b>as","il <b>recevr</b>a"],["envoyer","j'<b>enverr</b>ai","tu <b>enverr</b>as","il <b>enverr</b>a"],["savoir","je <b>saur</b>ai","tu <b>saur</b>as","il <b>saur</b>a"],["valoir","je <b>vaudr</b>ai","tu <b>vaudr</b>as","il <b>vaudr</b>a"],["tenir","je <b>tiendr</b>ai","tu <b>tiendr</b>as","il <b>tiendr</b>a"],["falloir","-","-","il <b>faudr</b>a"],["pleuvoir","-","-","il <b>pleuvr</b>a"]].forEach((function(e){var t=document.createElement("tr");e.forEach((function(e){var n=document.createElement("td");n.innerHTML=e,t.appendChild(n)})),S.appendChild(t)})),L.appendChild(I),L.appendChild(S),c.appendChild(L),e.appendChild(c),Qu()}function ld(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");t.classList.add("contentNav"),e.appendChild(t);var n=document.createElement("a");n.textContent="Verb conjugation",n.classList.add("verbConjugationLink");var r=document.createElement("span");r.classList.add("icon");var i=document.createElement("i");i.classList.add("fas","fa-chevron-right"),r.appendChild(i);var o=document.createElement("a");o.textContent="The French subjunctive",o.classList.add("subjunctiveLink");var a=document.createElement("span");a.classList.add("icon");var s=document.createElement("i");s.classList.add("fas","fa-chevron-right"),a.appendChild(s);var l=document.createElement("a");l.textContent="The structure",t.appendChild(n),t.appendChild(r),t.appendChild(o),t.appendChild(a),t.appendChild(l);var c=document.createElement("div");c.classList.add("page-content");var u=document.createElement("h1");u.textContent="Conjugating a verb in the present subjunctive",c.appendChild(u);var d=document.createElement("div");d.classList.add("conjugation");var h=document.createElement("h2");h.textContent="To conjugate a verb in the present subjunctive:",d.appendChild(h);var p=document.createElement("p");p.innerHTML="For <b>je, tu, il/elle/on, ils/elles</b>, remove the ending from the 3rd person plural present \n    (indicative) tense (ils/elles form) and add the subjunctive endings (<b>-e, -es, -e, -ent</b>). \n\n    For example, the present (indicative) conjugation of the verb <b>'venir'</b> (to come) for 'ils/elles' is 'ils <u>viennent</u>', \n    so by removing the '-ent' ending and adding the subjunctive endings, we'll get the present subjunctive conjugations: \n    <i>que je <b>vienne</b>, que tu <b>viennes</b>, qu'il <b>vienne</b>, qu'ils <b>viennent</b>.</i>",d.appendChild(p);var f=document.createElement("p");f.innerHTML="<b>For nous and vous forms</b>, remove the ending from the 1st person plural present indicative (nous form) and add the subjunctive endings (<b>-ions, -iez</b>): so the regular present conjugation nous venons transforms to the subjunctive forms <i>que <b>nous venions</b></i>, <i>que <b>vous veniez</b></i>.",d.appendChild(f);var m=document.createElement("h3");m.textContent="Examples of Conjugation:",d.appendChild(m),c.appendChild(d);var v=document.createElement("table"),g=document.createElement("thead"),b=document.createElement("tr");["","venir","finir","donner"].forEach((function(e){var t=document.createElement("th");t.textContent=e,b.appendChild(t)})),g.appendChild(b);var y=document.createElement("tbody");[["je","que je vienne","que je finisse","que je donne"],["tu","que tu viennes","que tu finisses","que tu donnes"],["il/elle/on","qu'il vienne","qu'il finisse","qu'il donne"],["nous","que nous venions","que nous finissions","que nous donnions"],["vous","que vous veniez","que vous finissiez","que vous donniez"],["ils/elles","qu'ils viennent","qu'ils finissent","qu'ils donnent"]].forEach((function(e){var t=document.createElement("tr");e.forEach((function(e){var n=document.createElement("td");n.innerHTML=e,t.appendChild(n)})),y.appendChild(t)})),v.appendChild(g),v.appendChild(y),c.appendChild(v),e.appendChild(c),Qu()}function cd(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");t.classList.add("contentNav"),e.appendChild(t);var n=document.createElement("a");n.textContent="Verb conjugation",n.classList.add("verbConjugationLink");var r=document.createElement("span");r.classList.add("icon");var i=document.createElement("i");i.classList.add("fas","fa-chevron-right"),r.appendChild(i);var o=document.createElement("a");o.textContent="The French subjunctive",o.classList.add("subjunctiveLink");var a=document.createElement("span");a.classList.add("icon");var s=document.createElement("i");s.classList.add("fas","fa-chevron-right"),a.appendChild(s);var l=document.createElement("a");l.textContent="Irregular verbs",t.appendChild(n),t.appendChild(r),t.appendChild(o),t.appendChild(a),t.appendChild(l);var c=document.createElement("div");c.classList.add("page-content");var u=document.createElement("h1");u.textContent="Irregular verbs",c.appendChild(u);var d=document.createElement("div");d.classList.add("conjugation");var h=document.createElement("p");h.innerHTML="Some irregular verbs and their subjunctive forms include <b>avoir</b> (to have), <b>tre</b> (to be),\n    <b>faire</b> (to do/make), <b>aller</b> (to go), <b>savoir</b> (to know), <b>pouvoir</b> (to be able to), <b>vouloir</b> (to want), and <b>pleuvoir</b> (to rain). \n    You'll find the conjugations of these verbs in the present subjunctive in the tables below.",d.appendChild(h),c.appendChild(d);var p=document.createElement("div"),f=document.createElement("div");p.classList.add("table-container"),f.classList.add("table-container");var m=document.createElement("table"),v=document.createElement("table"),g=document.createElement("thead"),b=document.createElement("tr");["","avoir","tre","faire","aller"].forEach((function(e){var t=document.createElement("th");t.textContent=e,b.appendChild(t)})),g.appendChild(b);var y=document.createElement("tbody");[["je","que j'aie","que je sois","que je fasse","que j'aille"],["tu","que tu aies","que tu sois","que tu fasses","que tu ailles"],["il/elle/on","qu'il ait","qu'il soit","qu'il fasse","qu'il aille"],["nous","que nous ayons","que nous soyons","que nous fassions","que nous allions"],["vous","que vous ayez","que vous soyez","que vous fassiez","que vous alliez"],["ils/elles","qu'ils aient","qu'elles soient","qu'ils fassent","qu'ils aillent"]].forEach((function(e){var t=document.createElement("tr");e.forEach((function(e){var n=document.createElement("td");n.innerHTML=e,t.appendChild(n)})),y.appendChild(t)})),m.appendChild(g),m.appendChild(y);var _=document.createElement("thead"),w=document.createElement("tr");["","savoir","pouvoir","vouloir","pleuvoir"].forEach((function(e){var t=document.createElement("th");t.textContent=e,w.appendChild(t)})),_.appendChild(w);var E=document.createElement("tbody");[["je","que je sache","que je puisse","que je veuille"," "],["tu","que tu saches","que tu puisses","que tu veuilles"," "],["il/elle/on","qu'il sache","qu'il puisse","qu'il veuille","quil pleuve"],["nous","que nous sachions","que nous puissions","que nous voulions"," "],["vous","que vous sachiez","que vous puissiez","que vous vouliez"," "],["ils/elles","qu'ils sachent","qu'ils puissent","qu'ils veuillent"," "]].forEach((function(e){var t=document.createElement("tr");e.forEach((function(e){var n=document.createElement("td");n.innerHTML=e,t.appendChild(n)})),E.appendChild(t)})),v.appendChild(_),v.appendChild(E),p.appendChild(m),f.appendChild(v),c.appendChild(p),c.appendChild(f),e.appendChild(c),Qu()}function ud(e,t){var n=document.querySelector(".content-area");n.innerHTML="";var r=document.createElement("div");r.classList.add("menu"),n.appendChild(r);var i=document.createElement("h1");i.textContent="Learn the fundamentals of verb conjugation";var o=document.createElement("div");o.classList.add("intro-menu"),o.innerHTML="<i class='fa-solid fa-plane-departure'></i>Introduction to\nverb conjugation",r.appendChild(i),r.appendChild(o);var a=document.createElement("div");a.classList.add("present-container"),r.appendChild(a);var s=document.createElement("div");s.classList.add("present-menu"),a.appendChild(s);var l=document.createElement("div");l.classList.add("present-line"),s.appendChild(l),l.innerHTML="<i class='fa-regular fa-calendar-check'></i>The Present Tense";var c=document.createElement("i");c.classList.add("fa-solid","fa-square-plus"),s.appendChild(c);var u=document.createElement("div");u.classList.add("present-subcontainer"),u.style.display="none",a.appendChild(u);var d=document.createElement("div");d.classList.add("present-submenu","present-intro"),d.innerHTML='<i\n  class="fa-solid fa-circle-chevron-right"></i>Introduction';var h=document.createElement("div");h.classList.add("present-submenu","present-group1"),h.innerHTML='<i\n  class="fa-solid fa-circle-chevron-right"></i>Group 1';var p=document.createElement("div");p.classList.add("present-submenu","present-group2"),p.innerHTML='<i\n  class="fa-solid fa-circle-chevron-right"></i>Group 2';var f=document.createElement("div");f.classList.add("present-submenu","present-group3"),f.innerHTML=e&&"active"===t?'<i class="fa-solid fa-circle-chevron-right"></i>Group 3':'<i class="fa-solid fa-lock"></i>Group 3';var m=document.createElement("div");m.classList.add("present-submenu","present-irregular"),m.innerHTML=e&&"active"===t?'<i class="fa-solid fa-circle-chevron-right"></i>Irregular Verbs':'<i class="fa-solid fa-lock"></i>Irregular Verbs',u.appendChild(d),u.appendChild(h),u.appendChild(p),u.appendChild(f),u.appendChild(m);var v=document.createElement("div");v.classList.add("imperfect-menu"),v.innerHTML=e&&"active"===t?"<i class='fa-solid fa-house'></i>The imperfect past tense":"<i class='fa-solid fa-lock'></i>The imperfect past tense",r.appendChild(v);var g=document.createElement("div");g.classList.add("past-container"),r.appendChild(g);var b=document.createElement("div");b.classList.add("past-menu"),g.appendChild(b);var y=document.createElement("div");if(y.classList.add("past-line"),b.appendChild(y),e&&"active"===t){y.innerHTML="<i class='fas fa-compass'></i>The Past Tense \"Pass compos\"";var _=document.createElement("i");_.classList.add("fa-solid","fa-square-plus"),b.appendChild(_)}else y.innerHTML="<i class='fa-solid fa-lock'></i>The Past Tense \"Pass compos\"";var w=document.createElement("div");w.classList.add("past-subcontainer"),w.style.display="none",g.appendChild(w);var E=document.createElement("div");E.classList.add("past-submenu","past-intro"),E.innerHTML='<i\n  class="fa-solid fa-circle-chevron-right"></i>Introduction';var C=document.createElement("div");C.classList.add("past-submenu","past-aux"),C.innerHTML="<i\n  class=\"fa-solid fa-circle-chevron-right\"></i>'Avoir' VS 'tre'";var T=document.createElement("div");T.classList.add("past-submenu","past-participle"),T.innerHTML='<i\n  class="fa-solid fa-circle-chevron-right"></i>The past participle',w.appendChild(E),w.appendChild(C),w.appendChild(T);var L=document.createElement("div");L.classList.add("future-container"),r.appendChild(L);var I=document.createElement("div");I.classList.add("future-menu"),L.appendChild(I);var k=document.createElement("div");if(k.classList.add("future-line"),I.appendChild(k),e&&"active"===t){k.innerHTML='<i class="fa-solid fa-chess-rook"></i>The simple future tense (le futur simple)';var S=document.createElement("i");S.classList.add("fa-solid","fa-square-plus"),I.appendChild(S)}else k.innerHTML="<i class='fa-solid fa-lock'></i>The simple future tense (le futur simple)";var x=document.createElement("div");x.classList.add("future-subcontainer"),x.style.display="none",L.appendChild(x);var P=document.createElement("div");P.classList.add("future-submenu","future-intro"),P.innerHTML='<i\n  class="fa-solid fa-circle-chevron-right"></i>Introduction';var N=document.createElement("div");N.classList.add("future-submenu","furure-spelling"),N.innerHTML='<i\n  class="fa-solid fa-circle-chevron-right"></i> Spelling changes';var M=document.createElement("div");M.classList.add("future-submenu","furure-exceptions"),M.innerHTML='<i\n  class="fa-solid fa-circle-chevron-right"></i> Exceptions',x.appendChild(P),x.appendChild(N),x.appendChild(M);var O=document.createElement("div");O.classList.add("sunjunctive-container"),r.appendChild(O);var A=document.createElement("div");A.classList.add("subjunctive-menu"),O.appendChild(A);var R=document.createElement("div");if(R.classList.add("subjunctive-line"),A.appendChild(R),e&&"active"===t){R.innerHTML='<i class="fa-solid fa-mountain"></i>The French subjunctive (le subjonctif)</div>';var j=document.createElement("i");j.classList.add("fa-solid","fa-square-plus"),A.appendChild(j)}else R.innerHTML='<i class="fa-solid fa-lock"></i>The French subjunctive (le subjonctif)';var q=document.createElement("div");q.classList.add("subjunctive-subcontainer"),q.style.display="none",O.appendChild(q);var D=document.createElement("div");D.classList.add("subjunctive-submenu","subjunctive-intro"),D.innerHTML='<i\n  class="fa-solid fa-circle-chevron-right"></i>Introduction';var H=document.createElement("div");H.classList.add("subjunctive-submenu","subjunctive-structure"),H.innerHTML='<i\n  class="fa-solid fa-circle-chevron-right"></i> The structure';var F=document.createElement("div");F.classList.add("subjunctive-submenu","subjunctive-exceptions"),F.innerHTML='<i\n  class="fa-solid fa-circle-chevron-right"></i> Exceptions',q.appendChild(D),q.appendChild(H),q.appendChild(F),function(e,t){var n=document.querySelector(".present-menu"),r=document.querySelector(".present-subcontainer"),i=document.querySelector(".past-menu"),o=document.querySelector(".past-subcontainer"),a=document.querySelector(".future-menu"),s=document.querySelector(".future-subcontainer"),l=document.querySelector(".subjunctive-menu"),c=document.querySelector(".subjunctive-subcontainer");n.addEventListener("click",(function(){"none"===r.style.display?(r.style.display="block",n.innerHTML="<div class='present-line'><i class='fa-regular fa-calendar-check'></i>\n    The Present Tense</div> <i class='fa-solid fa-circle-chevron-up'></i>\n</div>"):(r.style.display="none",n.innerHTML='<div class="present-line"><i class="fa-regular fa-calendar-check"></i>\n    The Present Tense</div> <i class="fa-solid fa-square-plus"></i>\n</div>')})),e&&"active"===t&&i.addEventListener("click",(function(){"none"===o.style.display?(o.style.display="block",i.innerHTML="<div class='past-line'><i class='fa-regular fa-compass'></i>\n      The Past Tense \"Pass compos\"</div> <i class='fa-solid fa-circle-chevron-up'></i>\n  </div>"):(o.style.display="none",i.innerHTML='<div class="past-line"><i class="fa-regular fa-compass"></i>\n      The Past Tense "Pass compos"</div> <i class="fa-solid fa-square-plus"></i>\n  </div>')})),e&&"active"===t&&a.addEventListener("click",(function(){"none"===s.style.display?(s.style.display="block",a.innerHTML="<div class='future-line'><i class=\"fa-solid fa-chess-rook\"></i>\n      The simple future tense (le futur simple)</div> <i class='fa-solid fa-circle-chevron-up'></i>\n  </div>"):(s.style.display="none",a.innerHTML='<div class="future-line"><i class="fa-solid fa-chess-rook"></i>\n      The simple future tense (le futur simple)</div> <i class="fa-solid fa-square-plus"></i>\n  </div>')})),e&&"active"===t&&l.addEventListener("click",(function(){"none"===c.style.display?(c.style.display="block",l.innerHTML="<div class='subjunctive-line'><i class=\"fa-solid fa-mountain\"></i>\n      The French subjunctive (le subjonctif)</div> <i class='fa-solid fa-circle-chevron-up'></i>\n  </div>"):(c.style.display="none",l.innerHTML='<div class="subjunctive-line"><i class="fa-solid fa-mountain"></i>\n      The French subjunctive (le subjonctif)</div> <i class="fa-solid fa-square-plus"></i>\n  </div>')}))}(e,t),o.addEventListener("click",Xu),d.addEventListener("click",zu),h.addEventListener("click",Zu),p.addEventListener("click",ed),e&&"active"===t&&f.addEventListener("click",td),e&&"active"===t&&m.addEventListener("click",nd),e&&"active"===t&&E.addEventListener("click",Wu),C.addEventListener("click",rd),T.addEventListener("click",id),e&&"active"===t&&v.addEventListener("click",od),P.addEventListener("click",Bu),N.addEventListener("click",ad),M.addEventListener("click",sd),D.addEventListener("click",Yu),H.addEventListener("click",ld),F.addEventListener("click",cd)}function dd(e){return dd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dd(e)}function hd(){hd=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:I(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",v={};function g(){}function b(){}function y(){}var _={};c(_,a,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(N([])));E&&E!==n&&r.call(E,a)&&(_=E);var C=y.prototype=g.prototype=Object.create(_);function T(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(i,o,a,s){var l=d(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==dd(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function I(t,n,r){var i=h;return function(o,a){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=k(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var c=d(t,n,r);if("normal"===c.type){if(i=r.done?m:p,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function k(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(dd(t)+" is not iterable")}return b.prototype=y,i(C,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:b,configurable:!0}),b.displayName=c(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,l,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},T(L.prototype),c(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new L(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(C),c(C,l,"Generator"),c(C,a,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function pd(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function fd(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){pd(o,r,i,a,s,"next",e)}function s(e){pd(o,r,i,a,s,"throw",e)}a(void 0)}))}}function md(e){return md="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},md(e)}function vd(){vd=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:I(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",v={};function g(){}function b(){}function y(){}var _={};c(_,a,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(N([])));E&&E!==n&&r.call(E,a)&&(_=E);var C=y.prototype=g.prototype=Object.create(_);function T(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(i,o,a,s){var l=d(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==md(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function I(t,n,r){var i=h;return function(o,a){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=k(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var c=d(t,n,r);if("normal"===c.type){if(i=r.done?m:p,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function k(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(md(t)+" is not iterable")}return b.prototype=y,i(C,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:b,configurable:!0}),b.displayName=c(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,l,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},T(L.prototype),c(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new L(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(C),c(C,l,"Generator"),c(C,a,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function gd(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function bd(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){gd(o,r,i,a,s,"next",e)}function s(e){gd(o,r,i,a,s,"throw",e)}a(void 0)}))}}function yd(){return yd=bd(vd().mark((function e(){var t,n;return vd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yc();case 2:t=e.sent,_i(n=t.app),Bc=Dc(n);case 6:case"end":return e.stop()}}),e)}))),yd.apply(this,arguments)}function _d(){return(_d=bd(vd().mark((function e(){var t,n,r,i,o,a,s,l,c,u,d;return vd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tu();case 2:if(t=e.sent,n=t.subStatus,!(r=t.userId)||"active"!==n){e.next=14;break}return i=Sc(Bc,"users/"+r+"/data//stats"),e.next=9,_u(i);case 9:o=e.sent,wd(),Mu(o),e.next=36;break;case 14:(a=document.querySelector(".content-area")).innerHTML="",(s=document.createElement("div")).classList.add("premiumStatsContainer"),a.appendChild(s),(l=document.createElement("h1")).classList.add("premiumStatsH1"),s.appendChild(l),l.innerHTML="<i class='fa-regular fa-gem'></i> This is a premium feature",c=document.createElement("div"),s.appendChild(c),c.classList.add("premiumStatsMessage"),c.innerHTML="<p>Subscribe to follow your progress, practise more verbs and take advantage of our Smart Repetition \n      System!</p><p>Log in if you already have a premium account.</p>",(u=document.createElement("div")).classList.add("subscribeSection"),s.appendChild(u),(d=document.createElement("button")).id="noSubsubscribeBtn",d.setAttribute("type","submit"),d.innerText="Subscribe",u.appendChild(d),ru();case 36:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wd(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");e.appendChild(t),t.classList.add("chart");var n=document.createElement("h1");t.appendChild(n),n.innerHTML="<i class='fa-solid fa-square-poll-vertical'></i> Your weekly performance";var r=document.createElement("canvas");t.appendChild(r),r.setAttribute("id","myChart")}function Ed(e,t){var n=document.querySelector(".content-area");n.innerHTML="";var r=document.createElement("div");r.classList.add("bonus-menu"),n.appendChild(r);var i,o=document.createElement("h1");o.textContent="Earn bonuses by using the app regularly",r.appendChild(o),e||(i=localStorage.getItem("streak"),console.log("Bonus section, streak: ",i));var a=document.createElement("div");r.appendChild(a);var s=document.createElement("div");s.classList.add("bonus1Menu"),a.appendChild(s);var l=document.createElement("div");s.appendChild(l),l.innerHTML='<i class="fa-solid fa-book"></i>Bonus 1: Conjugation guide';var c=document.createElement("i");c.classList.add("fa-solid","fa-square-plus"),s.appendChild(c);var u=document.createElement("div");u.classList.add("bonus-subcontainer","bonus1-subcontainer"),u.style.display="none",a.appendChild(u);var d=document.createElement("div");d.classList.add("bonus-intro");var h=document.createElement("div");if(e&&"active"===t||i>=3){h.innerHTML='<i class="fa-solid fa-circle-chevron-right"></i>\n      Your bonus is ready now!';var p=document.createElement("div");p.classList.add("bonus1Btn"),p.textContent="download",d.appendChild(h),d.appendChild(p),p.addEventListener("click",(function(e){e.preventDefault();var t=document.createElement("a");t.href="../public/conjugation-guide.pdf",t.setAttribute("download",""),document.body.appendChild(t),t.click(),document.body.removeChild(t)}))}else h.innerHTML='<i\n      class="fa-solid fa-lock"></i>Achieve a 3-day streak or become Premium to access it now',d.appendChild(h);u.appendChild(d);var f=document.createElement("div");r.appendChild(f);var m=document.createElement("div");m.classList.add("bonus2Menu"),f.appendChild(m);var v=document.createElement("div");m.appendChild(v),v.innerHTML="<i class='fa-solid fa-chart-line'></i>Bonus 2: 15 of the most common French verbs.";var g=document.createElement("i");g.classList.add("fa-solid","fa-square-plus"),m.appendChild(g);var b=document.createElement("div");b.classList.add("bonus-subcontainer","bonus2-subcontainer"),b.style.display="none",f.appendChild(b);var y=document.createElement("div");y.classList.add("bonus-intro");var _=document.createElement("div");if(e&&"active"===t||i>=7){_.innerHTML='<i class="fa-solid fa-circle-chevron-right"></i>\n      Your bonus is ready now!';var w=document.createElement("div");w.classList.add("bonus2Btn"),w.textContent="download",y.appendChild(_),y.appendChild(w),w.addEventListener("click",(function(e){e.preventDefault();var t=document.createElement("a");t.href="../public/15-verbs.pdf",t.setAttribute("download",""),document.body.appendChild(t),t.click(),document.body.removeChild(t)}))}else _.innerHTML='<i\n      class="fa-solid fa-lock"></i>Achieve a 7-day streak or become Premium to access it now',y.appendChild(_);b.appendChild(y),function(e,t){var n=document.querySelector(".bonus1Menu"),r=document.querySelector(".bonus1-subcontainer"),i=document.querySelector(".bonus2Menu"),o=document.querySelector(".bonus2-subcontainer");n.addEventListener("click",(function(){"none"===r.style.display?(r.style.display="block",n.innerHTML="<div><i class=\"fa-solid fa-book\"></i>Bonus 1: Conjugation guide</div>\n          <i class='fa-solid fa-circle-chevron-up'></i>"):(r.style.display="none",n.innerHTML='<div><i class="fa-solid fa-book"></i>Bonus 1: Conjugation guide</div>\n          <i class="fa-solid fa-square-plus"></i>')})),i.addEventListener("click",(function(){"none"===o.style.display?(o.style.display="block",i.innerHTML="<div><i class='fa-solid fa-chart-line'></i>Bonus 2: 15 of the most common French verbs.</div>\n        <i class='fa-solid fa-circle-chevron-up'></i>"):(o.style.display="none",i.innerHTML="<div><i class='fa-solid fa-chart-line'></i>Bonus 2: 15 of the most common French verbs.</div>\n        <i class=\"fa-solid fa-square-plus\"></i>")}))}()}function Cd(e){return Cd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cd(e)}function Td(){Td=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:I(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",v={};function g(){}function b(){}function y(){}var _={};c(_,a,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(N([])));E&&E!==n&&r.call(E,a)&&(_=E);var C=y.prototype=g.prototype=Object.create(_);function T(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(i,o,a,s){var l=d(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==Cd(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function I(t,n,r){var i=h;return function(o,a){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=k(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var c=d(t,n,r);if("normal"===c.type){if(i=r.done?m:p,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function k(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Cd(t)+" is not iterable")}return b.prototype=y,i(C,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:b,configurable:!0}),b.displayName=c(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,l,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},T(L.prototype),c(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new L(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(C),c(C,l,"Generator"),c(C,a,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Ld(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function Id(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Ld(o,r,i,a,s,"next",e)}function s(e){Ld(o,r,i,a,s,"throw",e)}a(void 0)}))}}function kd(e,t,n){var r=new Date;r.setHours(0,0,0,0);var i,o=document.querySelector(".streak p");if(e){var a=parseInt(e);(i=r.getTime()-a)/864e5<1?console.log("same date","dayDiff: ",i/864e5):i/864e5<2?(t++,o.textContent=t,n[n.length-1].streak=t,n[n.length-1].timestamp=r.getTime(),console.log("1 day difference")):(t=1,o.textContent=t,n[n.length-1].streak=t,n[n.length-1].timestamp=r.getTime(),console.log("more than 1 day difference"))}else t=1,o.textContent=t,n[n.length-1].streak=t,n[n.length-1].timestamp=r.getTime();return console.log(t),t}function Sd(e){var t=new Date;t.setHours(0,0,0,0);var n,r=document.querySelector(".streak p"),i=localStorage.getItem("streakLastChangeTime");if(i){var o=parseInt(i);(n=t.getTime()-o)/864e5<1?console.log("same date","dayDiff: ",n/864e5):n/864e5<2?(e++,r.textContent=e,localStorage.setItem("streakLastChangeTime",t.getTime().toString()),localStorage.setItem("streak",e),console.log("1 day difference")):(e=1,r.textContent=e,localStorage.setItem("streakLastChangeTime",t.getTime().toString()),localStorage.setItem("streak",e),console.log("more than 1 day difference"))}else e=1,r.textContent=e,localStorage.setItem("streakLastChangeTime",t.getTime().toString()),localStorage.setItem("streak",e);return console.log(e),e}function xd(e,t,n,r){for(var i=e.data[0].tenseShort,o=function(){var e="box"+(a+1);Pc(Sc(r,"users/"+n+"/data/"+i+"/"+e),t[a]).then((function(){console.log("Box "+e+" added successfully do DB")})).catch((function(t){console.error("Error adding the box "+e+" : ",t)}))},a=0;a<t.length;a++)o()}function Pd(e,t,n,r,i){for(var o,a=new Date,s=r.length,l=0,c=0;c<s;c++)(r[c].isCorrect||r[c].almostCorrectCorrect)&&l++;var u=new Date(null===(o=n[n.length-1])||void 0===o?void 0:o.timestamp);if(u.getDate()===a.getDate()&&u.getMonth()===a.getMonth()&&u.getFullYear()===a.getFullYear())console.log("the dates are equal"),n[n.length-1].nbOfPhrPractised+=s,n[n.length-1].nbOfCorrectPhr+=l;else{var d={timestamp:a.getTime(),nbOfPhrPractised:s,nbOfCorrectPhr:l,streak:i};n.push(d)}Pc(Sc(t,"users/"+e+"/data//stats"),n).then((function(){console.log("Stats added successfully do DB")})).catch((function(e){console.error("Error adding the stats ",e)}))}function Nd(e){return Nd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nd(e)}function Md(){Md=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:I(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",v={};function g(){}function b(){}function y(){}var _={};c(_,a,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(N([])));E&&E!==n&&r.call(E,a)&&(_=E);var C=y.prototype=g.prototype=Object.create(_);function T(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(i,o,a,s){var l=d(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==Nd(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function I(t,n,r){var i=h;return function(o,a){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=k(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var c=d(t,n,r);if("normal"===c.type){if(i=r.done?m:p,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function k(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Nd(t)+" is not iterable")}return b.prototype=y,i(C,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:b,configurable:!0}),b.displayName=c(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,l,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},T(L.prototype),c(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new L(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(C),c(C,l,"Generator"),c(C,a,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Od(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function Ad(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("form");t.classList.add("signUpForm"),e.appendChild(t);var n=document.createElement("h1");n.innerText="Sign up",t.appendChild(n);var r=document.createElement("section");t.appendChild(r);var i=document.createElement("p");r.appendChild(i);var o=document.createElement("label");i.appendChild(o),o.htmlFor="name",o.innerText="Name:";var a=document.createElement("input");a.setAttribute("type","text"),a.setAttribute("id","name"),a.setAttribute("required",!0),i.appendChild(a);var s=document.createElement("p");r.appendChild(s);var l=document.createElement("label");s.appendChild(l),l.htmlFor="signUpEmail",l.innerText="Email:";var c=document.createElement("input");c.setAttribute("type","email"),c.setAttribute("id","signUpEmail"),c.setAttribute("required",!0),s.appendChild(c);var u=document.createElement("p");r.appendChild(u);var d=document.createElement("label");u.appendChild(d),d.htmlFor="signUpPassword",d.innerText="Password:";var h=document.createElement("input");h.setAttribute("type","password"),h.setAttribute("id","signUpPassword"),h.setAttribute("required",!0),u.appendChild(h);var p=document.createElement("p");r.appendChild(p),p.classList.add("signUpErrorMsg");var f=document.createElement("section");t.appendChild(f),f.classList.add("btn-section");var m=document.createElement("p");f.appendChild(m);var v=document.createElement("button");v.setAttribute("type","submit"),v.setAttribute("id","signUpButton"),v.innerText="Sign Up",m.appendChild(v);var g=document.createElement("section");t.appendChild(g),g.classList.add("switch-section");var b=document.createElement("p");b.innerText="Already have an account?",g.appendChild(b);var y=document.createElement("p");g.appendChild(y);var _=document.createElement("a");_.setAttribute("id","logInSwitch"),_.innerText="Log in",y.appendChild(_)}function Rd(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("form");t.classList.add("logInForm"),e.appendChild(t);var n=document.createElement("h1");n.innerText="Log in",t.appendChild(n);var r=document.createElement("section");r.setAttribute("id","userInfo"),t.appendChild(r);var i=document.createElement("p");r.appendChild(i);var o=document.createElement("label");i.appendChild(o),o.htmlFor="logInEmail",o.innerText="Email:";var a=document.createElement("input");a.setAttribute("type","email"),a.setAttribute("id","logInEmail"),a.setAttribute("required",!0),i.appendChild(a);var s=document.createElement("p");r.appendChild(s);var l=document.createElement("label");s.appendChild(l),l.htmlFor="logInPassword",l.innerText="Password:";var c=document.createElement("input");c.setAttribute("type","password"),c.setAttribute("id","logInPassword"),c.setAttribute("required",!0),s.appendChild(c);var u=document.createElement("p");r.appendChild(u),u.classList.add("logInErrorMsg");var d=document.createElement("section");t.appendChild(d),d.classList.add("btn-section");var h=document.createElement("p");d.appendChild(h);var p=document.createElement("button");p.setAttribute("type","submit"),p.setAttribute("id","logInButton"),p.innerText="Log in",h.appendChild(p);var f=document.createElement("section");t.appendChild(f),f.classList.add("switch-section");var m=document.createElement("p");m.innerText="Don't have an account yet?",f.appendChild(m);var v=document.createElement("p");f.appendChild(v);var g=document.createElement("a");g.setAttribute("id","signUpSwitch"),g.innerText="Sign up",v.appendChild(g);var b=document.createElement("a");b.setAttribute("id","forgotPass"),b.innerText="Forgot your password?",f.appendChild(b)}function jd(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("form");t.classList.add("contact-form"),e.appendChild(t);var n=document.createElement("h1");n.innerText="Contact us",t.appendChild(n);var r=document.createElement("section");t.appendChild(r);var i=document.createElement("p");r.appendChild(i);var o=document.createElement("label");i.appendChild(o),o.htmlFor="name",o.innerText="Name:";var a=document.createElement("input");a.setAttribute("type","text"),a.setAttribute("id","name"),a.setAttribute("name","user_name"),a.setAttribute("required",""),i.appendChild(a);var s=document.createElement("p");r.appendChild(s);var l=document.createElement("label");s.appendChild(l),l.htmlFor="contactEmail",l.innerText="Email:";var c=document.createElement("input");c.setAttribute("type","email"),c.setAttribute("id","contactEmail"),c.setAttribute("name","user_email"),c.setAttribute("required",""),s.appendChild(c);var u=document.createElement("p");t.appendChild(u);var d=document.createElement("label");u.appendChild(d),d.htmlFor="emailSubject",d.innerText="Subject:";var h=document.createElement("input");h.setAttribute("type","text"),h.setAttribute("id","emailSubject"),h.setAttribute("name","subject"),h.setAttribute("required",""),u.appendChild(h);var p=document.createElement("p");t.appendChild(p);var f=document.createElement("label");p.appendChild(f),f.htmlFor="contact-text",f.innerText="Your message:";var m=document.createElement("textArea");m.setAttribute("placeholder","Describe your problem or suggestion in detail. What device are you using?"),m.setAttribute("id","contact-text"),m.setAttribute("name","message"),m.setAttribute("required",""),p.appendChild(m);var v=document.createElement("p");t.appendChild(v),v.classList.add("contactErrorMsg");var g=document.createElement("section");t.appendChild(g),g.classList.add("btn-section");var b=document.createElement("input");b.setAttribute("type","submit"),b.setAttribute("value","Send"),b.setAttribute("id","contactBtn"),g.appendChild(b)}function qd(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");t.classList.add("successDiv"),e.appendChild(t);var n=document.createElement("h1");n.innerText="Contact us",t.appendChild(n);var r=document.createElement("p");r.classList.add("successMsgExpl"),r.innerText="To report a problem or share your suggestions, please send an email to vladimir@lingway.net.",t.appendChild(r)}function Dd(){return Hd.apply(this,arguments)}function Hd(){var e;return e=Md().mark((function e(){var t,n,r,i,o,a,s,l;return Md().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Iu();case 3:t=e.sent,console.log("stripeCustomerID",t),(n=document.querySelector(".content-area")).innerHTML="",(r=document.createElement("form")).classList.add("subscription-portal-form"),r.setAttribute("action","/api/create-portal-session"),r.setAttribute("method","post"),n.appendChild(r),(i=document.createElement("h1")).innerText="Manage your subscription",r.appendChild(i),o=document.createElement("p"),r.appendChild(o),o.classList.add("portal-description"),o.textContent="Click the button below to manage your subscription.",(a=document.createElement("input")).setAttribute("type","hidden"),a.setAttribute("id","stripeCustomerID"),a.setAttribute("name","stripeCustomerID"),a.value=t,r.appendChild(a),s=document.createElement("section"),r.appendChild(s),s.classList.add("btn-section"),(l=document.createElement("button")).setAttribute("type","submit"),l.setAttribute("id","portal-button"),l.innerText="Start",s.appendChild(l),e.next=39;break;case 35:e.prev=35,e.t0=e.catch(0),console.error("Error generating Subscription page ",e.t0),Hu();case 39:case"end":return e.stop()}}),e,null,[[0,35]])})),Hd=function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Od(o,r,i,a,s,"next",e)}function s(e){Od(o,r,i,a,s,"throw",e)}a(void 0)}))},Hd.apply(this,arguments)}Go.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Go.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},Li=tt,Ke(new U("database",((e,{instanceIdentifier:t})=>jc(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t)),"PUBLIC").setMultipleInstances(!0)),it(Ci,Ti,void 0),it(Ci,Ti,"esm2017"),hu(),function(){yd.apply(this,arguments)}();class Fd{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const Ud={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:(()=>{if("undefined"!=typeof localStorage)return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}})()},Vd=e=>e?"string"==typeof e?{publicKey:e}:"[object Object]"===e.toString()?e:{}:{},zd=async(e,t,n={})=>{const r=await fetch(Ud.origin+e,{method:"POST",headers:n,body:t}),i=await r.text(),o=new Fd(r.status,i);if(r.ok)return o;throw o},Wd=(e,t,n)=>{if(!e||"string"!=typeof e)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||"string"!=typeof t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n||"string"!=typeof n)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},Bd=e=>e.webdriver||!e.languages||0===e.languages.length,Yd=()=>new Fd(451,"Unavailable For Headless Browser"),Gd=(e,t)=>{if((e=>!e.list?.length||!e.watchVariable)(e))return!1;((e,t)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if("string"!=typeof t)throw"The BlockList watchVariable has to be a string"})(e.list,e.watchVariable);const n=(r=t,i=e.watchVariable,r instanceof FormData?r.get(i):r[i]);var r,i;return"string"==typeof n&&e.list.includes(n)},Jd=()=>new Fd(403,"Forbidden"),$d=async(e,t,n)=>{if(!t.throttle||!n)return!1;((e,t)=>{if("number"!=typeof e||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&"string"!=typeof t)throw"The LimitRate ID has to be a non-empty string"})(t.throttle,t.id);const r=t.id||e,i=await(async(e,t,n)=>{const r=Number(await n.get(e)||0);return t-Date.now()+r})(r,t.throttle,n);return i>0||(await n.set(r,Date.now().toString()),!1)},Kd=()=>new Fd(429,"Too Many Requests"),Qd=async(e,t,n,r)=>{const i=Vd(r),o=i.publicKey||Ud.publicKey,a=i.blockHeadless||Ud.blockHeadless,s=Ud.storageProvider||i.storageProvider,l={...Ud.blockList,...i.blockList},c={...Ud.limitRate,...i.limitRate};if(a&&Bd(navigator))return Promise.reject(Yd());const u=(e=>"string"==typeof e?document.querySelector(e):e)(n);Wd(o,e,t),(e=>{if(!e||"FORM"!==e.nodeName)throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"})(u);const d=new FormData(u);return Gd(l,d)?Promise.reject(Jd()):await $d(location.pathname,c,s)?Promise.reject(Kd()):(d.append("lib_version","4.4.1"),d.append("service_id",e),d.append("template_id",t),d.append("user_id",o),zd("/api/v1.0/email/send-form",d))};function Xd(e,t){console.log(t);var n=document.getElementById("forgotPass");switch(t){case"auth/invalid-email":e.innerHTML="<i class='fa-solid fa-circle-exclamation'></i> Please enter a valid email address";break;case"auth/wrong-password":e.innerHTML="<i class='fa-solid fa-circle-exclamation'></i> Error: Incorrect Password",n&&(n.style.display="block");break;case"auth/invalid-credential":e.innerHTML="<i class='fa-solid fa-circle-exclamation'></i> Error: Incorrect Email or Password",n&&(n.style.display="block");break;case"auth/missing-password":e.innerHTML="<i class='fa-solid fa-circle-exclamation'></i> Please enter your password";break;case"auth/missing-email":e.innerHTML="<i class='fa-solid fa-circle-exclamation'></i> Please enter your email address";break;case"auth/weak-password":e.innerHTML="<i class='fa-solid fa-circle-exclamation'></i> Your password must be at least 6 characters long";break;case"auth/email-already-in-use":e.innerHTML="<i class='fa-solid fa-circle-exclamation'></i> A user with this email address already exists";break;case"auth/too-many-requests":e.innerHTML="<i class='fa-solid fa-circle-exclamation'></i> Error: too many login requests. Please try again in a few minutes.";break;default:e.innerHTML="<i class='fa-solid fa-circle-exclamation'></i> An error has occurred. Make sure that the email (or the password) is correct."}}function Zd(e){return Zd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zd(e)}function eh(){eh=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:I(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",v={};function g(){}function b(){}function y(){}var _={};c(_,a,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(N([])));E&&E!==n&&r.call(E,a)&&(_=E);var C=y.prototype=g.prototype=Object.create(_);function T(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(i,o,a,s){var l=d(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==Zd(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function I(t,n,r){var i=h;return function(o,a){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=k(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var c=d(t,n,r);if("normal"===c.type){if(i=r.done?m:p,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function k(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Zd(t)+" is not iterable")}return b.prototype=y,i(C,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:b,configurable:!0}),b.displayName=c(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,l,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},T(L.prototype),c(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new L(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(C),c(C,l,"Generator"),c(C,a,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function th(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var nh,rh,ih,oh,ah,sh,lh,ch,uh,dh,hh,ph,fh,mh;function vh(){var e;return e=eh().mark((function e(){var t,n,r,i,o;return eh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yc();case 2:t=e.sent,n=t.app,r=_i(n),i=document.getElementById("resetEmail"),o=document.querySelector(".passResetErrorMsg"),console.log(i.value),i&&(nh=i.value),sr(r,nh).then((function(){console.log("Password reset email sent"),alert("Password reset email sent. Please check your email. If your email address is not registered on the app, you should sign up instead."),Rd()})).catch((function(e){var t=e.code,n=e.message;console.error(t+n),o&&Xd(o,t)}));case 10:case"end":return e.stop()}}),e)})),vh=function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){th(o,r,i,a,s,"next",e)}function s(e){th(o,r,i,a,s,"throw",e)}a(void 0)}))},vh.apply(this,arguments)}function gh(e){return gh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gh(e)}function bh(){bh=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:I(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",v={};function g(){}function b(){}function y(){}var _={};c(_,a,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(N([])));E&&E!==n&&r.call(E,a)&&(_=E);var C=y.prototype=g.prototype=Object.create(_);function T(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(i,o,a,s){var l=d(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==gh(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function I(t,n,r){var i=h;return function(o,a){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=k(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var c=d(t,n,r);if("normal"===c.type){if(i=r.done?m:p,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function k(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(gh(t)+" is not iterable")}return b.prototype=y,i(C,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:b,configurable:!0}),b.displayName=c(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,l,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},T(L.prototype),c(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new L(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(C),c(C,l,"Generator"),c(C,a,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function yh(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function _h(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){yh(o,r,i,a,s,"next",e)}function s(e){yh(o,r,i,a,s,"throw",e)}a(void 0)}))}}function wh(){return wh=_h(bh().mark((function e(){var t,n,r,i,o,a,s,l,c,u;return bh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yc();case 2:t=e.sent,n=t.app,r=_i(n),i=document.querySelector(".signUpForm"),o=document.querySelector(".logInForm"),a=document.getElementById("logInButtonMenu"),s=document.getElementById("signUpButtonMenu"),l=document.getElementById("logOutButton"),c=document.querySelector(".menu-element.premiumBtn"),u=document.getElementById("subscription"),ur(r,(function(e){e?(o&&Ih(),i&&Ih(),a.style.display="none",s.style.display="none",l.style.display="block",c.style.display="none",u.style.display="block"):(l.style.display="none",a.style.display="block",s.style.display="block",c.style.display="flex",u.style.display="none")}));case 13:case"end":return e.stop()}}),e)}))),wh.apply(this,arguments)}function Eh(){return Eh=_h(bh().mark((function e(){var t,n,r,i,o,a,s,l,c,u,d,h,p;return bh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yc();case 2:t=e.sent,n=t.app,r=_i(n),i=Dc(n),o=document.getElementById("signUpEmail"),a=document.getElementById("signUpPassword"),s=document.getElementById("name"),l=document.querySelector(".content-area"),c=document.querySelector(".sidebarContainer"),u=document.querySelector(".sidebarTabletContainer"),d=document.querySelector("footer"),h=o.value,p=a.value,lr(r,h,p).then((function(e){var t=e.user;alert("Your account has been created!"),l&&(l.innerHTML=""),Pc(Sc(i,"users/"+t.uid+"/info"),{name:s.value,email:t.email,last_login:Date.now()}),Ou(),fu(),c.style.display="flex",u.style.display="flex",d.style.display="block"})).catch((function(e){var t=e.code,n=e.message;console.log("error code: ",t,"errorMsg: ",n);var r=document.querySelector(".signUpErrorMsg");r&&Xd(r,t)}));case 16:case"end":return e.stop()}}),e)}))),Eh.apply(this,arguments)}function Ch(){return Ch=_h(bh().mark((function e(){var t,n,r,i,o,a,s,l,c,u,d,h;return bh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yc();case 2:t=e.sent,n=t.app,r=_i(n),i=Dc(n),o=document.getElementById("logInEmail"),a=document.getElementById("logInPassword"),s=o.value,l=a.value,c=document.querySelector(".content-area"),u=document.querySelector(".sidebarContainer"),d=document.querySelector(".sidebarTabletContainer"),h=document.querySelector("footer"),cr(r,s,l).then((function(e){c.innerHTML="",Ou(),fu(),u.style.display="flex",d.style.display="flex",h.style.display="block";var t=e.user;alert("Your have logged in!");var n={last_login:Date.now()};Nc(Sc(i,"users/"+t.uid+"/info"),n)})).catch((function(e){var t=e.code,n=e.message;console.error("error message: ",t+n);var r=document.querySelector(".logInErrorMsg");r&&Xd(r,t)}));case 15:case"end":return e.stop()}}),e)}))),Ch.apply(this,arguments)}function Th(){return Lh.apply(this,arguments)}function Lh(){return Lh=_h(bh().mark((function e(){var t,n,r,i,o,a,s,l;return bh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yc();case 2:return t=e.sent,n=t.app,r=_i(n),i=document.querySelector(".mainSection"),o=document.querySelector(".content-area"),a=document.querySelector(".sidebarContainer"),s=document.querySelector(".sidebarTabletContainer"),l=document.querySelector("footer"),e.next=12,dr(r);case 12:i&&(i.innerHTML=""),o.innerHTML="",Ou(),fu(),a.style.display="flex",s.style.display="flex",l.style.display="block",alert("Your have logged out");case 20:case"end":return e.stop()}}),e)}))),Lh.apply(this,arguments)}function Ih(){var e=document.getElementById("resetEmail"),t=document.getElementById("logInEmail"),n=document.getElementById("logInPassword"),r=document.getElementById("signUpEmail"),i=document.getElementById("signUpPassword"),o=document.querySelector(".logInErrorMsg"),a=document.querySelector(".signUpErrorMsg");o&&(o.innerHTML=""),a&&(a.innerHTML=""),e&&(e.value=""),t&&(t.value=""),n&&(n.value=""),r&&(r.value=""),i&&(i.value="")}function kh(e,t){for(var n=new Date,r=new Date(n),i=null,o=[3,7,14,30,0],a=4;a>=0;a--)if(i=t[a].find((function(t){return t.id===e+1}))){var s=t[a].indexOf(i);r.setDate(n.getDate()+o[a]),i.repetDate=r.getTime(),t[a+1].push(i),t[a].splice(s,1);break}if(!i){var l={id:e+1,repetDate:0};r.setDate(n.getDate()+3),l.repetDate=r.getTime(),t[0].push(l)}}function Sh(e,t,n){var r,i=e.verb,o=document.querySelector(".learnMore"),a=document.querySelector(".infoPopupSection");o.addEventListener("click",(function(){o.style.display="none",a.style.display="none",a.innerHTML="<i class='fa-solid fa-xmark popupInfo-close'></i>";var s=document.querySelector(".popupInfo-close"),l=document.createElement("div");switch(l.classList.add("messageDiv"),a.appendChild(l),t){case"present":r=function(e){return{group:{1:{regular:{incorrect:{reflexive:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,'</b> follows the regular \'-er\' \n              conjugation pattern.</p> \n            <p>It\'s also a <u>reflexive</u> verb, so the reflexive pronoun \'se\' \n            should change depending on the subject: "Je me...", "tu te...", "il se...", etc. </p>')},nonReflexive:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> follows the regular '-er' conjugation pattern.</p>")}},almost:{message:'<p><i class="fa-solid fa-exclamation-triangle"></i> Don\'t forget the accent marks (, , , etc.). In this case, the accent remains the same as in the infinitive form.</p>\n    <p>You can use the buttons above the text field to type letters with an accent mark.</p>'}},irregular:{reflexive:{spellingChange:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> is one of the verbs that follow the regular '-er' \n              conjugation pattern with spelling changes: <i>e</i> or <i></i> <i class=\"fa-solid fa-arrow-right\"></i> <b><i></i></b> \n              (except <i>'nous'</i> and <i>'vous'</i>).</p> \n              <p>It's also a <i>reflexive</i> verb, so the reflexive pronoun 'se' \n              should change depending on the subject: \"Je me...\", \"tu te...\", \"il se...\", etc. </p>")}},nonReflexive:{spellingChange:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> is one of the verbs that follow the regular '-er' \n              conjugation pattern with spelling changes: <i>e</i> or <i></i> <i class=\"fa-solid fa-arrow-right\"></i> <b><i></i></b>.</p> \n              <p>The conjugations of 'nous' and 'vous' remain regular. </p>")}}}},2:{message:'<i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> follows the same pattern as the verbs <i>choisir</i>, <i>finir</i>,\n        <i>grandir</i> with the following endings: '-is', '-is', '-it', '-issons', '-issez', '-issent'.")},3:{pattern:{lire:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> follows the same pattern as the verbs <i>conduire</i>, <i>dire</i>,\n            <i>lire</i> with the following endings: '-s', '-s', '-t', '-ons', '-ez', '-ent'.</p>\n            <p>The exception is the 'vous' form of <i>'dire'</i>: vous <b>dites</b>.</p>.")},mettre:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> follows the same pattern as the verbs <i>battre</i>, <i>promettre</i>,\n            <i>mettre</i> with the following endings: '-ts', '-ts', '-t', '-ons', '-ez', '-ent'.</p>")},savoir:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> has the following endings in the present tense: \n            '-s', '-s', '-t', '-ons', '-ez', '-ent'.</p> <p>However, it's still quite irregular as it doesn't exactly\n            follow any common conjugation pattern.</p>")},voir:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> has the following endings in the present tense: \n            '-s', '-s', '-t', '-ons', '-ez', '-ent'.</p> <p>However, it's still quite irregular as it doesn't exactly\n            follow any common conjugation pattern.</p>")},ecrire:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> follows the same pattern as the verbs <i>(s')inscrire</i>, <i>dcrire</i>,\n            <i>crire</i> with the following endings: '-s', '-s', '-t', '-ons', '-ez', '-ent'.</p>\n            <p>Note that the 'nous', 'vous' and 'ils/elles' conjugations have a <b>'-v'</b>: \n            <i>vous cri<span class='red'>v</span>ez</i>, <i>elles s'inscri<span class='red'>v</span>ent</i>, etc.")},vouloir:{message:'<p><i class="fa-solid fa-bolt"></i> The verbs <b>pouvoir</b> and <b>vouloir</b> follow the same pattern\n            with the following endings:  -x, -x, -t, -ons, -ez, -ent.</p>'},attendre:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> follows the same pattern as the verbs <i>rpondre</i>, <i>attendre</i>,\n            <i>entendre</i> with the following endings: -ds, -ds, -d, -ons, -ez, -ent.</p>")},devoir:{message:"<p><i class=\"fa-solid fa-bolt\"></i> The verbs <b>recevoir</b> and <b>devoir</b> follow the same pattern       \n            with the following endings in the present tense: \n            '-s', '-s', '-t', '-ons', '-ez', '-ent'.</p> <p>Note that in the verb 'recevoir', 'c' changes to '<b></b>'\n            for the <i>je</i>, <i>tu</i> and <i>il/elle/on</i> conjugations.</p>"},prendre:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> follows the same pattern as the verbs <i>apprendre</i>, <i>comprendre</i>,\n            <i>prendre</i> with the following endings: -ds, -ds, -d, -ons, -ez, -ent.</p>")},boire:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> has the following endings in the present tense: \n            '-s', '-s', '-t', '-ons', '-ez', '-ent'.</p> <p>However, it's still quite irregular as it doesn't exactly\n            follow any common conjugation pattern.</p>")},partir:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> follows the same pattern as the verbs <i>sentir</i>, <i>mentir</i>,\n            <i>sortir</i> with the following endings: '-s', '-s', '-t', '-ons', '-ez', '-ent'.</p>")},vivre:{message:"<p><i class=\"fa-solid fa-bolt\"></i> The verbs <b>vivre</b> and <b>suivre</b> follow the same conjugation pattern\n            with the following endings: '-s', '-s', '-t', '-ons', '-ez', '-ent'.</p>\n            <p>Note that the 'je' conjugation of 'suivre' in the present tense is <b>'je suis'</b>.</p>"},venir:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> follows the same pattern as the verbs <i>tenir</i>, <i>venir</i>,\n            <i>devenir</i> with the following endings: '-s', '-s', '-t', '-ons', '-ez', '-ent'.</p>")}}},irregular:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> is an irregular verb. It doesn't follow a common pattern.</p>")}}}}(i),function(e,t,n){var r=document.querySelector(".infoPopupSection"),i=document.querySelector(".messageDiv"),o=e.verb,a=e.group;1===a&&(r.style.display="block",e.irregular||e.reflexive?!e.irregular&&e.reflexive?i.innerHTML=n.group[1].regular.incorrect.reflexive.message:e.irregular&&!e.reflexive&&"accent"===e.spellingChange?i.innerHTML=n.group[1].irregular.nonReflexive.spellingChange.message:e.irregular&&e.reflexive&&"accent"===e.spellingChange?i.innerHTML=n.group[1].irregular.reflexive.spellingChange.message:(console.log("No verb pattern found for the verb ".concat(o," in the Present Tense (group 1).")),r.style.display="none"):i.innerHTML=n.group[1].regular.incorrect.nonReflexive.message),e.irregular||"almostWoAccent"!==t||(i.innerHTML=n.group[1].regular.almost.message,r.style.display="block"),2===a&&(i.innerHTML=n.group[2].message,r.style.display="block"),3===a&&(r.style.display="block","lire"===e.pattern?i.innerHTML=n.group[3].pattern.lire.message:"mettre"===e.pattern?i.innerHTML=n.group[3].pattern.mettre.message:"savoir"===e.pattern?i.innerHTML=n.group[3].pattern.savoir.message:"voir"===e.pattern?i.innerHTML=n.group[3].pattern.voir.message:"crire"===e.pattern?i.innerHTML=n.group[3].pattern.ecrire.message:"vouloir"===e.pattern?i.innerHTML=n.group[3].pattern.vouloir.message:"attendre"===e.pattern?i.innerHTML=n.group[3].pattern.attendre.message:"devoir"===e.pattern?i.innerHTML=n.group[3].pattern.devoir.message:"prendre"===e.pattern?i.innerHTML=n.group[3].pattern.prendre.message:"boire"===e.pattern?i.innerHTML=n.group[3].pattern.boire.message:"partir"===e.pattern?i.innerHTML=n.group[3].pattern.partir.message:"vivre"===e.pattern?i.innerHTML=n.group[3].pattern.vivre.message:"venir"===e.pattern?i.innerHTML=n.group[3].pattern.venir.message:(console.log("No verb pattern found for the verb ".concat(o," in the Present Tense (group 3).")),r.style.display="none")),"irregular"===a&&(i.innerHTML=n.group.irregular.message,r.style.display="block")}(e,n,r);break;case"pastcomp":r=function(e){return{avoir:{participle:{regular:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> is conjugated with 'avoir' and it follows the regular '-er' pattern \n          in the <i>Pass compos</i>.</p> <p>To form the <b>past participle</b> of\n          <b>-er verbs</b>, you replace the -er\n          at the end of the infinitive with -.</p>"),link:""},ir:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> is conjugated with 'avoir' and it follows the regular '-ir' pattern \n          in the <i>Pass compos</i>.</p> <p>To form the <b>past participle</b> of\n          <b>-ir verbs</b>, you usually replace the -ir\n          at the end of the infinitive with <b>-i</b>.</p>"),link:""},ouvrir:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> is conjugated with 'avoir'.</p> \n          <p>Verbs like <i><b>ouvrir</b></i>,\n          <i><b>couvrir</b></i>, <i><b>dcouvrir</b></i>,\n          <i><b>offrir</b></i>, <i><b>souffrir</b></i> form their past participle\n          with <b>-ert</b> at the end.</p>"),link:""},dre:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> is conjugated with 'avoir'.</p><p>Many verbs ending in <b>-dre</b> (<i>attendre</i>, <i>entendre</i>, <i>rpondre</i>, etc)\n          form their past participle by replacing the <b>-re</b> ending with <b>-u</b>.</p>"),link:""},prendre:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,'</b> is conjugated with \'avoir\'.</p>\n          <p>Verbs like <i><b>prendre</b></i>, <i><b>apprendre</b></i>,\n          <i><b>comprendre</b></i> form their past participle in the same way: prendre <i class="fa-solid fa-arrow-right"></i> pris,\n          apprendre <i class="fa-solid fa-arrow-right"></i> appris, etc.</p>'),link:""},rejoindre:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> is conjugated with 'avoir' in the <i>Pass compos</i>.</p>\n          <p>To form the <b>past participle</b> of verbs ending in <b>-oindre</b>,\n          <b>-eindre</b> and\n          <b>-aindre</b> in the Pass Compos, replace the <b>-dre</b> at the end of the infinitive with\n          <b>-t</b></p>"),link:""},irregular:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> is conjugated with 'avoir' and \n          has an <u><b>irregular</b></u> past participle.</p>"),link:""}},twoAux:'<p><i class="fa-solid fa-exclamation-triangle"></i> Note that in some cases, <b>'.concat(e,"</b> \n          is conjugated with 'tre'.</p>")},etre:{participle:{regular:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> is conjugated with <b>'tre'</b> and it follows the regular '-er' pattern \n          in the <i>Pass compos</i>.</p> <p>To form the <b>past participle</b> of\n          <b>-er verbs</b>, you replace the -er\n          at the end of the infinitive with -.</p>"),link:""},ir:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> is conjugated with <b>'tre'</b> and it follows the regular '-ir' pattern \n          in the <i>Pass compos</i>.</p> <p>To form the <b>past participle</b> of\n          <b>-ir verbs</b>, you usually replace the -ir\n          at the end of the infinitive with <b>-i</b>.</p>"),link:""},ouvrir:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> is conjugated with <b>'tre'</b>.</p> \n          <p>Verbs like <i><b>ouvrir</b></i>,\n          <i><b>couvrir</b></i>, <i><b>dcouvrir</b></i>,\n          <i><b>offrir</b></i>, <i><b>souffrir</b></i> form their past participle\n          with <b>-ert</b> at the end.</p>"),link:""},dre:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> is conjugated with <b>'tre'</b>.</p><p>Many verbs ending in <b>-dre</b> (<i>attendre</i>, <i>entendre</i>, <i>rpondre</i>, etc)\n          form their past participle by replacing the <b>-re</b> ending with <b>-u</b>.</p>"),link:""},prendre:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,'</b> is conjugated with <b>\'tre\'</b>.</p>\n          <p>Verbs like <i><b>prendre</b></i>, <i><b>apprendre</b></i>,\n          <i><b>comprendre</b></i> form their past participle in the same way: prendre <i class="fa-solid fa-arrow-right"></i> pris,\n          apprendre <i class="fa-solid fa-arrow-right"></i> appris, etc.</p>'),link:""},rejoindre:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> is conjugated with <b>'tre'</b>\n          in the <i>Pass compos</i>.</p>\n          <p>To form the <b>past participle</b> of verbs ending in <b>-oindre</b>,\n          <b>-eindre</b> and\n          <b>-aindre</b> in the Pass Compos, replace the <b>-dre</b> at the end of the infinitive with\n          <b>-t</b></p>"),link:""},irregular:{message:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> is conjugated with <b>'tre'</b> and \n          has an <u><b>irregular</b></u> past participle.</p>"),link:""}},twoAux:"<p class='twoAuxMessage'><i class=\"fa-solid fa-exclamation-triangle\"></i> Note that in some cases, <b>".concat(e,"</b> \n          can be conjugated with 'avoir'.</p>")},almostPastComp:{plural:{message:"<p><i class=\"fa-solid fa-exclamation-triangle\"></i> Don't forget to add an <b>'s'</b> to match plural subjects (ils, les enfants, etc.) when a verb is conjugated \n        with 'tre' in the Pass compos.</p>",link:""},fem:{message:"<p><i class=\"fa-solid fa-exclamation-triangle\"></i> Don't forget to add an <b>'e'</b> to match feminine singular subjects (elle, Anna, etc.) when a verb \n        in conjugated with 'tre' in the Pass compos.</p> <p> For the subjects 'je' and 'tu', \n        pay attention to hints like '(masc.)' and '(fem.)'.</p>",link:""}}}}(i),function(e,t,n){var r=document.querySelector(".infoPopupSection"),i=document.querySelector(".messageDiv"),o=e.verb;if(!e.aux&&(r.style.display="block","regular"===e.participle?i.innerHTML=n.avoir.participle.regular.message:"ir"===e.participle?i.innerHTML=n.avoir.participle.ir.message:"ouvrir"===e.participle?i.innerHTML=n.avoir.participle.ouvrir.message:"dre"===e.participle?i.innerHTML=n.avoir.participle.dre.message:"prendre"===e.participle?i.innerHTML=n.avoir.participle.prendre.message:"rejoindre"===e.participle?i.innerHTML=n.avoir.participle.rejoindre.message:"irregular"===e.participle?i.innerHTML=n.avoir.participle.irregular.message:(console.log("No verb pattern found for the verb ".concat(o," in the Pass Compos ('avoir').")),r.style.display="none"),e.twoAux)){var a=n.avoir.twoAux,s=document.createElement("div");s.innerHTML=a,i.appendChild(s)}if(e.aux&&"tre"===e.aux&&(r.style.display="block","regular"===e.participle?i.innerHTML=n.etre.participle.regular.message:"ir"===e.participle?i.innerHTML=n.etre.participle.ir.message:"ouvrir"===e.participle?i.innerHTML=n.etre.participle.ouvrir.message:"dre"===e.participle?i.innerHTML=n.etre.participle.dre.message:"prendre"===e.participle?i.innerHTML=n.etre.participle.prendre.message:"rejoindre"===e.participle?i.innerHTML=n.etre.participle.rejoindre.message:"irregular"===e.participle?i.innerHTML=n.etre.participle.irregular.message:(console.log("No verb pattern found for the verb ".concat(o," in the Pass Compos ('tre').")),r.style.display="none"),e.twoAux)){var l=n.etre.twoAux,c=document.createElement("div");c.innerHTML=l,i.appendChild(c)}"almostPastComp"===t&&e.plural&&(i.innerHTML=n.almostPastComp.plural.message,r.style.display="block"),"almostPastComp"===t&&e.fem&&(i.innerHTML=n.almostPastComp.fem.message,r.style.display="block")}(e,n,r);break;case"pastimp":!function(e,t){var n=document.querySelector(".infoPopupSection"),r=document.querySelector(".messageDiv");if(e.pattern)switch(e.pattern){case"je":r.innerHTML=t.pattern.je,n.style.display="block";break;case"tu":r.innerHTML=t.pattern.tu,n.style.display="block";break;case"il":r.innerHTML=t.pattern.il,n.style.display="block";break;case"nous":r.innerHTML=t.pattern.nous,n.style.display="block";break;case"vous":r.innerHTML=t.pattern.vous,n.style.display="block";break;case"ils":r.innerHTML=t.pattern.ils,n.style.display="block"}if("tre"===e.verb&&t.etre){var i=document.createElement("div");i.innerHTML=t.etre,r.appendChild(i)}if("pleuvoir"===e.verb&&t.pleuvoir){var o=document.createElement("div");o.innerHTML=t.pleuvoir,r.appendChild(o)}if(e.exception&&"ier"===e.exception&&t.ier){var a=document.createElement("div");a.innerHTML=t.ier,r.appendChild(a)}if(e.exception&&"ger"===e.exception&&t.ger){var s=document.createElement("div");s.innerHTML=t.ger,r.appendChild(s)}}(e,r={pattern:{je:"<p><i class=\"fa-solid fa-bolt\"></i> 'Je' and 'tu' conjugations in the imperfect tense end in '<b>-ais</b>': \n      <i>je parlais</i>, <i>tu parlais</i>.</p>",tu:"<p><i class=\"fa-solid fa-bolt\"></i> 'Je' and 'tu' conjugations in the imperfect tense end in '<b>-ais</b>': \n      <i>je parlais</i>, <i>tu parlais</i>.</p>",il:"<p><i class=\"fa-solid fa-bolt\"></i> 'Il', 'elle', and 'on' conjugations in the imperfect tense end in '<b>-ait</b>': \n      <i>il parlait</i>, <i>elle parlait,</i> <i>on parlait</i>.</p>",nous:"<p><i class=\"fa-solid fa-bolt\"></i> 'Nous' conjugations in the imperfect tense end in '<b>-ions</b>':\n      <i>nous parlions</i>.</p>",vous:"<p><i class=\"fa-solid fa-bolt\"></i> 'Vous' conjugations in the imperfect tense end in '<b>-iez</b>':\n      <i>vous parliez</i>.</p>",ils:"<p><i class=\"fa-solid fa-bolt\"></i> 'Ils' and 'elles' conjugations in the imperfect tense end in '<b>-aient</b>':\n      <i>ils parlaient</i>, <i>elles finissaient</i>.</p>"},etre:'<p><i class="fa-solid fa-exclamation-triangle"></i> The verb <b>\'tre\'</b> uses the stem <b>t-</b> \n  instead of the "nous" form from the present tense to form the imperfect tense conjugations: <i>j\'<b>t</b>ais</i>, <i>tu <b>t</b>ais</i>, \n  <i>il/elle/on <b>t</b>ait</i>...</p>',ier:"<p><i class=\"fa-solid fa-exclamation-triangle\"></i> Verbs ending in <b>-ier</b> have a double 'i' ('ii') in the 'nous' and 'vous' forms.</p>",pleuvoir:"<p>The imperfect conjugation of 'pleuvoir' is 'il <b>pleuvait</b>'.</p>",ger:'<p><i class="fa-solid fa-exclamation-triangle"></i> Verbs ending in <b>-ger</b> have an "e" (to preserve the soft "g" sound) in \n    their imperfect conjugations, except for the \'nous\' and \'vous\' forms: <i>je/tu mang<u>e</u>ais</i>, but <i>nous <b>mangions</i>.</p>'});break;case"future":r=function(e){return{regular:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> follows the regular conjugation pattern in the future tense.</p>"),irregular:{simple:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> changes its stem in the future simple tense while using \n      the same set of endings as regular verbs.</p>"),spelling:{eler:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> like some other verbs verbs ending in <b>-eler</b>\n        double the <b><i>l</i></b> in their simple future conjugations.</p>"),eter:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> like some other verbs verbs ending in <b>-eter</b> \n        double the <b><i>t</i></b> in their simple future conjugations.</p>"),eChange:"<p><i class=\"fa-solid fa-bolt\"></i> In some verbs like <b>lever</b>, <b>acheter</b>, \n        and <b>peser</b>, the first 'e' changes to <b>''</b>.</p>"}}}}(i),function(e,t){var n=document.querySelector(".infoPopupSection"),r=document.querySelector(".messageDiv");e.irregular&&!e.spelling&&t.irregular.simple?(r.innerHTML=t.irregular.simple,n.style.display="block"):e.spelling?(console.log(e.spelling),"eler"===e.spelling&&t.irregular.spelling.eler?(r.innerHTML=t.irregular.spelling.eler,n.style.display="block"):"eter"===e.spelling&&t.irregular.spelling.eter?(r.innerHTML=t.irregular.spelling.eter,n.style.display="block"):"eChange"===e.spelling&&t.irregular.spelling.eChange&&(r.innerHTML=t.irregular.spelling.eChange,n.style.display="block")):(console.log("else",e.spelling),r.innerHTML=t.regular,n.style.display="block")}(e,r);break;case"subjunctive":r=function(e){return{regular:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> follows the regular conjugation pattern in the present\n    subjunctive tense.</p>"),irregular:'<p><i class="fa-solid fa-bolt"></i> The verb <b>'.concat(e,"</b> is irregular in the present subjunctive tense.</p>")}}(i),function(e,t){var n=document.querySelector(".infoPopupSection"),r=document.querySelector(".messageDiv");e.irregular&&t.irregular?(r.innerHTML=t.irregular,n.style.display="block"):(r.innerHTML=t.regular,n.style.display="block")}(e,r)}s&&s.addEventListener("click",(function(){a.style.display="none",a.innerHTML=""}))}))}function xh(e){var t=new SpeechSynthesisUtterance;t.lang="fr-FR",t.volume=1,t.rate=1,t.text=e,speechSynthesis.speak(t)}function Ph(){new Audio("src/correct.mp3").play()}function Nh(e,t){var n=document.querySelector(".phrase-section p"),r=document.querySelector(".type-section input"),i=document.querySelector(".msg-section"),o=document.querySelector(".learnMore");n.appendChild(e);var a=document.getElementById("speaker");Ph(),r.style.color="#d96e38",i.innerHTML="<p class='almost'>Almost correct.</p>",o.style.display="block",a&&a.addEventListener("click",(function(){xh(t)}))}function Mh(e){return Mh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mh(e)}function Oh(){Oh=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:I(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",v={};function g(){}function b(){}function y(){}var _={};c(_,a,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(N([])));E&&E!==n&&r.call(E,a)&&(_=E);var C=y.prototype=g.prototype=Object.create(_);function T(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(i,o,a,s){var l=d(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==Mh(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function I(t,n,r){var i=h;return function(o,a){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=k(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var c=d(t,n,r);if("normal"===c.type){if(i=r.done?m:p,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function k(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Mh(t)+" is not iterable")}return b.prototype=y,i(C,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:b,configurable:!0}),b.displayName=c(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,l,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},T(L.prototype),c(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new L(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(C),c(C,l,"Generator"),c(C,a,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Ah(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function Rh(){var e;return e=Oh().mark((function e(){var t,n;return Oh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("../src/conjugation.json");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})),Rh=function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Ah(o,r,i,a,s,"next",e)}function s(e){Ah(o,r,i,a,s,"throw",e)}a(void 0)}))},Rh.apply(this,arguments)}function jh(e){var t,n,r,i,o=e.data,a=e.k,s=e.phraseCount,l=e.score,c=e.boxes,u=e.phraseStats,d=e.lives,h=e.userId,p={phrase:"",input:"",correctAnswer:"",isCorrect:!1,almostCorrect:!1},f=document.querySelector(".msg-section"),m=document.querySelector(".conjugSection"),v=document.querySelector(".submit-section"),g=document.querySelector(".type-section input"),b=document.querySelector(".next-section"),y=document.querySelector(".finish-section"),_=document.querySelector(".letters-section"),w=document.querySelector(".lives"),E=document.querySelector(".phrase-section p"),C=g.value;r=s<5?b:y,p.phrase=o.data[a].phrase,p.input=C,p.correctAnswer=o.data[a].answer;var T=document.createElement("div");T.innerHTML='<i class="fa-solid fa-square-check"></i> '.concat(o.data[a].fullPhrase,' <i class="fa-solid fa-volume-low" id="speaker"></i>\n  <p class="translation">').concat(o.data[a].translation,"</p>");var L=document.createElement("div");switch(L.innerHTML="".concat(o.data[a].fullPhrase,' <i class="fa-solid fa-volume-low" id="speaker"></i>\n  <p class="translation">').concat(o.data[a].translation,"</p>"),""!==C.trim().toLowerCase()&&(g.classList.add("bold"),E.innerHTML="",_&&(_.style.display="none"),g.setAttribute("disabled","")),C.trim().toLowerCase()){case"":f.innerText="Please type a valid verb";break;case o.data[a].answer:case o.data[a].alternativeAnswer:(function(e,t){var n=document.querySelector(".phrase-section p"),r=document.querySelector(".type-section input"),i=document.querySelector(".msg-section");n.appendChild(e);var o=document.getElementById("speaker");Ph(),r.style.color="#169c47",i.innerText="Correct!",o&&o.addEventListener("click",(function(){xh(t)}))})(T,o.data[a].fullPhrase),h&&kh(a,c),l++,p.isCorrect=!0,u.push(p);break;case null===(t=o.data[a])||void 0===t?void 0:t.answerWoS:i="almostPastComp",Sh(o.data[a],o.data[0].tenseShort,i),Nh(T,o.data[a].fullPhrase),h&&kh(a,c),l++,p.almostCorrectCorrect=!0,u.push(p);break;case null===(n=o.data[a])||void 0===n?void 0:n.answerWoAccent:i="almostWoAccent",Sh(o.data[a],o.data[0].tenseShort,i),Nh(T,o.data[a].fullPhrase),h&&kh(a,c),l++,p.almostCorrectCorrect=!0,u.push(p);break;default:!h&&d&&d>0&&0==--d&&w&&(w.style.color="#ef233c"),function(e,t,n,r){var i=document.querySelector(".phrase-section p"),o=document.querySelector(".type-section input"),a=document.querySelector(".msg-section"),s=document.querySelector(".learnMore"),l=document.querySelector(".lives p");i.appendChild(e);var c=document.getElementById("speaker");new Audio("src/incorrect.mp3").play(),c&&c.addEventListener("click",(function(){xh(t)})),o.style.color="#ef233c",a.innerText='Incorrect. The correct answer is: "'.concat(n,'"'),s.style.display="block",l?l.textContent=r:console.error("Lives element not found in HandleIncorrectAnswer")}(L,o.data[a].fullPhrase,o.data[a].answer,d),h&&function(e,t){var n=new Date,r=new Date(n),i=null;r.setDate(n.getDate()+1);for(var o=0;o<=4;o++)if(i=t[o].find((function(t){return t.id===e+1}))){var a=t[o].indexOf(i);i.repetDate=r.getTime(),0!==o&&(t[o-1].push(i),t[o].splice(a,1));break}if(!i){var s={id:e+1,repetDate:0};s.repetDate=r.getTime(),t[0].push(s),console.log("ID in moveBack not found: ",e+1)}}(a,c),function(e,t,n,r){try{var i=r.verbs["".concat(e.verb)]["".concat(t.tenseShort)];e.aux&&"tre"===e.aux&&e.twoAux&&(i=r.verbs["".concat(e.verb)].pastcompEtre);var o=Object.values(i);n.innerHTML='<div class="popup-icons"><i class="fa-regular fa-lightbulb bulb-animation" \n    style="color: #ef233c;"></i><i class="fa-solid fa-xmark popup-close"></i></div>';for(var a=0;a<o.length;a++)n.innerHTML+="<p>".concat(o[a],"</p>");n.style.display="block"}catch(t){console.log("Verb "+e.verb+" is not found in database ")}}(o.data[a],o.data[0],m,rh),Sh(o.data[a],o.data[0].tenseShort),u.push(p)}var I=document.querySelector(".popup-icons .popup-close");return I&&I.addEventListener("click",(function(){m.innerHTML="",m.style.display="none"})),""!==C.trim().toLowerCase()&&(v.style.display="none",r.style.display="flex"),{score:l,boxes:c,lives:d}}function qh(e){return qh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qh(e)}function Dh(){Dh=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:I(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",v={};function g(){}function b(){}function y(){}var _={};c(_,a,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(N([])));E&&E!==n&&r.call(E,a)&&(_=E);var C=y.prototype=g.prototype=Object.create(_);function T(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(i,o,a,s){var l=d(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==qh(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function I(t,n,r){var i=h;return function(o,a){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=k(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var c=d(t,n,r);if("normal"===c.type){if(i=r.done?m:p,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function k(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(qh(t)+" is not iterable")}return b.prototype=y,i(C,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:b,configurable:!0}),b.displayName=c(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,l,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},T(L.prototype),c(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new L(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(C),c(C,l,"Generator"),c(C,a,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Hh(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function Fh(e,t){return Uh.apply(this,arguments)}function Uh(){var e;return e=Dh().mark((function e(t,n){var r,i,o,a,s,l,c,u,d,h,p,f,m,v,g,b,y,_,w,E,C,T,L,I,k,S,x,P,N,M,O,A,R,j,q,D;return Dh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Yc(),i=r.app,o=Dc(i),a=[[],[],[],[],[],[]],s=[],c=0,u=[],d=0,h=0,e.next=10,Su(t,a,s,u);case 10:if(p=e.sent,h=p.userId,s=p.stats,(g=new Date).setHours(0,0,0,0),h?(T=s[s.length-1].streak,L=parseInt(s[s.length-1].timestamp),m=T?parseInt(T):0,v=g.getTime()-L,console.log("dayDiff",v/864e5),v/864e5>=2&&(m=0),(I=document.querySelector(".streak p"))?I.textContent=m:console.error("Streak element not found")):(b=localStorage.getItem("streakLastChangeTime"),y=localStorage.getItem("lives"),f=y?parseInt(y):7,(_=document.querySelector(".lives p"))?_.textContent=f:console.error("Lives element not found"),w=localStorage.getItem("streak"),m=w?parseInt(w):0,b&&(E=parseInt(b),v=g.getTime()-E,console.log("dayDiff",v/864e5),v/864e5>=2&&(m=0)),(C=document.querySelector(".streak p"))?C.textContent=m:console.error("Streak element not found")),t&&t.data.length>0&&a.every((function(e){return 0===e.length})))for(k=0;k<t.data.length;k++)S={id:k+1,repetDate:0},a[0].push(S);Au(),Uu(t),Ru(),x=[];try{l=Fu({data:t,indexArray:u,k:l,score:d,phraseStats:x,phraseType:n}),c++}catch(e){console.error(e.message),showNoMorePhrasesPage(d,x)}P=document.querySelector(".conjugSection"),N=document.querySelector(".phrase-section p"),M=document.querySelector(".type-section input"),O=document.querySelector(".learnMore"),A=document.querySelector(".infoPopupSection"),R=document.getElementById("submit-btn"),j=document.getElementById("next-btn"),q=document.getElementById("finish-btn"),D=document.querySelector(".menu-element.account"),R.addEventListener("click",(function(){var e=jh({data:t,k:l,phraseCount:c,score:d,boxes:a,phraseStats:x,lives:f,userId:h});d=e.score,a=e.boxes,f=e.lives})),j.addEventListener("click",(function(){P.innerHTML="",A.innerHTML="",P.style.display="none",A.style.display="none",O.style.display="none",N.style.color="black",M.style.color="black",l=Vu({data:t,indexArray:u,k:l,score:d,phraseStats:x,phraseType:n}),c++,h||localStorage.setItem("lives",f)})),q.addEventListener("click",(function(){A.style.display="none",P.style.display="none";var e,n=document.querySelector(".stats-container");D&&(D.style.display="none"),n&&(n.style.display="none");var r=Date.now();if(h){var i=s[s.length-1].timestamp,l=s[s.length-1].streak;e=kd(i,e=l?parseInt(l):0,s),console.log("User: streak",e),xd(t,a,h,o),Pd(h,o,s,x,e)}else e=localStorage.getItem("streak")||0,console.log("streak no user, before handleStreakNonAuthUser",e),e=Sd(e),console.log("streak no user after handleStreakNonAuthUser",e),localStorage.setItem("lives",f),console.log("User is signed out");localStorage.setItem("appLastUseTime",r.toString()),ju({score:d,phraseStats:x,stats:s,userId:h,streak:e})}));case 34:case"end":return e.stop()}}),e)})),Uh=function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Hh(o,r,i,a,s,"next",e)}function s(e){Hh(o,r,i,a,s,"throw",e)}a(void 0)}))},Uh.apply(this,arguments)}((e,t="https://api.emailjs.com")=>{if(!e)return;const n=Vd(e);Ud.publicKey=n.publicKey,Ud.blockHeadless=n.blockHeadless,Ud.storageProvider=n.storageProvider,Ud.blockList=n.blockList,Ud.limitRate=n.limitRate,Ud.origin=n.origin||t})({publicKey:"Y5Qz1lQ7G8HnUd_eX"}),function(){return Rh.apply(this,arguments)}().then((function(e){rh=e})).catch((function(e){console.error("Error fetching conjugations:",e)})),function(){wh.apply(this,arguments)}(),(ih=document.querySelector(".content-area"))&&ih.addEventListener("click",(function(e){if(e.target)switch(e.target.id){case"signUpSwitch":e.preventDefault(),Ad();break;case"logInSwitch":e.preventDefault(),Rd();break;case"signUpButton":e.preventDefault(),function(){Eh.apply(this,arguments)}();break;case"logInButton":e.preventDefault();var t=document.querySelector(".logInErrorMsg");t&&(t.innerHTML="");var n=document.querySelector(".signUpErrorMsg");n&&(n.innerHTML=""),function(){Ch.apply(this,arguments)}();break;case"forgotPass":e.preventDefault(),function(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("form");t.classList.add("passResetForm"),e.appendChild(t);var n=document.createElement("h1");n.innerText="Reset your password",t.appendChild(n);var r=document.createElement("section");r.setAttribute("id","userInfo"),t.appendChild(r);var i=document.createElement("p");r.appendChild(i);var o=document.createElement("label");i.appendChild(o),o.htmlFor="logInEmail",o.innerText="Email:";var a=document.createElement("input");a.setAttribute("type","email"),a.setAttribute("id","resetEmail"),a.setAttribute("required",!0),i.appendChild(a);var s=document.createElement("p");r.appendChild(s),s.classList.add("passResetErrorMsg");var l=document.createElement("section");t.appendChild(l),l.classList.add("btn-section");var c=document.createElement("p");l.appendChild(c);var u=document.createElement("button");u.setAttribute("type","submit"),u.setAttribute("id","passResetButton"),u.innerText="Submit",c.appendChild(u)}();break;case"passResetButton":e.preventDefault(),function(){vh.apply(this,arguments)}();case"contactBtn":e.preventDefault(),i=document.getElementById("name"),o=document.getElementById("contactEmail"),a=document.getElementById("emailSubject"),s=document.getElementById("contact-text"),l=document.querySelector(".contactErrorMsg"),c=!1,""===i.value?l.innerHTML="<i class='fa-solid fa-circle-exclamation'></i> Please type your name":""===o.value?l.innerHTML="<i class='fa-solid fa-circle-exclamation'></i> Please type your email address":""===a.value?l.innerHTML="<i class='fa-solid fa-circle-exclamation'></i> Describe your problem or suggestion in a few words in the subject field":""===s.value?l.innerHTML="<i class='fa-solid fa-circle-exclamation'></i> Describe your problem or suggestion in detail in the message field":/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(o.value)?c=!0:l.innerHTML="<i class='fa-solid fa-circle-exclamation'></i> Please type a valid email address",c&&(r=document.querySelector(".contact-form"),Qd("service_b247irw","template_34r13a2",r).then((function(){console.log("SUCCESS!"),function(){var e=document.querySelector(".content-area");e.innerHTML="";var t=document.createElement("div");t.classList.add("successDiv"),e.appendChild(t);var n=document.createElement("h1");n.innerHTML="<i class='fa-regular fa-envelope'></i> Thank you for your message!",t.appendChild(n);var r=document.createElement("p");r.classList.add("successMsgExpl"),r.innerText="Thank you for contacting us! We'll be in touch shortly.",t.appendChild(r)}()}),(function(e){console.log("FAILED...",e),Hu()})))}var r,i,o,a,s,l,c})),function(){var e=document.querySelector("main"),t=document.querySelector(".content-area"),n=document.querySelector("header"),r=document.querySelector(".account-popup"),i=document.querySelector(".help-popup");n.addEventListener("click",function(){var n=_h(bh().mark((function n(o){var a,s,l;return bh().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o.preventDefault(),o.stopPropagation(),Ih(),(a=document.querySelector(".summary"))&&(e.removeChild(a),a=null),(s=document.querySelector(".conjugSection"))&&t.removeChild(s),!o.target){n.next=32;break}n.t0=o.target.id,n.next="logInButtonMenu"===n.t0?11:"signUpButtonMenu"===n.t0?14:"logOutButton"===n.t0?17:"subscription"===n.t0?20:"contact-button"===n.t0?23:31;break;case 11:return r&&"flex"===r.style.display&&(r.style.display="none"),Rd(),n.abrupt("break",32);case 14:return r&&"flex"===r.style.display&&(r.style.display="none"),Ad(),n.abrupt("break",32);case 17:return r&&"flex"===r.style.display&&(r.style.display="none"),Th(),n.abrupt("break",32);case 20:return r&&"flex"===r.style.display&&(r.style.display="none"),Dd(),n.abrupt("break",32);case 23:return n.next=25,Eu();case 25:return l=n.sent,i&&"flex"===i.style.display&&(i.style.display="none"),c=void 0,u=void 0,d=void 0,h=void 0,c=document.querySelectorAll(".learn"),u=document.querySelectorAll(".practice"),d=document.querySelectorAll(".stats"),h=document.querySelectorAll(".bonus"),d.forEach((function(e){e.classList.remove("select")})),h.forEach((function(e){e.classList.remove("select")})),c.forEach((function(e){e.classList.remove("select")})),u.forEach((function(e){e.classList.remove("select")})),l?jd():qd(),n.abrupt("break",32);case 31:return n.abrupt("break",32);case 32:case"end":return n.stop()}var c,u,d,h}),n)})));return function(e){return n.apply(this,arguments)}}())}(),fu(),document.querySelectorAll(".practice").forEach((function(e){e.addEventListener("click",(function(){fu(),Ou()}))})),oh=document.querySelector(".menu-element.account"),ah=document.querySelector(".account-popup"),sh=document.querySelector(".help-popup"),oh&&oh.addEventListener("click",(function(){ah.style.display="flex",sh&&"none"!==sh.style.display&&(sh.style.display="none")})),function(){var e=document.querySelector(".menu-element.help"),t=document.querySelector(".help-popup"),n=document.querySelector(".account-popup");e&&e.addEventListener("click",(function(){t.style.display="flex",n&&"none"!==n.style.display&&(n.style.display="none")}))}(),lh=document.querySelectorAll(".learn"),ch=document.querySelectorAll(".practice"),uh=document.querySelectorAll(".stats"),dh=document.querySelectorAll(".bonus"),lh.forEach((function(e){return e.addEventListener("click",fd(hd().mark((function e(){var t,n,r;return hd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tu();case 2:t=e.sent,n=t.subStatus,r=t.userId,ch.forEach((function(e){e.classList.remove("select")})),uh.forEach((function(e){e.classList.remove("select")})),dh.forEach((function(e){e.classList.remove("select")})),lh.forEach((function(e){e.classList.add("select")})),ud(r,n);case 10:case"end":return e.stop()}}),e)}))))})),function(){var e=document.querySelectorAll(".stats"),t=document.querySelectorAll(".learn"),n=document.querySelectorAll(".practice"),r=document.querySelectorAll(".bonus");e.forEach((function(i){i.addEventListener("click",(function(){!function(){_d.apply(this,arguments)}(),n.forEach((function(e){e.classList.remove("select")})),t.forEach((function(e){e.classList.remove("select")})),r.forEach((function(e){e.classList.remove("select")})),e.forEach((function(e){e.classList.add("select")}))}))}))}(),function(){var e=document.querySelectorAll(".practice"),t=document.querySelectorAll(".learn"),n=document.querySelectorAll(".stats"),r=document.querySelectorAll(".bonus");r.forEach((function(i){return i.addEventListener("click",Id(Td().mark((function i(){var o,a,s;return Td().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Tu();case 2:o=i.sent,a=o.subStatus,s=o.userId,e.forEach((function(e){e.classList.remove("select")})),t.forEach((function(e){e.classList.remove("select")})),n.forEach((function(e){e.classList.remove("select")})),r.forEach((function(e){e.classList.add("select")})),Ed(s,a);case 10:case"end":return i.stop()}}),i)}))))}))}(),hh=document.querySelector("main"),(ph=document.createElement("div")).classList.add("blurContainer"),hh.appendChild(ph),ph.style.display="none",function(){var e=document.querySelector("main"),t=document.createElement("div");t.classList.add("rulesSection"),e.appendChild(t),t.style.display="none";var n=document.createElement("i");n.classList.add("fa-solid","fa-xmark","popup-close"),t.appendChild(n);var r=document.createElement("div");t.appendChild(r),r.innerHTML="<h1>How to use the app</h1>",function(){var e=document.querySelector(".rulesSection"),t=document.createElement("div");e.appendChild(t),t.classList.add("rulesStartDiv");var n=document.createElement("div");n.classList.add("rulesH"),t.appendChild(n),n.innerHTML="<i class='fa-solid fa-rocket'></i><h2>Getting started</h2>";var r=document.createElement("div");t.appendChild(r);var i=document.createElement("p");r.appendChild(i),i.innerHTML="You can get started by simply choosing a tense and a level of difficulty and clicking <span class='bold'>'Start now'</span> on the main page (welcome page).";var o=document.createElement("p");r.appendChild(o),o.innerHTML="If you choose <b>'easy'</b>, you can practice regular conjugations. Selecting <b>'medium'</b> includes regular and some irregular verbs, while <b>'hard'</b> covers all verbs, \n    including the most irregular ones.";var a=document.createElement("div");a.classList.add("photosDiv"),r.appendChild(a);var s=document.createElement("div");s.classList.add("carouselContainer"),a.appendChild(s);var l=document.createElement("div");l.classList.add("slide","slide1");var c=document.createElement("img");c.setAttribute("src","./public/start1.png"),l.appendChild(c);var u=document.createElement("div");u.classList.add("slide","slide2");var d=document.createElement("img");d.setAttribute("src","./public/start2.png"),u.appendChild(d);var h=document.createElement("div");h.classList.add("slide","slide3");var p=document.createElement("img");p.setAttribute("src","./public/start3.png"),h.appendChild(p),s.appendChild(l),s.appendChild(u),s.appendChild(h),function(){var e=document.querySelector(".carouselContainer .slide1"),t=document.querySelector(".carouselContainer .slide2"),n=document.querySelector(".carouselContainer .slide3"),r=[e,t];n&&r.push(n);var i=0,o=document.querySelector(".carouselContainer");setInterval((function(){var e;e=100*-(i=i<r.length-1?i+1:0),o&&(o.style.transform="translateX(".concat(e,"%)"))}),4e3)}()}(),function(){var e=document.querySelector(".rulesSection"),t=document.createElement("div");t.style.display="none",e.appendChild(t),t.classList.add("rulesQuestDiv");var n=document.createElement("div");n.classList.add("rulesH"),t.appendChild(n),n.innerHTML="<i class='fa-regular fa-circle-question'></i> <h2>Understand the question</h2>";var r=document.createElement("div");t.appendChild(r);var i=document.createElement("p");r.appendChild(i),i.innerHTML="You'll see a verb you need to conjugate in the selected tense (e.g.: 'prendre'). \n      Under the verb, you'll see a sentence with one or more spaces that you need to complete with the conjugated verb.";var o=document.createElement("div");o.classList.add("photoDiv"),r.appendChild(o);var a=document.createElement("img");a.setAttribute("src","./public/question.png"),o.appendChild(a)}(),function(){var e=document.querySelector(".rulesSection"),t=document.createElement("div");t.style.display="none",e.appendChild(t),t.classList.add("rulesAnswerDiv");var n=document.createElement("div");n.classList.add("rulesH"),t.appendChild(n),n.innerHTML="<i class='fa-solid fa-keyboard'></i> <h2>Type your answer</h2>";var r=document.createElement("div");t.appendChild(r);var i=document.createElement("p");r.appendChild(i),i.innerHTML="In the example below, you need to conjugate <b>'prendre'</b> in the present tense with the pronoun <b>'tu'</b>, which gives 'tu prends'.\nSo we should type <b>'prends'</b> to complete the sentence.";var o=document.createElement("p");r.appendChild(o),o.innerHTML="Use <u>the keyboard on your device</u> to type your answers. You can also use the buttons with <u>special characters</u> such as '' or '' to type faster.";var a=document.createElement("div");a.classList.add("photoDiv"),r.appendChild(a);var s=document.createElement("img");s.setAttribute("src","./public/answer.png"),a.appendChild(s)}(),function(){var e=document.querySelector(".rulesSection"),t=document.createElement("div");t.style.display="none",e.appendChild(t),t.classList.add("rulesPronuncDiv");var n=document.createElement("div");n.classList.add("rulesH"),t.appendChild(n),n.innerHTML="<i class='fa-solid fa-volume-low'></i><h2>The pronunciation</h2>";var r=document.createElement("div");t.appendChild(r);var i=document.createElement("p");r.appendChild(i),i.innerHTML="Once you've submitted your answer, you'll see a <span class='bold'>speaker icon</span> appear next to the phrase. \n      Click on it to hear an automatically generated pronunciation of the phrase.";var o=document.createElement("p");r.appendChild(o),o.innerHTML="Note that this feature might not be available in all browsers, so we recommend using <u>Chrome</u>, <u>Edge</u>, or <u>Safari</u>.";var a=document.createElement("div");a.classList.add("photoDiv"),r.appendChild(a);var s=document.createElement("img");s.setAttribute("src","./public/correct-answer.png"),a.appendChild(s)}(),function(){var e=document.querySelector(".rulesSection"),t=document.createElement("div");t.style.display="none",e.appendChild(t),t.classList.add("rulesLearnMoreDiv");var n=document.createElement("div");n.classList.add("rulesH"),t.appendChild(n),n.innerHTML="<i class='fa-solid fa-circle-info'></i> <h2>See explanations</h2>";var r=document.createElement("div");t.appendChild(r);var i=document.createElement("p");r.appendChild(i),i.innerHTML="If the answer you've typed is incorrect, you can click on 'learn more' to see additional information to help you master French conjugation.";var o=document.createElement("div");o.classList.add("photoDiv"),r.appendChild(o);var a=document.createElement("img");a.setAttribute("src","./public/incorrect-answer.png"),o.appendChild(a)}();var i=document.createElement("div");i.classList.add("buttons"),t.appendChild(i);var o=document.createElement("i");o.classList.add("fa-solid","fa-circle-arrow-left"),o.style.display="none",i.appendChild(o);var a=document.createElement("i");a.classList.add("fa-solid","fa-circle-arrow-right"),i.appendChild(a);var s=[document.querySelector(".rulesStartDiv"),document.querySelector(".rulesQuestDiv"),document.querySelector(".rulesAnswerDiv"),document.querySelector(".rulesPronuncDiv"),document.querySelector(".rulesLearnMoreDiv")];a.addEventListener("click",(function(){for(var e=0;e<s.length-1;e++)if("none"!==s[e].style.display){s[e].style.display="none",s[e+1].style.display="block",3===e&&(a.style.display="none"),o.style.display="block";break}})),o.addEventListener("click",(function(){for(var e=1;e<s.length;e++)if("none"!==s[e].style.display){s[e].style.display="none",s[e-1].style.display="block",1===e&&(o.style.display="none"),a.style.display="block";break}}))}(),(fh=document.querySelector(".menu-element.premiumBtn"))&&fh.addEventListener("click",(function(){window.location="../checkout.html"})),(mh=document.querySelector(".logo"))&&mh.addEventListener("click",(function(){location.reload()})),function(){var e=document.querySelector(".rules-button"),t=document.querySelector(".rulesSection"),n=document.querySelector(".blurContainer"),r=document.querySelector(".popup-close");e&&e.addEventListener("click",(function(e){t.style.display="block",n.style.display="block",e.stopPropagation()})),r&&r.addEventListener("click",(function(e){t.style.display="none",n.style.display="none",e.stopPropagation()}))}(),document.addEventListener("click",(function(e){var t=document.querySelector(".tenseSelectPopupContainer"),n=document.querySelector(".blurContainer"),r=document.querySelector(".selectDiv"),i=document.querySelector(".selectPhrTypeContainer"),o=document.querySelector(".account-popup"),a=document.querySelector(".help-popup");t&&"none"!==t.style.display&&!t.contains(e.target)&&e.target!==r&&(n&&(n.style.display="none"),t.style.display="none"),i&&"none"!==i.style.display&&!i.contains(e.target)&&(i.style.display="none"),o&&"none"!==o.style.display&&!o.contains(e.target)&&(o.style.display="none"),a&&"none"!==a.style.display&&!a.contains(e.target)&&(a.style.display="none")}))})();